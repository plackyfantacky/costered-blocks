(()=>{var se=Object.create;var j=Object.defineProperty;var oe=Object.getOwnPropertyDescriptor;var ie=Object.getOwnPropertyNames;var ne=Object.getPrototypeOf,ce=Object.prototype.hasOwnProperty;var O=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var pe=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ie(e))!ce.call(t,i)&&i!==r&&j(t,i,{get:()=>e[i],enumerable:!(o=oe(e,i))||o.enumerable});return t};var D=(t,e,r)=>(r=t!=null?se(ne(t)):{},pe(e||!t||!t.__esModule?j(r,"default",{value:t,enumerable:!0}):r,t));var A=O((ke,C)=>{C.exports=wp.hooks});var R=O((he,M)=>{M.exports=wp.data});var U=O((_e,G)=>{G.exports=wp.element});var re=D(A()),B=D(R()),T=D(U());var _=D(R());var a={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"]},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var z=t=>Array.isArray(t)?t:[],le=t=>new Set(z(t));function g(t){return Object.fromEntries(Object.entries(a.attributes).filter(([e,r])=>r.group===t))}var K=g("display"),Y=g("dimension"),H=g("margin"),N=g("padding"),$=g("flex"),W=g("flex-item"),F=g("grid"),x=g("grid-item"),q=g("position"),V=g("shared"),Ee={...K,...Y,...H,...N,...$,...W,...F,...x,...q,...V},De=new Set([...Object.keys(x)]),Pe=z(a?.collections?.editorStyles),Oe=le(a?.collections?.unitless),Re=a?.settings?.gridUnit||"1fr",Ie=!!a?.settings?.appendImportantToMirroredStyles,Be=a?.settings?.styleTagId||"costered-blocks-style-mirror",X=a?.settings?.reduxStoreKey||"costered/ui",Le=a?.settings?.breakpoints?.mobile??782,je=a?.settings?.breakpoints?.tablet??1024,Ce=a?.settings?.breakpoints?.desktop??1440;var J=new Set([...Object.keys(K),...Object.keys(Y),...Object.keys(N),...Object.keys(H),...Object.keys($),...Object.keys(W),...Object.keys(F),...Object.keys(x),...Object.keys(q),...Object.keys(V)]),Q=Object.fromEntries(Object.entries(a.attributes).map(([t,e])=>[t,e.css]));var ge=t=>{let e=String(t||"").toLowerCase();return e==="mobile"||e==="phone"||e==="tablet"?"mobile":"desktop"},de=t=>{try{let e=t("core/edit-post");if(e){if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType()}}catch{}try{let e=t("core/edit-site");if(e){if(typeof e.getDeviceType=="function")return e.getDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType();if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType()}}catch{}},Z=t=>{try{let r=(0,_.select)(X);if(r&&typeof r.getBreakpoint=="function"){let o=r.getBreakpoint();if(o)return o}}catch{}let e=de(t);if(e)return ge(e);if(typeof window<"u"&&typeof window.__COSTERED_VIEWPORT_BP=="string")return window.__COSTERED_VIEWPORT_BP||"desktop";try{if(window.COSTERED_DEBUG){let r=(0,_.select)(STORE_KEY),o=r&&typeof r.getBreakpoint=="function"?r.getBreakpoint():null,i=(0,_.select)("core/edit-post"),u=i&&(typeof i.getPreviewDeviceType=="function"&&i.getPreviewDeviceType()||typeof i.__experimentalGetPreviewDeviceType=="function"&&i.__experimentalGetPreviewDeviceType()),n=(0,_.select)("core/edit-site"),m=n&&(typeof n.getDeviceType=="function"&&n.getDeviceType()||typeof n.__experimentalGetPreviewDeviceType=="function"&&n.__experimentalGetPreviewDeviceType()||typeof n.getPreviewDeviceType=="function"&&n.getPreviewDeviceType())}}catch{}return"desktop"};var ee=t=>{let e={desktop:{styles:{}},tablet:{styles:{}},mobile:{styles:{}},...t||{}};return e.desktop={styles:{},...e.desktop||{}},e.tablet={styles:{},...e.tablet||{}},e.mobile={styles:{},...e.mobile||{}},e.desktop.styles={...e.desktop.styles||{}},e.tablet.styles={...e.tablet.styles||{}},e.mobile.styles={...e.mobile.styles||{}},e};var I=t=>t==null||t===""||t==="null"||t==="undefined";var ue="desktop",me=Object.freeze({});function te(t,e){let r=t||me,o={...r},i=ee(r.costered),u=c=>{switch(c){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},n=(c,p=void 0)=>{let l=!!(p&&p.cascade),S=p&&Object.prototype.hasOwnProperty.call(p,"raw")?!!p.raw:!l,w=e||ue;if(S){let k=i?.[w]?.styles?.[c];return I(k)?void 0:k}let v=u(w);for(let k of v){let y=i?.[k]?.styles?.[c];if(!I(y))return y}};return Object.defineProperties(o,{$get:{value:n,enumerable:!1},$getCascade:{value:c=>n(c,{cascade:!0}),enumerable:!1},$getMany:{value:(c,p)=>{let l={};for(let s of c)l[s]=n(s,p);return l},enumerable:!1},$bp:{value:e,enumerable:!1}}),o}var fe=t=>t.replace(/-([a-z])/g,(e,r)=>r.toUpperCase()),b=t=>{if(t==null)return!1;let e=String(t).trim();return e!==""&&e!=="undefined"&&e!=="null"},ye={marginInlineStart:"margin-inline-start",marginInlineEnd:"margin-inline-end",marginBlockStart:"margin-block-start",marginBlockEnd:"margin-block-end"},be=Object.keys(x||{}),d={};for(let t of be)d[t]={css:x[t]?.css||t,attr:fe(x[t]?.css||t)};function xe(t={}){let e=s=>typeof t?.$get=="function"?t.$get(s):t?.[s],r={},o=!1,i=!1,u=!1,n=!1,m=!1;if(b(e("marginTop"))){let s=String(e("marginTop"));r.marginTop=s,r.marginBlockStart=s,o=!0,i=!0}if(b(e("marginBottom"))){let s=String(e("marginBottom"));r.marginBottom=s,r.marginBlockEnd=s,o=!0,u=!0}if(b(e("marginLeft"))){let s=String(e("marginLeft"));r.marginLeft=s,r.marginInlineStart=s,o=!0,n=!0}if(b(e("marginRight"))){let s=String(e("marginRight"));r.marginRight=s,r.marginInlineEnd=s,o=!0,m=!0}if(b(e("zIndex"))){let s=Number(e("zIndex"));r.zIndex=s,o=!0}let f=String(e(d.gridArea.attr)||"").trim();f&&!f.includes("/")&&!/\bspan\b/i.test(f)&&(r[d.gridArea.attr]=f,o=!0);let c=(e(d.gridColumn.attr)||"").trim();c&&(r[d.gridColumn.attr]=c,o=!0);let p=(e(d.gridRow.attr)||"").trim();p&&(r[d.gridRow.attr]=p,o=!0);for(let s of J){if(s==="marginTop"||s==="marginBottom"||s==="marginLeft"||s==="marginRight"||s==="zIndex"||s==="z-index"||s===d.gridArea.attr||s===d.gridColumn.attr||s===d.gridRow.attr)continue;let S=e(s);b(S)&&(r[s]=String(S),o=!0)}let l=b(e("flexDirection"));return l&&!r.display&&(r.display="flex",o=!0),Object.keys(r).forEach(s=>{b(r[s])?r[s]=String(r[s]).trim():delete r[s]}),{style:r,any:o,hasMt:i,hasMb:u,hasMl:n,hasMr:m,haveFlexDir:l}}function Te(t){let e=(0,T.memo)(r=>{let i=(0,B.useSelect)(y=>r.clientId?y("core/block-editor").getBlock(r.clientId):null,[r.clientId])?.attributes||{},u=Z(B.useSelect),n=(0,T.useMemo)(()=>te(i,u),[i,u]),{style:m,any:f,hasMt:c,hasMb:p,hasMl:l,hasMr:s,haveFlexDir:S}=(0,T.useMemo)(()=>xe(n),[n,n?.$bp]);(0,T.useLayoutEffect)(()=>{if(!r.clientId)return;let y=document.querySelector(`[data-block="${r.clientId}"]`);if(!y)return;let h=y;h.classList.contains("block-editor-block-list__layout")||(h=y.querySelector(":scope > .block-editor-inner-blocks > .block-editor-block-list__layout")||h);for(let[P,E]of Object.entries(m))if(typeof E<"u"){let L=Q[P]||ye[P]||P;E!=null&&E!==""?h.style.setProperty(L,E,"important"):h.style.removeProperty(L)}},[r.clientId,m,l,s,S]);let w=[r?.wrapperProps?.className||"",f?"is-cb-mirrored":"",c?"has-cb-mt":"",p?"has-cb-mb":"",l?"has-cb-ml":"",s?"has-cb-mr":""].filter(Boolean).join(" "),v=n?.costeredId||n?.costeredID||i?.costeredId||i?.costeredID||null,k={...r.wrapperProps||{},className:w,style:f?{...r.wrapperProps?.style||{},...m}:{},...v?{"data-costered":String(v)}:{}};return React.createElement(t,{...r,wrapperProps:k})});return e.displayName="CosteredBlocks/EditorSizeMirror",e}(0,re.addFilter)("editor.BlockListBlock","costered-blocks/editor-size-mirror",Te,100);})();
