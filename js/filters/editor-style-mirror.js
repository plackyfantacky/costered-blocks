(()=>{var ye=Object.create;var $=Object.defineProperty;var me=Object.getOwnPropertyDescriptor;var fe=Object.getOwnPropertyNames;var Se=Object.getPrototypeOf,be=Object.prototype.hasOwnProperty;var v=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ke=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of fe(e))!be.call(t,o)&&o!==r&&$(t,o,{get:()=>e[o],enumerable:!(i=me(e,o))||i.enumerable});return t};var A=(t,e,r)=>(r=t!=null?ye(Se(t)):{},ke(e||!t||!t.__esModule?$(r,"default",{value:t,enumerable:!0}):r,t));var Y=v((Ie,H)=>{H.exports=wp.hooks});var _=v((Le,z)=>{z.exports=wp.data});var W=v((Me,F)=>{F.exports=wp.element});var ue=A(Y()),N=A(_()),b=A(W());var q=t=>{if(Array.isArray(t))return t.filter(Boolean).map(e=>{let r=String(e.property??""),i=e.value;return r&&i!==void 0?{property:r,value:i}:void 0}).filter(Boolean);if(t&&typeof t=="object"){let e=[];for(let[r,i]of Object.entries(t))i!==void 0&&e.push({property:r,value:i});return e}return[]},k=t=>t&&typeof t=="object"&&"styles"in t?{styles:q(t.styles)}:{styles:q(t)},V=t=>{let e=t||{};return!!e.desktop||!!e.tablet||!!e.mobile?{desktop:k(e.desktop),tablet:k(e.tablet),mobile:k(e.mobile)}:{desktop:k(e),tablet:k(void 0),mobile:k(void 0)}};var O=t=>t==null||t===""||t==="null"||t==="undefined";function Re(t){return Array.isArray(t)}function xe(t){if(Re(t)){let[e,r,i]=t;return i!==void 0?{property:e,value:r,important:i}:{property:e,value:r}}return t}function X(t){if(!Array.isArray(t)||t.length===0)return[];let e=[];for(let r=0;r<t.length;r++)e.push(xe(t[r]));return e}var Te="desktop",we=Object.freeze({});function Q(t,e){let r=X(t);for(let i=0;i<r.length;i++){let o=r[i];if(o.property===e)return o.value}}function Z(t,e){let r=t||we,i={...r},o=V(r.costered),m=a=>{switch(a){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},d=(a,c={})=>{let p=c&&Object.prototype.hasOwnProperty.call(c,"cascade")?!!c.cascade:!0,n=c&&Object.prototype.hasOwnProperty.call(c,"raw")?!!c.raw:!p,l=e||Te;if(n){let S=Q(o?.[l]?.styles,a);return O(S)?void 0:S}let B=m(l);for(let S of B){let C=Q(o?.[S]?.styles,a);if(!O(C))return C}};return Object.defineProperties(i,{$get:{value:d,enumerable:!1},$getCascade:{value:a=>d(a,{cascade:!0}),enumerable:!1},$getMany:{value:(a,c)=>{let p={};for(let n=0;n<a.length;n++){let l=a[n];p[l]=d(l,c)}return p},enumerable:!1},$bp:{value:e,enumerable:!1}}),i}var I=A(_());var s={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var w=t=>Array.isArray(t)?t:[],Ce=t=>new Set(w(t));function g(t){let e=s.attributes||{};return Object.fromEntries(Object.entries(e).filter(([,r])=>r.group===t))}var ee=g("display"),te=g("dimension"),re=g("margin"),ne=g("padding"),ie=g("flex"),oe=g("flex-item"),se=g("grid"),R=g("grid-item"),ae=g("position"),ce=g("shared"),He={...ee,...te,...re,...ne,...ie,...oe,...se,...R,...ae,...ce},Ye=new Set([...Object.keys(R)]),ze=w(s?.collections?.editorStyles),Fe=Ce(s?.collections?.unitless),We=s?.settings?.gridUnit||"1fr",qe=!!s?.settings?.appendImportantToMirroredStyles,Ve=s?.settings?.styleTagId||"costered-blocks-style-mirror",D=s?.settings?.reduxStoreKey||"costered/ui",Xe=s?.settings?.breakpoints?.mobile??782,Qe=s?.settings?.breakpoints?.tablet??1024,Ze=s?.settings?.breakpoints?.desktop??1440,et=w(s?.collections?.clearSets?.gridAreas),tt=w(s?.collections?.clearSets?.gridColumns),rt=w(s?.collections?.clearSets?.gridRows);var le=new Set([...Object.keys(ee),...Object.keys(te),...Object.keys(ne),...Object.keys(re),...Object.keys(ie),...Object.keys(oe),...Object.keys(se),...Object.keys(R),...Object.keys(ae),...Object.keys(ce)]),de=Object.fromEntries(Object.entries(s.attributes).map(([t,e])=>[t,e.css]));var L="desktop",M="tablet",G="mobile",he=t=>{let e=String(t??"").toLowerCase();return e==="tablet"||e==="medium"?M:e==="mobile"||e==="phone"?G:L},pe=t=>{try{let r=t?.("core/editor")?.getDeviceType?.();if(r)return r}catch{}try{let e=t("core/edit-post");if(e){if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType()}}catch{}try{let e=t("core/edit-site");if(e){if(typeof e.getDeviceType=="function")return e.getDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType();if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType()}}catch{}},ge=t=>{try{let i=(typeof t=="function"?t(D):(0,I.select)(D))?.getBreakpoint?.();if(i===L||i===M||i===G)return i}catch{}let e=pe(typeof t=="function"?t:I.select);if(e)return he(e);if(typeof window<"u"){let r=window.__COSTERED_VIEWPORT_BP;if(r===L||r===M||r===G)return r}return"desktop"};var Ae=t=>t.replace(/-([a-z])/g,(e,r)=>r.toUpperCase()),y=t=>{if(t==null)return!1;let e=String(t).trim();return e!==""&&e!=="undefined"&&e!=="null"},Be={marginInlineStart:"margin-inline-start",marginInlineEnd:"margin-inline-end",marginBlockStart:"margin-block-start",marginBlockEnd:"margin-block-end"},Ee={gridArea:{css:"grid-area",attr:"gridArea"},gridColumn:{css:"grid-column",attr:"gridColumn"},gridRow:{css:"grid-row",attr:"gridRow"}},P={...Ee},ve=Object.keys(R||{});for(let t of ve){let e=R[t]?.css??P[t]?.css??t;P[t]={css:e,attr:Ae(e)}}var j=P.gridArea.attr,K=P.gridColumn.attr,U=P.gridRow.attr;function _e(t={}){let e=n=>{let l=t?.$get;return typeof l=="function"?l(n):t?.[n]},r={},i=!1,o=!1,m=!1,d=!1,f=!1;if(y(e("marginTop"))){let n=String(e("marginTop"));r.marginTop=n,r.marginBlockStart=n,i=!0,o=!0}if(y(e("marginBottom"))){let n=String(e("marginBottom"));r.marginBottom=n,r.marginBlockEnd=n,i=!0,m=!0}if(y(e("marginLeft"))){let n=String(e("marginLeft"));r.marginLeft=n,r.marginInlineStart=n,i=!0,d=!0}if(y(e("marginRight"))){let n=String(e("marginRight"));r.marginRight=n,r.marginInlineEnd=n,i=!0,f=!0}if(y(e("zIndex"))){let n=Number(e("zIndex"));r.zIndex=n,i=!0}let u=String(e(j)??"").trim();u&&!u.includes("/")&&!/\bspan\b/i.test(u)&&(r[j]=u,i=!0);let a=String(e(K)??"").trim();a&&(r[K]=a,i=!0);let c=String(e(U)??"").trim();c&&(r[U]=c,i=!0);for(let n of Array.from(le)){if(n==="marginTop"||n==="marginBottom"||n==="marginLeft"||n==="marginRight"||n==="zIndex"||n==="z-index"||n===j||n===K||n===U)continue;let l=e(n);y(l)&&(r[n]=String(l),i=!0)}let p=y(e("flexDirection"));return p&&!r.display&&(r.display="flex",i=!0),Object.keys(r).forEach(n=>{y(r[n])?r[n]=String(r[n]).trim():delete r[n]}),{style:r,any:i,hasMt:o,hasMb:m,hasMl:d,hasMr:f,haveFlexDir:p}}function Oe(t){let e=(0,b.memo)(r=>{let o=(0,N.useSelect)(x=>r.clientId?x("core/block-editor").getBlock(r.clientId):null,[r.clientId])?.attributes||{},m=(0,N.useSelect)(ge,[]),d=(0,b.useMemo)(()=>Z(o,m),[o,m]),{style:f,any:u,hasMt:a,hasMb:c,hasMl:p,hasMr:n,haveFlexDir:l}=(0,b.useMemo)(()=>_e(d),[d,d?.$bp]);(0,b.useLayoutEffect)(()=>{if(!r.clientId)return;let x=document.querySelector(`[data-block="${r.clientId}"]`);if(!x)return;let T=x;T.classList.contains("block-editor-block-list__layout")||(T=x.querySelector(":scope > .block-editor-inner-blocks > .block-editor-block-list__layout")||T);for(let[E,h]of Object.entries(f))if(typeof h<"u"){let J=de[E]||Be[E]||E;h!=null&&h!==""?T.style.setProperty(J,String(h),"important"):T.style.removeProperty(J)}},[r.clientId,f,p,n,l]);let B=[r?.wrapperProps?.className??"",u?"is-cb-mirrored":"",a?"has-cb-mt":"",c?"has-cb-mb":"",p?"has-cb-ml":"",n?"has-cb-mr":""].filter(Boolean).join(" "),S=d?.costeredId||d?.costeredID||o?.costeredId||o?.costeredID||null,C={...r.wrapperProps||{},className:B,style:u?{...r.wrapperProps?.style||{},...f}:{},...S?{"data-costered":String(S)}:{}};return wp.element.createElement(t,{...r,wrapperProps:C})});return e.displayName="CosteredBlocks/EditorSizeMirror",e}(0,ue.addFilter)("editor.BlockListBlock","costered-blocks/editor-size-mirror",Oe,100);})();
