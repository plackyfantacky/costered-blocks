(()=>{var oe=Object.create;var I=Object.defineProperty;var se=Object.getOwnPropertyDescriptor;var ae=Object.getOwnPropertyNames;var ce=Object.getPrototypeOf,pe=Object.prototype.hasOwnProperty;var C=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var le=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of ae(e))!pe.call(t,o)&&o!==r&&I(t,o,{get:()=>e[o],enumerable:!(n=se(e,o))||n.enumerable});return t};var P=(t,e,r)=>(r=t!=null?oe(ce(t)):{},le(e||!t||!t.__esModule?I(r,"default",{value:t,enumerable:!0}):r,t));var L=C((he,j)=>{j.exports=wp.hooks});var O=C((Pe,M)=>{M.exports=wp.data});var K=C((Be,G)=>{G.exports=wp.element});var ne=P(L()),D=P(O()),x=P(K());var U=t=>{let e=t||{},r=o=>{if(Array.isArray(o))return o;if(o&&typeof o=="object"){let l=[];for(let[s,d]of Object.entries(o))d!==void 0&&l.push({property:s,value:d});return l}return[]},n={desktop:{styles:[]},tablet:{styles:[]},mobile:{styles:[]},...e};return n.desktop={styles:r(e.desktop.styles),...e.desktop||{}},n.tablet={styles:r(e.tablet.styles),...e.tablet||{}},n.mobile={styles:r(e.mobile.styles),...e.mobile||{}},n};var E=t=>t==null||t===""||t==="null"||t==="undefined";function de(t){return Array.isArray(t)}function ue(t){if(de(t)){let[e,r,n]=t;return n!==void 0?{property:e,value:r,important:n}:{property:e,value:r}}return t}function $(t){if(!Array.isArray(t)||t.length===0)return[];let e=[];for(let r=0;r<t.length;r++)e.push(ue(t[r]));return e}var ge="desktop",ye=Object.freeze({});function Y(t,e){let r=$(t);for(let n=0;n<r.length;n++){let o=r[n];if(o.property===e)return o.value}}function N(t,e){let r=t||ye,n={...r},o=U(r.costered),l=c=>{switch(c){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},s=(c,p={})=>{let u=p&&Object.prototype.hasOwnProperty.call(p,"cascade")?!!p.cascade:!0,i=p&&Object.prototype.hasOwnProperty.call(p,"raw")?!!p.raw:!u,g=e||ge;if(i){let b=Y(o?.[g]?.styles,c);return E(b)?void 0:b}let B=l(g);for(let b of B){let T=Y(o?.[b]?.styles,c);if(!E(T))return T}};return Object.defineProperties(n,{$get:{value:s,enumerable:!1},$getCascade:{value:c=>s(c,{cascade:!0}),enumerable:!1},$getMany:{value:(c,p)=>{let u={};for(let i=0;i<c.length;i++){let g=c[i];u[g]=s(g,p)}return u},enumerable:!1},$bp:{value:e,enumerable:!1}}),n}var R=P(O());var a={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var z=t=>Array.isArray(t)?t:[],me=t=>new Set(z(t));function y(t){return Object.fromEntries(Object.entries(a.attributes).filter(([e,r])=>r.group===t))}var H=y("display"),W=y("dimension"),F=y("margin"),q=y("padding"),V=y("flex"),X=y("flex-item"),J=y("grid"),k=y("grid-item"),Q=y("position"),Z=y("shared"),je={...H,...W,...F,...q,...V,...X,...J,...k,...Q,...Z},Le=new Set([...Object.keys(k)]),Me=z(a?.collections?.editorStyles),Ge=me(a?.collections?.unitless),Ke=a?.settings?.gridUnit||"1fr",Ue=!!a?.settings?.appendImportantToMirroredStyles,$e=a?.settings?.styleTagId||"costered-blocks-style-mirror",ee=a?.settings?.reduxStoreKey||"costered/ui",Ye=a?.settings?.breakpoints?.mobile??782,Ne=a?.settings?.breakpoints?.tablet??1024,ze=a?.settings?.breakpoints?.desktop??1440,He=a?.collections?.clearSets?.gridAreas,We=a?.collections?.clearSets?.gridColumns,Fe=a?.collections?.clearSets?.gridRows;var te=new Set([...Object.keys(H),...Object.keys(W),...Object.keys(q),...Object.keys(F),...Object.keys(V),...Object.keys(X),...Object.keys(J),...Object.keys(k),...Object.keys(Q),...Object.keys(Z)]),re=Object.fromEntries(Object.entries(a.attributes).map(([t,e])=>[t,e.css]));var Se=t=>{let e=String(t??"").toLowerCase();return e==="mobile"||e==="phone"||e==="tablet"?"mobile":"desktop"},be=t=>{try{let e=t("core/edit-post");if(e){if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType()}}catch{}try{let e=t("core/edit-site");if(e){if(typeof e.getDeviceType=="function")return e.getDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType();if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType()}}catch{}},ie=t=>{try{let r=(0,R.select)(ee);if(r&&typeof r.getBreakpoint=="function"){let n=r.getBreakpoint();if(n)return n}}catch{}let e=be(t);if(e)return Se(e);if(typeof window<"u"&&typeof window.__COSTERED_VIEWPORT_BP=="string")return window.__COSTERED_VIEWPORT_BP||"desktop";try{if(window.COSTERED_DEBUG){let r=(0,R.select)(STORE_KEY),n=r&&typeof r.getBreakpoint=="function"?r.getBreakpoint():null,o=(0,R.select)("core/edit-post"),l=o&&(typeof o.getPreviewDeviceType=="function"&&o.getPreviewDeviceType()||typeof o.__experimentalGetPreviewDeviceType=="function"&&o.__experimentalGetPreviewDeviceType()),s=(0,R.select)("core/edit-site"),d=s&&(typeof s.getDeviceType=="function"&&s.getDeviceType()||typeof s.__experimentalGetPreviewDeviceType=="function"&&s.__experimentalGetPreviewDeviceType()||typeof s.getPreviewDeviceType=="function"&&s.getPreviewDeviceType())}}catch{}return"desktop"};var ke=t=>t.replace(/-([a-z])/g,(e,r)=>r.toUpperCase()),S=t=>{if(t==null)return!1;let e=String(t).trim();return e!==""&&e!=="undefined"&&e!=="null"},xe={marginInlineStart:"margin-inline-start",marginInlineEnd:"margin-inline-end",marginBlockStart:"margin-block-start",marginBlockEnd:"margin-block-end"},we=Object.keys(k||{}),f={};for(let t of we)f[t]={css:k[t]?.css||t,attr:ke(k[t]?.css||t)};function ve(t={}){let e=i=>typeof t?.$get=="function"?t.$get(i):t?.[i],r={},n=!1,o=!1,l=!1,s=!1,d=!1;if(S(e("marginTop"))){let i=String(e("marginTop"));r.marginTop=i,r.marginBlockStart=i,n=!0,o=!0}if(S(e("marginBottom"))){let i=String(e("marginBottom"));r.marginBottom=i,r.marginBlockEnd=i,n=!0,l=!0}if(S(e("marginLeft"))){let i=String(e("marginLeft"));r.marginLeft=i,r.marginInlineStart=i,n=!0,s=!0}if(S(e("marginRight"))){let i=String(e("marginRight"));r.marginRight=i,r.marginInlineEnd=i,n=!0,d=!0}if(S(e("zIndex"))){let i=Number(e("zIndex"));r.zIndex=i,n=!0}let m=String(e(f.gridArea.attr)??"").trim();m&&!m.includes("/")&&!/\bspan\b/i.test(m)&&(r[f.gridArea.attr]=m,n=!0);let c=(e(f.gridColumn.attr)??"").trim();c&&(r[f.gridColumn.attr]=c,n=!0);let p=(e(f.gridRow.attr)??"").trim();p&&(r[f.gridRow.attr]=p,n=!0);for(let i of te){if(i==="marginTop"||i==="marginBottom"||i==="marginLeft"||i==="marginRight"||i==="zIndex"||i==="z-index"||i===f.gridArea.attr||i===f.gridColumn.attr||i===f.gridRow.attr)continue;let g=e(i);S(g)&&(r[i]=String(g),n=!0)}let u=S(e("flexDirection"));return u&&!r.display&&(r.display="flex",n=!0),Object.keys(r).forEach(i=>{S(r[i])?r[i]=String(r[i]).trim():delete r[i]}),{style:r,any:n,hasMt:o,hasMb:l,hasMl:s,hasMr:d,haveFlexDir:u}}function Re(t){let e=(0,x.memo)(r=>{let o=(0,D.useSelect)(w=>r.clientId?w("core/block-editor").getBlock(r.clientId):null,[r.clientId])?.attributes||{},l=(0,D.useSelect)(ie,[]),s=(0,x.useMemo)(()=>N(o,l),[o,l]),{style:d,any:m,hasMt:c,hasMb:p,hasMl:u,hasMr:i,haveFlexDir:g}=(0,x.useMemo)(()=>ve(s),[s,s?.$bp]);(0,x.useLayoutEffect)(()=>{if(!r.clientId)return;let w=document.querySelector(`[data-block="${r.clientId}"]`);if(!w)return;let v=w;v.classList.contains("block-editor-block-list__layout")||(v=w.querySelector(":scope > .block-editor-inner-blocks > .block-editor-block-list__layout")||v);for(let[_,h]of Object.entries(d))if(typeof h<"u"){let A=re[_]||xe[_]||_;h!=null&&h!==""?v.style.setProperty(A,h,"important"):v.style.removeProperty(A)}},[r.clientId,d,u,i,g]);let B=[r?.wrapperProps?.className??"",m?"is-cb-mirrored":"",c?"has-cb-mt":"",p?"has-cb-mb":"",u?"has-cb-ml":"",i?"has-cb-mr":""].filter(Boolean).join(" "),b=s?.costeredId||s?.costeredID||o?.costeredId||o?.costeredID||null,T={...r.wrapperProps||{},className:B,style:m?{...r.wrapperProps?.style||{},...d}:{},...b?{"data-costered":String(b)}:{}};return wp.element.createElement(t,{...r,wrapperProps:T})});return e.displayName="CosteredBlocks/EditorSizeMirror",e}(0,ne.addFilter)("editor.BlockListBlock","costered-blocks/editor-size-mirror",Re,100);})();
