(()=>{var ro=Object.create;var dt=Object.defineProperty;var so=Object.getOwnPropertyDescriptor;var lo=Object.getOwnPropertyNames;var ao=Object.getPrototypeOf,io=Object.prototype.hasOwnProperty;var fe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var co=(e,t,o,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of lo(t))!io.call(e,n)&&n!==o&&dt(e,n,{get:()=>t[n],enumerable:!(r=so(t,n))||r.enumerable});return e};var x=(e,t,o)=>(o=e!=null?ro(ao(e)):{},co(t||!e||!e.__esModule?dt(o,"default",{value:e,enumerable:!0}):o,e));var G=fe((Ho,mt)=>{mt.exports=wp.element});var Y=fe((Vo,pt)=>{pt.exports=wp.data});var Z=fe(($o,ut)=>{ut.exports=wp.components});var Ie=fe((bn,Bt)=>{Bt.exports=wp.blockEditor});var Ht=fe((Ln,Ot)=>{Ot.exports=wp.preferences});var se=fe((Wn,Vt)=>{Vt.exports=wp.i18n});var Ce=x(G()),no=x(Y()),D=x(Z());var ae=x(G());var De={display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"}};function re(e){return Object.fromEntries(Object.entries(De).filter(([t,o])=>o.group===e))}var gt=re("display"),ft=re("dimension"),ht=re("margin"),wt=re("padding"),xt=re("flex"),vt=re("flex-item"),kt=re("grid"),Ze=re("grid-item"),Ct=re("shared"),Uo={...gt,...ft,...ht,...wt,...xt,...vt,...kt,...Ze,...Ct},bt=new Set([...Object.keys(Ze)]);var S="1fr";var jo=new Set([...Object.keys(gt),...Object.keys(ft),...Object.keys(wt),...Object.keys(ht),...Object.keys(xt),...Object.keys(vt),...Object.keys(kt),...Object.keys(Ze),...Object.keys(Ct)]),zo=Object.fromEntries(Object.entries(De).map(([e,t])=>[e,t.css]));function X(e,t,{trim:o=!0,emptyUnsets:r=!0}={}){let n=t!=null,s=(0,ae.useCallback)((c,u)=>{if(c==null)return;if(bt.has(u)){let k=typeof c=="string"&&o?c.trim():String(c);return r&&k===""?void 0:k}let i=c;if(o&&typeof i=="string"&&(i=i.trim()),r&&(i===""||i==null))return;let d=String(i).trim();if(!(!d||d==="undefined"||d==="null"))return d},[o,r]),l=(0,ae.useCallback)(c=>{if(n)return e(t,c);{let u={};for(let[i,d]of Object.entries(c)){let k=s(d,i);k!==void 0&&(u[i]=k)}Object.keys(u).length&&e(t,u)}},[n,e,t,s]),m=(0,ae.useCallback)((c,u)=>{l({[c]:s(u,c)})},[l,s]),w=(0,ae.useCallback)(c=>{let u={};for(let[i,d]of Object.entries(c))u[i]=s(d,i);l(u)},[l,s]),p=(0,ae.useCallback)(c=>{l({[c]:void 0})}),a=(0,ae.useCallback)(c=>{let u={};for(let i of c)u[i]=void 0;l(u)},[l]),h=(0,ae.useCallback)(c=>({set:(u,i)=>m(`${c}${u}`,i),setMany:u=>{let i={};for(let[d,k]of Object.entries(u))i[`${c}${d}`]=k;w(i)},unset:u=>p(`${c}${u}`),unsetMany:u=>a(u.map(i=>`${c}${i}`))}),[m,w,p,a]);return{set:m,setMany:w,unset:p,unsetMany:a,withPrefix:h}}var Q=x(G());var Mt=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"";function ie(e){return String(e||"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function po(e){let t=String(e||"").trim();if(!t)return[];let o=0,r=0,n="",s=[];for(let l=0;l<t.length;l++){let m=t[l];if(m==="("){o++,n+=m;continue}if(m===")"){o=Math.max(0,o-1),n+=m;continue}if(m==="["){r++,n+=m;continue}if(m==="]"){r=Math.max(0,r-1),n+=m;continue}if(m===" "&&o===0&&r===0){n&&(s.push(n),n="");continue}n+=m}return n&&s.push(n),s}function uo(e){if(!e)return null;let t=e.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);return t?{count:parseInt(t[1],10),unit:t[2].trim()}:null}function he(e,t=S){return e>0?`repeat(${e}, ${t})`:null}var go=/^(?:[0-9.]+(?:px|rem|em|ch|vh|vw|vmin|vmax|fr|%)|auto|max-content|min-content|fit-content\([^)]+\)|minmax\([^)]+\)|clamp\([^)]+\)|var\([^)]+\))$/i;function je(e,t,o="1fr"){let r=Math.max(0,Number(t)||0),n=String(e||"").trim();if(r<=0)return n;let{count:s}=Me(n);if(s===0){let a=String(o||"").trim()||"1fr";return`repeat(${r}, ${a})`}if(s>=r)return n;let l=r-s,m=String(o||"").trim()||"1fr",w=n.match(/^repeat\(\s*([0-9]+)\s*,\s*([^)]+)\)\s*$/i);if(w){let a=w[2].trim();if(go.test(a))return`repeat(${r}, ${a})`}let p=Array.from({length:l}).map(()=>m).join(" ");return`${n} ${p}`.trim()}function ze(e,t){if(!e||typeof e!="string")return"";let o=Math.max(0,t|0),r=e.replace(/\[[^\]]*\]/g," ").trim();if(!r)return"";let n=r.match(/^repeat\(\s*([0-9]+)\s*,\s*([^)]+)\)\s*$/i);if(n){let s=n[2].trim();if(!/\s/.test(s))return o<=0?"":`repeat(${o}, ${s})`;let l=fo(r);return Tt(l,o)}return Tt(r,o)}function Me(e,t=S){if(!e||typeof e!="string")return{count:0,unit:t};let o=e.trim();if(!o)return{count:0,unit:t};if(/^subgrid\b/i.test(o))return{count:0,unit:t};if(o=o.replace(/\[[^\]]*]/g," ").trim(),!o)return{count:0,unit:t};let r=o.match(/repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)$/i);if(r){let l=r[2];return{count:0,unit:At(l,t)}}let{count:n,unit:s}=St(o,t);return{count:n,unit:s||t}}function St(e,t){let o=yt(e);if(o){let l=o.inner.trim(),{count:m,unit:w}=St(l,t);return{count:o.times*m,unit:w||At(l,t)}}let r=Ue(e),n=r.length,s="";if(r.length===1)s=Te(r[0])||t;else{let l=r.find(Rt);s=Te(l)||t}return{count:n,unit:s}}function yt(e){let t=e.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!t)return null;let o=parseInt(t[1],10),r=t[2];return!Number.isFinite(o)||o<0?null:{times:o,inner:r}}function Ue(e){let t=[],o=0,r="";for(let n=0;n<e.length;n++){let s=e[n];if(s==="("){o++,r+=s;continue}if(s===")"){o=Math.max(0,o-1),r+=s;continue}if(o===0&&/\s/.test(s)){r.trim()&&t.push(r.trim()),r="";continue}r+=s}return r.trim()&&t.push(r.trim()),t}function At(e,t){if(!e)return t;let o=yt(e);if(o){let s=Ue(o.inner);if(s.length===1)return Te(s[0])||t}let r=Ue(e);if(r.length===1)return Te(r[0])||t;let n=r.find(Rt);return Te(n)||t}function Rt(e){return e?!!(/^(minmax|fit-content|clamp|var)\(/i.test(e)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(e)||/^(auto|max-content|min-content)$/i.test(e)):!1}function Te(e){return e?e.trim():""}function fo(e){return e.replace(/repeat\(\s*([0-9]+)\s*,\s*([^)]+)\)/gi,(t,o,r)=>{let n=parseInt(o,10),s=r.trim();return Array.from({length:n}).map(()=>s).join(" ")})}function Tt(e,t){if(t<=0)return"";let o=0,r="",n=[];for(let l of e)l==="("&&o++,l===")"&&(o=Math.max(0,o-1)),/\s/.test(l)&&o===0?r&&(n.push(r),r=""):r+=l;r&&n.push(r);let s=n.slice(0,t);return s.length===0?"":s.join(" ")}function ho(e){let t=uo(e);if(!t)return null;let o=ie(he(t.count,t.unit));return{mode:"simple",template:e||null,normalised:o,simple:{count:t.count,unit:t.unit}}}function wo(e){let t=po(e);if(!t.length)return null;let o=ie(t.join(" "));return{mode:"tracks",template:e||null,normalised:o,tracks:t}}var xo=[ho,wo];function We(e){let t=e||"";for(let o of xo){let r=o(t);if(r)return r}return{mode:"raw",template:e||null,normalised:ie(e||"")}}function Nt(e){let t=(e||"").trim();if(!t)return{hasAreas:!1,cols:0,rows:0};let o=t.split(/(['"])(?:(?=(\\?))\2.)*?\1/).map(n=>n.replace(/^['"]|['"]$/g,"").trim()).filter(n=>n&&!/^[\s]+$/.test(n));return o.length?{hasAreas:!0,cols:Math.max(0,...o.map(n=>n.split(/\s+/).filter(Boolean).length)),rows:o.length}:{hasAreas:!1,cols:0,rows:0}}function we(e,t="."){if(!Array.isArray(e)||e.length===0)return"";let o=e.map(n=>(Array.isArray(n)?n:[]).map(s=>{let l=String(s??"").trim();return l===""?t:l}));return o.some(n=>n.some(s=>s!==t))?o.map(n=>`"${n.join(" ")}"`).join(" "):""}function Ke(e,t="."){let o=String(e||"").trim();if(!o)return[];let r=[];return o.replace(/(['"])(.*?)\1/g,(n,s,l)=>(r.push(l),"")),r.map(n=>n.trim().split(/\s+/).map(s=>s&&s!==t?s:t))}function xe(e,t,o,r="."){let n=[];for(let s=0;s<o;s++){let l=e[s]||[],m=Array.from({length:t},(w,p)=>l[p]??r);n.push(m)}return n}function Je({seedMatrix:e,emptyToken:t=".",onApply:o,suspendResync:r=!1}){let[n,s]=(0,Q.useState)(()=>e),l=(0,Q.useRef)(we(n));(0,Q.useEffect)(()=>{l.current=we(n)},[n]),(0,Q.useEffect)(()=>{if(r)return;we(e)!==l.current&&s(e)},[e,r]);let m=n[0]?.length||0,w=n.length||0,p=(0,Q.useCallback)((c,u,i)=>{s(d=>{let k=String(i??"").trim(),C=k===""?t:k,v=d.map((T,N)=>N===u?T.map((E,F)=>F===c?C:E):T);return o?.(v),v})},[o,t]),a=(0,Q.useCallback)((c,u)=>{s(i=>{let d=xe(i,c,u,t);return o?.(d),d})},[t,o]),h=(0,Q.useCallback)((c=1,u=1)=>{s(()=>{let i=xe([],Math.max(1,c),Math.max(1,u),t);return o?.(i),i})},[t,o]);return{matrix:n,columnData:m,rowData:w,setCell:p,resize:a,clear:h}}var bo=x(G());var vo=x(G());var Ee=x(G());var vn=Number.MAX_SAFE_INTEGER;var Mo=x(G());var Lt=x(Y()),Et=x(Ie()),It=x(G());function te(e){let t=(0,Lt.useSelect)(r=>e?r(Et.store).getBlock(e)?.attributes??{}:{},[e]);return(0,It.useMemo)(()=>{let r=We(t.gridTemplateColumns),n=We(t.gridTemplateRows),s=t.gridTemplateAreas??null,l=Nt(s);return{columns:r,rows:n,areas:{template:s,...l},activePane:{columns:r.mode,rows:n.mode}}},[t.gridTemplateColumns,t.gridTemplateRows,t.gridTemplateAreas])}var ue=x(G()),Pt=x(Y()),Gt=x(Ie());function Se(e){let{updateBlockAttributes:t}=(0,Pt.useDispatch)(Gt.store),{set:o,unset:r}=X(t,e),n=te(e),s=n?.columns?.template??null,l=n?.rows?.template??null,m=n?.areas?.template??null,w=(0,ue.useMemo)(()=>s?Me(s):0,[s]),p=(0,ue.useMemo)(()=>l?Me(l):0,[l]),a=(0,ue.useCallback)(u=>{let i=we(u,".");i?o("gridTemplateAreas",i):r("gridTemplateAreas")},[o,r]),h=(0,ue.useCallback)(()=>{r("gridTemplateAreas")},[r]),c=(0,ue.useCallback)((u=".")=>{let i=Ke(m,u),d=i[0]?.length||w||1,k=i.length||p||1;return xe(i,d,k,u)},[m,w,p]);return{areasTemplate:m,trackColumnCount:w,trackRowCount:p,applyMatrixToStore:a,clearAreasInStore:h,seedFromStore:c}}var So=x(Y());var Ft=x(Y()),qt=x(Ie());function ye(e,t){return(0,Ft.useSelect)(o=>{if(e)return e;let r=o(qt.store),n=t||r.getSelectedBlockClientId();return(n?r.getBlock(n):null)?.name??null},[e,t])}var _t=x(Y());function Ye(){return(0,_t.useSelect)(e=>{let t=e("core/block-editor"),o=t.getSelectedBlockClientId();return{selectedBlock:o?t.getBlock(o):null,clientId:o}},[])}var Pe=x(Y()),Xe=x(Ht());function ce(e,t,o="costered-blocks"){let r=(0,Pe.useSelect)(w=>w(Xe.store).get(o,e)??t,[o,e,t]),{set:n,__experimentalReset:s}=(0,Pe.useDispatch)(Xe.store);return[r,w=>{e.startsWith("__invalid__")||n(o,e,w)},()=>{e.startsWith("__invalid__")||s?.(o,e)}]}var de=(e,{blockName:t,variant:o}={})=>!t&&!o?e:t&&!o?`${e}:${t}`:!t&&o?`${e}#${o}`:`${e}:${t}#${o}`;var Dt=x(se());var $t={pluginSidebar:{noBlockSelected:"Please select a block to edit its settings.",title:"Costered Blocks",selectedBlock:"Selected block",blockWarningSummary:"Style changes may not appear in the editor",blockWarningDetails:"There may be some differences between the editor and the frontend. This is due to limitations with the block editor, which does not always allow custom inline styles to be displayed here."},displayControls:{panelTitle:"Display Controls",displayLabel:"Display",unset:"unset / initial",displayBlock:"Block",displayInline:"Inline",displayFlex:"Flex",displayGrid:"Grid",displayNone:"None",visibilityLabel:"Visibility",visibilityUnset:"unset / initial",visibilityVisible:"Visible",visibilityHidden:"Hidden",visibilityCollapse:"Collapse"},dimensionControls:{panelTitle:"Dimension Controls",dimensionPanel:"Dimensions",dimensions:{width:"Width",height:"Height"},minPanel:"Minimum Dimensions",minDimensions:{width:"Min Width",height:"Min Height"},maxPanel:"Maximum Dimensions",maxDimensions:{width:"Max Width",height:"Max Height"}},spacingControls:{panelTitle:"Spacing Controls",panelLabel:"Spacing",marginLabel:"Margin",paddingLabel:"Padding"},flexBoxControls:{panelTitle:"Flexbox Controls",flexWrapLabel:"Flex Wrap",flexWrapNone:"No Wrap",flexWrapWrap:"Wrap",flexWrapReverse:"Reverse",alignmentPanel:"Alignment",gapPanel:"Gap"},flexItemControls:{panelTitle:"Flex Item Controls",flexGrow:"Grow",flexShrink:"Shrink",flexBasis:"Basis",flexBasisPlaceholder:"Enter value",order:"Order"},gridControls:{panelTitle:"Grid Controls",templateMode:"Template Mode",simplePanel:{title:"Simple",description:"In Simple mode, you can define the number of columns. All columns equally divide the total available width.",columns:"Columns",columnsClear:"Clear Columns",columnSpan:"Use %1$s as column width",columnUnit:"Unit",rows:"Rows",rowsClear:"Clear Rows",rowSpan:"Use %1$s as row height",rowUnit:"Unit"},tracksPanel:{title:"Tracks",description:"In Tracks mode, you can define the exact track sizes using any valid CSS Grid value.",columns:{label:"Columns",clear:"Clear Columns",size:"Column Sizes",addPlaceholder:"Add track or [line names]",addToken:"Add column size",addLabel:"Add [line name]"},rows:{label:"Rows",clear:"Clear Rows",size:"Row Sizes",addPlaceholder:"Add track or [line names]",addToken:"Add row size",addLabel:"Add [line name]"}},gapPanel:{title:"Gap"},areasPanel:{title:"Grid Template Areas",sizeHint:"Grid Size: %1$d columns x %2$d rows",editLarge:"Edit in larger view",modalTitle:"Edit Grid Template Areas",noticePanel:{mismatchText:"Templates areas (%1$dx%2$d) do not match current tracks (%3$dx%4$d)",resizeToTracks:"Resize areas to match tracks",growTracksToAreas:"Grow tracks to match areas",shrinkTracks:{button:"Shrink tracks to areas",warning:"Shrinking tracks may remove named lines please review afterwards.",confirm:"Shrink tracks",cancel:"Cancel",heading:"Remove named lines?",description:"Shrinking tracks will drop line names (e.g. [sidebar-start]). This can change template references. Continue?"}}}},gridItemsControls:{panelTitle:"Grid Item Controls",simplePanel:{title:"Simple",columnStart:"Column Start",columnStartHelp:"%1$d columns",columnSpan:"Column Span",columnSpanHelp:"Max updates with start",rowStart:"Row Start",rowStartHelp:"%1$d rows",rowSpan:"Row Span",rowSpanHelp:"Max updates with start"},tracksPanel:{title:"Tracks",hasAreasNotice:"This item uses a named grid area. Line-based placement is disabled.",namedLineMismatch:"No named lines are defined in the parent grid.",zeroInvalid:"0 isn\u2019t a valid grid line. Use 1..N or negative indices like -1",columns:{legend:"Columns",trackStartMode:"Start uses",trackStartModeNamed:"Named Line",trackStartModeNumber:"Line Number",trackEndMode:"End uses",trackEndModeSpan:"Span",trackEndModeEnd:"End",startNumber:"Line Number",startNumberHelp:"Positive or negative line number",startNamed:"Named Line",startNamedHelp:"Named lines from parent grid template",spanNumber:"Span",spanNumberHelp:"Max updates with start",endAuto:"Auto",endAutoHelp:"Automatically size based on start/span",endNamed:"Named Line",endNamedHelp:"Named lines from parent grid template",endNumber:"Line Number",endNumberHelp:"Positive or negative line number"},rows:{legend:"Rows",trackStartMode:"Start uses",trackStartModeNamed:"Named Line",trackStartModeNumber:"Line Number",trackEndMode:"End uses",trackEndModeSpan:"Span",trackEndModeEnd:"End",startNumber:"Line Number",startNumberHelp:"Positive or negative line number",startNamed:"Named Line",startNamedHelp:"Named lines from parent grid template",spanNumber:"Span",spanNumberHelp:"Max updates with start",endAuto:"Auto",endAutoHelp:"Automatically size based on start/span",endNamed:"Named Line",endNamedHelp:"Named lines from parent grid template",endNumber:"Line Number",endNumberHelp:"Positive or negative line number"}},areasPanel:{title:"Areas",gridAreaLabel:"Named area (grid-area)",gridAreaNone:"\u2014 None \u2014",gridAreaHelp:"Setting a named area overrides row/column placement."},alignmentPanel:{title:"Alignment"},orderPanel:{title:"Order",label:"Order"}},flexDirection:{label:"Flex Direction",row:"Row",rowReverse:"Row Reverse",column:"Column",columnReverse:"Column Reverse"},justifyControls:{label:"Justify Content",start:"Start",end:"End",center:"Center",spaceAround:"Space Around",spaceBetween:"Space Between",spaceEvenly:"Space Evenly"},alignControls:{label:"Align Items",start:"Start",end:"End",center:"Center",stretch:"Stretch",baseline:"Baseline",spaceAround:"Space Around",spaceBetween:"Space Between",spaceEvenly:"Space Evenly"},customSelectControl:{defaultText:"choose..."},dimensionInputGroup:{label:"Dimensions",labelPre:"%1$s Dimensions",width:"Width",height:"Height",useCustom:"Use custom values (e.g auto, calc)"},directionalInputGroup:{label:"Directions",top:"Top",right:"Right",bottom:"Bottom",left:"Left",useCustom:"Use custom values (e.g auto, calc)"},gapControls:{label:"Gaps",rowLabel:"Row Gap",switchToSingle:"Switch to Single Gap",switchToDual:"Switch to Dual Gap",columnLabel:"Column Gap",useCustom:"Use custom values (e.g auto, calc)"},gridAxisAside:{label:"Grid Axis",horizontal:"Horizontal",vertical:"Vertical",pip:{noValue:"No value set",valueHere:"Value matches this panel",valueElsewhere:"Value set in %s panel",valueRaw:"Value set (unrecognised format)"},clearRows:"Clear Rows",clearColumns:"Clear Columns"},panelToggle:{label:"Panel"},token:{expand:"Edit token",collapse:"Close editor",remove:"Remove",moveLeft:"Move left",moveRight:"Move right"},tokenGrid:{title:"Cells",clear:"Clear",sizeHint:"Cells: %1$d columns x %2$d rows",tokenExpand:"Edit cell",tokenCollapse:"Close editor",tokenRemove:"Clear cell",tokenMoveLeft:"Previous cell",tokenMoveRight:"Next cell",addColumn:"Add column",removeColumn:"Remove column",addRow:"Add row",removeRow:"Remove row"},tokenEditor:{add:"Add",addToken:"Add token",addLineNames:"Add line names",listAriaLabel:"List of tokens",moveLeft:"Move left",moveRight:"Move right",remove:"Remove",expand:"Edit token",collapse:"Close editor"},tokenGridNotice:{mismatchText:"Cells (%1$dx%2$d) do not match current dimensions (%3$dx%4$d)",resizeToTracks:"Resize cells to match dimensions",growTracksToAreas:"Grow dimensions to match cells",shrinkTracks:{button:"Shrink dimensions to cells",warning:"Shrinking dimensions may remove columns/rows. Please review afterwards.",confirm:"Shrink dimensions",cancel:"Cancel",heading:"Remove rows/columns?",description:"Shrinking dimensions will drop rows/columns. Continue?"}}};var Ao="costered-blocks";function Qe(e){if(typeof e=="string")return(0,Dt.__)(e,Ao);if(Array.isArray(e))return e.map(Qe);if(e&&typeof e=="object"){let t={};for(let[o,r]of Object.entries(e))t[o]=Qe(r);return t}return e}var f=Qe($t);var Gs=x(se()),le=x(G()),H=x(Z());var Ro=({size:e=24,...t})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t},React.createElement("path",{d:"M11.271,12.013l0,-1.784c0,-0.403 0.327,-0.729 0.729,-0.729c0.402,0 0.729,0.326 0.729,0.729l-0,1.784l0.213,-0.214c0.284,-0.284 0.746,-0.284 1.03,0c0.284,0.285 0.284,0.746 0,1.031l-1.457,1.457c-0.137,0.137 -0.321,0.213 -0.515,0.213c-0.194,-0 -0.378,-0.076 -0.515,-0.213l-1.457,-1.457c-0.284,-0.285 -0.284,-0.746 -0,-1.031c0.284,-0.284 0.746,-0.284 1.03,0l0.213,0.214Z"}),React.createElement("path",{d:"M3.199,19.503l0,-2.001c0,-0.994 0.807,-1.8 1.801,-1.8l14,-0c0.994,-0 1.801,0.806 1.801,1.8l-0,2.001c-0,0.993 -0.807,1.8 -1.801,1.8l-14,-0c-0.994,-0 -1.801,-0.807 -1.801,-1.8Zm1.6,-0c0,0.11 0.09,0.2 0.201,0.2l14,-0c0.111,-0 0.201,-0.09 0.201,-0.2l-0,-2.001c-0,-0.111 -0.09,-0.2 -0.201,-0.2l-14,-0c-0.111,-0 -0.201,0.089 -0.201,0.2l0,2.001Z"}),React.createElement("path",{d:"M12.701,6.498l-0,-2.001c-0,-0.993 0.806,-1.8 1.8,-1.8l4.499,0c0.994,0 1.801,0.807 1.801,1.8l-0,2.001c-0,0.994 -0.807,1.8 -1.801,1.8l-4.499,0c-0.994,0 -1.8,-0.806 -1.8,-1.8Zm1.6,0c-0,0.111 0.089,0.2 0.2,0.2l4.499,0c0.111,0 0.201,-0.089 0.201,-0.2l-0,-2.001c-0,-0.11 -0.09,-0.2 -0.201,-0.2l-4.499,0c-0.111,0 -0.2,0.09 -0.2,0.2l-0,2.001Z"}),React.createElement("path",{d:"M3.199,6.498l0,-2.001c0,-0.993 0.807,-1.8 1.801,-1.8l4.499,0c0.994,0 1.8,0.807 1.8,1.8l0,2.001c0,0.994 -0.806,1.8 -1.8,1.8l-4.499,0c-0.994,0 -1.801,-0.806 -1.801,-1.8Zm1.6,0c0,0.111 0.09,0.2 0.201,0.2l4.499,0c0.111,0 0.2,-0.089 0.2,-0.2l0,-2.001c0,-0.11 -0.089,-0.2 -0.2,-0.2l-4.499,0c-0.111,0 -0.201,0.09 -0.201,0.2l0,2.001Z"})),et=Ro;var No=({size:e=24,...t})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t},React.createElement("path",{fill:"currentColor",d:"M5 11q-.825 0-1.412-.587T3 9V5q0-.825.588-1.412T5 3h4q.825 0 1.413.588T11 5v4q0 .825-.587 1.413T9 11zm0 10q-.825 0-1.412-.587T3 19v-4q0-.825.588-1.412T5 13h4q.825 0 1.413.588T11 15v4q0 .825-.587 1.413T9 21zm10-10q-.825 0-1.412-.587T13 9V5q0-.825.588-1.412T15 3h4q.825 0 1.413.588T21 5v4q0 .825-.587 1.413T19 11zm0 10q-.825 0-1.412-.587T13 19v-4q0-.825.588-1.412T15 13h4q.825 0 1.413.588T21 15v4q0 .825-.587 1.413T19 21z"})),tt=No;var Bo=({size:e=24,...t})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t},React.createElement("path",{d:"M11.271,12.013l0,-1.784c0,-0.403 0.327,-0.729 0.729,-0.729c0.402,0 0.729,0.326 0.729,0.729l-0,1.784l0.213,-0.214c0.284,-0.284 0.746,-0.284 1.03,0c0.284,0.285 0.284,0.746 0,1.031l-1.457,1.457c-0.137,0.137 -0.321,0.213 -0.515,0.213c-0.194,-0 -0.378,-0.076 -0.515,-0.213l-1.457,-1.457c-0.284,-0.285 -0.284,-0.746 -0,-1.031c0.284,-0.284 0.746,-0.284 1.03,0l0.213,0.214Z"}),React.createElement("path",{d:"M20.801,4.497l-0,2.001c-0,0.994 -0.807,1.8 -1.801,1.8l-14,0c-0.994,0 -1.801,-0.806 -1.801,-1.8l0,-2.001c0,-0.993 0.807,-1.8 1.801,-1.8l14,0c0.994,0 1.801,0.807 1.801,1.8Zm-1.6,0c-0,-0.11 -0.09,-0.2 -0.201,-0.2l-14,0c-0.111,0 -0.201,0.09 -0.201,0.2l0,2.001c0,0.111 0.09,0.2 0.201,0.2l14,0c0.111,0 0.201,-0.089 0.201,-0.2l-0,-2.001Z"}),React.createElement("path",{d:"M11.299,17.502l0,2.001c0,0.993 -0.806,1.8 -1.8,1.8l-4.499,-0c-0.994,-0 -1.801,-0.807 -1.801,-1.8l0,-2.001c0,-0.994 0.807,-1.8 1.801,-1.8l4.499,-0c0.994,-0 1.8,0.806 1.8,1.8Zm-1.6,-0c0,-0.111 -0.089,-0.2 -0.2,-0.2l-4.499,-0c-0.111,-0 -0.201,0.089 -0.201,0.2l0,2.001c0,0.11 0.09,0.2 0.201,0.2l4.499,-0c0.111,-0 0.2,-0.09 0.2,-0.2l0,-2.001Z"}),React.createElement("path",{d:"M20.801,17.502l-0,2.001c-0,0.993 -0.807,1.8 -1.801,1.8l-4.499,-0c-0.994,-0 -1.8,-0.807 -1.8,-1.8l-0,-2.001c-0,-0.994 0.806,-1.8 1.8,-1.8l4.499,-0c0.994,-0 1.801,0.806 1.801,1.8Zm-1.6,-0c-0,-0.111 -0.09,-0.2 -0.201,-0.2l-4.499,-0c-0.111,-0 -0.2,0.089 -0.2,0.2l-0,2.001c-0,0.11 0.089,0.2 0.2,0.2l4.499,-0c0.111,-0 0.201,-0.09 0.201,-0.2l-0,-2.001Z"})),ot=Bo;var nt=(e="")=>(e+"").trim().split(/\s+(?![^(]*\))/).filter(Boolean).slice(0,2),rt=(e="",t="")=>[e,t].filter(Boolean).join(" ").trim(),st=e=>e==null?"":String(e).trim();var Zt=x(Z());function Ge(e="",t={}){let{trim:o=!0,toLower:r=!1,toUpper:n=!1,toCapitalFirst:s=!1,toCapitalCase:l=!1,toCamelCase:m=!1,toDashes:w=!1,toSpaces:p=!1}=t,a=e;return typeof a!="string"&&(a=String(a)),o&&(a=a.trim()),r&&(a=a.toLowerCase()),n&&(a=a.toUpperCase()),s&&(a=a.charAt(0).toUpperCase()+a.slice(1)),l&&(a=a.replace(/\b\w/g,h=>h.toUpperCase())),m&&(a=a.replace(/[-_\s]+(.)?/g,(h,c)=>c?c.toUpperCase():"").replace(/^(.)/,h=>h.toLowerCase())),w&&(a=a.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()),p&&(a=a.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/[-_]+/g," ").toLowerCase()),a}function ve(e){let{value:t,onChange:o,label:r}=e,n=Ge(r,{toCapitalFirst:!0,trim:!0,toSpaces:!0});return React.createElement(Zt.__experimentalUnitControl,{__next40pxDefaultSize:!0,label:n,value:t,onChange:o,placeholder:"0",style:{padding:"0 2px"},units:[{name:"rem",value:"rem",label:"rem"},{name:"px",value:"px",label:"px"},{name:"em",value:"em",label:"em"},{name:"%",value:"%",label:"%"},{name:"vw",value:"vw",label:"vw"},{name:"vh",value:"vh",label:"vh"}],isResettable:!0,allowReset:!0})}var Ut=x(Z());function lt({value:e,onChange:t,label:o,placeholder:r="",help:n=""}){let s=Ge(o,{toDashes:!0,toSpaces:!1});return React.createElement("div",{style:{padding:"0 2px"}},React.createElement(Ut.TextControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:s,value:e,onChange:t,placeholder:r,help:n}))}function at({attributes:e,clientId:t,updateBlockAttributes:o,blockName:r=null}){let{set:n}=X(o,t),s=ye(r,t),l=de("gapMode",{blockName:s}),[m,w]=ce(l,"unit"),p=de("gapInputMode",{blockName:s}),[a,h]=ce(p,"single"),c=e?.gap||"";(0,le.useEffect)(()=>{a===void 0&&h(nt(c).length===2?"dual":"single")},[a,c]);let[u,i]=(0,le.useMemo)(()=>{let E=nt(c);return[E[0]||"",E[1]||""]},[c]),d=(0,le.useCallback)(E=>{let F=st(E);if(a==="single")n("gap",F||void 0);else{let $=rt(F,i);n("gap",$||void 0)}},[a,n,i]),k=(0,le.useCallback)(E=>{let F=st(E),$=rt(u,F);n("gap",$||void 0)},[n,u]),C=m==="unit"?ve:lt,v=a==="single"?f.gapControls.label:f.gapControls.rowLabel,T=(0,le.useCallback)(()=>{h(a==="single"?"dual":"single")},[a,h]),N=(0,le.useCallback)(()=>{w(m==="unit"?"text":"unit")},[m,w]);return React.createElement(H.Flex,{direction:"column",className:"gap-controls"},React.createElement(H.FlexBlock,null,React.createElement(H.Flex,{align:"flex-end",gap:1},React.createElement(H.FlexBlock,null,React.createElement(H.Flex,{gap:0,direction:"row",align:"flex-end"},React.createElement(H.FlexItem,null,React.createElement(C,{label:v,value:a==="single"?c:u,onChange:d,allowReset:!0})),a==="dual"&&React.createElement(H.FlexItem,null,React.createElement(C,{label:f.gapControls.column,value:i,onChange:k,allowReset:!0})))),React.createElement(H.FlexItem,null,React.createElement(H.Button,{icon:a==="single"?ot:et,label:a==="single"?f.gapControls.switchToDual:f.gapControls.switchToSingle,onClick:T,style:{marginBottom:"2px"},"aria-pressed":a==="dual"})))),React.createElement(H.FlexBlock,null),React.createElement(H.FlexBlock,null,React.createElement(H.ToggleControl,{label:f.gapControls.useCustom,checked:m==="text",onChange:N,__nextHasNoMarginBottom:!0})))}var oe=x(G()),Ne=x(Z()),Jt=x(se());var V=x(G()),Re=x(Z());var z=x(G()),W=x(Z());function Ae({index:e,value:t,isExpanded:o,onToggle:r,onRemove:n,onChange:s,onMoveLeft:l,onMoveRight:m,labels:w,emptyPlaceholder:p,floatingEditor:a=!1,popoverPlacement:h="bottom-start",popoverWidth:c}){let u=(0,z.useRef)(null),i=(0,z.useRef)(null),d=(0,z.useRef)("pointer"),k=(0,z.useCallback)(A=>{let M=A?.inputRef?.current||A||null;i.current=M},[]);(0,z.useEffect)(()=>{if(!(!o||!i.current)){if(d.current==="keyboard"){let A=i.current;A.focus?.({preventScroll:!0});let M=typeof A.value=="string"?A.value.length:0;typeof A.setSelectionRange=="function"&&A.setSelectionRange(M,M)}d.current="pointer"}},[o]);let C={expand:f.token.expand,collapse:f.token.collapse,remove:f.token.remove,moveLeft:f.token.moveLeft,moveRight:f.token.moveRight,...w},v=t&&t.trim().length?t:p??"",T=(0,z.useCallback)(A=>{A.stopPropagation(),n(e)},[e,n]),N=(0,z.useCallback)(()=>{d.current="pointer",r(e,!o)},[e,o,r]),E=(0,z.useCallback)(()=>{d.current="keyboard",r(e,!o)},[e,o,r]),F=(0,z.useCallback)(A=>{A.key==="Enter"||A.key===" "?(A.preventDefault(),E()):A.key==="Escape"&&o&&(A.preventDefault(),r(e,!1))},[E,e,o,r]),$=React.createElement("div",{id:`costered-blocks--token--panel-${e}`,className:"costered-blocks--token--panel"},React.createElement(W.TextControl,{ref:k,value:t??"",placeholder:p??"",onChange:A=>s(e,A),onBlur:A=>s(e,A?.target?.value??""),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),React.createElement("div",{className:"costered-blocks--token--actions"},React.createElement(W.Tooltip,{text:C.moveLeft},React.createElement(W.Button,{icon:"arrow-left-alt2",onClick:()=>l(e),label:C.moveLeft,variant:"tertiary"})),React.createElement(W.Tooltip,{text:C.moveRight},React.createElement(W.Button,{icon:"arrow-right-alt2",onClick:()=>m(e),label:C.moveRight,variant:"tertiary"}))));return React.createElement("div",{className:`costered-blocks--token ${o?"is-expanded":""}`},React.createElement("div",{className:"costered-blocks--token--chip",ref:u},React.createElement("button",{type:"button",className:"costered-blocks--token--chipButton","aria-expanded":o,"aria-controls":`costered-token-panel-${e}`,onClick:N,onKeyDown:F,title:o?C.collapse:C.expand},React.createElement("span",{className:"costered-blocks--token--chipText"},v)),React.createElement(W.Tooltip,{text:C.remove},React.createElement(W.Button,{icon:"no-alt",label:C.remove,onClick:T,variant:"tertiary",className:"costered-blocks--token--remove"}))),!a&&o&&$,a&&o&&React.createElement(W.Popover,{className:"costered-blocks--token--popover",anchor:u.current,placement:h,onClose:()=>r(e,!1),focusOnMount:"firstElement",expandOnMobile:!0},React.createElement("div",{className:"costered-blocks--token--popoverInner",style:c?{width:c}:void 0},$)))}function jt({matrix:e,columnData:t,rowData:o,emptyToken:r=".",labels:n,setCell:s,resize:l,onEditingChange:m}){let w=Number(e?.[0]?.length??t??0),p=Math.max(1,Number.isFinite(t)?w:parseInt(t,10)||0),a=Math.max(1,Number.isFinite(o)?o:parseInt(o,10)||0),[h,c]=(0,V.useState)(null),u=(0,V.useRef)(null),i=(0,V.useCallback)((M,g)=>g*p+M,[p]),d=(0,V.useCallback)(M=>{let g=M%p,b=Math.floor(M/p);return[g,b]},[p]);(0,V.useEffect)(()=>{m?.(h!=null)},[h,m]),(0,V.useEffect)(()=>{c(M=>{if(M==null)return M;let[g,b]=d(M);return g<p&&b<a?M:null})},[p,a,d]);let k=(0,V.useCallback)((M,g)=>{c((typeof g=="boolean"?g:h!==M)?M:null)},[h]),C=(0,V.useCallback)(M=>{let[g,b]=d(M);g<=0||c(i(g-1,b))},[d,i]),v=(0,V.useCallback)(M=>{let[g,b]=d(M);g>=p-1||c(i(g+1,b))},[d,i,p]),T=Number(t)||0,N=Number(o)||0,E=(0,V.useCallback)(()=>l(t+1,o),[l,t,o]),F=(0,V.useCallback)(()=>l(Math.max(1,t-1),o),[l,t,o]),$=(0,V.useCallback)(()=>l(t,o+1),[l,t,o]),A=(0,V.useCallback)(()=>l(t,Math.max(1,o-1)),[l,t,o]);return React.createElement("div",{className:"costered-blocks--token-grid--area",ref:u},React.createElement("div",{className:"costered-blocks--token-grid--row costered-blocks--token-grid--row-head"},React.createElement("div",{className:"costered-blocks--token-grid--cell costered-blocks--token-grid--cell-corner"})," ",Array.from({length:p}).map((M,g)=>React.createElement("div",{className:"costered-blocks--token-grid--cell costered-blocks--token-grid--cell-head",key:`col-${g}`},React.createElement("div",{key:`header-col-${g}`,className:"costered-blocks--token-grid--controls"},React.createElement(Re.Button,{onClick:F,disabled:T<=1,variant:"tertiary",icon:"minus",label:n.removeColumn}),React.createElement(Re.Button,{onClick:E,variant:"tertiary",icon:"plus",label:n.addColumn}))))),e.map((M,g)=>React.createElement("div",{key:`row-${g}`,className:"costered-blocks--token-grid--row"},React.createElement("div",{className:"costered-blocks--token-grid--cell costered-blocks--token-grid--cell-head"},React.createElement("div",{className:"costered-blocks--token-grid--controls"},React.createElement(Re.Button,{onClick:A,disabled:N<=1,variant:"tertiary",icon:"minus",label:n.removeRow}),React.createElement(Re.Button,{onClick:$,variant:"tertiary",icon:"plus",label:n.addRow}))),M.map((b,O)=>{let y=i(O,g),B=b===r?"":b;return React.createElement("div",{key:`cell-${O}-${g}`,className:"costered-blocks--token-grid--cell"},React.createElement(Ae,{index:y,value:B,isExpanded:h===y,onToggle:k,onRemove:q=>{let[j,pe]=d(q);s(j,pe,""),c(null)},onChange:(q,j)=>{let[pe,$e]=d(q);s(pe,$e,j)},onMoveLeft:C,onMoveRight:v,emptyPlaceholder:r,floatingEditor:!0,popoverWidth:u.current?.offsetWidth??void 0,labels:{expand:n.tokenExpand,collapse:n.tokenCollapse,remove:n.tokenRemove,moveLeft:n.tokenMoveLeft,moveRight:n.tokenMoveRight}}))}))))}var zt=x(se()),Wt=x(Y()),ge=x(G()),_=x(Z());function Kt({clientId:e,columnData:t,rowData:o,gridMatrix:{resize:r},labels:n=f.tokenGridNotice}){let{updateBlockAttributes:s}=(0,Wt.useDispatch)("core/block-editor"),{set:l}=X(s,e),{trackColumnCount:m,trackRowCount:w}=Se(e),p=te(e),[a,h]=(0,ge.useState)(!1),c=y=>y&&typeof y=="object"?y.count??0:Number(y)||0,u=(y,B)=>y&&typeof y=="object"&&y.unit?y.unit:B,i=Number(t)||0,d=Number(o)||0,k=c(m),C=c(w),v=u(m,S),T=u(w,"auto"),N=i!==k,E=d!==C,F=i<k||d<C,$=(0,ge.useCallback)(()=>{r(k||i||1,C||d||1)},[r,k,C,i,d]),A=i>k,M=d>C,g=(0,ge.useCallback)(()=>{let y=p?.columns?.template||"",B=p?.rows?.template||"",q=A?je(y,i,v):y,j=M?je(B,d,T):B;q===y&&j===B||(l("gridTemplateColumns",q),l("gridTemplateRows",j))},[i,d,v,T,p,l]),b=(0,ge.useCallback)(()=>{let y=ze(p?.columns?.template||"",i),B=ze(p?.rows?.template||"",d);l("gridTemplateColumns",y),l("gridTemplateRows",B)},[i,d,p,l]),O=(0,ge.useCallback)(()=>{/\[[^\]]+]/.test(p?.columns?.template||"")||/\[[^\]]+]/.test(p?.rows?.template||"")?h(!0):b()},[p,b]);return!N&&!E?null:React.createElement(_.Flex,{direction:"column",gap:2,className:"costered-blocks--grid-area-notices"},React.createElement(_.Notice,{status:"info",isDismissible:!1},(0,zt.sprintf)(n.mismatchText,i,d,k,C),React.createElement(_.Flex,{direction:"column",gap:2,style:{marginTop:8}},React.createElement(_.FlexBlock,null,React.createElement(_.Button,{variant:"secondary",onClick:$},n.resizeToTracks)),A||M&&React.createElement(_.FlexBlock,null,React.createElement(_.Button,{variant:"secondary",onClick:g,disabled:!A&&!M},n.growTracksToAreas)),F&&React.createElement(_.FlexBlock,null,React.createElement(_.Button,{variant:"secondary",isDestructive:!0,onClick:O},n.shrinkTracks.button)))),F&&React.createElement(_.Notice,{status:"warning",isDismissible:!1,className:"costered-blocks--grid-area-notice--shrink-warning"},React.createElement("span",null,n.shrinkTracks.warning)),React.createElement(_.__experimentalConfirmDialog,{isOpen:a,onConfirm:()=>{b(),h(!1)},onCancel:()=>h(!1),confirmButtonText:n.shrinkTracks.confirm,cancelButtonText:n.shrinkTracks.cancel},React.createElement(_.__experimentalHeading,null,n.shrinkTracks.heading),React.createElement("p",null,n.shrinkTracks.description)))}function Fe({clientId:e,labels:t={}}){let o=(0,oe.useMemo)(()=>({...f.tokenGrid,...t.tokenGrid}),[t]),r=(0,oe.useMemo)(()=>({...f.tokenGridNotice,...t.tokenGridNotice}),[t]),{applyMatrixToStore:n,seedFromStore:s,trackColumnCount:l,trackRowCount:m}=Se(e),w=(0,oe.useMemo)(()=>s("."),[s]),[p,a]=(0,oe.useState)(!1),h=(0,oe.useRef)(null),c=(0,oe.useCallback)(E=>{h.current&&clearTimeout(h.current),E?a(!0):h.current=setTimeout(()=>a(!1),60)},[]),u=Je({seedMatrix:w,emptyToken:".",onApply:n,suspendResync:p}),{matrix:i,setCell:d,resize:k,clear:C}=u,v=i[0]?.length||0,T=i.length||0;return React.createElement(Ne.Flex,{direction:"column",gap:2,className:"costered-blocks--token-grid-component"},((l||0)!==v||(m||0)!==T)&&React.createElement(Kt,{clientId:e,columnData:v,rowData:T,gridMatrix:u,labels:r}),React.createElement(Ne.Flex,{direction:"row",gap:2,align:"center",justify:"space-between",className:"costered-blocks--token-grid-header"},React.createElement(Ne.FlexItem,null,React.createElement("span",{className:"costered-blocks--token-grid-help"},(0,Jt.sprintf)(o.sizeHint,v,T)))),React.createElement(jt,{matrix:i,columnData:v,rowData:T,emptyToken:".",labels:o,setCell:d,resize:k,onEditingChange:c}))}var ne=x(G()),Oe=x(Z());var qe=x(G()),K=x(Z());function Lo({value:e,onChange:t,label:o="",isBlock:r=!0,children:n,...s}){let l=(0,qe.useCallback)(m=>t(m),[t]);return React.createElement(K.__experimentalToggleGroupControl,{className:`costered-blocks--custom-toggle-group ${e?"has-selection":"is-empty"}`,label:o,value:e,onChange:l,isBlock:r,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,isDeselectable:!0,...s},n)}function Eo({value:e,label:t,disabled:o}){return React.createElement(K.__experimentalToggleGroupControlOption,{value:e,label:t,disabled:o})}function Io({value:e,icon:t,label:o,showTooltip:r=!0,disabled:n}){return React.createElement(K.__experimentalToggleGroupControlOptionIcon,{value:e,icon:t,"aria-label":o,label:o,showTooltip:r,disabled:n})}function Po({value:e,icon:t,label:o,disabled:r}){return React.createElement(K.__experimentalToggleGroupControlOption,{value:e,"aria-label":o,label:React.createElement(K.Flex,{direction:"column",gap:0,align:"center",style:{paddingBlock:"0.5em"}},React.createElement(K.FlexItem,null,t),React.createElement(K.FlexItem,null,o)),disabled:r})}var _e=(0,qe.memo)(Lo);_e.TextOption=Eo;_e.IconOption=Io;_e.CombinedOption=Po;var Be=_e;function Go({value:e,onChange:t,panels:o,panelProps:r={},label:n=f.panelToggle.label,forceActive:s=!1,className:l,children:m,...w}){let p=ne.Children.toArray(m).map(d=>d?.props?.value).filter(d=>typeof d=="string"&&d.length>0),a=p.length>0?p:Object.keys(o||{}),h=a[0]??null;(0,ne.useEffect)(()=>{a.length&&(!e||!a.includes(e))&&t?.(h)},[e,h,a.join("|")]);let c=(0,ne.useCallback)(d=>{let k=d??null;s&&k===null||t?.(k)},[t,s]),u=e?o?.[e]:null,i=typeof r=="function"?e?r(e):{}:r;return React.createElement(Oe.Flex,{direction:"column",gap:2,className:l,...w},React.createElement(Be,{label:n,value:e||void 0,onChange:c},m),u?React.createElement(Oe.FlexBlock,null,React.createElement(ne.Suspense,{fallback:null},React.createElement(u,{...i}))):null)}var He=(0,ne.memo)(Go);He.TextOption=Be.TextOption;He.IconOption=Be.IconOption;He.CombinedOption=Be.CombinedOption;var Ve=He;var R=x(G()),Qt=x(Y()),U=x(Z()),it=x(se());var Le=x(Z()),Yt=x(se());function ke({axis:e,canClear:t=!1,onClear:o,active:r,owner:n=null,here:s=null,label:l}){let m=l||(e==="columns"?f.gridAxisAside.clearColumns:f.gridAxisAside.clearRows),w=!!t,p=typeof r=="boolean"?r:w&&n&&s&&n===s,h=w?p?"here":w&&n&&s&&n!=="raw"&&n!==s&&!p?"elsewhere":"none":"none",c=h==="none"?f.gridAxisAside.pip.noValue:h==="here"?f.gridAxisAside.pip.valueHere:n==="raw"?f.gridAxisAside.pip.valueRaw:(0,Yt.sprintf)(f.gridAxisAside.pip.valueElsewhere,Mt(n));return React.createElement("div",{className:`costered-blocks--grid-axis-aside ${h==="here"?"is-owned-here":""} ${h==="elsewhere"?"is-elsewhere":""}`,"data-state":h,"data-owner":n||"none","data-here":s||"none","aria-label":e},React.createElement(Le.Tooltip,{text:c},React.createElement("span",{className:"costered-blocks--grid-axis-aside--pip"})),React.createElement(Le.Tooltip,{text:m},React.createElement(Le.Button,{icon:"trash",label:m,onClick:o,disabled:!w,variant:"tertiary",className:"costered-blocks--grid-axis-aside__clear"})))}var Xt={mode:"raw",template:null,normalised:"",simple:null,tracks:null};function eo({clientId:e}){if(!e)return null;let{updateBlockAttributes:t}=(0,Qt.useDispatch)("core/block-editor"),{set:o,unset:r}=X(t,e),n=te(e)||{},s=n.columns??Xt,l=n.rows??Xt,[m,w]=(0,R.useState)(s.simple?.count??0),[p,a]=(0,R.useState)(s.simple?.unit??S),[h,c]=(0,R.useState)((s.simple?.unit??S)===S),[u,i]=(0,R.useState)(l.simple?.count??0),[d,k]=(0,R.useState)(l.simple?.unit??S),[C,v]=(0,R.useState)((l.simple?.unit??S)===S),T=s?.normalised??"",N=l?.normalised??"";(0,R.useEffect)(()=>{w(s.simple?.count??0),a(s.simple?.unit??S),c((s.simple?.unit??S)===S)},[T]),(0,R.useEffect)(()=>{i(l.simple?.count??0),k(l.simple?.unit??S),v((l.simple?.unit??S)===S)},[N]);let E=(0,R.useMemo)(()=>h?S:p||S,[h,p]),F=(0,R.useMemo)(()=>C?S:d||S,[C,d]),$=he(m,E),A=he(u,F),M=(0,R.useCallback)((L,I)=>{let be=he(L,I);be==null?r("gridTemplateColumns"):o("gridTemplateColumns",be)},[o,r]),g=(0,R.useCallback)((L,I)=>{let be=he(L,I);be==null?r("gridTemplateRows"):o("gridTemplateRows",be)},[o,r]),b=(0,R.useCallback)(L=>{let I=typeof L=="number"?L:parseInt(L||"0",10);w(I),M(I,h?S:p)},[h,p,M]),O=(0,R.useCallback)(L=>{let I=typeof L=="number"?L:parseInt(L||"0",10);i(I),g(I,C?S:d)},[C,d,g]),y=(0,R.useCallback)(L=>{c(L);let I=L?S:p||S;!L&&!p&&a(I),M(m,I)},[m,p,M]),B=(0,R.useCallback)(L=>{v(L);let I=L?S:d||S;!L&&!d&&k(I),g(u,I)},[u,d,g]),q=(0,R.useCallback)(L=>{let I=(L||"").trim();a(I),M(m,h?S:I||S)},[m,h,M]),j=(0,R.useCallback)(L=>{let I=(L||"").trim();k(I),g(u,C?S:I||S)},[u,C,g]),pe=(0,R.useCallback)(()=>{w(0),r("gridTemplateColumns")},[r]),$e=(0,R.useCallback)(()=>{i(0),r("gridTemplateRows")},[r]);return React.createElement(U.Flex,{direction:"column",gap:6},React.createElement(U.FlexBlock,{className:"costered-blocks--grid-panel-simple--description"},f.gridControls.simplePanel.description),React.createElement(U.Flex,{direction:"column",gap:3,className:"costered-blocks--grid-panel-simple--axis-controls"},React.createElement(U.Flex,{direction:"row",justify:"space-between",align:"center"},React.createElement("span",{className:"costered-blocks--grid-panel-simple--axis-label"},f.gridControls.simplePanel.columns),React.createElement(ke,{axis:"columns",canClear:!!s?.template,onClear:pe,owner:n.activePane.columns,here:"simple",label:f.gridControls.simplePanel.columnsClear})),React.createElement(U.RangeControl,{min:0,max:12,step:1,value:m,onChange:b,className:"costered-blocks--grid-columns-simple--axis-control",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),React.createElement(U.ToggleControl,{label:(0,it.sprintf)(f.gridControls.simplePanel.columnSpan,S),checked:h,onChange:y,__nextHasNoMarginBottom:!0}),!h&&React.createElement(ve,{label:f.gridControls.simplePanel.columnUnit,value:p,onChange:q})),React.createElement(U.Flex,{direction:"column",gap:2,className:"costered-blocks--grid-panel-simple--axis-controls"},React.createElement(U.Flex,{direction:"row",justify:"space-between",align:"center"},React.createElement("span",{className:"costered-blocks--grid-panel-simple--axis-label"},f.gridControls.simplePanel.rows),React.createElement(ke,{axis:"rows",canClear:!!l.template,onClear:$e,owner:n.activePane.rows,here:"simple",label:f.gridControls.simplePanel.rowsClear})),React.createElement(U.RangeControl,{min:0,max:12,step:1,value:u,onChange:O,className:"costered-blocks--grid-rows-simple--axis-control",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),React.createElement(U.ToggleControl,{label:(0,it.sprintf)(f.gridControls.simplePanel.rowSpan,S),checked:C,onChange:B,__nextHasNoMarginBottom:!0}),!C&&React.createElement(ve,{label:f.gridControls.simplePanel.rowUnit,value:d,onChange:j})))}var P=x(G()),to=x(Y()),Al=x(se()),ee=x(Z());var J=x(G()),me=x(Z()),bl=x(se());function ct({tokens:e,onAdd:t,onEdit:o,onRemove:r,onMove:n,labels:s,allowLineNames:l=!0}){let m=(0,J.useMemo)(()=>({...f.tokenEditor,...s}),[s]),[w,p]=(0,J.useState)(""),[a,h]=(0,J.useState)(null),c=(0,J.useCallback)(()=>{let v=String(w||"").trim();v&&(t(v),p(""),h(null))},[w,t]),u=(0,J.useCallback)(()=>{let v=String(w||"").trim();v&&(t(`[${v}]`),p(""),h(null))},[w,t]),i=(0,J.useCallback)((v,T)=>{h(T?v:null)},[]),d=(0,J.useCallback)((v,T)=>{o(v,T)},[o]),k=(0,J.useCallback)(v=>{r(v),h(T=>T===v?null:T>v?T-1:T)},[r]),C=(0,J.useCallback)((v,T)=>{n(v,T),h(N=>N===v?v+T:N===v+T?v:N)},[n]);return React.createElement("div",{className:"costered-blocks--token-editor",role:"list","aria-label":m.listAriaLabel},React.createElement("div",{className:"costered-blocks--token-editor--list"},e.map((v,T)=>React.createElement(Ae,{key:`token-${T}`,index:T,value:v,isExpanded:a===T,onToggle:i,onRemove:k,onChange:d,onMoveLeft:N=>C(N,-1),onMoveRight:N=>C(N,1),labels:m}))),React.createElement("div",{className:"costered-blocks--token-editor--add"},React.createElement(me.TextControl,{placeholder:m.addPlaceholder,value:w,onChange:p,onKeyDown:v=>{v.key==="Enter"&&c()},__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),l?React.createElement(me.Flex,{className:"costered-blocks--token-editor--add-options",gap:0,align:"center"},React.createElement(me.Button,{icon:"editor-code",onClick:c,label:m.addToken}),React.createElement(me.Button,{icon:"tag",onClick:u,label:m.addLabel})):React.createElement(me.Button,{variant:"secondary",onClick:c},m.addToken)))}function oo({clientId:e}){if(!e)return null;let{updateBlockAttributes:t}=(0,to.useDispatch)("core/block-editor"),{set:o,unset:r}=X(t,e),n=te(e),s=n?.columns,l=n?.rows,m=(0,P.useMemo)(()=>s?s.tracks?.length?s.tracks:s.template?[String(s.template)]:[]:[],[s]),w=(0,P.useMemo)(()=>l?l.tracks?.length?l.tracks:l.template?[String(l.template)]:[]:[],[l]),[p,a]=(0,P.useState)(m),[h,c]=(0,P.useState)(w),u=s&&(s.normalised??ie(s.template||""))||"",i=l&&(l.normalised??ie(l.template||""))||"";(0,P.useEffect)(()=>{a(m)},[u]),(0,P.useEffect)(()=>{c(w)},[i]);let d=(0,P.useCallback)(g=>{let b=g.map(O=>String(O||"").trim()).filter(Boolean);return b.length?b.join(" "):null},[]),k=(0,P.useCallback)(g=>{let b=d(g);b==null?r("gridTemplateColumns"):o("gridTemplateColumns",b)},[d,o,r]),C=(0,P.useCallback)(g=>{let b=d(g);b==null?r("gridTemplateRows"):o("gridTemplateRows",b)},[d,o,r]),v=(0,P.useMemo)(()=>{let g=d(p);return!!s?.template&&ie(g||"")===u},[s?.template,u,p,d]),T=(0,P.useMemo)(()=>{let g=d(h);return!!l?.template&&ie(g||"")===i},[l?.template,i,h,d]),N=(0,P.useCallback)((g,b,O,y)=>{let B=String(y||"").trim();if(!B)return;let q=[...g,B];b(q),O(q)},[]),E=(0,P.useCallback)((g,b,O,y,B)=>{let q=g.slice();q[y]=B,b(q),O(q)},[]),F=(0,P.useCallback)((g,b,O,y)=>{let B=g.slice();B.splice(y,1),b(B),O(B)},[]),$=(0,P.useCallback)((g,b,O,y,B)=>{let q=y+B;if(q<0||q>=g.length)return;let j=g.slice(),pe=j.splice(y,1)[0];j.splice(q,0,pe),b(j),O(j)},[]),A=(0,P.useCallback)(()=>{a([]),r("gridTemplateColumns")},[r]),M=(0,P.useCallback)(()=>{c([]),r("gridTemplateRows")},[r]);return React.createElement(ee.Flex,{direction:"column",gap:6},React.createElement(ee.FlexBlock,null,f.gridControls.tracksPanel.description),React.createElement(ee.FlexBlock,null,React.createElement(ee.Flex,{direction:"column",gap:3,className:"costered-blocks--grid-panel-tracks--axis-controls"},React.createElement(ee.Flex,{direction:"row",justify:"space-between",align:"center"},React.createElement("span",{className:"costered-blocks--grid-panel-tracks--axis-label"},f.gridControls.tracksPanel.columns.label),React.createElement(ke,{axis:"columns",canClear:!!s?.template,onClear:A,owner:n.activePane.columns,here:"tracks",label:f.gridControls.tracksPanel.columns.clear})),React.createElement(ct,{tokens:p,setTokens:a,onAdd:g=>N(p,a,k,g),onEdit:(g,b)=>E(p,a,k,g,b),onRemove:g=>F(p,a,k,g),onMove:(g,b)=>$(p,a,k,g,b),labels:{addPlaceholder:f.gridControls.tracksPanel.columns.addPlaceholder,addToken:f.gridControls.tracksPanel.columns.addToken,addLabel:f.gridControls.tracksPanel.columns.addLabel}}))),React.createElement(ee.FlexBlock,null,React.createElement(ee.Flex,{direction:"column",gap:3,className:"costered-blocks--grid-panel-tracks--axis-controls"},React.createElement(ee.Flex,{direction:"row",gap:2,justify:"space-between",align:"center"},React.createElement(ee.FlexBlock,null,React.createElement("span",{className:"costered-blocks--grid-panel-tracks--axis-label"},f.gridControls.tracksPanel.rows.label)),React.createElement(ke,{axis:"rows",canClear:!!l?.template,onClear:M,owner:n.activePane.rows,here:"tracks",label:f.gridControls.tracksPanel.rows.clear})),React.createElement(ct,{tokens:h,setTokens:c,onAdd:g=>N(h,c,C,g),onEdit:(g,b)=>E(h,c,C,g,b),onRemove:g=>F(h,c,C,g),onMove:(g,b)=>$(h,c,C,g,b),labels:{addPlaceholder:f.gridControls.tracksPanel.rows.addPlaceholder,addToken:f.gridControls.tracksPanel.rows.addToken,addLabel:f.gridControls.tracksPanel.rows.addLabel}}))))}var Fo=()=>{let{selectedBlock:e,clientId:t}=Ye(),{attributes:o,name:r}=e;return e?React.createElement(qo,{clientId:t,attributes:o,name:r}):null},qo=({clientId:e,attributes:t,name:o})=>{let{updateBlockAttributes:r}=(0,no.useDispatch)("core/block-editor"),[n,s]=(0,Ce.useState)(null),[l,m]=(0,Ce.useState)(!1),w=(0,Ce.useCallback)(()=>m(!0),[]),p=(0,Ce.useCallback)(()=>m(!1),[]),a=ye(o,e),h=de("gridTemplatePanelOpen",{blockName:a}),[c,u]=ce(h,!0),i=de("gridGapPanelOpen",{blockName:a}),[d,k]=ce(i,!1),C=de("gridTemplateAreasPanelOpen",{blockName:a}),[v,T]=ce(C,!1);return React.createElement(D.Panel,{className:"costered-blocks--tab--grid-controls"},React.createElement(D.PanelBody,{title:f.gridControls.panelTitle,className:"costered-blocks--grid-controls--template-axis",initialOpen:c,onToggle:u},React.createElement(Ve,{value:n,onChange:s,label:f.gridControls.templateMode,forceActive:!0,panels:{simple:eo,tracks:oo},panelProps:{clientId:e}},React.createElement(Ve.TextOption,{value:"simple",label:f.gridControls.simplePanel.title}),React.createElement(Ve.TextOption,{value:"tracks",label:f.gridControls.tracksPanel.title}))),React.createElement(D.PanelBody,{title:f.gridControls.gapPanel.title,className:"costered-blocks--grid-controls--gap",initialOpen:d,onToggle:k},React.createElement(D.Flex,{direction:"column",expanded:!0},React.createElement(D.FlexBlock,null,React.createElement(at,{attributes:t,clientId:e,updateBlockAttributes:r,blockName:o})))),React.createElement(D.PanelBody,{title:f.gridControls.areasPanel.title,className:"costered-blocks--grid-controls--template-areas",initialOpen:v,onToggle:T},React.createElement(D.Flex,{direction:"column",gap:4},React.createElement(Fe,{clientId:e,labels:{tokenGrid:f.gridControls.areasPanel,tokenGridNotice:f.gridControls.areasPanel.noticePanel}}),React.createElement(D.Flex,{justify:"flex-end"},React.createElement(D.Button,{variant:"secondary",onClick:w},f.gridControls.areasPanel.editLarge))),l&&React.createElement(D.Modal,{title:f.gridControls.gridTemplateAreasModal,onRequestClose:p,className:"costered-blocks--grid-controls--modal costered-blocks--modal--wide",shouldCloseOnClickOutside:!0},React.createElement(Fe,{clientId:e,labels:{tokenGrid:f.gridControls.areasPanel,tokenGridNotice:f.gridControls.areasPanel.noticePanel}}))))},_o=(e={})=>{let t=e?.display??e?.style?.display??"";return/^(grid|inline-grid)$/.test(t)},Zl={name:"grid-controls",title:f.gridControls.panelTitle,icon:React.createElement(tt,null),isVisible:({attributes:e})=>_o(e),render:()=>React.createElement(Fo,null)};})();
