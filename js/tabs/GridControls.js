(()=>{var H0=Object.create;var Ht=Object.defineProperty;var O0=Object.getOwnPropertyDescriptor;var F0=Object.getOwnPropertyNames;var V0=Object.getPrototypeOf,Z0=Object.prototype.hasOwnProperty;var Be=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var q0=(e,t,o,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of F0(t))!Z0.call(e,n)&&n!==o&&Ht(e,n,{get:()=>t[n],enumerable:!(r=O0(t,n))||r.enumerable});return e};var y=(e,t,o)=>(o=e!=null?H0(V0(e)):{},q0(t||!e||!e.__esModule?Ht(o,"default",{value:e,enumerable:!0}):o,e));var L=Be((Mo,Ot)=>{Ot.exports=wp.element});var $=Be((Ao,Ft)=>{Ft.exports=wp.data});var V=Be((Ro,Vt)=>{Vt.exports=wp.components});var ve=Be((Bo,Zt)=>{Zt.exports=wp.blockEditor});var b0=Be((Yn,k0)=>{k0.exports=wp.preferences});var Se=Be((mr,v0)=>{v0.exports=wp.i18n});var Ae=y(L()),Na=y($()),U=y(V());var ct=y($()),o0=y(ve()),Ne=y(L());var W={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var qt=e=>Array.isArray(e)?e:[],z0=e=>new Set(qt(e));function ie(e){return Object.fromEntries(Object.entries(W.attributes).filter(([t,o])=>o.group===e))}var $t=ie("display"),zt=ie("dimension"),Ut=ie("margin"),Wt=ie("padding"),jt=ie("flex"),Kt=ie("flex-item"),Yt=ie("grid"),it=ie("grid-item"),Jt=ie("position"),Xt=ie("shared"),Eo={...$t,...zt,...Ut,...Wt,...jt,...Kt,...Yt,...it,...Jt,...Xt},Qt=new Set([...Object.keys(it)]),Io=qt(W?.collections?.editorStyles),e0=z0(W?.collections?.unitless),B=W?.settings?.gridUnit||"1fr",Lo=!!W?.settings?.appendImportantToMirroredStyles,Do=W?.settings?.styleTagId||"costered-blocks-style-mirror",je=W?.settings?.reduxStoreKey||"costered/ui",Go=W?.settings?.breakpoints?.mobile??782,_o=W?.settings?.breakpoints?.tablet??1024,Ho=W?.settings?.breakpoints?.desktop??1440,Oo=W?.collections?.clearSets?.gridAreas,Fo=W?.collections?.clearSets?.gridColumns,Vo=W?.collections?.clearSets?.gridRows;var t0=new Set([...Object.keys($t),...Object.keys(zt),...Object.keys(Wt),...Object.keys(Ut),...Object.keys(jt),...Object.keys(Kt),...Object.keys(Yt),...Object.keys(it),...Object.keys(Jt),...Object.keys(Xt)]),Zo=Object.fromEntries(Object.entries(W.attributes).map(([e,t])=>[e,t.css]));var ye=e=>{let t={desktop:{styles:{}},tablet:{styles:{}},mobile:{styles:{}},...e||{}};return t.desktop={styles:{},...t.desktop||{}},t.tablet={styles:{},...t.tablet||{}},t.mobile={styles:{},...t.mobile||{}},t.desktop.styles={...t.desktop.styles||{}},t.tablet.styles={...t.tablet.styles||{}},t.mobile.styles={...t.mobile.styles||{}},t};var at=e=>e==null||e===""||e==="null"||e==="undefined";var U0="desktop",W0=Object.freeze({});function ue(e,t){let o=e||W0,r={...o},n=ye(o.costered),l=u=>{switch(u){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},s=(u,a=void 0)=>{let g=a&&Object.prototype.hasOwnProperty.call(a,"cascade")?!!a.cascade:!0,h=a&&Object.prototype.hasOwnProperty.call(a,"raw")?!!a.raw:!g,w=t||U0;if(h){let k=n?.[w]?.styles?.[u];return at(k)?void 0:k}let b=l(w);for(let k of b){let f=n?.[k]?.styles?.[u];if(!at(f))return f}};return Object.defineProperties(r,{$get:{value:s,enumerable:!1},$getCascade:{value:u=>s(u,{cascade:!0}),enumerable:!1},$getMany:{value:(u,a)=>{let g={};for(let h of u)g[h]=s(h,a);return g},enumerable:!1},$bp:{value:t,enumerable:!1}}),r}function xe(e){let t=(0,ct.useSelect)(s=>s(je)?.getBreakpoint?.()||"desktop",[]),o=(0,ct.useSelect)(s=>e?s(o0.store)?.getBlockAttributes?.(e):void 0,[e]),r=(0,Ne.useMemo)(()=>o?ue(o,t):void 0,[o,t]),n=(0,Ne.useCallback)((s,i)=>{if(r?.$get)return r.$get(s,i)},[r]),l=(0,Ne.useCallback)((s,i)=>{let c={};if(!r?.$get){for(let u=0;u<s.length;u++)c[s[u]]=void 0;return c}for(let u=0;u<s.length;u++){let a=s[u];c[a]=r.$get(a,i)}return c},[r]);return(0,Ne.useMemo)(()=>({get:n,getMany:l,bp:t,attributes:r}),[n,l,t,r])}var pe=y(L()),ke=y($());function j0(e){return Array.isArray(e)}function n0(e){if(j0(e)){let[t,o,r]=e;return r!==void 0?{property:t,value:o,important:r}:{property:t,value:o}}return e}function dt(e,t,o,r){let n=Array.isArray(e)?e.slice():[],l=-1;for(let i=0;i<n.length;i++)if(n0(n[i]).property===t){l=i;break}let s=r!==void 0?{property:t,value:o,important:r}:{property:t,value:o};return l===-1?n.push(s):n[l]=s,n}function ut(e,t){let o=Array.isArray(e)?Array.from(e):[],r=[];for(let n=0;n<o.length;n++)n0(o[n]).property!==t&&r.push(o[n]);return r}var K0=e=>typeof e=="string"&&e.trim().length>0,Y0=()=>{if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")return crypto.randomUUID();let e=Date.now().toString(36),t=Math.random().toString(36).slice(2,10);return`${e}-${t}`},_e=e=>{e&&!K0(e.costeredId)&&(e.costeredId=Y0())};var He=y($());var J0=e=>{let t=String(e||"").toLowerCase();return t==="mobile"||t==="phone"||t==="tablet"?"mobile":"desktop"},X0=e=>{try{let t=e("core/edit-post");if(t){if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType()}}catch{}try{let t=e("core/edit-site");if(t){if(typeof t.getDeviceType=="function")return t.getDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType();if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType()}}catch{}},ne=e=>{try{let o=(0,He.select)(je);if(o&&typeof o.getBreakpoint=="function"){let r=o.getBreakpoint();if(r)return r}}catch{}let t=X0(e);if(t)return J0(t);if(typeof window<"u"&&typeof window.__COSTERED_VIEWPORT_BP=="string")return window.__COSTERED_VIEWPORT_BP||"desktop";try{if(window.COSTERED_DEBUG){let o=(0,He.select)(STORE_KEY),r=o&&typeof o.getBreakpoint=="function"?o.getBreakpoint():null,n=(0,He.select)("core/edit-post"),l=n&&(typeof n.getPreviewDeviceType=="function"&&n.getPreviewDeviceType()||typeof n.__experimentalGetPreviewDeviceType=="function"&&n.__experimentalGetPreviewDeviceType()),s=(0,He.select)("core/edit-site"),i=s&&(typeof s.getDeviceType=="function"&&s.getDeviceType()||typeof s.__experimentalGetPreviewDeviceType=="function"&&s.__experimentalGetPreviewDeviceType()||typeof s.getPreviewDeviceType=="function"&&s.getPreviewDeviceType())}}catch{}return"desktop"};var Q0="desktop";function j(e,t,o={trim:!0,emptyUnsets:!0}){let r=(typeof t=="object"?t:o)||{},{trim:n=!0,emptyUnsets:l=!0,breakpoint:s}=r,i=(0,ke.useSelect)(ne,[]),c=s||i||Q0,{updateBlockAttributes:u}=(0,ke.useDispatch)("core/block-editor"),a=(0,pe.useMemo)(()=>{if(typeof e=="string"&&!t){let m=e;return p=>{if(m)if(typeof p=="function"){let d=(0,ke.select)("core/block-editor")?.getBlockAttributes(m)||{},C=p(d)||d;u(m,C)}else u(m,p||{})}}if(typeof e=="function"&&typeof t=="string"){let m=e,p=t;return d=>{if(!p)return;if(typeof d=="function"){let S=(0,ke.select)("core/block-editor")?.getBlockAttributes(p)||{},A=d(S)||S;try{m(p,A)}catch{m(A)}return}let C=d||{};try{m(p,C)}catch{m(C)}}}if(typeof e=="function"){let m=e;return p=>{if(typeof p=="function"){let d=(0,ke.select)("core/block-editor")?.getBlockAttributes?.(void 0)||{},C=p(d)||d;m(C)}else m(p||{})}}return()=>{}},[e,t,u]),g=(0,pe.useCallback)((m,p)=>{if(m==null)return;if(Qt.has(p)){let C=typeof m=="string"&&n?m.trim():String(m);return l&&C===""?void 0:C}let d=m;if(n&&typeof d=="string"&&(d=d.trim()),!(l&&(d===""||d=="null"||d=="undefined"))){if(e0.has(p)){if(typeof d=="string"&&/^-?\d+(\.\d+)?$/.test(d)){let C=Number(d);return Number.isFinite(C)?C:void 0}return typeof d=="number"&&Number.isFinite(d)?d:void 0}if(typeof d=="number")return Number.isFinite(d)?d:void 0;if(typeof d=="string")return d==="null"||d==="undefined"?void 0:d;try{return String(d)}catch{return}}},[n,l]),h=(0,pe.useCallback)((m,p)=>{a(d=>{let C={...d||{}};_e(C),C.costered=ye(C.costered);let S=C.costered[c].styles,A=g(p,m),_=dt(S,m,A);return C.costered[c]={...C.costered[c],styles:_},C})},[a,c,g]),w=(0,pe.useCallback)(m=>{!m||typeof m!="object"||a(p=>{let d={...p||{}};_e(d),d.costered=ye(d.costered);let S=d.costered[c].styles;for(let[A,_]of Object.entries(m)){let R=g(_,A);S=dt(S,A,R)}return d.costered[c]={...d.costered[c],styles:S||[]},d})},[a,c,g]),b=(0,pe.useCallback)(m=>{a(p=>{let d={...p||{}};_e(d),d.costered=ye(d.costered);let C=d.costered[c].styles,S=ut(C,m);return(C?.length||0)===S.length?p:(d.costered[c]={...d.costered[c],styles:S},d)})},[a,c]),k=(0,pe.useCallback)(m=>{!Array.isArray(m)||m.length===0||a(p=>{let d={...p||{}};_e(d),d.costered=ye(d.costered);let S=d.costered[c]?.styles;for(let A=0;A<m.length;A++)S=ut(S,m[A]);return d.costered[c]={...d.costered[c],styles:S||[]},d})},[a,c]),f=(0,pe.useCallback)(m=>({set:(p,d)=>h(`${m}${p}`,d),setMany:p=>{let d={};for(let[C,S]of Object.entries(p))d[`${m}${C}`]=S;w(d)},unset:p=>b(`${m}${p}`),unsetMany:p=>k(p.map(d=>`${m}${d}`))}),[h,w,b,k]);return{set:h,setMany:w,unset:b,unsetMany:k,withPrefix:f,activeBreakpoint:c}}var re=y(L());var s0=e=>e?String(e).charAt(0).toUpperCase()+String(e).slice(1):"";function me(e){return String(e||"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function eo(e){let t=String(e??"").trim();if(!t)return[];let o=0,r=0,n="",l=[];for(let s=0;s<t.length;s++){let i=t[s];if(i==="("){o++,n+=i;continue}if(i===")"){o=Math.max(0,o-1),n+=i;continue}if(i==="["){r++,n+=i;continue}if(i==="]"){r=Math.max(0,r-1),n+=i;continue}if(i===" "&&o===0&&r===0){n&&(l.push(n),n="");continue}n+=i}return n&&l.push(n),l}function to(e){let t=String(e??"").trim();if(!t)return null;let o=t.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);if(!o||o[1]===void 0||o[2]===void 0)return null;let r=Number.parseInt(o[1],10),n=o[2].trim();return!Number.isFinite(r)||r<0||n===""?null:{count:r,unit:n}}function Pe(e,t=B){return e>0?`repeat(${e}, ${t})`:null}var oo=/^(?:[0-9.]+(?:px|rem|em|ch|vh|vw|vmin|vmax|fr|%)|auto|max-content|min-content|fit-content\([^)]+\)|minmax\([^)]+\)|clamp\([^)]+\)|var\([^)]+\))$/i;function mt(e,t,o="1fr"){let r=Math.max(0,Number(t)||0),n=me(e??"");if(r<=0)return n;let{count:l}=Ee(n);if(l===0){let a=String(o||"").trim()||"1fr";return`repeat(${r}, ${a})`}if(l>=r)return n;let s=r-l,i=String(o||"").trim()||"1fr",c=n.match(/^repeat\(\s*([0-9]+)\s*,\s*([^)]+)\)\s*$/i);if(c){let a=c[2].trim();if(oo.test(a))return`repeat(${r}, ${a})`}let u=Array.from({length:s}).map(()=>i).join(" ");return`${n} ${u}`.trim()}function gt(e,t){if(!e||typeof e!="string")return"";let o=Math.max(0,Math.trunc(Number(t)||0)),r=e.replace(/\[[^\]]*\]/g," ").trim();if(!r)return"";let n=r.match(/^repeat\(\s*([0-9]+)\s*,\s*([^)]+)\)\s*$/i);if(n){let l=n[2].trim();if(!/\s/.test(l))return o<=0?"":`repeat(${o}, ${l})`;let s=ro(r);return r0(s,o)}return r0(r,o)}function Ee(e,t=B){if(!e||typeof e!="string")return{count:0,unit:t};let o=e.trim();if(!o)return{count:0,unit:t};if(/^subgrid\b/i.test(o))return{count:0,unit:t};if(o=o.replace(/\[[^\]]*]/g," ").trim(),!o)return{count:0,unit:t};let r=o.match(/^\s*repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)\s*$/i);if(r){let l=r[2];return{count:0,unit:pt(l,t)}}let n=no(o,t);return{count:n.count,unit:n.unit||t}}function no(e,t){let o=l0(e);if(o){let i=o.inner.trim(),u=Oe(i).length,a=pt(i,t);return{count:o.times*u,unit:a||t}}let r=Oe(e),n=0,l="";for(let i of r){if(/^\s*repeat\(/i.test(i)){let c=i0(i);if(c){n+=c.count,!l&&c.unitHint&&(l=c.unitHint);continue}n+=1;continue}n+=1,!l&&Ke(i)&&(l=Ce(i)||"")}let s=l||pt(e,t);return{count:n,unit:s||t}}function l0(e){let t=e.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!t)return null;let o=parseInt(t[1],10),r=t[2];return!Number.isFinite(o)||o<0?null:{times:o,inner:r}}function i0(e){if(e.match(/^\s*repeat\(\s*auto-(fit|fill)\s*,/i))return{count:0,unitHint:""};let o=e.match(/^\s*repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!o)return null;let r=parseInt(o[1],10)||0;if(r<=0)return{count:0,unitHint:""};let n=o[2].trim(),l=Oe(n),s=r*l.length,i="";if(l.length===1)i=Ce(l[0])||"";else{let c=l.find(Ke);i=Ce(c)||""}return{count:s,unitHint:i}}function Oe(e){let t=[],o=0,r="";for(let n=0;n<e.length;n++){let l=e[n];if(l==="("){o++,r+=l;continue}if(l===")"){o=Math.max(0,o-1),r+=l;continue}if(o===0&&/\s/.test(l)){r.trim()&&t.push(r.trim()),r="";continue}r+=l}return r.trim()&&t.push(r.trim()),t}function pt(e,t){if(!e)return t;let o=l0(e);if(o){let l=Oe(o.inner);if(l.length===1)return Ce(l[0])||t;let s=l.find(Ke);if(s)return Ce(s)||t}let r=Oe(e);if(r.length===1)return Ce(r[0])||t;let n=r.find(Ke);if(n)return Ce(n)||t;for(let l of r){let s=i0(l);if(s&&s.unitHint)return s.unitHint}return t}function Ke(e){return e?!!(/^(minmax|fit-content|clamp|var)\(/i.test(e)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(e)||/^(auto|max-content|min-content)$/i.test(e)):!1}function Ce(e){return e?e.trim():""}function ro(e){return e.replace(/repeat\(\s*([0-9]+)\s*,\s*([^)]+)\)/gi,(t,o,r)=>{let n=parseInt(o,10),l=r.trim();return Array.from({length:n}).map(()=>l).join(" ")})}function r0(e,t){if(t<=0)return"";let o=0,r="",n=[];for(let s of e)s==="("&&o++,s===")"&&(o=Math.max(0,o-1)),/\s/.test(s)&&o===0?r&&(n.push(r),r=""):r+=s;r&&n.push(r);let l=n.slice(0,t);return l.length===0?"":l.join(" ")}function N(e){let t=Number(e);return Number.isFinite(t)&&t>=0?Math.floor(t):0}function a0(e){let t=String(e??"").trim();if(!t)return{hasAreas:!1,cols:0,rows:0};let o=[],r=/"([^"]*)"|'([^']*)'/g,n;for(;n=r.exec(t);){let s=(n[1]??n[2]??"").trim();s&&o.push(s)}return o.length?{hasAreas:!0,cols:o.reduce((s,i)=>{let c=i.split(/\s+/).filter(Boolean).length;return Math.max(s,c)},0),rows:o.length}:{hasAreas:!1,cols:0,rows:0}}function c0(e,t="."){if(!Array.isArray(e)||e.length===0)return"";let o=e.map(n=>(Array.isArray(n)?n:[]).map(l=>{let s=String(l??"").trim();return s===""?t:s}));return o.some(n=>n.some(l=>l!==t))?o.map(n=>`"${n.join(" ")}"`).join(" "):""}function d0(e,t="."){let o=String(e??"").trim();if(!o)return[];let r=[],n=/"([^"]*)"|'([^']*)'/g,l;for(;l=n.exec(o);){let s=(l[1]??l[2]??"").trim(),i=s.length?s.split(/\s+/g).map(c=>c&&c!==t?c:t):[];r.push(i)}return r}function Fe(e,t,o,r){let n=N(t),l=N(o);if(n===0||l===0)return[];let s=Array.isArray(e)?e:[],i=[];for(let c=0;c<l;c++){let u=Array.isArray(s[c])?s[c]:[],a=Array.from({length:n},(g,h)=>{let w=u[h];return w===void 0?r:w});i.push(a)}return i}function so(e){let t=to(e);if(!t)return null;let o=me(Pe(t.count,t.unit));return{mode:"simple",template:e?String(e):null,normalised:o,simple:{count:t.count,unit:t.unit}}}function lo(e){let t=eo(e);if(!t.length)return null;let o=me(t.join(" "));return{mode:"tracks",template:e?String(e):null,normalised:o,tracks:t}}var io=[so,lo];function ft(e){let t=e||"";for(let o of io){let r=o(t);if(r)return r}return{mode:"raw",template:e?String(e):null,normalised:me(e||"")}}function ht(e){let{areasTemplate:t,trackColumnCount:o,trackRowCount:r,applyMatrixToStore:n,clearAreasInStore:l,seedFromStore:s}=Ve(e),i=(0,re.useMemo)(()=>s("."),[s]),c=(0,re.useMemo)(()=>({count:i?.[0]?.length||N(o)}),[i,o]),u=(0,re.useMemo)(()=>({count:i?.length||N(r)}),[i,r]),a=(0,re.useCallback)(f=>{let m=f[0]?.length||0,p=f.length||0,d=f.map(S=>S.map(A=>String(A??"").trim()||".")),C=Fe(d,m,p,".");n(C)},[n]),g=(0,re.useMemo)(()=>{let f=i?.length||0,m=f&&i[0]?.length||0;return{rows:f,cols:m}},[i]),h=(0,re.useCallback)((f,m)=>f>=0&&f<g.cols&&m>=0&&m<g.rows,[g]),w=(0,re.useCallback)((f,m,p)=>{if(!Array.isArray(i)||i.length===0)return;let d=Math.trunc(N(f))||0,C=Math.trunc(N(m))||0;if(!h(d,C))return;let S=String(p??"").trim()||".",A=i.map(_=>_.slice());A[C][d]=S,a(A)},[i,a,h]),b=(0,re.useCallback)(({rows:f,cols:m})=>{let p=N(f),d=N(m);if(!(p>0&&d>0))return;let C=Fe(i,d,p,".");a(C)},[i,a]),k=(0,re.useCallback)(()=>l(),[l]);return{matrix:i,columnData:c,rowData:u,setCell:w,resize:b,clear:k}}var Ye=y(L());var Tn=Number.MAX_SAFE_INTEGER;var co=y(L());var wt=y($()),u0=y(ve()),xt=y(L());function ge(e){let t=(0,wt.useSelect)(s=>e?s(u0.store).getBlock(e)?.attributes??{}:{},[e]),o=(0,wt.useSelect)(ne,[]),r=(0,xt.useMemo)(()=>ue(t,o),[t,o]),n=(s,i={})=>r.$get(s,i);return(0,xt.useMemo)(()=>{let s=n("gridTemplateColumns"),i=n("gridTemplateRows"),c=n("gridTemplateAreas"),u=ft(s),a=ft(i),{template:g,...h}=a0(c,u.count,a.count);return{columns:u,rows:a,areas:{template:g,...h},activePane:{columns:u.mode,rows:a.mode}}},[o,r?.costered,r?.$get])}var Te=y(L()),p0=y($()),m0=y(ve());function Ve(e){let{set:t,unset:o}=j(e),r=(0,p0.useSelect)(w=>w(m0.store)?.getBlock?.(e)?.innerBlocks?.length||0,[e]),n=ge(e),l=n?.columns?.template??"",s=n?.rows?.template??"",i=n?.areas?.template??"",c=(0,Te.useMemo)(()=>{if(l){let b=Ee(l),k=N(b?.count??b);if(k>0)return k}let w=N(n?.rows?.count)||(()=>{if(!s)return 0;let b=Ee(s);return N(b?.count??b)})();return w>0&&r>0?Math.ceil(r/w):0},[l]),u=(0,Te.useMemo)(()=>{let w=N(n?.rows?.count);if(w>0)return w;if(s){let k=Ee(s),f=N(k?.count??k);if(f>0)return f}let b=N(c);return b>0&&r>0?Math.ceil(r/b):0},[s,n?.rows?.count,c,r]),a=(0,Te.useCallback)(w=>{let b=c0(w,".");b?t("gridTemplateAreas",b):o("gridTemplateAreas")},[t,o]),g=(0,Te.useCallback)(()=>{o("gridTemplateAreas")},[o]),h=(0,Te.useCallback)((w=".")=>{let b=d0(i,w),k=N(b[0]?.length)||N(c),f=N(b.length)||N(u);return k===0&&f>0&&r>0?k=Math.ceil(r/f):f===0&&k>0&&r>0&&(f=Math.ceil(r/k)),k===0&&(k=1),f===0&&(f=1),Fe(b.map(p=>p.map(d=>String(d||w))),k,f,w)},[i,c,u,r]);return{areasTemplate:i,trackColumnCount:c,trackRowCount:u,applyMatrixToStore:a,clearAreasInStore:g,seedFromStore:h}}var kt=y(L()),bt=y($()),Gn=y(ve());function vt(e,t={}){let o=t.keys??Array.from(t0),{parentId:r,parentBlock:n}=(0,bt.useSelect)(c=>{let u=c("core/block-editor"),a=e||u.getSelectedBlockClientId();if(!a)return{parentId:null,parentBlock:null};let g=u.getBlockRootClientId(a);return g?{parentId:g,parentBlock:u.getBlock(g)||null}:{parentId:null,parentBlock:null}},[]),l=(0,bt.useSelect)(ne,[]),s=(0,kt.useMemo)(()=>{let c=n?.attributes;return c?ue(c,l):null},[n?.attributes,l]),i=(0,kt.useMemo)(()=>{if(!n)return null;let c={};for(let u of o)c[u]=s?.$get(u);return c},[n,s,o]);return{parentId:r,parentAttrs:i,parentBlock:n,parentAugmented:s}}var uo=y($()),po=y(L());var g0=y($()),f0=y(ve());function Ze(e,t){return(0,g0.useSelect)(o=>{if(e)return e;let r=o(f0.store),n=t||r.getSelectedBlockClientId();return(n?r.getBlock(n):null)?.name??null},[e,t])}var yt=y($()),w0=y(ve()),x0=y(L());var h0=Object.freeze({});function Ct(){let e=(0,yt.useSelect)(ne,[]),{selectedBlock:t,clientId:o,attrVersion:r}=(0,yt.useSelect)(l=>{let s=l(w0.store),i=s.getSelectedBlockClientId(),c=i?s.getBlock(i):null,u=c?.attributes||h0,a=u&&typeof u.costered=="object"&&u.costered||{},g=Object.keys(a&&a.desktop||{}).length,h=Object.keys(a&&a.tablet||{}).length,w=Object.keys(a&&a.mobile||{}).length,b=`${g}-${h}-${w}`;return{selectedBlock:c,clientId:i,attrVersion:b}},[]),n=(0,x0.useMemo)(()=>ue(t?.attributes,e)||h0,[t,e,r]);return{selectedBlock:t,clientId:o,attributes:n}}var Je=y($()),Tt=y(b0());function ae(e,t,o="costered-blocks"){let r=(0,Je.useSelect)(c=>c(Tt.store).get(o,e)??t,[o,e,t]),{set:n,__experimentalReset:l}=(0,Je.useDispatch)(Tt.store);return[r,c=>{e.startsWith("__invalid__")||n(o,e,c)},()=>{e.startsWith("__invalid__")||l?.(o,e)}]}var ce=(e,{blockName:t,variant:o}={})=>!t&&!o?e:t&&!o?`${e}:${t}`:!t&&o?`${e}#${o}`:`${e}:${t}#${o}`;var C0=y(Se());var y0={pluginSidebar:{noBlockSelected:"Please select a block to edit its settings.",title:"Costered Blocks",selectedBlock:"Selected block",blockWarningSummary:"Style changes may not appear in the editor",blockWarningDetails:"There may be some differences between the editor and the frontend. This is due to limitations with the block editor, which does not always allow custom inline styles to be displayed here."},displayControls:{panelTitle:"Display Controls",displayLabel:"Display",display:{unset:"unset / initial",block:"Block",inline:"Inline",flex:"Flex",grid:"Grid",none:"None"},visibilityLabel:"Visibility",visibility:{unset:"unset / initial",visible:"Visible",hidden:"Hidden",collapse:"Collapse"}},dimensionControls:{panelTitle:"Dimension Controls",dimensionPanel:"Dimensions",dimensions:{width:"Width",height:"Height"},minPanel:"Minimum Dimensions",minDimensions:{width:"Min Width",height:"Min Height"},maxPanel:"Maximum Dimensions",maxDimensions:{width:"Max Width",height:"Max Height"}},spacingControls:{panelTitle:"Spacing Controls",panelLabel:"Spacing",marginLabel:"Margin",paddingLabel:"Padding"},flexBoxControls:{panelTitle:"Flexbox Controls",flexWrapLabel:"Flex Wrap",flexWrapNone:"No Wrap",flexWrapWrap:"Wrap",flexWrapReverse:"Reverse",alignmentPanel:"Alignment",gapPanel:"Gap"},flexItemControls:{panelTitle:"Flex Item Controls",flexGrow:"Grow",flexShrink:"Shrink",flexBasis:"Basis",flexBasisPlaceholder:"Enter value",order:"Order"},gridControls:{panelTitle:"Grid Container Controls",templateMode:"Template Mode",simplePanel:{title:"Simple",description:"In Simple mode, you can define the number of columns. All columns equally divide the total available width.",columns:"Columns",columnsClear:"Clear Columns",columnSpan:"Use %1$s as column width",columnUnit:"Unit",columnIsDisabled:"Column settings are disabled because the parent grid uses subgrid for columns.",columnIsDisabledHelp:"To enable column settings, change the parent grid to not use subgrid for columns.",rows:"Rows",rowsClear:"Clear Rows",rowSpan:"Use %1$s as row height",rowUnit:"Unit",rowIsDisabled:"Row settings are disabled because the parent grid uses subgrid for rows.",rowIsDisabledHelp:"To enable row settings, change the parent grid to not use subgrid for rows."},tracksPanel:{title:"Tracks",description:"In Tracks mode, you can define the exact track sizes using any valid CSS Grid value.",columns:{label:"Columns",clear:"Clear Columns",size:"Column Sizes",addPlaceholder:"Add track or [line names]",addToken:"Add column size",addLabel:"Add [line name]"},rows:{label:"Rows",clear:"Clear Rows",size:"Row Sizes",addPlaceholder:"Add track or [line names]",addToken:"Add row size",addLabel:"Add [line name]"}},subgridPanel:{title:"Subgrid",columns:{label:"Columns use subgrid (%1$s)",help:"Inherit column tracks from the parent grid on this breakpoint.",notice:"Parent grid has no explicit columns; subgrid columns will inherit implicit tracks."},rows:{label:"Rows use subgrid (%1$s)",help:"Inherit row tracks from the parent grid on this breakpoint.",notice:"Parent grid has no explicit rows; subgrid rows will inherit implicit tracks."}},gapPanel:{title:"Gap"},areasPanel:{title:"Grid Template Areas",sizeHint:"Grid Size: %1$d columns x %2$d rows",editLarge:"Edit in larger view",modalTitle:"Edit Grid Template Areas",noticePanel:{mismatchText:"Templates areas (%1$dx%2$d) do not match current tracks (%3$dx%4$d)",resizeToTracks:"Resize areas to match tracks",growTracksToAreas:"Grow tracks to match areas",shrinkTracks:{button:"Shrink tracks to areas",warning:"Shrinking tracks may remove named lines please review afterwards.",confirm:"Shrink tracks",cancel:"Cancel",heading:"Remove named lines?",description:"Shrinking tracks will drop line names (e.g. [sidebar-start]). This can change template references. Continue?"}}}},gridItemsControls:{panelTitle:"Grid Item Controls",simplePanel:{title:"Simple",columnStart:"Column Start",columnStartHelp:"%1$d columns",columnStartHelpUnknown:"Parent grid columns unknown; using a default range (1\u201324).",columnSpan:"Column Span",columnSpanHelp:"Max updates with start",rowStart:"Row Start",rowStartHelp:"%1$d rows",rowStartHelpUnknown:"Parent grid rows unknown; using a default range (1\u201324).",rowSpan:"Row Span",rowSpanHelp:"Max updates with start"},tracksPanel:{title:"Tracks",hasAreasNotice:"This item uses a named grid area. Line-based placement is disabled.",namedLineMismatch:"No named lines are defined in the parent grid.",zeroInvalid:"0 isn\u2019t a valid grid line. Use 1..N or negative indices like -1",columns:{legend:"Columns",trackStartMode:"Start uses",trackStartModeNamed:"Named Line",trackStartModeNumber:"Line Number",trackEndMode:"End uses",trackEndModeSpan:"Span",trackEndModeEnd:"End",startNumber:"Line Number",startNumberHelp:"Positive or negative line number",startNamed:"Named Line",startNamedHelp:"Named lines from parent grid template",spanNumber:"Span",spanNumberHelp:"Max updates with start",endAuto:"Auto",endAutoHelp:"Automatically size based on start/span",endNamed:"Named Line",endNamedHelp:"Named lines from parent grid template",endNumber:"Line Number",endNumberHelp:"Positive or negative line number"},rows:{legend:"Rows",trackStartMode:"Start uses",trackStartModeNamed:"Named Line",trackStartModeNumber:"Line Number",trackEndMode:"End uses",trackEndModeSpan:"Span",trackEndModeEnd:"End",startNumber:"Line Number",startNumberHelp:"Positive or negative line number",startNamed:"Named Line",startNamedHelp:"Named lines from parent grid template",spanNumber:"Span",spanNumberHelp:"Max updates with start",endAuto:"Auto",endAutoHelp:"Automatically size based on start/span",endNamed:"Named Line",endNamedHelp:"Named lines from parent grid template",endNumber:"Line Number",endNumberHelp:"Positive or negative line number"}},areasPanel:{title:"Areas",gridAreaLabel:"Named area (grid-area)",gridAreaNone:"\u2014 None \u2014",gridAreaHelp:"Setting a named area overrides row/column placement."},alignmentPanel:{title:"Alignment"},orderPanel:{title:"Order",label:"Order"}},positioningControls:{panelTitle:"Positioning Controls",position:{label:"Position",help:"Controls the positioning of the element.",values:{unset:"unset / initial",static:"Static",relative:"Relative",absolute:"Absolute",fixed:"Fixed",sticky:"Sticky"}},coordinates:{label:"Coordinates",help:"Set the coordinates for the element. Works with relative, absolute, fixed, and sticky positioning.",top:"Top",right:"Right",bottom:"Bottom",left:"Left",useCustom:"Use custom values (e.g auto, calc)"},zIndex:{label:"Z-Index",help:"Controls the stack order of the element. Elements with a higher z-index cover those with a lower one."}},flexDirection:{label:"Flex Direction",row:"Row",rowReverse:"Row Reverse",column:"Column",columnReverse:"Column Reverse"},justifyControls:{label:"Justify Content",start:"Start",end:"End",center:"Center",spaceAround:"Space Around",spaceBetween:"Space Between",spaceEvenly:"Space Evenly"},alignControls:{label:"Align Items",start:"Start",end:"End",center:"Center",stretch:"Stretch",baseline:"Baseline",spaceAround:"Space Around",spaceBetween:"Space Between",spaceEvenly:"Space Evenly"},customSelectControl:{defaultText:"choose..."},dimensionInputGroup:{label:"Dimensions",labelPre:"%1$s Dimensions",width:"Width",height:"Height",useCustom:"Use custom values (e.g auto, calc)"},directionalInputGroup:{label:"Directions",top:"Top",right:"Right",bottom:"Bottom",left:"Left",useCustom:"Use custom values (e.g auto, calc)"},gapControls:{label:"Gaps",rowLabel:"Row Gap",switchToSingle:"Switch to Single Gap",switchToDual:"Switch to Dual Gap",columnLabel:"Column Gap",useCustom:"Use custom values (e.g auto, calc)"},gridAxisAside:{label:"Grid Axis",horizontal:"Horizontal",vertical:"Vertical",pip:{noValue:"No value set",valueHere:"Value matches this panel",valueElsewhere:"Value set in %s panel",valueRaw:"Value set (unrecognised format)"},clearRows:"Clear Rows",clearColumns:"Clear Columns"},panelToggle:{label:"Panel"},token:{expand:"Edit token",collapse:"Close editor",remove:"Remove",moveLeft:"Move left",moveRight:"Move right"},tokenGrid:{title:"Cells",clear:"Clear",sizeHint:"Cells: %1$d columns x %2$d rows",tokenExpand:"Edit cell",tokenCollapse:"Close editor",tokenRemove:"Clear cell",tokenMoveLeft:"Previous cell",tokenMoveRight:"Next cell",addColumn:"Add column",removeColumn:"Remove column",addRow:"Add row",removeRow:"Remove row"},tokenEditor:{add:"Add",addToken:"Add token",addLineNames:"Add line names",listAriaLabel:"List of tokens",moveLeft:"Move left",moveRight:"Move right",remove:"Remove",expand:"Edit token",collapse:"Close editor"},tokenGridNotice:{mismatchText:"Cells (%1$dx%2$d) do not match current dimensions (%3$dx%4$d)",resizeToTracks:"Resize cells to match dimensions",growTracksToAreas:"Grow dimensions to match cells",shrinkTracks:{button:"Shrink dimensions to cells",warning:"Shrinking dimensions may remove columns/rows. Please review afterwards.",confirm:"Shrink dimensions",cancel:"Cancel",heading:"Remove rows/columns?",description:"Shrinking dimensions will drop rows/columns. Continue?"}},actions:{apply:"Apply",close:"Close",cancel:"Cancel",confirm:"Confirm",clear:"Clear",reset:"Reset",remove:"Remove",add:"Add",edit:"Edit",save:"Save",copy:"Copy",undo:"Undo",redo:"Redo"}};var go="costered-blocks";function St(e){if(typeof e=="string")return(0,C0.__)(e,go);if(Array.isArray(e))return e.map(St);if(e&&typeof e=="object"){let t={};for(let[o,r]of Object.entries(e))t[o]=St(r);return t}return e}var x=St(y0);var fe=y(L()),Z=y(V());var fo=({size:e=24,...t})=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t},wp.element.createElement("path",{d:"M11.271,12.013l0,-1.784c0,-0.403 0.327,-0.729 0.729,-0.729c0.402,0 0.729,0.326 0.729,0.729l-0,1.784l0.213,-0.214c0.284,-0.284 0.746,-0.284 1.03,0c0.284,0.285 0.284,0.746 0,1.031l-1.457,1.457c-0.137,0.137 -0.321,0.213 -0.515,0.213c-0.194,-0 -0.378,-0.076 -0.515,-0.213l-1.457,-1.457c-0.284,-0.285 -0.284,-0.746 -0,-1.031c0.284,-0.284 0.746,-0.284 1.03,0l0.213,0.214Z"}),wp.element.createElement("path",{d:"M3.199,19.503l0,-2.001c0,-0.994 0.807,-1.8 1.801,-1.8l14,-0c0.994,-0 1.801,0.806 1.801,1.8l-0,2.001c-0,0.993 -0.807,1.8 -1.801,1.8l-14,-0c-0.994,-0 -1.801,-0.807 -1.801,-1.8Zm1.6,-0c0,0.11 0.09,0.2 0.201,0.2l14,-0c0.111,-0 0.201,-0.09 0.201,-0.2l-0,-2.001c-0,-0.111 -0.09,-0.2 -0.201,-0.2l-14,-0c-0.111,-0 -0.201,0.089 -0.201,0.2l0,2.001Z"}),wp.element.createElement("path",{d:"M12.701,6.498l-0,-2.001c-0,-0.993 0.806,-1.8 1.8,-1.8l4.499,0c0.994,0 1.801,0.807 1.801,1.8l-0,2.001c-0,0.994 -0.807,1.8 -1.801,1.8l-4.499,0c-0.994,0 -1.8,-0.806 -1.8,-1.8Zm1.6,0c-0,0.111 0.089,0.2 0.2,0.2l4.499,0c0.111,0 0.201,-0.089 0.201,-0.2l-0,-2.001c-0,-0.11 -0.09,-0.2 -0.201,-0.2l-4.499,0c-0.111,0 -0.2,0.09 -0.2,0.2l-0,2.001Z"}),wp.element.createElement("path",{d:"M3.199,6.498l0,-2.001c0,-0.993 0.807,-1.8 1.801,-1.8l4.499,0c0.994,0 1.8,0.807 1.8,1.8l0,2.001c0,0.994 -0.806,1.8 -1.8,1.8l-4.499,0c-0.994,0 -1.801,-0.806 -1.801,-1.8Zm1.6,0c0,0.111 0.09,0.2 0.201,0.2l4.499,0c0.111,0 0.2,-0.089 0.2,-0.2l0,-2.001c0,-0.11 -0.089,-0.2 -0.2,-0.2l-4.499,0c-0.111,0 -0.201,0.09 -0.201,0.2l0,2.001Z"})),Mt=fo;var ho=({size:e=24,...t})=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t},wp.element.createElement("path",{fill:"currentColor",d:"M5 21h1v-3H3v1q0 .825.588 1.413T5 21m3 0h3v-3H8zm5 0h3v-3h-3zm5 0h1q.825 0 1.413-.587T21 19v-1h-3zM3 6h3V3H5q-.825 0-1.412.588T3 5zm0 5h3V8H3zm0 5h3v-3H3zM8 6h3V3H8zm0 5h3V8H8zm0 5h3v-3H8zm5-10h3V3h-3zm0 5h3V8h-3zm0 5h3v-3h-3zm5-10h3V5q0-.825-.587-1.412T19 3h-1zm0 5h3V8h-3zm0 5h3v-3h-3z"})),At=ho;var wo=({size:e=24,...t})=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t},wp.element.createElement("path",{d:"M11.271,12.013l0,-1.784c0,-0.403 0.327,-0.729 0.729,-0.729c0.402,0 0.729,0.326 0.729,0.729l-0,1.784l0.213,-0.214c0.284,-0.284 0.746,-0.284 1.03,0c0.284,0.285 0.284,0.746 0,1.031l-1.457,1.457c-0.137,0.137 -0.321,0.213 -0.515,0.213c-0.194,-0 -0.378,-0.076 -0.515,-0.213l-1.457,-1.457c-0.284,-0.285 -0.284,-0.746 -0,-1.031c0.284,-0.284 0.746,-0.284 1.03,0l0.213,0.214Z"}),wp.element.createElement("path",{d:"M20.801,4.497l-0,2.001c-0,0.994 -0.807,1.8 -1.801,1.8l-14,0c-0.994,0 -1.801,-0.806 -1.801,-1.8l0,-2.001c0,-0.993 0.807,-1.8 1.801,-1.8l14,0c0.994,0 1.801,0.807 1.801,1.8Zm-1.6,0c-0,-0.11 -0.09,-0.2 -0.201,-0.2l-14,0c-0.111,0 -0.201,0.09 -0.201,0.2l0,2.001c0,0.111 0.09,0.2 0.201,0.2l14,0c0.111,0 0.201,-0.089 0.201,-0.2l-0,-2.001Z"}),wp.element.createElement("path",{d:"M11.299,17.502l0,2.001c0,0.993 -0.806,1.8 -1.8,1.8l-4.499,-0c-0.994,-0 -1.801,-0.807 -1.801,-1.8l0,-2.001c0,-0.994 0.807,-1.8 1.801,-1.8l4.499,-0c0.994,-0 1.8,0.806 1.8,1.8Zm-1.6,-0c0,-0.111 -0.089,-0.2 -0.2,-0.2l-4.499,-0c-0.111,-0 -0.201,0.089 -0.201,0.2l0,2.001c0,0.11 0.09,0.2 0.201,0.2l4.499,-0c0.111,-0 0.2,-0.09 0.2,-0.2l0,-2.001Z"}),wp.element.createElement("path",{d:"M20.801,17.502l-0,2.001c-0,0.993 -0.807,1.8 -1.801,1.8l-4.499,-0c-0.994,-0 -1.8,-0.807 -1.8,-1.8l-0,-2.001c-0,-0.994 0.806,-1.8 1.8,-1.8l4.499,-0c0.994,-0 1.801,0.806 1.801,1.8Zm-1.6,-0c-0,-0.111 -0.09,-0.2 -0.201,-0.2l-4.499,-0c-0.111,-0 -0.2,0.089 -0.2,0.2l-0,2.001c-0,0.11 0.089,0.2 0.2,0.2l4.499,-0c0.111,-0 0.201,-0.09 0.201,-0.2l-0,-2.001Z"})),Rt=wo;var Bt=(e="")=>(e+"").trim().split(/\s+(?![^(]*\))/).filter(Boolean).slice(0,2),Nt=(e="",t="")=>[e,t].filter(Boolean).join(" ").trim(),Pt=e=>e==null?"":String(e).trim();var T0=y(V());function Xe(e="",t={}){let{trim:o=!0,toLower:r=!1,toUpper:n=!1,toCapitalFirst:l=!1,toCapitalCase:s=!1,toCamelCase:i=!1,toDashes:c=!1,toSpaces:u=!1}=t,a=e;return typeof a!="string"&&(a=String(a)),o&&(a=a.trim()),r&&(a=a.toLowerCase()),n&&(a=a.toUpperCase()),l&&(a=a.charAt(0).toUpperCase()+a.slice(1)),s&&(a=a.replace(/\b\w/g,g=>g.toUpperCase())),i&&(a=a.replace(/[-_\s]+(.)?/g,(g,h)=>h?h.toUpperCase():"").replace(/^(.)/,g=>g.toLowerCase())),c&&(a=a.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()),u&&(a=a.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/[-_]+/g," ").toLowerCase()),a}function Ie(e){let{value:t,onChange:o,label:r}=e,n=Xe(r,{toCapitalFirst:!0,trim:!0,toSpaces:!0});return wp.element.createElement(T0.__experimentalUnitControl,{__next40pxDefaultSize:!0,label:n,value:t,onChange:o,placeholder:"0",style:{padding:"0 2px"},units:[{name:"rem",value:"rem",label:"rem"},{name:"px",value:"px",label:"px"},{name:"em",value:"em",label:"em"},{name:"%",value:"%",label:"%"},{name:"vw",value:"vw",label:"vw"},{name:"vh",value:"vh",label:"vh"}],isResettable:!0,allowReset:!0})}var S0=y(V());function Et({value:e,onChange:t,label:o,placeholder:r="",help:n=""}){let l=Xe(o,{toDashes:!0,toSpaces:!1});return wp.element.createElement("div",{style:{padding:"0 2px"}},wp.element.createElement(S0.TextControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:l,value:e,onChange:t,placeholder:r,help:n}))}function It({clientId:e,blockName:t=null}){let{get:o}=xe(e),{set:r}=j(e),n=Ze(t,e),l=ce("gapMode",{blockName:n}),[s,i]=ae(l,"unit"),c=ce("gapInputMode",{blockName:n}),[u,a]=ae(c,"single"),g=o("gap")||"";(0,fe.useEffect)(()=>{u===void 0&&a(Bt(g).length===2?"dual":"single")},[u,g]);let[h,w]=(0,fe.useMemo)(()=>{let C=Bt(g);return[C[0]||"",C[1]||""]},[g]),b=(0,fe.useCallback)(C=>{let S=Pt(C);if(u==="single")r("gap",S||void 0);else{let A=Nt(S,w);r("gap",A||void 0)}},[u,r,w]),k=(0,fe.useCallback)(C=>{let S=Pt(C),A=Nt(h,S);r("gap",A||void 0)},[r,h]),f=s==="unit"?Ie:Et,m=u==="single"?x.gapControls.label:x.gapControls.columnLabel,p=(0,fe.useCallback)(()=>{a(u==="single"?"dual":"single")},[u,a]),d=(0,fe.useCallback)(()=>{i(s==="unit"?"text":"unit")},[s,i]);return wp.element.createElement(Z.Flex,{direction:"column",className:"gap-controls"},wp.element.createElement(Z.FlexBlock,null,wp.element.createElement(Z.Flex,{align:"flex-end",gap:1},wp.element.createElement(Z.FlexBlock,null,wp.element.createElement(Z.Flex,{gap:0,direction:"row",align:"flex-end"},wp.element.createElement(Z.FlexItem,null,wp.element.createElement(f,{label:m,value:u==="single"?g:h,onChange:b,allowReset:!0})),u==="dual"&&wp.element.createElement(Z.FlexItem,null,wp.element.createElement(f,{label:x.gapControls.rowLabel,value:w,onChange:k,allowReset:!0})))),wp.element.createElement(Z.FlexItem,null,wp.element.createElement(Z.Button,{icon:u==="single"?Rt:Mt,label:u==="single"?x.gapControls.switchToDual:x.gapControls.switchToSingle,onClick:p,style:{marginBottom:"2px"},"aria-pressed":u==="dual"})))),wp.element.createElement(Z.FlexBlock,null),wp.element.createElement(Z.FlexBlock,null,wp.element.createElement(Z.ToggleControl,{label:x.gapControls.useCustom,checked:s==="text",onChange:d,__nextHasNoMarginBottom:!0})))}var se=y(L()),ze=y(V()),N0=y(Se());var q=y(L()),$e=y(V());var J=y(L()),X=y(V());function qe({index:e,value:t,isExpanded:o,onToggle:r,onRemove:n,onChange:l,onMoveLeft:s,onMoveRight:i,labels:c,emptyPlaceholder:u,floatingEditor:a=!1,popoverPlacement:g="bottom-start",popoverWidth:h}){let w=(0,J.useRef)(null),b=(0,J.useRef)(null),k=(0,J.useRef)("pointer"),f=(0,J.useCallback)(R=>{let K=R?.inputRef?.current||R||null;b.current=K},[]);(0,J.useEffect)(()=>{if(!(!o||!b.current)){if(k.current==="keyboard"){let R=b.current;R.focus?.({preventScroll:!0});let K=typeof R.value=="string"?R.value.length:0;typeof R.setSelectionRange=="function"&&R.setSelectionRange(K,K)}k.current="pointer"}},[o]);let m={expand:x.token.expand,collapse:x.token.collapse,remove:x.token.remove,moveLeft:x.token.moveLeft,moveRight:x.token.moveRight,...c},p=t&&t.trim().length?t:u??"",d=(0,J.useCallback)(R=>{R.stopPropagation(),n(e)},[e,n]),C=(0,J.useCallback)(()=>{k.current="pointer",r(e,!o)},[e,o,r]),S=(0,J.useCallback)(()=>{k.current="keyboard",r(e,!o)},[e,o,r]),A=(0,J.useCallback)(R=>{R.key==="Enter"||R.key===" "?(R.preventDefault(),S()):R.key==="Escape"&&o&&(R.preventDefault(),r(e,!1))},[S,e,o,r]),_=wp.element.createElement("div",{id:`costered-blocks--token--panel-${e}`,className:"costered-blocks--token--panel"},wp.element.createElement(X.TextControl,{ref:f,value:t??"",placeholder:u??"",onChange:R=>l(e,R),onBlur:R=>l(e,R?.target?.value??""),onKeyDownCapture:R=>R.stopPropagation(),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),wp.element.createElement("div",{className:"costered-blocks--token--actions"},wp.element.createElement(X.Tooltip,{text:m.moveLeft},wp.element.createElement(X.Button,{icon:"arrow-left-alt2",onClick:()=>s(e),label:m.moveLeft,variant:"tertiary"})),wp.element.createElement(X.Tooltip,{text:m.moveRight},wp.element.createElement(X.Button,{icon:"arrow-right-alt2",onClick:()=>i(e),label:m.moveRight,variant:"tertiary"}))));return wp.element.createElement("div",{className:`costered-blocks--token ${o?"is-expanded":""}`},wp.element.createElement("div",{className:"costered-blocks--token--chip",ref:w},wp.element.createElement("button",{type:"button",className:"costered-blocks--token--chipButton","aria-expanded":o,"aria-controls":`costered-blocks--token--panel-${e}`,onClick:C,onKeyDown:A,title:o?m.collapse:m.expand},wp.element.createElement("span",{className:"costered-blocks--token--chipText"},p)),wp.element.createElement(X.Tooltip,{text:m.remove},wp.element.createElement(X.Button,{icon:"no-alt",label:m.remove,onClick:d,variant:"tertiary",className:"costered-blocks--token--remove"}))),!a&&o&&_,a&&o&&w.current&&wp.element.createElement(X.Popover,{className:"costered-blocks--token--popover",anchor:w.current,placement:g,onClose:()=>r(e,!1),focusOnMount:"firstElement",onFocusOutside:R=>R.preventDefault(),expandOnMobile:!0},wp.element.createElement("div",{className:"costered-blocks--token--popoverInner",style:h?{width:h}:void 0},_)))}function M0(e){let{matrix:t,columnData:o,rowData:r,setCell:n,resize:l,clear:s,emptyToken:i=".",labels:c={},onEditingChange:u}=e,a=Array.isArray(t)?t:[],g=N(o?.count??o)||a[0]?.length||0,h=N(r?.count??r)||a.length||0,w=Math.max(1,g),b=Math.max(1,h),[k,f]=(0,q.useState)(null),m=(0,q.useRef)(null),p=(0,q.useCallback)((v,T)=>T*w+v,[w]),d=(0,q.useCallback)(v=>{let T=v%w,M=Math.floor(v/w);return[T,M]},[w]);(0,q.useEffect)(()=>{u?.(k!=null)},[k,u]),(0,q.useEffect)(()=>{f(v=>{if(v==null)return v;let[T,M]=d(v);return T<w&&M<b?v:null})},[w,b,d]);let C=(0,q.useCallback)((v,T)=>{f((typeof T=="boolean"?T:k!==v)?v:null)},[k]),S=(0,q.useCallback)(v=>{let[T,M]=d(v);T<=0||f(p(T-1,M))},[d,p]),A=(0,q.useCallback)(v=>{let[T,M]=d(v);T>=w-1||f(p(T+1,M))},[d,p,w]),_=(0,q.useCallback)(()=>l({cols:g+1,rows:h}),[l,g,h]),R=(0,q.useCallback)(()=>l({cols:Math.max(1,g-1),rows:h}),[l,g,h]),K=(0,q.useCallback)(()=>l({cols:g,rows:h+1}),[l,g,h]),Y=(0,q.useCallback)(()=>l({cols:g,rows:Math.max(1,h-1)}),[l,g,h]);return wp.element.createElement("div",{className:"costered-blocks--token-grid--area",ref:m},wp.element.createElement("div",{className:"costered-blocks--token-grid--row costered-blocks--token-grid--row-head"},wp.element.createElement("div",{className:"costered-blocks--token-grid--cell costered-blocks--token-grid--cell-corner"})," ",Array.from({length:w}).map((v,T)=>wp.element.createElement("div",{className:"costered-blocks--token-grid--cell costered-blocks--token-grid--cell-head",key:`col-${T}`},wp.element.createElement("div",{key:`header-col-${T}`,className:"costered-blocks--token-grid--controls"},wp.element.createElement($e.Button,{onClick:R,disabled:g<=1,variant:"tertiary",icon:"minus",label:c.removeColumn}),wp.element.createElement($e.Button,{onClick:_,variant:"tertiary",icon:"plus",label:c.addColumn}))))),a.map((v,T)=>wp.element.createElement("div",{key:`row-${T}`,className:"costered-blocks--token-grid--row"},wp.element.createElement("div",{className:"costered-blocks--token-grid--cell costered-blocks--token-grid--cell-head"},wp.element.createElement("div",{className:"costered-blocks--token-grid--controls"},wp.element.createElement($e.Button,{onClick:Y,disabled:h<=1,variant:"tertiary",icon:"minus",label:c.removeRow}),wp.element.createElement($e.Button,{onClick:K,variant:"tertiary",icon:"plus",label:c.addRow}))),v.map((M,E)=>{let H=p(E,T),F=M===i?"":M;return wp.element.createElement("div",{key:`cell-${E}-${T}`,className:"costered-blocks--token-grid--cell"},wp.element.createElement(qe,{index:H,value:F,isExpanded:k===H,onToggle:C,onRemove:oe=>{let[he,Re]=d(oe);n(he,Re,i),f(null)},onChange:(oe,he)=>{let[Re,we]=d(oe);n(Re,we,he),console.log({change_index:oe,cellX:Re,cellY:we,next:he})},onMoveLeft:S,onMoveRight:A,emptyPlaceholder:i,floatingEditor:!0,popoverWidth:m.current?.offsetWidth??void 0,labels:{expand:c.tokenExpand,collapse:c.tokenCollapse,remove:c.tokenRemove,moveLeft:c.tokenMoveLeft,moveRight:c.tokenMoveRight}}))}))))}var A0=y(Se()),R0=y($()),Me=y(L()),O=y(V());function B0({clientId:e,columnData:t,rowData:o,gridMatrix:{resize:r},labels:n=x.tokenGridNotice}){let{updateBlockAttributes:l}=(0,R0.useDispatch)("core/block-editor"),{set:s}=j(l,e),{trackColumnCount:i,trackRowCount:c}=Ve(e),u=ge(e),[a,g]=(0,Me.useState)(!1),h=M=>M&&typeof M=="object"?M.count??0:Number(M)||0,w=(M,E)=>M&&typeof M=="object"&&M.unit?M.unit:E,b=Number(t)||0,k=Number(o)||0,f=h(i),m=h(c),p=w(i,B),d=w(c,"auto"),C=b!==f,S=k!==m,A=b<f||k<m,_=(0,Me.useCallback)(()=>{r(f||b||1,m||k||1)},[r,f,m,b,k]),R=b>f,K=k>m,Y=(0,Me.useCallback)(()=>{let M=u?.columns?.template||"",E=u?.rows?.template||"",H=R?mt(M,b,p):M,F=K?mt(E,k,d):E;H===M&&F===E||(s("gridTemplateColumns",H),s("gridTemplateRows",F))},[b,k,p,d,u,s]),v=(0,Me.useCallback)(()=>{let M=gt(u?.columns?.template||"",b),E=gt(u?.rows?.template||"",k);s("gridTemplateColumns",M),s("gridTemplateRows",E)},[b,k,u,s]),T=(0,Me.useCallback)(()=>{/\[[^\]]+]/.test(u?.columns?.template||"")||/\[[^\]]+]/.test(u?.rows?.template||"")?g(!0):v()},[u,v]);return!C&&!S?null:wp.element.createElement(O.Flex,{direction:"column",gap:2,className:"costered-blocks--grid-area-notices"},wp.element.createElement(O.Notice,{status:"info",isDismissible:!1},(0,A0.sprintf)(n.mismatchText,b,k,f,m),wp.element.createElement(O.Flex,{direction:"column",gap:2,style:{marginTop:8}},wp.element.createElement(O.FlexBlock,null,wp.element.createElement(O.Button,{variant:"secondary",onClick:_},n.resizeToTracks)),(R||K)&&wp.element.createElement(O.FlexBlock,null,wp.element.createElement(O.Button,{variant:"secondary",onClick:Y,disabled:!R&&!K},n.growTracksToAreas)),A&&wp.element.createElement(O.FlexBlock,null,wp.element.createElement(O.Button,{variant:"secondary",isDestructive:!0,onClick:T},n.shrinkTracks.button)))),A&&wp.element.createElement(O.Notice,{status:"warning",isDismissible:!1,className:"costered-blocks--grid-area-notice--shrink-warning"},wp.element.createElement("span",null,n.shrinkTracks.warning)),wp.element.createElement(O.__experimentalConfirmDialog,{isOpen:a,onConfirm:()=>{v(),g(!1)},onCancel:()=>g(!1),confirmButtonText:n.shrinkTracks.confirm,cancelButtonText:n.shrinkTracks.cancel},wp.element.createElement(O.__experimentalHeading,null,n.shrinkTracks.heading),wp.element.createElement("p",null,n.shrinkTracks.description)))}function Qe({clientId:e,labels:t={}}){let[o,r]=(0,se.useState)(!1),n=(0,se.useRef)(null),l=(0,se.useMemo)(()=>({...x.tokenGrid,...t.tokenGrid}),[t]),s=(0,se.useMemo)(()=>({...x.tokenGridNotice,...t.tokenGridNotice}),[t]),{matrix:i,columnData:c,rowData:u,setCell:a,resize:g,clear:h}=ht(e),w=Array.isArray(i)&&Array.isArray(i[0])?i[0].length:0,b=Array.isArray(i)?i.length:0,k=N(c?.count??c),f=N(u?.count??u),m=w||b||k||f?w!==k||b!==f:!1,p=(0,se.useCallback)(d=>{n.current&&clearTimeout(n.current),d?r(!0):n.current=setTimeout(()=>r(!1),60)},[]);return(0,se.useEffect)(()=>()=>n.current&&clearTimeout(n.current),[]),wp.element.createElement(ze.Flex,{direction:"column",gap:2,className:"costered-blocks--token-grid-component"},m&&wp.element.createElement(B0,{clientId:e,columnData:k,rowData:f,gridMatrix:i,labels:s}),wp.element.createElement(ze.Flex,{direction:"row",gap:2,align:"center",justify:"space-between",className:"costered-blocks--token-grid-header"},w>0&&b>0&&wp.element.createElement(ze.FlexItem,null,wp.element.createElement("span",{className:"costered-blocks--token-grid-help"},(0,N0.sprintf)(l.sizeHint,w,b)))),wp.element.createElement(M0,{matrix:i,columnData:w,rowData:b,emptyToken:".",labels:l,setCell:a,resize:g,clear:h,onEditingChange:p}))}var de=y(L()),ot=y(V());var et=y(L()),Q=y(V());function xo({value:e,onChange:t,label:o="",isBlock:r=!0,children:n,...l}){let s=(0,et.useCallback)(i=>t(i),[t]);return wp.element.createElement(Q.__experimentalToggleGroupControl,{className:`costered-blocks--custom-toggle-group ${e?"has-selection":"is-empty"}`,label:o,value:e,onChange:s,isBlock:r,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,isDeselectable:!0,...l},n)}function ko({value:e,label:t,disabled:o}){return wp.element.createElement(Q.__experimentalToggleGroupControlOption,{className:"costered-blocks--custom-toggle-group--text-option",value:e,label:t,disabled:o})}function bo({value:e,icon:t,label:o,showTooltip:r=!0,disabled:n}){return wp.element.createElement(Q.__experimentalToggleGroupControlOptionIcon,{className:"costered-blocks--custom-toggle-group--icon-option",value:e,icon:t,"aria-label":o,label:o,showTooltip:r,disabled:n})}function vo({value:e,icon:t,label:o,disabled:r}){return wp.element.createElement(Q.__experimentalToggleGroupControlOption,{className:"costered-blocks--custom-toggle-group--combined-option",value:e,"aria-label":o,label:wp.element.createElement(Q.Flex,{direction:"column",gap:0,align:"center",style:{paddingBlock:"0.5em"}},wp.element.createElement(Q.FlexItem,null,t),wp.element.createElement(Q.FlexItem,null,o)),disabled:r})}var tt=(0,et.memo)(xo);tt.TextOption=ko;tt.IconOption=bo;tt.CombinedOption=vo;var Ue=tt;function yo({value:e,onChange:t,panels:o,panelProps:r={},label:n=x.panelToggle.label,forceActive:l=!1,className:s,children:i,...c}){let u=de.Children.toArray(i).map(k=>k?.props?.value).filter(k=>typeof k=="string"&&k.length>0),a=u.length>0?u:Object.keys(o||{}),g=a[0]??null;(0,de.useEffect)(()=>{a.length&&(!e||!a.includes(e))&&t?.(g)},[e,g,a.join("|")]);let h=(0,de.useCallback)(k=>{let f=k??null;l&&f===null||t?.(f)},[t,l]),w=e?o?.[e]:null,b=typeof r=="function"?e?r(e):{}:r;return wp.element.createElement(ot.Flex,{direction:"column",gap:2,className:s,...c},wp.element.createElement(Ue,{label:n,value:e||void 0,onChange:h},i),w?wp.element.createElement(ot.FlexBlock,null,wp.element.createElement(de.Suspense,{fallback:null},wp.element.createElement(w,{...b}))):null)}var nt=(0,de.memo)(yo);nt.TextOption=Ue.TextOption;nt.IconOption=Ue.IconOption;nt.CombinedOption=Ue.CombinedOption;var rt=nt;var Lt=y(Se()),ee=y(V()),P0=y($());function Dt({clientId:e,blockName:t,onAxisDisableChange:o}){let{parentAttrs:r}=vt(e),n=(0,P0.useSelect)(ne,[]),{get:l}=xe(e),{set:s,unset:i}=j(e),c=typeof r?.$get=="function"?r.$get("display"):r?.display;if(!(typeof c=="string"&&c.includes("grid")))return null;let a=ce("subgridPanelOpen",{blockName:t}),[g,h]=ae(a,!1),w=l("gridTemplateColumns",{raw:!0})==="subgrid",b=l("gridTemplateRows",{raw:!0})==="subgrid",k=()=>{l("display",{raw:!0})!=="grid"&&s("display","grid")},f=p=>{p?(k(),s("gridTemplateColumns","subgrid")):i("gridTemplateColumns"),o?.({columns:p,rows:b})},m=p=>{p?(k(),s("gridTemplateRows","subgrid")):i("gridTemplateRows"),o?.({columns:w,rows:p})};return wp.element.createElement(ee.PanelBody,{title:x.gridControls.subgridPanel.title,initialOpen:g,onToggle:h,className:"costered-blocks--grid-controls--subgrid"},wp.element.createElement(ee.PanelRow,{className:"costered-blocks--grid-controls--subgrid-toggle"},wp.element.createElement(ee.Flex,{direction:"column",gap:4},wp.element.createElement(ee.FlexBlock,null,wp.element.createElement(ee.ToggleControl,{label:(0,Lt.sprintf)(x.gridControls.subgridPanel.columns.label,n),help:x.gridControls.subgridPanel.columns.help,checked:w,onChange:f})),wp.element.createElement(ee.FlexBlock,null,wp.element.createElement(ee.ToggleControl,{label:(0,Lt.sprintf)(x.gridControls.subgridPanel.rows.label,n),help:x.gridControls.subgridPanel.rows.help,checked:b,onChange:m})))))}var P=y(L()),L0=y($()),z=y(V()),Gt=y(Se());var st=y(V());function lt({type:e,icon:t=null,title:o,content:r,className:n=""}){let l=`costered-blocks--custom-notice--type-${e} ${n}`;return wp.element.createElement(st.Notice,{status:e,isDismissible:!1,className:`costered-blocks--custom-notice ${l}`},wp.element.createElement("details",{key:".0",className:"costered-blocks--custom-notice--details"},wp.element.createElement("summary",{className:"costered-blocks--custom-notice--summary"},t&&wp.element.createElement("span",{className:"costered-blocks--custom-notice--icon"},t),o),wp.element.createElement(st.Flex,{className:"costered-blocks--custom-notice--body",direction:"column",gap:2},r)))}var We=y(V()),E0=y(Se());function Le({axis:e,canClear:t=!1,onClear:o,active:r,owner:n=null,here:l=null,label:s,disabled:i=!1}){let c=s||(e==="columns"?x.gridAxisAside.clearColumns:x.gridAxisAside.clearRows),u=!i&&t,a=typeof r=="boolean"?r:u&&n&&l&&n===l,h=u?a?"here":u&&n&&l&&n!=="raw"&&n!==l&&!a?"elsewhere":"none":"none",w=h==="none"?x.gridAxisAside.pip.noValue:h==="here"?x.gridAxisAside.pip.valueHere:n==="raw"?x.gridAxisAside.pip.valueRaw:(0,E0.sprintf)(x.gridAxisAside.pip.valueElsewhere,s0(n));return wp.element.createElement("div",{className:`costered-blocks--grid-axis-aside ${h==="here"?"is-owned-here":""} ${h==="elsewhere"?"is-elsewhere":""}`,"data-state":h,"data-owner":n||"none","data-here":l||"none","aria-label":e},wp.element.createElement(We.Tooltip,{text:w},wp.element.createElement("span",{className:"costered-blocks--grid-axis-aside--pip"})),wp.element.createElement(We.Tooltip,{text:c},wp.element.createElement(We.Button,{icon:"trash",label:c,onClick:o,disabled:!u,variant:"tertiary",className:"costered-blocks--grid-axis-aside__clear"})))}var I0={mode:"raw",template:null,normalised:"",simple:null,tracks:null};function D0({clientId:e,axisDisabled:t={}}){if(!e)return null;let{updateBlockAttributes:o}=(0,L0.useDispatch)("core/block-editor"),{set:r,unset:n}=j(o,e),l=ge(e)||{},s=l.columns??I0,i=l.rows??I0,[c,u]=(0,P.useState)(s.simple?.count??0),[a,g]=(0,P.useState)(s.simple?.unit??B),[h,w]=(0,P.useState)((s.simple?.unit??B)===B),[b,k]=(0,P.useState)(i.simple?.count??0),[f,m]=(0,P.useState)(i.simple?.unit??B),[p,d]=(0,P.useState)((i.simple?.unit??B)===B),C=s?.normalised??"",S=i?.normalised??"";(0,P.useEffect)(()=>{u(s.simple?.count??0),g(s.simple?.unit??B),w((s.simple?.unit??B)===B)},[C]),(0,P.useEffect)(()=>{k(i.simple?.count??0),m(i.simple?.unit??B),d((i.simple?.unit??B)===B)},[S]);let A=(0,P.useMemo)(()=>h?B:a||B,[h,a]),_=(0,P.useMemo)(()=>p?B:f||B,[p,f]),R=Pe(c,A),K=Pe(b,_),Y=(0,P.useCallback)((I,D)=>{let Ge=Pe(I,D);Ge==null?n("gridTemplateColumns"):r("gridTemplateColumns",Ge)},[r,n]),v=(0,P.useCallback)((I,D)=>{let Ge=Pe(I,D);Ge==null?n("gridTemplateRows"):r("gridTemplateRows",Ge)},[r,n]),T=(0,P.useCallback)(I=>{let D=typeof I=="number"?I:parseInt(I||"0",10);u(D),Y(D,h?B:a)},[h,a,Y]),M=(0,P.useCallback)(I=>{let D=typeof I=="number"?I:parseInt(I||"0",10);k(D),v(D,p?B:f)},[p,f,v]),E=(0,P.useCallback)(I=>{w(I);let D=I?B:a||B;!I&&!a&&g(D),Y(c,D)},[c,a,Y]),H=(0,P.useCallback)(I=>{d(I);let D=I?B:f||B;!I&&!f&&m(D),v(b,D)},[b,f,v]),F=(0,P.useCallback)(I=>{let D=(I||"").trim();g(D),Y(c,h?B:D||B)},[c,h,Y]),oe=(0,P.useCallback)(I=>{let D=(I||"").trim();m(D),v(b,p?B:D||B)},[b,p,v]),he=(0,P.useCallback)(()=>{u(0),n("gridTemplateColumns")},[n]),Re=(0,P.useCallback)(()=>{k(0),n("gridTemplateRows")},[n]),we=t?.columns??!1,De=t?.rows??!1;return wp.element.createElement(z.Flex,{direction:"column",gap:6},wp.element.createElement(z.FlexBlock,{className:"costered-blocks--grid-panel-simple--description"},x.gridControls.simplePanel.description),we&&wp.element.createElement(z.FlexBlock,null,wp.element.createElement(lt,{type:"info",title:x.gridControls.simplePanel.columnIsDisabled,content:x.gridControls.simplePanel.columnIsDisabledHelp})),wp.element.createElement(z.Flex,{direction:"column",gap:3,className:"costered-blocks--grid-panel-simple--axis-controls"},wp.element.createElement(z.Flex,{direction:"row",justify:"space-between",align:"center"},wp.element.createElement("span",{className:"costered-blocks--grid-panel-simple--axis-label"},x.gridControls.simplePanel.columns),wp.element.createElement(Le,{axis:"columns",canClear:!!s?.template,onClear:he,owner:l.activePane.columns,here:"simple",label:x.gridControls.simplePanel.columnsClear,disabled:we})),wp.element.createElement(z.RangeControl,{min:0,max:12,step:1,value:c,onChange:T,disabled:we,className:"costered-blocks--grid-columns-simple--axis-control",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),wp.element.createElement(z.ToggleControl,{label:(0,Gt.sprintf)(x.gridControls.simplePanel.columnSpan,B),checked:h,onChange:E,disabled:we,__nextHasNoMarginBottom:!0}),!h&&wp.element.createElement(Ie,{label:x.gridControls.simplePanel.columnUnit,value:a,onChange:F,disabled:we})),De&&wp.element.createElement(z.FlexBlock,null,wp.element.createElement(lt,{type:"info",title:x.gridControls.simplePanel.rowIsDisabled,content:x.gridControls.simplePanel.rowIsDisabledHelp})),wp.element.createElement(z.Flex,{direction:"column",gap:2,className:"costered-blocks--grid-panel-simple--axis-controls"},wp.element.createElement(z.Flex,{direction:"row",justify:"space-between",align:"center"},wp.element.createElement("span",{className:"costered-blocks--grid-panel-simple--axis-label"},x.gridControls.simplePanel.rows),wp.element.createElement(Le,{axis:"rows",canClear:!!i.template,onClear:Re,owner:l.activePane.rows,here:"simple",label:x.gridControls.simplePanel.rowsClear,disabled:De})),wp.element.createElement(z.RangeControl,{min:0,max:12,step:1,value:b,onChange:M,disabled:De,className:"costered-blocks--grid-rows-simple--axis-control",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),wp.element.createElement(z.ToggleControl,{label:(0,Gt.sprintf)(x.gridControls.simplePanel.rowSpan,B),checked:p,onChange:H,disabled:De,__nextHasNoMarginBottom:!0}),!p&&wp.element.createElement(Ie,{label:x.gridControls.simplePanel.rowUnit,value:f,onChange:oe,disabled:De})))}var G=y(L()),G0=y($()),le=y(V());var te=y(L()),be=y(V());function _t({tokens:e,onAdd:t,onEdit:o,onRemove:r,onMove:n,labels:l,allowLineNames:s=!0}){let i=(0,te.useMemo)(()=>({...x.tokenEditor,...l}),[l]),[c,u]=(0,te.useState)(""),[a,g]=(0,te.useState)(null),h=(0,te.useCallback)(()=>{let p=String(c||"").trim();p&&(t(p),u(""),g(null))},[c,t]),w=(0,te.useCallback)(()=>{let p=String(c||"").trim();p&&(t(`[${p}]`),u(""),g(null))},[c,t]),b=(0,te.useCallback)((p,d)=>{g(d?p:null)},[]),k=(0,te.useCallback)((p,d)=>{o(p,d)},[o]),f=(0,te.useCallback)(p=>{r(p),g(d=>d===p?null:d>p?d-1:d)},[r]),m=(0,te.useCallback)((p,d)=>{n(p,d),g(C=>C===p?p+d:C===p+d?p:C)},[n]);return wp.element.createElement("div",{className:"costered-blocks--token-editor",role:"list","aria-label":i.listAriaLabel},wp.element.createElement("div",{className:"costered-blocks--token-editor--list"},e.map((p,d)=>wp.element.createElement(qe,{key:`token-${d}`,index:d,value:p,isExpanded:a===d,onToggle:b,onRemove:f,onChange:k,onMoveLeft:C=>m(C,-1),onMoveRight:C=>m(C,1),labels:i}))),wp.element.createElement("div",{className:"costered-blocks--token-editor--add"},wp.element.createElement(be.TextControl,{placeholder:i.addPlaceholder,value:c,onChange:u,onKeyDown:p=>{p.key==="Enter"&&h()},__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),s?wp.element.createElement(be.Flex,{className:"costered-blocks--token-editor--add-options",gap:0,align:"center"},wp.element.createElement(be.Button,{icon:"editor-code",onClick:h,label:i.addToken}),wp.element.createElement(be.Button,{icon:"tag",onClick:w,label:i.addLabel})):wp.element.createElement(be.Button,{variant:"secondary",onClick:h},i.addToken)))}function _0({clientId:e,axisDisabled:t}){if(!e)return null;let{updateBlockAttributes:o}=(0,G0.useDispatch)("core/block-editor"),{set:r,unset:n}=j(o,e),l=ge(e),s=l?.columns,i=l?.rows,c=(0,G.useMemo)(()=>s?s.tracks?.length?s.tracks:s.template?[String(s.template)]:[]:[],[s]),u=(0,G.useMemo)(()=>i?i.tracks?.length?i.tracks:i.template?[String(i.template)]:[]:[],[i]),[a,g]=(0,G.useState)(c),[h,w]=(0,G.useState)(u),b=s&&(s.normalised??me(s.template||""))||"",k=i&&(i.normalised??me(i.template||""))||"";(0,G.useEffect)(()=>{g(c)},[b]),(0,G.useEffect)(()=>{w(u)},[k]);let f=(0,G.useCallback)(v=>{let T=v.map(M=>String(M||"").trim()).filter(Boolean);return T.length?T.join(" "):null},[]),m=(0,G.useCallback)(v=>{let T=f(v);T==null?n("gridTemplateColumns"):r("gridTemplateColumns",T)},[f,r,n]),p=(0,G.useCallback)(v=>{let T=f(v);T==null?n("gridTemplateRows"):r("gridTemplateRows",T)},[f,r,n]),d=(0,G.useMemo)(()=>{let v=f(a);return!!s?.template&&me(v||"")===b},[s?.template,b,a,f]),C=(0,G.useMemo)(()=>{let v=f(h);return!!i?.template&&me(v||"")===k},[i?.template,k,h,f]),S=(0,G.useCallback)((v,T,M,E)=>{let H=String(E||"").trim();if(!H)return;let F=[...v,H];T(F),M(F)},[]),A=(0,G.useCallback)((v,T,M,E,H)=>{let F=v.slice();F[E]=H,T(F),M(F)},[]),_=(0,G.useCallback)((v,T,M,E)=>{let H=v.slice();H.splice(E,1),T(H),M(H)},[]),R=(0,G.useCallback)((v,T,M,E,H)=>{let F=E+H;if(F<0||F>=v.length)return;let oe=v.slice(),he=oe.splice(E,1)[0];oe.splice(F,0,he),T(oe),M(oe)},[]),K=(0,G.useCallback)(()=>{g([]),n("gridTemplateColumns")},[n]),Y=(0,G.useCallback)(()=>{w([]),n("gridTemplateRows")},[n]);return wp.element.createElement(le.Flex,{direction:"column",gap:6},wp.element.createElement(le.FlexBlock,null,x.gridControls.tracksPanel.description),wp.element.createElement(le.FlexBlock,null,wp.element.createElement(le.Flex,{direction:"column",gap:3,className:"costered-blocks--grid-panel-tracks--axis-controls"},wp.element.createElement(le.Flex,{direction:"row",justify:"space-between",align:"center"},wp.element.createElement("span",{className:"costered-blocks--grid-panel-tracks--axis-label"},x.gridControls.tracksPanel.columns.label),wp.element.createElement(Le,{axis:"columns",canClear:!!s?.template,onClear:K,owner:l.activePane.columns,here:"tracks",label:x.gridControls.tracksPanel.columns.clear})),wp.element.createElement(_t,{tokens:a,setTokens:g,onAdd:v=>S(a,g,m,v),onEdit:(v,T)=>A(a,g,m,v,T),onRemove:v=>_(a,g,m,v),onMove:(v,T)=>R(a,g,m,v,T),labels:{addPlaceholder:x.gridControls.tracksPanel.columns.addPlaceholder,addToken:x.gridControls.tracksPanel.columns.addToken,addLabel:x.gridControls.tracksPanel.columns.addLabel}}))),wp.element.createElement(le.FlexBlock,null,wp.element.createElement(le.Flex,{direction:"column",gap:3,className:"costered-blocks--grid-panel-tracks--axis-controls"},wp.element.createElement(le.Flex,{direction:"row",gap:2,justify:"space-between",align:"center"},wp.element.createElement(le.FlexBlock,null,wp.element.createElement("span",{className:"costered-blocks--grid-panel-tracks--axis-label"},x.gridControls.tracksPanel.rows.label)),wp.element.createElement(Le,{axis:"rows",canClear:!!i?.template,onClear:Y,owner:l.activePane.rows,here:"tracks",label:x.gridControls.tracksPanel.rows.clear})),wp.element.createElement(_t,{tokens:h,setTokens:w,onAdd:v=>S(h,w,p,v),onEdit:(v,T)=>A(h,w,p,v,T),onRemove:v=>_(h,w,p,v),onMove:(v,T)=>R(h,w,p,v,T),labels:{addPlaceholder:x.gridControls.tracksPanel.rows.addPlaceholder,addToken:x.gridControls.tracksPanel.rows.addToken,addLabel:x.gridControls.tracksPanel.rows.addLabel}}))))}var Co=()=>{let{selectedBlock:e,clientId:t}=Ct(),{name:o}=e,{get:r}=xe(t),[n,l]=(0,Ae.useState)(null),[s,i]=(0,Ae.useState)(!1),c=(0,Ae.useCallback)(()=>i(!0),[]),u=(0,Ae.useCallback)(()=>i(!1),[]),a=Ze(o,t),g=ce("gridTemplatePanelOpen",{blockName:a}),h=ce("gridGapPanelOpen",{blockName:a}),w=ce("gridTemplateAreasPanelOpen",{blockName:a}),[b,k]=ae(g,!0),[f,m]=ae(h,!1),[p,d]=ae(w,!1),C=r("gridTemplateColumns",{raw:!0})==="subgrid",S=r("gridTemplateRows",{raw:!0})==="subgrid",[A,_]=(0,Ae.useState)({columns:C,rows:S});return wp.element.createElement(U.Panel,{className:"costered-blocks--tab--grid-controls"},wp.element.createElement(Dt,{clientId:t,blockName:a,onAxisDisableChange:_}),wp.element.createElement(U.PanelBody,{title:x.gridControls.panelTitle,className:"costered-blocks--grid-controls--template-axis-inner",initialOpen:b,onToggle:k},wp.element.createElement(rt,{className:"costered-blocks--grid-controls--template-axis",value:n,onChange:l,label:x.gridControls.templateMode,forceActive:!0,panels:{simple:D0,tracks:_0},panelProps:{clientId:t,axisDisabled:A}},wp.element.createElement(rt.TextOption,{value:"simple",label:x.gridControls.simplePanel.title}),wp.element.createElement(rt.TextOption,{value:"tracks",label:x.gridControls.tracksPanel.title}))),wp.element.createElement(U.PanelBody,{title:x.gridControls.gapPanel.title,className:"costered-blocks--grid-controls--gap-inner",initialOpen:f,onToggle:m},wp.element.createElement(U.Flex,{direction:"column",expanded:!0,className:"costered-blocks--grid-controls--gap"},wp.element.createElement(U.FlexBlock,null,wp.element.createElement(It,{clientId:t,blockName:o})))),wp.element.createElement(U.PanelBody,{title:x.gridControls.areasPanel.title,className:"costered-blocks--grid-controls--template-areas-inner",initialOpen:p,onToggle:d},wp.element.createElement(U.Flex,{direction:"column",gap:4,className:"costered-blocks--grid-controls--template-areas"},wp.element.createElement(Qe,{clientId:t,labels:{tokenGrid:x.gridControls.areasPanel,tokenGridNotice:x.gridControls.areasPanel.noticePanel}}),wp.element.createElement(U.Flex,{justify:"flex-end"},wp.element.createElement(U.Button,{variant:"secondary",onClick:c},x.gridControls.areasPanel.editLarge))),s&&wp.element.createElement(U.Modal,{title:x.gridControls.gridTemplateAreasModal,onRequestClose:u,className:"costered-blocks--grid-controls--modal costered-blocks--modal--wide",shouldCloseOnClickOutside:!0},wp.element.createElement(Qe,{clientId:t,labels:{tokenGrid:x.gridControls.areasPanel,tokenGridNotice:x.gridControls.areasPanel.noticePanel}}))))},To=(e={})=>{let t=(typeof e?.$get=="function"?e.$get("display"):e?.display)??"";return/^(grid|inline-grid)$/i.test(String(t))},za={name:"grid-controls",title:x.gridControls.panelTitle,icon:wp.element.createElement(At,null),isVisible:({attributes:e})=>To(e),render:()=>wp.element.createElement(Co,null)};})();
