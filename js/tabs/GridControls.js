(()=>{var st=Object.create;var de=Object.defineProperty;var at=Object.getOwnPropertyDescriptor;var it=Object.getOwnPropertyNames;var ct=Object.getPrototypeOf,dt=Object.prototype.hasOwnProperty;var g0=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var pt=(e,t,o,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of it(t))!dt.call(e,n)&&n!==o&&de(e,n,{get:()=>t[n],enumerable:!(r=at(t,n))||r.enumerable});return e};var x=(e,t,o)=>(o=e!=null?st(ct(e)):{},pt(t||!e||!e.__esModule?de(o,"default",{value:e,enumerable:!0}):o,e));var G=g0((Ht,pe)=>{pe.exports=wp.element});var Y=g0((Vt,me)=>{me.exports=wp.data});var D=g0(($t,ue)=>{ue.exports=wp.components});var E0=g0((Mo,Pe)=>{Pe.exports=wp.blockEditor});var Ve=g0((Po,He)=>{He.exports=wp.preferences});var x0=g0((Ko,$e)=>{$e.exports=wp.i18n});var b0=x(G()),lt=x(Y()),$=x(D());var s0=x(G());var $0={display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}};function t0(e){return Object.fromEntries(Object.entries($0).filter(([t,o])=>o.group===e))}var ge=t0("display"),fe=t0("dimension"),he=t0("margin"),we=t0("padding"),xe=t0("flex"),ve=t0("flex-item"),ke=t0("grid"),D0=t0("grid-item"),be=t0("position"),Ce=t0("shared"),jt={...ge,...fe,...he,...we,...xe,...ve,...ke,...D0,...be,...Ce},Me=new Set([...Object.keys(D0)]);var Te=new Set(["order","zIndex","flexGrow","flexShrink"]),S="1fr";var zt=new Set([...Object.keys(ge),...Object.keys(fe),...Object.keys(we),...Object.keys(he),...Object.keys(xe),...Object.keys(ve),...Object.keys(ke),...Object.keys(D0),...Object.keys(be),...Object.keys(Ce)]),Wt=Object.fromEntries(Object.entries($0).map(([e,t])=>[e,t.css]));function X(e,t,{trim:o=!0,emptyUnsets:r=!0}={}){let n=t!=null,l=(0,s0.useCallback)((c,u)=>{if(c==null)return;if(Me.has(u)){let d=typeof c=="string"&&o?c.trim():String(c);return r&&d===""?void 0:d}let a=c;if(o&&typeof a=="string"&&(a=a.trim()),!(r&&(a===""||a=="null"||a=="undefined"))){if(Te.has(u)){if(typeof a=="string"&&/^-?\d+(\.\d+)?$/.test(a)){let d=Number(a);return Number.isFinite(d)?d:void 0}return typeof a=="number"&&Number.isFinite(a)?a:void 0}if(typeof a=="number")return Number.isFinite(a)?a:void 0;if(typeof a=="string")return a==="null"||a==="undefined"?void 0:a;try{return String(a)}catch{return}}},[o,r]),s=(0,s0.useCallback)(c=>{if(n)return e(t,c);{let u={};for(let[a,d]of Object.entries(c)){let C=l(d,a);C!==void 0&&(u[a]=C)}Object.keys(u).length&&e(t,u)}},[n,e,t,l]),p=(0,s0.useCallback)((c,u)=>{s({[c]:l(u,c)})},[s,l]),w=(0,s0.useCallback)(c=>{let u={};for(let[a,d]of Object.entries(c))u[a]=l(d,a);s(u)},[s,l]),m=(0,s0.useCallback)(c=>{s({[c]:void 0})}),i=(0,s0.useCallback)(c=>{let u={};for(let a of c)u[a]=void 0;s(u)},[s]),h=(0,s0.useCallback)(c=>({set:(u,a)=>p(`${c}${u}`,a),setMany:u=>{let a={};for(let[d,C]of Object.entries(u))a[`${c}${d}`]=C;w(a)},unset:u=>m(`${c}${u}`),unsetMany:u=>i(u.map(a=>`${c}${a}`))}),[p,w,m,i]);return{set:p,setMany:w,unset:m,unsetMany:i,withPrefix:h}}var Q=x(G());var ye=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"";function a0(e){return String(e||"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function ut(e){let t=String(e||"").trim();if(!t)return[];let o=0,r=0,n="",l=[];for(let s=0;s<t.length;s++){let p=t[s];if(p==="("){o++,n+=p;continue}if(p===")"){o=Math.max(0,o-1),n+=p;continue}if(p==="["){r++,n+=p;continue}if(p==="]"){r=Math.max(0,r-1),n+=p;continue}if(p===" "&&o===0&&r===0){n&&(l.push(n),n="");continue}n+=p}return n&&l.push(n),l}function gt(e){if(!e)return null;let t=e.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);return t?{count:parseInt(t[1],10),unit:t[2].trim()}:null}function f0(e,t=S){return e>0?`repeat(${e}, ${t})`:null}var ft=/^(?:[0-9.]+(?:px|rem|em|ch|vh|vw|vmin|vmax|fr|%)|auto|max-content|min-content|fit-content\([^)]+\)|minmax\([^)]+\)|clamp\([^)]+\)|var\([^)]+\))$/i;function j0(e,t,o="1fr"){let r=Math.max(0,Number(t)||0),n=String(e||"").trim();if(r<=0)return n;let{count:l}=T0(n);if(l===0){let i=String(o||"").trim()||"1fr";return`repeat(${r}, ${i})`}if(l>=r)return n;let s=r-l,p=String(o||"").trim()||"1fr",w=n.match(/^repeat\(\s*([0-9]+)\s*,\s*([^)]+)\)\s*$/i);if(w){let i=w[2].trim();if(ft.test(i))return`repeat(${r}, ${i})`}let m=Array.from({length:s}).map(()=>p).join(" ");return`${n} ${m}`.trim()}function z0(e,t){if(!e||typeof e!="string")return"";let o=Math.max(0,t|0),r=e.replace(/\[[^\]]*\]/g," ").trim();if(!r)return"";let n=r.match(/^repeat\(\s*([0-9]+)\s*,\s*([^)]+)\)\s*$/i);if(n){let l=n[2].trim();if(!/\s/.test(l))return o<=0?"":`repeat(${o}, ${l})`;let s=ht(r);return Se(s,o)}return Se(r,o)}function T0(e,t=S){if(!e||typeof e!="string")return{count:0,unit:t};let o=e.trim();if(!o)return{count:0,unit:t};if(/^subgrid\b/i.test(o))return{count:0,unit:t};if(o=o.replace(/\[[^\]]*]/g," ").trim(),!o)return{count:0,unit:t};let r=o.match(/repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)$/i);if(r){let s=r[2];return{count:0,unit:Ne(s,t)}}let{count:n,unit:l}=Ae(o,t);return{count:n,unit:l||t}}function Ae(e,t){let o=Re(e);if(o){let s=o.inner.trim(),{count:p,unit:w}=Ae(s,t);return{count:o.times*p,unit:w||Ne(s,t)}}let r=U0(e),n=r.length,l="";if(r.length===1)l=M0(r[0])||t;else{let s=r.find(Be);l=M0(s)||t}return{count:n,unit:l}}function Re(e){let t=e.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!t)return null;let o=parseInt(t[1],10),r=t[2];return!Number.isFinite(o)||o<0?null:{times:o,inner:r}}function U0(e){let t=[],o=0,r="";for(let n=0;n<e.length;n++){let l=e[n];if(l==="("){o++,r+=l;continue}if(l===")"){o=Math.max(0,o-1),r+=l;continue}if(o===0&&/\s/.test(l)){r.trim()&&t.push(r.trim()),r="";continue}r+=l}return r.trim()&&t.push(r.trim()),t}function Ne(e,t){if(!e)return t;let o=Re(e);if(o){let l=U0(o.inner);if(l.length===1)return M0(l[0])||t}let r=U0(e);if(r.length===1)return M0(r[0])||t;let n=r.find(Be);return M0(n)||t}function Be(e){return e?!!(/^(minmax|fit-content|clamp|var)\(/i.test(e)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(e)||/^(auto|max-content|min-content)$/i.test(e)):!1}function M0(e){return e?e.trim():""}function ht(e){return e.replace(/repeat\(\s*([0-9]+)\s*,\s*([^)]+)\)/gi,(t,o,r)=>{let n=parseInt(o,10),l=r.trim();return Array.from({length:n}).map(()=>l).join(" ")})}function Se(e,t){if(t<=0)return"";let o=0,r="",n=[];for(let s of e)s==="("&&o++,s===")"&&(o=Math.max(0,o-1)),/\s/.test(s)&&o===0?r&&(n.push(r),r=""):r+=s;r&&n.push(r);let l=n.slice(0,t);return l.length===0?"":l.join(" ")}function wt(e){let t=gt(e);if(!t)return null;let o=a0(f0(t.count,t.unit));return{mode:"simple",template:e||null,normalised:o,simple:{count:t.count,unit:t.unit}}}function xt(e){let t=ut(e);if(!t.length)return null;let o=a0(t.join(" "));return{mode:"tracks",template:e||null,normalised:o,tracks:t}}var vt=[wt,xt];function W0(e){let t=e||"";for(let o of vt){let r=o(t);if(r)return r}return{mode:"raw",template:e||null,normalised:a0(e||"")}}function Le(e){let t=(e||"").trim();if(!t)return{hasAreas:!1,cols:0,rows:0};let o=t.split(/(['"])(?:(?=(\\?))\2.)*?\1/).map(n=>n.replace(/^['"]|['"]$/g,"").trim()).filter(n=>n&&!/^[\s]+$/.test(n));return o.length?{hasAreas:!0,cols:Math.max(0,...o.map(n=>n.split(/\s+/).filter(Boolean).length)),rows:o.length}:{hasAreas:!1,cols:0,rows:0}}function h0(e,t="."){if(!Array.isArray(e)||e.length===0)return"";let o=e.map(n=>(Array.isArray(n)?n:[]).map(l=>{let s=String(l??"").trim();return s===""?t:s}));return o.some(n=>n.some(l=>l!==t))?o.map(n=>`"${n.join(" ")}"`).join(" "):""}function K0(e,t="."){let o=String(e||"").trim();if(!o)return[];let r=[];return o.replace(/(['"])(.*?)\1/g,(n,l,s)=>(r.push(s),"")),r.map(n=>n.trim().split(/\s+/).map(l=>l&&l!==t?l:t))}function w0(e,t,o,r="."){let n=[];for(let l=0;l<o;l++){let s=e[l]||[],p=Array.from({length:t},(w,m)=>s[m]??r);n.push(p)}return n}function J0({seedMatrix:e,emptyToken:t=".",onApply:o,suspendResync:r=!1}){let[n,l]=(0,Q.useState)(()=>e),s=(0,Q.useRef)(h0(n));(0,Q.useEffect)(()=>{s.current=h0(n)},[n]),(0,Q.useEffect)(()=>{if(r)return;h0(e)!==s.current&&l(e)},[e,r]);let p=n[0]?.length||0,w=n.length||0,m=(0,Q.useCallback)((c,u,a)=>{l(d=>{let C=String(a??"").trim(),k=C===""?t:C,v=d.map((M,N)=>N===u?M.map((P,Z)=>Z===c?k:P):M);return o?.(v),v})},[o,t]),i=(0,Q.useCallback)((c,u)=>{l(a=>{let d=w0(a,c,u,t);return o?.(d),d})},[t,o]),h=(0,Q.useCallback)((c=1,u=1)=>{l(()=>{let a=w0([],Math.max(1,c),Math.max(1,u),t);return o?.(a),a})},[t,o]);return{matrix:n,columnData:p,rowData:w,setCell:m,resize:i,clear:h}}var Mt=x(G());var kt=x(G());var P0=x(G());var ko=Number.MAX_SAFE_INTEGER;var St=x(G());var Ee=x(Y()),Ie=x(E0()),Ge=x(G());function o0(e){let t=(0,Ee.useSelect)(r=>e?r(Ie.store).getBlock(e)?.attributes??{}:{},[e]);return(0,Ge.useMemo)(()=>{let r=W0(t.gridTemplateColumns),n=W0(t.gridTemplateRows),l=t.gridTemplateAreas??null,s=Le(l);return{columns:r,rows:n,areas:{template:l,...s},activePane:{columns:r.mode,rows:n.mode}}},[t.gridTemplateColumns,t.gridTemplateRows,t.gridTemplateAreas])}var m0=x(G()),Ze=x(Y()),Fe=x(E0());function S0(e){let{updateBlockAttributes:t}=(0,Ze.useDispatch)(Fe.store),{set:o,unset:r}=X(t,e),n=o0(e),l=n?.columns?.template??null,s=n?.rows?.template??null,p=n?.areas?.template??null,w=(0,m0.useMemo)(()=>l?T0(l):0,[l]),m=(0,m0.useMemo)(()=>s?T0(s):0,[s]),i=(0,m0.useCallback)(u=>{let a=h0(u,".");a?o("gridTemplateAreas",a):r("gridTemplateAreas")},[o,r]),h=(0,m0.useCallback)(()=>{r("gridTemplateAreas")},[r]),c=(0,m0.useCallback)((u=".")=>{let a=K0(p,u),d=a[0]?.length||w||1,C=a.length||m||1;return w0(a,d,C,u)},[p,w,m]);return{areasTemplate:p,trackColumnCount:w,trackRowCount:m,applyMatrixToStore:i,clearAreasInStore:h,seedFromStore:c}}var yt=x(Y());var qe=x(Y()),Oe=x(E0());function y0(e,t){return(0,qe.useSelect)(o=>{if(e)return e;let r=o(Oe.store),n=t||r.getSelectedBlockClientId();return(n?r.getBlock(n):null)?.name??null},[e,t])}var _e=x(Y());function Y0(){return(0,_e.useSelect)(e=>{let t=e("core/block-editor"),o=t.getSelectedBlockClientId();return{selectedBlock:o?t.getBlock(o):null,clientId:o}},[])}var I0=x(Y()),X0=x(Ve());function i0(e,t,o="costered-blocks"){let r=(0,I0.useSelect)(w=>w(X0.store).get(o,e)??t,[o,e,t]),{set:n,__experimentalReset:l}=(0,I0.useDispatch)(X0.store);return[r,w=>{e.startsWith("__invalid__")||n(o,e,w)},()=>{e.startsWith("__invalid__")||l?.(o,e)}]}var c0=(e,{blockName:t,variant:o}={})=>!t&&!o?e:t&&!o?`${e}:${t}`:!t&&o?`${e}#${o}`:`${e}:${t}#${o}`;var Ue=x(x0());var De={pluginSidebar:{noBlockSelected:"Please select a block to edit its settings.",title:"Costered Blocks",selectedBlock:"Selected block",blockWarningSummary:"Style changes may not appear in the editor",blockWarningDetails:"There may be some differences between the editor and the frontend. This is due to limitations with the block editor, which does not always allow custom inline styles to be displayed here."},displayControls:{panelTitle:"Display Controls",displayLabel:"Display",display:{unset:"unset / initial",block:"Block",inline:"Inline",flex:"Flex",grid:"Grid",none:"None"},visibilityLabel:"Visibility",visibility:{unset:"unset / initial",visible:"Visible",hidden:"Hidden",collapse:"Collapse"}},dimensionControls:{panelTitle:"Dimension Controls",dimensionPanel:"Dimensions",dimensions:{width:"Width",height:"Height"},minPanel:"Minimum Dimensions",minDimensions:{width:"Min Width",height:"Min Height"},maxPanel:"Maximum Dimensions",maxDimensions:{width:"Max Width",height:"Max Height"}},spacingControls:{panelTitle:"Spacing Controls",panelLabel:"Spacing",marginLabel:"Margin",paddingLabel:"Padding"},flexBoxControls:{panelTitle:"Flexbox Controls",flexWrapLabel:"Flex Wrap",flexWrapNone:"No Wrap",flexWrapWrap:"Wrap",flexWrapReverse:"Reverse",alignmentPanel:"Alignment",gapPanel:"Gap"},flexItemControls:{panelTitle:"Flex Item Controls",flexGrow:"Grow",flexShrink:"Shrink",flexBasis:"Basis",flexBasisPlaceholder:"Enter value",order:"Order"},gridControls:{panelTitle:"Grid Controls",templateMode:"Template Mode",simplePanel:{title:"Simple",description:"In Simple mode, you can define the number of columns. All columns equally divide the total available width.",columns:"Columns",columnsClear:"Clear Columns",columnSpan:"Use %1$s as column width",columnUnit:"Unit",rows:"Rows",rowsClear:"Clear Rows",rowSpan:"Use %1$s as row height",rowUnit:"Unit"},tracksPanel:{title:"Tracks",description:"In Tracks mode, you can define the exact track sizes using any valid CSS Grid value.",columns:{label:"Columns",clear:"Clear Columns",size:"Column Sizes",addPlaceholder:"Add track or [line names]",addToken:"Add column size",addLabel:"Add [line name]"},rows:{label:"Rows",clear:"Clear Rows",size:"Row Sizes",addPlaceholder:"Add track or [line names]",addToken:"Add row size",addLabel:"Add [line name]"}},gapPanel:{title:"Gap"},areasPanel:{title:"Grid Template Areas",sizeHint:"Grid Size: %1$d columns x %2$d rows",editLarge:"Edit in larger view",modalTitle:"Edit Grid Template Areas",noticePanel:{mismatchText:"Templates areas (%1$dx%2$d) do not match current tracks (%3$dx%4$d)",resizeToTracks:"Resize areas to match tracks",growTracksToAreas:"Grow tracks to match areas",shrinkTracks:{button:"Shrink tracks to areas",warning:"Shrinking tracks may remove named lines please review afterwards.",confirm:"Shrink tracks",cancel:"Cancel",heading:"Remove named lines?",description:"Shrinking tracks will drop line names (e.g. [sidebar-start]). This can change template references. Continue?"}}}},gridItemsControls:{panelTitle:"Grid Item Controls",simplePanel:{title:"Simple",columnStart:"Column Start",columnStartHelp:"%1$d columns",columnSpan:"Column Span",columnSpanHelp:"Max updates with start",rowStart:"Row Start",rowStartHelp:"%1$d rows",rowSpan:"Row Span",rowSpanHelp:"Max updates with start"},tracksPanel:{title:"Tracks",hasAreasNotice:"This item uses a named grid area. Line-based placement is disabled.",namedLineMismatch:"No named lines are defined in the parent grid.",zeroInvalid:"0 isn\u2019t a valid grid line. Use 1..N or negative indices like -1",columns:{legend:"Columns",trackStartMode:"Start uses",trackStartModeNamed:"Named Line",trackStartModeNumber:"Line Number",trackEndMode:"End uses",trackEndModeSpan:"Span",trackEndModeEnd:"End",startNumber:"Line Number",startNumberHelp:"Positive or negative line number",startNamed:"Named Line",startNamedHelp:"Named lines from parent grid template",spanNumber:"Span",spanNumberHelp:"Max updates with start",endAuto:"Auto",endAutoHelp:"Automatically size based on start/span",endNamed:"Named Line",endNamedHelp:"Named lines from parent grid template",endNumber:"Line Number",endNumberHelp:"Positive or negative line number"},rows:{legend:"Rows",trackStartMode:"Start uses",trackStartModeNamed:"Named Line",trackStartModeNumber:"Line Number",trackEndMode:"End uses",trackEndModeSpan:"Span",trackEndModeEnd:"End",startNumber:"Line Number",startNumberHelp:"Positive or negative line number",startNamed:"Named Line",startNamedHelp:"Named lines from parent grid template",spanNumber:"Span",spanNumberHelp:"Max updates with start",endAuto:"Auto",endAutoHelp:"Automatically size based on start/span",endNamed:"Named Line",endNamedHelp:"Named lines from parent grid template",endNumber:"Line Number",endNumberHelp:"Positive or negative line number"}},areasPanel:{title:"Areas",gridAreaLabel:"Named area (grid-area)",gridAreaNone:"\u2014 None \u2014",gridAreaHelp:"Setting a named area overrides row/column placement."},alignmentPanel:{title:"Alignment"},orderPanel:{title:"Order",label:"Order"}},positioningControls:{panelTitle:"Positioning Controls",position:{label:"Position",help:"Controls the positioning of the element.",values:{unset:"unset / initial",static:"Static",relative:"Relative",absolute:"Absolute",fixed:"Fixed",sticky:"Sticky"}},coordinates:{label:"Coordinates",help:"Set the coordinates for the element. Works with relative, absolute, fixed, and sticky positioning.",top:"Top",right:"Right",bottom:"Bottom",left:"Left",useCustom:"Use custom values (e.g auto, calc)"},zIndex:{label:"Z-Index",help:"Controls the stack order of the element. Elements with a higher z-index cover those with a lower one."}},flexDirection:{label:"Flex Direction",row:"Row",rowReverse:"Row Reverse",column:"Column",columnReverse:"Column Reverse"},justifyControls:{label:"Justify Content",start:"Start",end:"End",center:"Center",spaceAround:"Space Around",spaceBetween:"Space Between",spaceEvenly:"Space Evenly"},alignControls:{label:"Align Items",start:"Start",end:"End",center:"Center",stretch:"Stretch",baseline:"Baseline",spaceAround:"Space Around",spaceBetween:"Space Between",spaceEvenly:"Space Evenly"},customSelectControl:{defaultText:"choose..."},dimensionInputGroup:{label:"Dimensions",labelPre:"%1$s Dimensions",width:"Width",height:"Height",useCustom:"Use custom values (e.g auto, calc)"},directionalInputGroup:{label:"Directions",top:"Top",right:"Right",bottom:"Bottom",left:"Left",useCustom:"Use custom values (e.g auto, calc)"},gapControls:{label:"Gaps",rowLabel:"Row Gap",switchToSingle:"Switch to Single Gap",switchToDual:"Switch to Dual Gap",columnLabel:"Column Gap",useCustom:"Use custom values (e.g auto, calc)"},gridAxisAside:{label:"Grid Axis",horizontal:"Horizontal",vertical:"Vertical",pip:{noValue:"No value set",valueHere:"Value matches this panel",valueElsewhere:"Value set in %s panel",valueRaw:"Value set (unrecognised format)"},clearRows:"Clear Rows",clearColumns:"Clear Columns"},panelToggle:{label:"Panel"},token:{expand:"Edit token",collapse:"Close editor",remove:"Remove",moveLeft:"Move left",moveRight:"Move right"},tokenGrid:{title:"Cells",clear:"Clear",sizeHint:"Cells: %1$d columns x %2$d rows",tokenExpand:"Edit cell",tokenCollapse:"Close editor",tokenRemove:"Clear cell",tokenMoveLeft:"Previous cell",tokenMoveRight:"Next cell",addColumn:"Add column",removeColumn:"Remove column",addRow:"Add row",removeRow:"Remove row"},tokenEditor:{add:"Add",addToken:"Add token",addLineNames:"Add line names",listAriaLabel:"List of tokens",moveLeft:"Move left",moveRight:"Move right",remove:"Remove",expand:"Edit token",collapse:"Close editor"},tokenGridNotice:{mismatchText:"Cells (%1$dx%2$d) do not match current dimensions (%3$dx%4$d)",resizeToTracks:"Resize cells to match dimensions",growTracksToAreas:"Grow dimensions to match cells",shrinkTracks:{button:"Shrink dimensions to cells",warning:"Shrinking dimensions may remove columns/rows. Please review afterwards.",confirm:"Shrink dimensions",cancel:"Cancel",heading:"Remove rows/columns?",description:"Shrinking dimensions will drop rows/columns. Continue?"}}};var Rt="costered-blocks";function Q0(e){if(typeof e=="string")return(0,Ue.__)(e,Rt);if(Array.isArray(e))return e.map(Q0);if(e&&typeof e=="object"){let t={};for(let[o,r]of Object.entries(e))t[o]=Q0(r);return t}return e}var f=Q0(De);var l0=x(G()),_=x(D());var Nt=({size:e=24,...t})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t},React.createElement("path",{d:"M11.271,12.013l0,-1.784c0,-0.403 0.327,-0.729 0.729,-0.729c0.402,0 0.729,0.326 0.729,0.729l-0,1.784l0.213,-0.214c0.284,-0.284 0.746,-0.284 1.03,0c0.284,0.285 0.284,0.746 0,1.031l-1.457,1.457c-0.137,0.137 -0.321,0.213 -0.515,0.213c-0.194,-0 -0.378,-0.076 -0.515,-0.213l-1.457,-1.457c-0.284,-0.285 -0.284,-0.746 -0,-1.031c0.284,-0.284 0.746,-0.284 1.03,0l0.213,0.214Z"}),React.createElement("path",{d:"M3.199,19.503l0,-2.001c0,-0.994 0.807,-1.8 1.801,-1.8l14,-0c0.994,-0 1.801,0.806 1.801,1.8l-0,2.001c-0,0.993 -0.807,1.8 -1.801,1.8l-14,-0c-0.994,-0 -1.801,-0.807 -1.801,-1.8Zm1.6,-0c0,0.11 0.09,0.2 0.201,0.2l14,-0c0.111,-0 0.201,-0.09 0.201,-0.2l-0,-2.001c-0,-0.111 -0.09,-0.2 -0.201,-0.2l-14,-0c-0.111,-0 -0.201,0.089 -0.201,0.2l0,2.001Z"}),React.createElement("path",{d:"M12.701,6.498l-0,-2.001c-0,-0.993 0.806,-1.8 1.8,-1.8l4.499,0c0.994,0 1.801,0.807 1.801,1.8l-0,2.001c-0,0.994 -0.807,1.8 -1.801,1.8l-4.499,0c-0.994,0 -1.8,-0.806 -1.8,-1.8Zm1.6,0c-0,0.111 0.089,0.2 0.2,0.2l4.499,0c0.111,0 0.201,-0.089 0.201,-0.2l-0,-2.001c-0,-0.11 -0.09,-0.2 -0.201,-0.2l-4.499,0c-0.111,0 -0.2,0.09 -0.2,0.2l-0,2.001Z"}),React.createElement("path",{d:"M3.199,6.498l0,-2.001c0,-0.993 0.807,-1.8 1.801,-1.8l4.499,0c0.994,0 1.8,0.807 1.8,1.8l0,2.001c0,0.994 -0.806,1.8 -1.8,1.8l-4.499,0c-0.994,0 -1.801,-0.806 -1.801,-1.8Zm1.6,0c0,0.111 0.09,0.2 0.201,0.2l4.499,0c0.111,0 0.2,-0.089 0.2,-0.2l0,-2.001c0,-0.11 -0.089,-0.2 -0.2,-0.2l-4.499,0c-0.111,0 -0.201,0.09 -0.201,0.2l0,2.001Z"})),ee=Nt;var Bt=({size:e=24,...t})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t},React.createElement("path",{fill:"currentColor",d:"M5 11q-.825 0-1.412-.587T3 9V5q0-.825.588-1.412T5 3h4q.825 0 1.413.588T11 5v4q0 .825-.587 1.413T9 11zm0 10q-.825 0-1.412-.587T3 19v-4q0-.825.588-1.412T5 13h4q.825 0 1.413.588T11 15v4q0 .825-.587 1.413T9 21zm10-10q-.825 0-1.412-.587T13 9V5q0-.825.588-1.412T15 3h4q.825 0 1.413.588T21 5v4q0 .825-.587 1.413T19 11zm0 10q-.825 0-1.412-.587T13 19v-4q0-.825.588-1.412T15 13h4q.825 0 1.413.588T21 15v4q0 .825-.587 1.413T19 21z"})),te=Bt;var Lt=({size:e=24,...t})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t},React.createElement("path",{d:"M11.271,12.013l0,-1.784c0,-0.403 0.327,-0.729 0.729,-0.729c0.402,0 0.729,0.326 0.729,0.729l-0,1.784l0.213,-0.214c0.284,-0.284 0.746,-0.284 1.03,0c0.284,0.285 0.284,0.746 0,1.031l-1.457,1.457c-0.137,0.137 -0.321,0.213 -0.515,0.213c-0.194,-0 -0.378,-0.076 -0.515,-0.213l-1.457,-1.457c-0.284,-0.285 -0.284,-0.746 -0,-1.031c0.284,-0.284 0.746,-0.284 1.03,0l0.213,0.214Z"}),React.createElement("path",{d:"M20.801,4.497l-0,2.001c-0,0.994 -0.807,1.8 -1.801,1.8l-14,0c-0.994,0 -1.801,-0.806 -1.801,-1.8l0,-2.001c0,-0.993 0.807,-1.8 1.801,-1.8l14,0c0.994,0 1.801,0.807 1.801,1.8Zm-1.6,0c-0,-0.11 -0.09,-0.2 -0.201,-0.2l-14,0c-0.111,0 -0.201,0.09 -0.201,0.2l0,2.001c0,0.111 0.09,0.2 0.201,0.2l14,0c0.111,0 0.201,-0.089 0.201,-0.2l-0,-2.001Z"}),React.createElement("path",{d:"M11.299,17.502l0,2.001c0,0.993 -0.806,1.8 -1.8,1.8l-4.499,-0c-0.994,-0 -1.801,-0.807 -1.801,-1.8l0,-2.001c0,-0.994 0.807,-1.8 1.801,-1.8l4.499,-0c0.994,-0 1.8,0.806 1.8,1.8Zm-1.6,-0c0,-0.111 -0.089,-0.2 -0.2,-0.2l-4.499,-0c-0.111,-0 -0.201,0.089 -0.201,0.2l0,2.001c0,0.11 0.09,0.2 0.201,0.2l4.499,-0c0.111,-0 0.2,-0.09 0.2,-0.2l0,-2.001Z"}),React.createElement("path",{d:"M20.801,17.502l-0,2.001c-0,0.993 -0.807,1.8 -1.801,1.8l-4.499,-0c-0.994,-0 -1.8,-0.807 -1.8,-1.8l-0,-2.001c-0,-0.994 0.806,-1.8 1.8,-1.8l4.499,-0c0.994,-0 1.801,0.806 1.801,1.8Zm-1.6,-0c-0,-0.111 -0.09,-0.2 -0.201,-0.2l-4.499,-0c-0.111,-0 -0.2,0.089 -0.2,0.2l-0,2.001c-0,0.11 0.089,0.2 0.2,0.2l4.499,-0c0.111,-0 0.201,-0.09 0.201,-0.2l-0,-2.001Z"})),oe=Lt;var ne=(e="")=>(e+"").trim().split(/\s+(?![^(]*\))/).filter(Boolean).slice(0,2),re=(e="",t="")=>[e,t].filter(Boolean).join(" ").trim(),le=e=>e==null?"":String(e).trim();var je=x(D());function G0(e="",t={}){let{trim:o=!0,toLower:r=!1,toUpper:n=!1,toCapitalFirst:l=!1,toCapitalCase:s=!1,toCamelCase:p=!1,toDashes:w=!1,toSpaces:m=!1}=t,i=e;return typeof i!="string"&&(i=String(i)),o&&(i=i.trim()),r&&(i=i.toLowerCase()),n&&(i=i.toUpperCase()),l&&(i=i.charAt(0).toUpperCase()+i.slice(1)),s&&(i=i.replace(/\b\w/g,h=>h.toUpperCase())),p&&(i=i.replace(/[-_\s]+(.)?/g,(h,c)=>c?c.toUpperCase():"").replace(/^(.)/,h=>h.toLowerCase())),w&&(i=i.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()),m&&(i=i.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/[-_]+/g," ").toLowerCase()),i}function v0(e){let{value:t,onChange:o,label:r}=e,n=G0(r,{toCapitalFirst:!0,trim:!0,toSpaces:!0});return React.createElement(je.__experimentalUnitControl,{__next40pxDefaultSize:!0,label:n,value:t,onChange:o,placeholder:"0",style:{padding:"0 2px"},units:[{name:"rem",value:"rem",label:"rem"},{name:"px",value:"px",label:"px"},{name:"em",value:"em",label:"em"},{name:"%",value:"%",label:"%"},{name:"vw",value:"vw",label:"vw"},{name:"vh",value:"vh",label:"vh"}],isResettable:!0,allowReset:!0})}var ze=x(D());function se({value:e,onChange:t,label:o,placeholder:r="",help:n=""}){let l=G0(o,{toDashes:!0,toSpaces:!1});return React.createElement("div",{style:{padding:"0 2px"}},React.createElement(ze.TextControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:l,value:e,onChange:t,placeholder:r,help:n}))}function ae({attributes:e,clientId:t,updateBlockAttributes:o,blockName:r=null}){let{set:n}=X(o,t),l=y0(r,t),s=c0("gapMode",{blockName:l}),[p,w]=i0(s,"unit"),m=c0("gapInputMode",{blockName:l}),[i,h]=i0(m,"single"),c=e?.gap||"";(0,l0.useEffect)(()=>{i===void 0&&h(ne(c).length===2?"dual":"single")},[i,c]);let[u,a]=(0,l0.useMemo)(()=>{let P=ne(c);return[P[0]||"",P[1]||""]},[c]),d=(0,l0.useCallback)(P=>{let Z=le(P);if(i==="single")n("gap",Z||void 0);else{let V=re(Z,a);n("gap",V||void 0)}},[i,n,a]),C=(0,l0.useCallback)(P=>{let Z=le(P),V=re(u,Z);n("gap",V||void 0)},[n,u]),k=p==="unit"?v0:se,v=i==="single"?f.gapControls.label:f.gapControls.columnLabel,M=(0,l0.useCallback)(()=>{h(i==="single"?"dual":"single")},[i,h]),N=(0,l0.useCallback)(()=>{w(p==="unit"?"text":"unit")},[p,w]);return React.createElement(_.Flex,{direction:"column",className:"gap-controls"},React.createElement(_.FlexBlock,null,React.createElement(_.Flex,{align:"flex-end",gap:1},React.createElement(_.FlexBlock,null,React.createElement(_.Flex,{gap:0,direction:"row",align:"flex-end"},React.createElement(_.FlexItem,null,React.createElement(k,{label:v,value:i==="single"?c:u,onChange:d,allowReset:!0})),i==="dual"&&React.createElement(_.FlexItem,null,React.createElement(k,{label:f.gapControls.rowLabel,value:a,onChange:C,allowReset:!0})))),React.createElement(_.FlexItem,null,React.createElement(_.Button,{icon:i==="single"?oe:ee,label:i==="single"?f.gapControls.switchToDual:f.gapControls.switchToSingle,onClick:M,style:{marginBottom:"2px"},"aria-pressed":i==="dual"})))),React.createElement(_.FlexBlock,null),React.createElement(_.FlexBlock,null,React.createElement(_.ToggleControl,{label:f.gapControls.useCustom,checked:p==="text",onChange:N,__nextHasNoMarginBottom:!0})))}var n0=x(G()),N0=x(D()),Xe=x(x0());var H=x(G()),R0=x(D());var z=x(G()),W=x(D());function A0({index:e,value:t,isExpanded:o,onToggle:r,onRemove:n,onChange:l,onMoveLeft:s,onMoveRight:p,labels:w,emptyPlaceholder:m,floatingEditor:i=!1,popoverPlacement:h="bottom-start",popoverWidth:c}){let u=(0,z.useRef)(null),a=(0,z.useRef)(null),d=(0,z.useRef)("pointer"),C=(0,z.useCallback)(A=>{let T=A?.inputRef?.current||A||null;a.current=T},[]);(0,z.useEffect)(()=>{if(!(!o||!a.current)){if(d.current==="keyboard"){let A=a.current;A.focus?.({preventScroll:!0});let T=typeof A.value=="string"?A.value.length:0;typeof A.setSelectionRange=="function"&&A.setSelectionRange(T,T)}d.current="pointer"}},[o]);let k={expand:f.token.expand,collapse:f.token.collapse,remove:f.token.remove,moveLeft:f.token.moveLeft,moveRight:f.token.moveRight,...w},v=t&&t.trim().length?t:m??"",M=(0,z.useCallback)(A=>{A.stopPropagation(),n(e)},[e,n]),N=(0,z.useCallback)(()=>{d.current="pointer",r(e,!o)},[e,o,r]),P=(0,z.useCallback)(()=>{d.current="keyboard",r(e,!o)},[e,o,r]),Z=(0,z.useCallback)(A=>{A.key==="Enter"||A.key===" "?(A.preventDefault(),P()):A.key==="Escape"&&o&&(A.preventDefault(),r(e,!1))},[P,e,o,r]),V=React.createElement("div",{id:`costered-blocks--token--panel-${e}`,className:"costered-blocks--token--panel"},React.createElement(W.TextControl,{ref:C,value:t??"",placeholder:m??"",onChange:A=>l(e,A),onBlur:A=>l(e,A?.target?.value??""),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),React.createElement("div",{className:"costered-blocks--token--actions"},React.createElement(W.Tooltip,{text:k.moveLeft},React.createElement(W.Button,{icon:"arrow-left-alt2",onClick:()=>s(e),label:k.moveLeft,variant:"tertiary"})),React.createElement(W.Tooltip,{text:k.moveRight},React.createElement(W.Button,{icon:"arrow-right-alt2",onClick:()=>p(e),label:k.moveRight,variant:"tertiary"}))));return React.createElement("div",{className:`costered-blocks--token ${o?"is-expanded":""}`},React.createElement("div",{className:"costered-blocks--token--chip",ref:u},React.createElement("button",{type:"button",className:"costered-blocks--token--chipButton","aria-expanded":o,"aria-controls":`costered-token-panel-${e}`,onClick:N,onKeyDown:Z,title:o?k.collapse:k.expand},React.createElement("span",{className:"costered-blocks--token--chipText"},v)),React.createElement(W.Tooltip,{text:k.remove},React.createElement(W.Button,{icon:"no-alt",label:k.remove,onClick:M,variant:"tertiary",className:"costered-blocks--token--remove"}))),!i&&o&&V,i&&o&&React.createElement(W.Popover,{className:"costered-blocks--token--popover",anchor:u.current,placement:h,onClose:()=>r(e,!1),focusOnMount:"firstElement",expandOnMobile:!0},React.createElement("div",{className:"costered-blocks--token--popoverInner",style:c?{width:c}:void 0},V)))}function We({matrix:e,columnData:t,rowData:o,emptyToken:r=".",labels:n,setCell:l,resize:s,onEditingChange:p}){let w=Number(e?.[0]?.length??t??0),m=Math.max(1,Number.isFinite(t)?w:parseInt(t,10)||0),i=Math.max(1,Number.isFinite(o)?o:parseInt(o,10)||0),[h,c]=(0,H.useState)(null),u=(0,H.useRef)(null),a=(0,H.useCallback)((T,g)=>g*m+T,[m]),d=(0,H.useCallback)(T=>{let g=T%m,b=Math.floor(T/m);return[g,b]},[m]);(0,H.useEffect)(()=>{p?.(h!=null)},[h,p]),(0,H.useEffect)(()=>{c(T=>{if(T==null)return T;let[g,b]=d(T);return g<m&&b<i?T:null})},[m,i,d]);let C=(0,H.useCallback)((T,g)=>{c((typeof g=="boolean"?g:h!==T)?T:null)},[h]),k=(0,H.useCallback)(T=>{let[g,b]=d(T);g<=0||c(a(g-1,b))},[d,a]),v=(0,H.useCallback)(T=>{let[g,b]=d(T);g>=m-1||c(a(g+1,b))},[d,a,m]),M=Number(t)||0,N=Number(o)||0,P=(0,H.useCallback)(()=>s(t+1,o),[s,t,o]),Z=(0,H.useCallback)(()=>s(Math.max(1,t-1),o),[s,t,o]),V=(0,H.useCallback)(()=>s(t,o+1),[s,t,o]),A=(0,H.useCallback)(()=>s(t,Math.max(1,o-1)),[s,t,o]);return React.createElement("div",{className:"costered-blocks--token-grid--area",ref:u},React.createElement("div",{className:"costered-blocks--token-grid--row costered-blocks--token-grid--row-head"},React.createElement("div",{className:"costered-blocks--token-grid--cell costered-blocks--token-grid--cell-corner"})," ",Array.from({length:m}).map((T,g)=>React.createElement("div",{className:"costered-blocks--token-grid--cell costered-blocks--token-grid--cell-head",key:`col-${g}`},React.createElement("div",{key:`header-col-${g}`,className:"costered-blocks--token-grid--controls"},React.createElement(R0.Button,{onClick:Z,disabled:M<=1,variant:"tertiary",icon:"minus",label:n.removeColumn}),React.createElement(R0.Button,{onClick:P,variant:"tertiary",icon:"plus",label:n.addColumn}))))),e.map((T,g)=>React.createElement("div",{key:`row-${g}`,className:"costered-blocks--token-grid--row"},React.createElement("div",{className:"costered-blocks--token-grid--cell costered-blocks--token-grid--cell-head"},React.createElement("div",{className:"costered-blocks--token-grid--controls"},React.createElement(R0.Button,{onClick:A,disabled:N<=1,variant:"tertiary",icon:"minus",label:n.removeRow}),React.createElement(R0.Button,{onClick:V,variant:"tertiary",icon:"plus",label:n.addRow}))),T.map((b,O)=>{let y=a(O,g),B=b===r?"":b;return React.createElement("div",{key:`cell-${O}-${g}`,className:"costered-blocks--token-grid--cell"},React.createElement(A0,{index:y,value:B,isExpanded:h===y,onToggle:C,onRemove:F=>{let[j,p0]=d(F);l(j,p0,""),c(null)},onChange:(F,j)=>{let[p0,V0]=d(F);l(p0,V0,j)},onMoveLeft:k,onMoveRight:v,emptyPlaceholder:r,floatingEditor:!0,popoverWidth:u.current?.offsetWidth??void 0,labels:{expand:n.tokenExpand,collapse:n.tokenCollapse,remove:n.tokenRemove,moveLeft:n.tokenMoveLeft,moveRight:n.tokenMoveRight}}))}))))}var Ke=x(x0()),Je=x(Y()),u0=x(G()),q=x(D());function Ye({clientId:e,columnData:t,rowData:o,gridMatrix:{resize:r},labels:n=f.tokenGridNotice}){let{updateBlockAttributes:l}=(0,Je.useDispatch)("core/block-editor"),{set:s}=X(l,e),{trackColumnCount:p,trackRowCount:w}=S0(e),m=o0(e),[i,h]=(0,u0.useState)(!1),c=y=>y&&typeof y=="object"?y.count??0:Number(y)||0,u=(y,B)=>y&&typeof y=="object"&&y.unit?y.unit:B,a=Number(t)||0,d=Number(o)||0,C=c(p),k=c(w),v=u(p,S),M=u(w,"auto"),N=a!==C,P=d!==k,Z=a<C||d<k,V=(0,u0.useCallback)(()=>{r(C||a||1,k||d||1)},[r,C,k,a,d]),A=a>C,T=d>k,g=(0,u0.useCallback)(()=>{let y=m?.columns?.template||"",B=m?.rows?.template||"",F=A?j0(y,a,v):y,j=T?j0(B,d,M):B;F===y&&j===B||(s("gridTemplateColumns",F),s("gridTemplateRows",j))},[a,d,v,M,m,s]),b=(0,u0.useCallback)(()=>{let y=z0(m?.columns?.template||"",a),B=z0(m?.rows?.template||"",d);s("gridTemplateColumns",y),s("gridTemplateRows",B)},[a,d,m,s]),O=(0,u0.useCallback)(()=>{/\[[^\]]+]/.test(m?.columns?.template||"")||/\[[^\]]+]/.test(m?.rows?.template||"")?h(!0):b()},[m,b]);return!N&&!P?null:React.createElement(q.Flex,{direction:"column",gap:2,className:"costered-blocks--grid-area-notices"},React.createElement(q.Notice,{status:"info",isDismissible:!1},(0,Ke.sprintf)(n.mismatchText,a,d,C,k),React.createElement(q.Flex,{direction:"column",gap:2,style:{marginTop:8}},React.createElement(q.FlexBlock,null,React.createElement(q.Button,{variant:"secondary",onClick:V},n.resizeToTracks)),A||T&&React.createElement(q.FlexBlock,null,React.createElement(q.Button,{variant:"secondary",onClick:g,disabled:!A&&!T},n.growTracksToAreas)),Z&&React.createElement(q.FlexBlock,null,React.createElement(q.Button,{variant:"secondary",isDestructive:!0,onClick:O},n.shrinkTracks.button)))),Z&&React.createElement(q.Notice,{status:"warning",isDismissible:!1,className:"costered-blocks--grid-area-notice--shrink-warning"},React.createElement("span",null,n.shrinkTracks.warning)),React.createElement(q.__experimentalConfirmDialog,{isOpen:i,onConfirm:()=>{b(),h(!1)},onCancel:()=>h(!1),confirmButtonText:n.shrinkTracks.confirm,cancelButtonText:n.shrinkTracks.cancel},React.createElement(q.__experimentalHeading,null,n.shrinkTracks.heading),React.createElement("p",null,n.shrinkTracks.description)))}function Z0({clientId:e,labels:t={}}){let o=(0,n0.useMemo)(()=>({...f.tokenGrid,...t.tokenGrid}),[t]),r=(0,n0.useMemo)(()=>({...f.tokenGridNotice,...t.tokenGridNotice}),[t]),{applyMatrixToStore:n,seedFromStore:l,trackColumnCount:s,trackRowCount:p}=S0(e),w=(0,n0.useMemo)(()=>l("."),[l]),[m,i]=(0,n0.useState)(!1),h=(0,n0.useRef)(null),c=(0,n0.useCallback)(P=>{h.current&&clearTimeout(h.current),P?i(!0):h.current=setTimeout(()=>i(!1),60)},[]),u=J0({seedMatrix:w,emptyToken:".",onApply:n,suspendResync:m}),{matrix:a,setCell:d,resize:C,clear:k}=u,v=a[0]?.length||0,M=a.length||0;return React.createElement(N0.Flex,{direction:"column",gap:2,className:"costered-blocks--token-grid-component"},((s||0)!==v||(p||0)!==M)&&React.createElement(Ye,{clientId:e,columnData:v,rowData:M,gridMatrix:u,labels:r}),React.createElement(N0.Flex,{direction:"row",gap:2,align:"center",justify:"space-between",className:"costered-blocks--token-grid-header"},React.createElement(N0.FlexItem,null,React.createElement("span",{className:"costered-blocks--token-grid-help"},(0,Xe.sprintf)(o.sizeHint,v,M)))),React.createElement(We,{matrix:a,columnData:v,rowData:M,emptyToken:".",labels:o,setCell:d,resize:C,onEditingChange:c}))}var r0=x(G()),O0=x(D());var F0=x(G()),K=x(D());function Pt({value:e,onChange:t,label:o="",isBlock:r=!0,children:n,...l}){let s=(0,F0.useCallback)(p=>t(p),[t]);return React.createElement(K.__experimentalToggleGroupControl,{className:`costered-blocks--custom-toggle-group ${e?"has-selection":"is-empty"}`,label:o,value:e,onChange:s,isBlock:r,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,isDeselectable:!0,...l},n)}function Et({value:e,label:t,disabled:o}){return React.createElement(K.__experimentalToggleGroupControlOption,{className:"costered-blocks--custom-toggle-group--text-option",value:e,label:t,disabled:o})}function It({value:e,icon:t,label:o,showTooltip:r=!0,disabled:n}){return React.createElement(K.__experimentalToggleGroupControlOptionIcon,{className:"costered-blocks--custom-toggle-group--icon-option",value:e,icon:t,"aria-label":o,label:o,showTooltip:r,disabled:n})}function Gt({value:e,icon:t,label:o,disabled:r}){return React.createElement(K.__experimentalToggleGroupControlOption,{className:"costered-blocks--custom-toggle-group--combined-option",value:e,"aria-label":o,label:React.createElement(K.Flex,{direction:"column",gap:0,align:"center",style:{paddingBlock:"0.5em"}},React.createElement(K.FlexItem,null,t),React.createElement(K.FlexItem,null,o)),disabled:r})}var q0=(0,F0.memo)(Pt);q0.TextOption=Et;q0.IconOption=It;q0.CombinedOption=Gt;var B0=q0;function Zt({value:e,onChange:t,panels:o,panelProps:r={},label:n=f.panelToggle.label,forceActive:l=!1,className:s,children:p,...w}){let m=r0.Children.toArray(p).map(d=>d?.props?.value).filter(d=>typeof d=="string"&&d.length>0),i=m.length>0?m:Object.keys(o||{}),h=i[0]??null;(0,r0.useEffect)(()=>{i.length&&(!e||!i.includes(e))&&t?.(h)},[e,h,i.join("|")]);let c=(0,r0.useCallback)(d=>{let C=d??null;l&&C===null||t?.(C)},[t,l]),u=e?o?.[e]:null,a=typeof r=="function"?e?r(e):{}:r;return React.createElement(O0.Flex,{direction:"column",gap:2,className:s,...w},React.createElement(B0,{label:n,value:e||void 0,onChange:c},p),u?React.createElement(O0.FlexBlock,null,React.createElement(r0.Suspense,{fallback:null},React.createElement(u,{...a}))):null)}var _0=(0,r0.memo)(Zt);_0.TextOption=B0.TextOption;_0.IconOption=B0.IconOption;_0.CombinedOption=B0.CombinedOption;var H0=_0;var R=x(G()),tt=x(Y()),U=x(D()),ie=x(x0());var L0=x(D()),Qe=x(x0());function k0({axis:e,canClear:t=!1,onClear:o,active:r,owner:n=null,here:l=null,label:s}){let p=s||(e==="columns"?f.gridAxisAside.clearColumns:f.gridAxisAside.clearRows),w=!!t,m=typeof r=="boolean"?r:w&&n&&l&&n===l,h=w?m?"here":w&&n&&l&&n!=="raw"&&n!==l&&!m?"elsewhere":"none":"none",c=h==="none"?f.gridAxisAside.pip.noValue:h==="here"?f.gridAxisAside.pip.valueHere:n==="raw"?f.gridAxisAside.pip.valueRaw:(0,Qe.sprintf)(f.gridAxisAside.pip.valueElsewhere,ye(n));return React.createElement("div",{className:`costered-blocks--grid-axis-aside ${h==="here"?"is-owned-here":""} ${h==="elsewhere"?"is-elsewhere":""}`,"data-state":h,"data-owner":n||"none","data-here":l||"none","aria-label":e},React.createElement(L0.Tooltip,{text:c},React.createElement("span",{className:"costered-blocks--grid-axis-aside--pip"})),React.createElement(L0.Tooltip,{text:p},React.createElement(L0.Button,{icon:"trash",label:p,onClick:o,disabled:!w,variant:"tertiary",className:"costered-blocks--grid-axis-aside__clear"})))}var et={mode:"raw",template:null,normalised:"",simple:null,tracks:null};function ot({clientId:e}){if(!e)return null;let{updateBlockAttributes:t}=(0,tt.useDispatch)("core/block-editor"),{set:o,unset:r}=X(t,e),n=o0(e)||{},l=n.columns??et,s=n.rows??et,[p,w]=(0,R.useState)(l.simple?.count??0),[m,i]=(0,R.useState)(l.simple?.unit??S),[h,c]=(0,R.useState)((l.simple?.unit??S)===S),[u,a]=(0,R.useState)(s.simple?.count??0),[d,C]=(0,R.useState)(s.simple?.unit??S),[k,v]=(0,R.useState)((s.simple?.unit??S)===S),M=l?.normalised??"",N=s?.normalised??"";(0,R.useEffect)(()=>{w(l.simple?.count??0),i(l.simple?.unit??S),c((l.simple?.unit??S)===S)},[M]),(0,R.useEffect)(()=>{a(s.simple?.count??0),C(s.simple?.unit??S),v((s.simple?.unit??S)===S)},[N]);let P=(0,R.useMemo)(()=>h?S:m||S,[h,m]),Z=(0,R.useMemo)(()=>k?S:d||S,[k,d]),V=f0(p,P),A=f0(u,Z),T=(0,R.useCallback)((L,E)=>{let C0=f0(L,E);C0==null?r("gridTemplateColumns"):o("gridTemplateColumns",C0)},[o,r]),g=(0,R.useCallback)((L,E)=>{let C0=f0(L,E);C0==null?r("gridTemplateRows"):o("gridTemplateRows",C0)},[o,r]),b=(0,R.useCallback)(L=>{let E=typeof L=="number"?L:parseInt(L||"0",10);w(E),T(E,h?S:m)},[h,m,T]),O=(0,R.useCallback)(L=>{let E=typeof L=="number"?L:parseInt(L||"0",10);a(E),g(E,k?S:d)},[k,d,g]),y=(0,R.useCallback)(L=>{c(L);let E=L?S:m||S;!L&&!m&&i(E),T(p,E)},[p,m,T]),B=(0,R.useCallback)(L=>{v(L);let E=L?S:d||S;!L&&!d&&C(E),g(u,E)},[u,d,g]),F=(0,R.useCallback)(L=>{let E=(L||"").trim();i(E),T(p,h?S:E||S)},[p,h,T]),j=(0,R.useCallback)(L=>{let E=(L||"").trim();C(E),g(u,k?S:E||S)},[u,k,g]),p0=(0,R.useCallback)(()=>{w(0),r("gridTemplateColumns")},[r]),V0=(0,R.useCallback)(()=>{a(0),r("gridTemplateRows")},[r]);return React.createElement(U.Flex,{direction:"column",gap:6},React.createElement(U.FlexBlock,{className:"costered-blocks--grid-panel-simple--description"},f.gridControls.simplePanel.description),React.createElement(U.Flex,{direction:"column",gap:3,className:"costered-blocks--grid-panel-simple--axis-controls"},React.createElement(U.Flex,{direction:"row",justify:"space-between",align:"center"},React.createElement("span",{className:"costered-blocks--grid-panel-simple--axis-label"},f.gridControls.simplePanel.columns),React.createElement(k0,{axis:"columns",canClear:!!l?.template,onClear:p0,owner:n.activePane.columns,here:"simple",label:f.gridControls.simplePanel.columnsClear})),React.createElement(U.RangeControl,{min:0,max:12,step:1,value:p,onChange:b,className:"costered-blocks--grid-columns-simple--axis-control",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),React.createElement(U.ToggleControl,{label:(0,ie.sprintf)(f.gridControls.simplePanel.columnSpan,S),checked:h,onChange:y,__nextHasNoMarginBottom:!0}),!h&&React.createElement(v0,{label:f.gridControls.simplePanel.columnUnit,value:m,onChange:F})),React.createElement(U.Flex,{direction:"column",gap:2,className:"costered-blocks--grid-panel-simple--axis-controls"},React.createElement(U.Flex,{direction:"row",justify:"space-between",align:"center"},React.createElement("span",{className:"costered-blocks--grid-panel-simple--axis-label"},f.gridControls.simplePanel.rows),React.createElement(k0,{axis:"rows",canClear:!!s.template,onClear:V0,owner:n.activePane.rows,here:"simple",label:f.gridControls.simplePanel.rowsClear})),React.createElement(U.RangeControl,{min:0,max:12,step:1,value:u,onChange:O,className:"costered-blocks--grid-rows-simple--axis-control",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),React.createElement(U.ToggleControl,{label:(0,ie.sprintf)(f.gridControls.simplePanel.rowSpan,S),checked:k,onChange:B,__nextHasNoMarginBottom:!0}),!k&&React.createElement(v0,{label:f.gridControls.simplePanel.rowUnit,value:d,onChange:j})))}var I=x(G()),nt=x(Y()),e0=x(D());var J=x(G()),d0=x(D());function ce({tokens:e,onAdd:t,onEdit:o,onRemove:r,onMove:n,labels:l,allowLineNames:s=!0}){let p=(0,J.useMemo)(()=>({...f.tokenEditor,...l}),[l]),[w,m]=(0,J.useState)(""),[i,h]=(0,J.useState)(null),c=(0,J.useCallback)(()=>{let v=String(w||"").trim();v&&(t(v),m(""),h(null))},[w,t]),u=(0,J.useCallback)(()=>{let v=String(w||"").trim();v&&(t(`[${v}]`),m(""),h(null))},[w,t]),a=(0,J.useCallback)((v,M)=>{h(M?v:null)},[]),d=(0,J.useCallback)((v,M)=>{o(v,M)},[o]),C=(0,J.useCallback)(v=>{r(v),h(M=>M===v?null:M>v?M-1:M)},[r]),k=(0,J.useCallback)((v,M)=>{n(v,M),h(N=>N===v?v+M:N===v+M?v:N)},[n]);return React.createElement("div",{className:"costered-blocks--token-editor",role:"list","aria-label":p.listAriaLabel},React.createElement("div",{className:"costered-blocks--token-editor--list"},e.map((v,M)=>React.createElement(A0,{key:`token-${M}`,index:M,value:v,isExpanded:i===M,onToggle:a,onRemove:C,onChange:d,onMoveLeft:N=>k(N,-1),onMoveRight:N=>k(N,1),labels:p}))),React.createElement("div",{className:"costered-blocks--token-editor--add"},React.createElement(d0.TextControl,{placeholder:p.addPlaceholder,value:w,onChange:m,onKeyDown:v=>{v.key==="Enter"&&c()},__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),s?React.createElement(d0.Flex,{className:"costered-blocks--token-editor--add-options",gap:0,align:"center"},React.createElement(d0.Button,{icon:"editor-code",onClick:c,label:p.addToken}),React.createElement(d0.Button,{icon:"tag",onClick:u,label:p.addLabel})):React.createElement(d0.Button,{variant:"secondary",onClick:c},p.addToken)))}function rt({clientId:e}){if(!e)return null;let{updateBlockAttributes:t}=(0,nt.useDispatch)("core/block-editor"),{set:o,unset:r}=X(t,e),n=o0(e),l=n?.columns,s=n?.rows,p=(0,I.useMemo)(()=>l?l.tracks?.length?l.tracks:l.template?[String(l.template)]:[]:[],[l]),w=(0,I.useMemo)(()=>s?s.tracks?.length?s.tracks:s.template?[String(s.template)]:[]:[],[s]),[m,i]=(0,I.useState)(p),[h,c]=(0,I.useState)(w),u=l&&(l.normalised??a0(l.template||""))||"",a=s&&(s.normalised??a0(s.template||""))||"";(0,I.useEffect)(()=>{i(p)},[u]),(0,I.useEffect)(()=>{c(w)},[a]);let d=(0,I.useCallback)(g=>{let b=g.map(O=>String(O||"").trim()).filter(Boolean);return b.length?b.join(" "):null},[]),C=(0,I.useCallback)(g=>{let b=d(g);b==null?r("gridTemplateColumns"):o("gridTemplateColumns",b)},[d,o,r]),k=(0,I.useCallback)(g=>{let b=d(g);b==null?r("gridTemplateRows"):o("gridTemplateRows",b)},[d,o,r]),v=(0,I.useMemo)(()=>{let g=d(m);return!!l?.template&&a0(g||"")===u},[l?.template,u,m,d]),M=(0,I.useMemo)(()=>{let g=d(h);return!!s?.template&&a0(g||"")===a},[s?.template,a,h,d]),N=(0,I.useCallback)((g,b,O,y)=>{let B=String(y||"").trim();if(!B)return;let F=[...g,B];b(F),O(F)},[]),P=(0,I.useCallback)((g,b,O,y,B)=>{let F=g.slice();F[y]=B,b(F),O(F)},[]),Z=(0,I.useCallback)((g,b,O,y)=>{let B=g.slice();B.splice(y,1),b(B),O(B)},[]),V=(0,I.useCallback)((g,b,O,y,B)=>{let F=y+B;if(F<0||F>=g.length)return;let j=g.slice(),p0=j.splice(y,1)[0];j.splice(F,0,p0),b(j),O(j)},[]),A=(0,I.useCallback)(()=>{i([]),r("gridTemplateColumns")},[r]),T=(0,I.useCallback)(()=>{c([]),r("gridTemplateRows")},[r]);return React.createElement(e0.Flex,{direction:"column",gap:6},React.createElement(e0.FlexBlock,null,f.gridControls.tracksPanel.description),React.createElement(e0.FlexBlock,null,React.createElement(e0.Flex,{direction:"column",gap:3,className:"costered-blocks--grid-panel-tracks--axis-controls"},React.createElement(e0.Flex,{direction:"row",justify:"space-between",align:"center"},React.createElement("span",{className:"costered-blocks--grid-panel-tracks--axis-label"},f.gridControls.tracksPanel.columns.label),React.createElement(k0,{axis:"columns",canClear:!!l?.template,onClear:A,owner:n.activePane.columns,here:"tracks",label:f.gridControls.tracksPanel.columns.clear})),React.createElement(ce,{tokens:m,setTokens:i,onAdd:g=>N(m,i,C,g),onEdit:(g,b)=>P(m,i,C,g,b),onRemove:g=>Z(m,i,C,g),onMove:(g,b)=>V(m,i,C,g,b),labels:{addPlaceholder:f.gridControls.tracksPanel.columns.addPlaceholder,addToken:f.gridControls.tracksPanel.columns.addToken,addLabel:f.gridControls.tracksPanel.columns.addLabel}}))),React.createElement(e0.FlexBlock,null,React.createElement(e0.Flex,{direction:"column",gap:3,className:"costered-blocks--grid-panel-tracks--axis-controls"},React.createElement(e0.Flex,{direction:"row",gap:2,justify:"space-between",align:"center"},React.createElement(e0.FlexBlock,null,React.createElement("span",{className:"costered-blocks--grid-panel-tracks--axis-label"},f.gridControls.tracksPanel.rows.label)),React.createElement(k0,{axis:"rows",canClear:!!s?.template,onClear:T,owner:n.activePane.rows,here:"tracks",label:f.gridControls.tracksPanel.rows.clear})),React.createElement(ce,{tokens:h,setTokens:c,onAdd:g=>N(h,c,k,g),onEdit:(g,b)=>P(h,c,k,g,b),onRemove:g=>Z(h,c,k,g),onMove:(g,b)=>V(h,c,k,g,b),labels:{addPlaceholder:f.gridControls.tracksPanel.rows.addPlaceholder,addToken:f.gridControls.tracksPanel.rows.addToken,addLabel:f.gridControls.tracksPanel.rows.addLabel}}))))}var Ft=()=>{let{selectedBlock:e,clientId:t}=Y0(),{attributes:o,name:r}=e;return e?React.createElement(qt,{clientId:t,attributes:o,name:r}):null},qt=({clientId:e,attributes:t,name:o})=>{let{updateBlockAttributes:r}=(0,lt.useDispatch)("core/block-editor"),[n,l]=(0,b0.useState)(null),[s,p]=(0,b0.useState)(!1),w=(0,b0.useCallback)(()=>p(!0),[]),m=(0,b0.useCallback)(()=>p(!1),[]),i=y0(o,e),h=c0("gridTemplatePanelOpen",{blockName:i}),[c,u]=i0(h,!0),a=c0("gridGapPanelOpen",{blockName:i}),[d,C]=i0(a,!1),k=c0("gridTemplateAreasPanelOpen",{blockName:i}),[v,M]=i0(k,!1);return React.createElement($.Panel,{className:"costered-blocks--tab--grid-controls"},React.createElement($.PanelBody,{title:f.gridControls.panelTitle,className:"costered-blocks--grid-controls--template-axis-inner",initialOpen:c,onToggle:u},React.createElement(H0,{className:"costered-blocks--grid-controls--template-axis",value:n,onChange:l,label:f.gridControls.templateMode,forceActive:!0,panels:{simple:ot,tracks:rt},panelProps:{clientId:e}},React.createElement(H0.TextOption,{value:"simple",label:f.gridControls.simplePanel.title}),React.createElement(H0.TextOption,{value:"tracks",label:f.gridControls.tracksPanel.title}))),React.createElement($.PanelBody,{title:f.gridControls.gapPanel.title,className:"costered-blocks--grid-controls--gap-inner",initialOpen:d,onToggle:C},React.createElement($.Flex,{direction:"column",expanded:!0,className:"costered-blocks--grid-controls--gap"},React.createElement($.FlexBlock,null,React.createElement(ae,{attributes:t,clientId:e,updateBlockAttributes:r,blockName:o})))),React.createElement($.PanelBody,{title:f.gridControls.areasPanel.title,className:"costered-blocks--grid-controls--template-areas-inner",initialOpen:v,onToggle:M},React.createElement($.Flex,{direction:"column",gap:4,className:"costered-blocks--grid-controls--template-areas"},React.createElement(Z0,{clientId:e,labels:{tokenGrid:f.gridControls.areasPanel,tokenGridNotice:f.gridControls.areasPanel.noticePanel}}),React.createElement($.Flex,{justify:"flex-end"},React.createElement($.Button,{variant:"secondary",onClick:w},f.gridControls.areasPanel.editLarge))),s&&React.createElement($.Modal,{title:f.gridControls.gridTemplateAreasModal,onRequestClose:m,className:"costered-blocks--grid-controls--modal costered-blocks--modal--wide",shouldCloseOnClickOutside:!0},React.createElement(Z0,{clientId:e,labels:{tokenGrid:f.gridControls.areasPanel,tokenGridNotice:f.gridControls.areasPanel.noticePanel}}))))},Ot=(e={})=>{let t=e?.display??e?.style?.display??"";return/^(grid|inline-grid)$/.test(t)},s1={name:"grid-controls",title:f.gridControls.panelTitle,icon:React.createElement(te,null),isVisible:({attributes:e})=>Ot(e),render:()=>React.createElement(Ft,null)};})();
