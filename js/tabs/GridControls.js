(()=>{var G0=Object.create;var _t=Object.defineProperty;var _0=Object.getOwnPropertyDescriptor;var H0=Object.getOwnPropertyNames;var F0=Object.getPrototypeOf,O0=Object.prototype.hasOwnProperty;var Ne=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Z0=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of H0(t))!O0.call(e,r)&&r!==o&&_t(e,r,{get:()=>t[r],enumerable:!(n=_0(t,r))||n.enumerable});return e};var T=(e,t,o)=>(o=e!=null?G0(F0(e)):{},Z0(t||!e||!e.__esModule?_t(o,"default",{value:e,enumerable:!0}):o,e));var L=Ne((Co,Ht)=>{Ht.exports=wp.element});var V=Ne((yo,Ft)=>{Ft.exports=wp.data});var O=Ne((So,Ot)=>{Ot.exports=wp.components});var be=Ne((Mo,Zt)=>{Zt.exports=wp.blockEditor});var x0=Ne((Ur,w0)=>{w0.exports=wp.preferences});var Se=Ne((dn,v0)=>{v0.exports=wp.i18n});var Ae=T(L()),Ac=T(V()),z=T(O());var dt=T(V()),t0=T(be()),Ge=T(L());var j={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var qt=e=>Array.isArray(e)?e:[],V0=e=>new Set(qt(e));function ie(e){return Object.fromEntries(Object.entries(j.attributes).filter(([t,o])=>o.group===e))}var Vt=ie("display"),$t=ie("dimension"),zt=ie("margin"),Ut=ie("padding"),jt=ie("flex"),Wt=ie("flex-item"),Kt=ie("grid"),it=ie("grid-item"),Yt=ie("position"),Jt=ie("shared"),No={...Vt,...$t,...zt,...Ut,...jt,...Wt,...Kt,...it,...Yt,...Jt},Xt=new Set([...Object.keys(it)]),Bo=qt(j?.collections?.editorStyles),Qt=V0(j?.collections?.unitless),A=j?.settings?.gridUnit||"1fr",Eo=!!j?.settings?.appendImportantToMirroredStyles,Po=j?.settings?.styleTagId||"costered-blocks-style-mirror",We=j?.settings?.reduxStoreKey||"costered/ui",Io=j?.settings?.breakpoints?.mobile??782,Lo=j?.settings?.breakpoints?.tablet??1024,Do=j?.settings?.breakpoints?.desktop??1440,Go=j?.collections?.clearSets?.gridAreas,_o=j?.collections?.clearSets?.gridColumns,Ho=j?.collections?.clearSets?.gridRows;var e0=new Set([...Object.keys(Vt),...Object.keys($t),...Object.keys(Ut),...Object.keys(zt),...Object.keys(jt),...Object.keys(Wt),...Object.keys(Kt),...Object.keys(it),...Object.keys(Yt),...Object.keys(Jt)]),Fo=Object.fromEntries(Object.entries(j.attributes).map(([e,t])=>[e,t.css]));var ke=e=>{let t={desktop:{styles:{}},tablet:{styles:{}},mobile:{styles:{}},...e||{}};return t.desktop={styles:{},...t.desktop||{}},t.tablet={styles:{},...t.tablet||{}},t.mobile={styles:{},...t.mobile||{}},t.desktop.styles={...t.desktop.styles||{}},t.tablet.styles={...t.tablet.styles||{}},t.mobile.styles={...t.mobile.styles||{}},t},ct=(e,t,o)=>{o==null||o===""?Object.prototype.hasOwnProperty.call(e,t)&&delete e[t]:e[t]=o},at=e=>e==null||e===""||e==="null"||e==="undefined";var $0="desktop",z0=Object.freeze({});function ue(e,t){let o=e||z0,n={...o},r=ke(o.costered),i=u=>{switch(u){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},l=(u,d=void 0)=>{let f=d&&Object.prototype.hasOwnProperty.call(d,"cascade")?!!d.cascade:!0,h=d&&Object.prototype.hasOwnProperty.call(d,"raw")?!!d.raw:!f,w=t||$0;if(h){let b=r?.[w]?.styles?.[u];return at(b)?void 0:b}let v=i(w);for(let b of v){let a=r?.[b]?.styles?.[u];if(!at(a))return a}};return Object.defineProperties(n,{$get:{value:l,enumerable:!1},$getCascade:{value:u=>l(u,{cascade:!0}),enumerable:!1},$getMany:{value:(u,d)=>{let f={};for(let h of u)f[h]=l(h,d);return f},enumerable:!1},$bp:{value:t,enumerable:!1}}),n}function xe(e){let t=(0,dt.useSelect)(l=>l(We)?.getBreakpoint?.()||"desktop",[]),o=(0,dt.useSelect)(l=>e?l(t0.store).getBlockAttributes(e):null,[e]),n=(0,Ge.useMemo)(()=>o?ue(o,t):void 0,[o,t]),r=(0,Ge.useCallback)((l,s)=>n?.$get?n.$get(l,s):{},[n]),i=(0,Ge.useCallback)((l,s)=>{if(!n?.$get)return{};let p={};return l.forEach(u=>{p[u]=n.$get(u,s)}),p},[n]);return{get:r,getMany:i,bp:t,attributes:n}}var pe=T(L()),Te=T(V());var U0=e=>typeof e=="string"&&e.trim().length>0,j0=()=>{if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")return crypto.randomUUID();let e=Date.now().toString(36),t=Math.random().toString(36).slice(2,10);return`${e}-${t}`},_e=e=>{e&&!U0(e.costeredId)&&(e.costeredId=j0())};var He=T(V());var W0=e=>{let t=String(e||"").toLowerCase();return t==="mobile"||t==="phone"||t==="tablet"?"mobile":"desktop"},K0=e=>{try{let t=e("core/edit-post");if(t){if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType()}}catch{}try{let t=e("core/edit-site");if(t){if(typeof t.getDeviceType=="function")return t.getDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType();if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType()}}catch{}},re=e=>{try{let o=(0,He.select)(We);if(o&&typeof o.getBreakpoint=="function"){let n=o.getBreakpoint();if(n)return n}}catch{}let t=K0(e);if(t)return W0(t);if(typeof window<"u"&&typeof window.__COSTERED_VIEWPORT_BP=="string")return window.__COSTERED_VIEWPORT_BP||"desktop";try{if(window.COSTERED_DEBUG){let o=(0,He.select)(STORE_KEY),n=o&&typeof o.getBreakpoint=="function"?o.getBreakpoint():null,r=(0,He.select)("core/edit-post"),i=r&&(typeof r.getPreviewDeviceType=="function"&&r.getPreviewDeviceType()||typeof r.__experimentalGetPreviewDeviceType=="function"&&r.__experimentalGetPreviewDeviceType()),l=(0,He.select)("core/edit-site"),s=l&&(typeof l.getDeviceType=="function"&&l.getDeviceType()||typeof l.__experimentalGetPreviewDeviceType=="function"&&l.__experimentalGetPreviewDeviceType()||typeof l.getPreviewDeviceType=="function"&&l.getPreviewDeviceType())}}catch{}return"desktop"};var Y0="desktop";function W(e,t,o={trim:!0,emptyUnsets:!0,breakpoint:void 0}){let{trim:n=!0,emptyUnsets:r=!0,breakpoint:i}=o,l=(0,Te.useSelect)(re,[]),s=i||l||Y0,{updateBlockAttributes:p}=(0,Te.useDispatch)("core/block-editor"),u=(0,pe.useMemo)(()=>{if(typeof e=="string"&&!t){let a=e;return m=>{if(a)if(typeof m=="function"){let c=(0,Te.select)("core/block-editor").getBlockAttributes(a)||{},g=m(c)||c;p(a,g)}else p(a,m||{})}}if(typeof e=="function"&&typeof t=="string"){let a=e,m=t;return c=>{if(m)if(typeof c=="function"){let g=(0,Te.select)("core/block-editor").getBlockAttributes(m)||{},y=c(g)||g;try{a(m,y)}catch{a(y)}}else try{a(m,c||{})}catch{a(c||{})}}}return typeof e=="function"?e:()=>{}},[e,t,p]),d=(0,pe.useCallback)((a,m)=>{if(a==null)return;if(Xt.has(m)){let g=typeof a=="string"&&n?a.trim():String(a);return r&&g===""?void 0:g}let c=a;if(n&&typeof c=="string"&&(c=c.trim()),!(r&&(c===""||c=="null"||c=="undefined"))){if(Qt.has(m)){if(typeof c=="string"&&/^-?\d+(\.\d+)?$/.test(c)){let g=Number(c);return Number.isFinite(g)?g:void 0}return typeof c=="number"&&Number.isFinite(c)?c:void 0}if(typeof c=="number")return Number.isFinite(c)?c:void 0;if(typeof c=="string")return c==="null"||c==="undefined"?void 0:c;try{return String(c)}catch{return}}},[n,r]),f=(0,pe.useCallback)((a,m)=>{u(c=>{let g={...c||{}};_e(g),g.costered=ke(g.costered);let y={...g.costered[s].styles},R=d(m,a);return ct(y,a,R),g.costered[s]={...g.costered[s],styles:y},g})},[u,s,d]),h=(0,pe.useCallback)(a=>{!a||typeof a!="object"||u(m=>{let c={...m||{}};_e(c),c.costered=ke(c.costered);let g={...c.costered[s].styles};for(let[y,R]of Object.entries(a)){let B=d(R,y);ct(g,y,B)}return c.costered[s]={...c.costered[s],styles:g},c})},[u,s,d]),w=(0,pe.useCallback)(a=>{u(m=>{let c={...m||{}};_e(c),c.costered=ke(c.costered);let g={...c.costered[s].styles};return a in g?(delete g[a],c.costered[s]={...c.costered[s],styles:g},c):m})},[u,s]),v=(0,pe.useCallback)(a=>{!Array.isArray(a)||a.length===0||u(m=>{let c={...m||{}};_e(c),c.costered=ke(c.costered);let g={...c.costered[s].styles},y=!1;for(let R of a)R in g&&(delete g[R],y=!0);return y?(c.costered[s]={...c.costered[s],styles:g},c):m})},[u,s]),b=(0,pe.useCallback)(a=>({set:(m,c)=>f(`${a}${m}`,c),setMany:m=>{let c={};for(let[g,y]of Object.entries(m))c[`${a}${g}`]=y;h(c)},unset:m=>w(`${a}${m}`),unsetMany:m=>v(m.map(c=>`${a}${c}`))}),[f,h,w,v]);return{set:f,setMany:h,unset:w,unsetMany:v,withPrefix:b,activeBreakpoint:s}}var ne=T(L());var r0=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"";function me(e){return String(e||"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function J0(e){let t=String(e||"").trim();if(!t)return[];let o=0,n=0,r="",i=[];for(let l=0;l<t.length;l++){let s=t[l];if(s==="("){o++,r+=s;continue}if(s===")"){o=Math.max(0,o-1),r+=s;continue}if(s==="["){n++,r+=s;continue}if(s==="]"){n=Math.max(0,n-1),r+=s;continue}if(s===" "&&o===0&&n===0){r&&(i.push(r),r="");continue}r+=s}return r&&i.push(r),i}function X0(e){if(!e)return null;let t=e.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);return t?{count:parseInt(t[1],10),unit:t[2].trim()}:null}function Be(e,t=A){return e>0?`repeat(${e}, ${t})`:null}var Q0=/^(?:[0-9.]+(?:px|rem|em|ch|vh|vw|vmin|vmax|fr|%)|auto|max-content|min-content|fit-content\([^)]+\)|minmax\([^)]+\)|clamp\([^)]+\)|var\([^)]+\))$/i;function pt(e,t,o="1fr"){let n=Math.max(0,Number(t)||0),r=me(e||"");if(n<=0)return r;let{count:i}=Ee(r);if(i===0){let d=String(o||"").trim()||"1fr";return`repeat(${n}, ${d})`}if(i>=n)return r;let l=n-i,s=String(o||"").trim()||"1fr",p=r.match(/^repeat\(\s*([0-9]+)\s*,\s*([^)]+)\)\s*$/i);if(p){let d=p[2].trim();if(Q0.test(d))return`repeat(${n}, ${d})`}let u=Array.from({length:l}).map(()=>s).join(" ");return`${r} ${u}`.trim()}function mt(e,t){if(!e||typeof e!="string")return"";let o=Math.max(0,Math.trunc(Number(t)||0)),n=e.replace(/\[[^\]]*\]/g," ").trim();if(!n)return"";let r=n.match(/^repeat\(\s*([0-9]+)\s*,\s*([^)]+)\)\s*$/i);if(r){let i=r[2].trim();if(!/\s/.test(i))return o<=0?"":`repeat(${o}, ${i})`;let l=to(n);return o0(l,o)}return o0(n,o)}function Ee(e,t=A){if(!e||typeof e!="string")return{count:0,unit:t};let o=e.trim();if(!o)return{count:0,unit:t};if(/^subgrid\b/i.test(o))return{count:0,unit:t};if(o=o.replace(/\[[^\]]*]/g," ").trim(),!o)return{count:0,unit:t};let n=o.match(/^\s*repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)\s*$/i);if(n){let l=n[2];return{count:0,unit:ut(l,t)}}let{count:r,unit:i}=eo(o,t);return{count:r,unit:i||t}}function eo(e,t){let o=n0(e);if(o){let s=o.inner.trim(),u=Fe(s).length,d=ut(s,t);return{count:o.times*u,unit:d||t}}let n=Fe(e),r=0,i="";for(let s of n){if(/^\s*repeat\(/i.test(s)){let p=s0(s);if(p){r+=p.count,!i&&p.unitHint&&(i=p.unitHint);continue}r+=1;continue}r+=1,!i&&Ke(s)&&(i=Ce(s)||"")}let l=i||ut(e,t);return{count:r,unit:l||t}}function n0(e){let t=e.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!t)return null;let o=parseInt(t[1],10),n=t[2];return!Number.isFinite(o)||o<0?null:{times:o,inner:n}}function s0(e){if(e.match(/^\s*repeat\(\s*auto-(fit|fill)\s*,/i))return{count:0,unitHint:""};let o=e.match(/^\s*repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!o)return null;let n=parseInt(o[1],10)||0;if(n<=0)return{count:0,unitHint:""};let r=o[2].trim(),i=Fe(r),l=n*i.length,s="";if(i.length===1)s=Ce(i[0])||"";else{let p=i.find(Ke);s=Ce(p)||""}return{count:l,unitHint:s}}function Fe(e){let t=[],o=0,n="";for(let r=0;r<e.length;r++){let i=e[r];if(i==="("){o++,n+=i;continue}if(i===")"){o=Math.max(0,o-1),n+=i;continue}if(o===0&&/\s/.test(i)){n.trim()&&t.push(n.trim()),n="";continue}n+=i}return n.trim()&&t.push(n.trim()),t}function ut(e,t){if(!e)return t;let o=n0(e);if(o){let i=Fe(o.inner);if(i.length===1)return Ce(i[0])||t;let l=i.find(Ke);if(l)return Ce(l)||t}let n=Fe(e);if(n.length===1)return Ce(n[0])||t;let r=n.find(Ke);if(r)return Ce(r)||t;for(let i of n){let l=s0(i);if(l&&l.unitHint)return l.unitHint}return t}function Ke(e){return e?!!(/^(minmax|fit-content|clamp|var)\(/i.test(e)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(e)||/^(auto|max-content|min-content)$/i.test(e)):!1}function Ce(e){return e?e.trim():""}function to(e){return e.replace(/repeat\(\s*([0-9]+)\s*,\s*([^)]+)\)/gi,(t,o,n)=>{let r=parseInt(o,10),i=n.trim();return Array.from({length:r}).map(()=>i).join(" ")})}function o0(e,t){if(t<=0)return"";let o=0,n="",r=[];for(let l of e)l==="("&&o++,l===")"&&(o=Math.max(0,o-1)),/\s/.test(l)&&o===0?n&&(r.push(n),n=""):n+=l;n&&r.push(n);let i=r.slice(0,t);return i.length===0?"":i.join(" ")}function N(e){let t=Number(e);return Number.isFinite(t)&&t>=0?Math.floor(t):0}function l0(e){let t=String(e||"").trim();if(!t)return{hasAreas:!1,cols:0,rows:0};let o=[],n=/"([^"]*)"|'([^']*)'/g,r;for(;r=n.exec(t);){let l=(r[1]??r[2]??"").trim();l&&o.push(l)}return o.length?{hasAreas:!0,cols:o.reduce((l,s)=>{let p=s.split(/\s+/).filter(Boolean).length;return Math.max(l,p)},0),rows:o.length}:{hasAreas:!1,cols:0,rows:0}}function i0(e,t="."){if(!Array.isArray(e)||e.length===0)return"";let o=e.map(r=>(Array.isArray(r)?r:[]).map(i=>{let l=String(i??"").trim();return l===""?t:l}));return o.some(r=>r.some(i=>i!==t))?o.map(r=>`"${r.join(" ")}"`).join(" "):""}function c0(e,t="."){let o=String(e||"").trim();if(!o)return[];let n=[],r=/"([^"]*)"|'([^']*)'/g,i;for(;i=r.exec(o);){let l=(i[1]??i[2]??"").trim(),s=l.length?l.split(/\s+/g).map(p=>p&&p!==t?p:t):[];n.push(s)}return n}function Oe(e,t,o,n="."){let r=N(t),i=N(o);if(r===0||i===0)return[];let l=Array.isArray(e)?e:[],s=[];for(let p=0;p<i;p++){let u=Array.isArray(l[p])?l[p]:[],d=Array.from({length:r},(f,h)=>{let w=u[h];return w===void 0?n:w});s.push(d)}return s}function oo(e){let t=X0(e);if(!t)return null;let o=me(Be(t.count,t.unit));return{mode:"simple",template:e||null,normalised:o,simple:{count:t.count,unit:t.unit}}}function ro(e){let t=J0(e);if(!t.length)return null;let o=me(t.join(" "));return{mode:"tracks",template:e||null,normalised:o,tracks:t}}var no=[oo,ro];function gt(e){let t=e||"";for(let o of no){let n=o(t);if(n)return n}return{mode:"raw",template:e||null,normalised:me(e||"")}}function ft(e){let{areasTemplate:t,trackColumnCount:o,trackRowCount:n,applyMatrixToStore:r,clearAreasInStore:i,seedFromStore:l}=Ze(e),s=(0,ne.useMemo)(()=>{let a=l(".");return console.log("[areas seed -> shape]",a.length,a[0]?.length),a},[l]),p=(0,ne.useMemo)(()=>({count:s?.[0]?.length||N(o)}),[s,o]),u=(0,ne.useMemo)(()=>({count:s?.length||N(n)}),[s,n]),d=(0,ne.useCallback)(a=>{let m=a[0]?.length||0,c=a.length||0,g=Oe(a.map(y=>y.map(R=>String(R??"").trim()||".")),m,c,".");r(g)},[r]),f=(0,ne.useMemo)(()=>{let a=s?.length||0,m=a&&s[0]?.length||0;return{rows:a,cols:m}},[s]),h=(0,ne.useCallback)((a,m)=>a>=0&&a<f.cols&&m>=0&&m<f.rows,[f]),w=(0,ne.useCallback)((a,m,c)=>{if(!Array.isArray(s)||s.length===0)return;let g=Math.trunc(N(a))||0,y=Math.trunc(N(m))||0;if(!h(g,y))return;let R=String(c??"").trim()||".",B=s.map(U=>U.slice());B[y][g]=R,d(B)},[s,d,h]),v=(0,ne.useCallback)(({rows:a,cols:m})=>{let c=N(a),g=N(m);if(!(c>0&&g>0))return;let y=Oe(s,g,c,".");d(y)},[s,d]),b=(0,ne.useCallback)(()=>i(),[i]);return{matrix:s,columnData:p,rowData:u,setCell:w,resize:v,clear:b}}var Ye=T(L());var br=Number.MAX_SAFE_INTEGER;var lo=T(L());var ht=T(V()),a0=T(be()),wt=T(L());function ge(e){let t=(0,ht.useSelect)(l=>e?l(a0.store).getBlock(e)?.attributes??{}:{},[e]),o=(0,ht.useSelect)(re,[]),n=(0,wt.useMemo)(()=>ue(t,o),[t,o]),r=(l,s={})=>n.$get(l,s);return(0,wt.useMemo)(()=>{let l=r("gridTemplateColumns"),s=r("gridTemplateRows"),p=r("gridTemplateAreas"),u=gt(l),d=gt(s),{template:f,...h}=l0(p,u.count,d.count);return{columns:u,rows:d,areas:{template:f,...h},activePane:{columns:u.mode,rows:d.mode}}},[o,n?.costered,n?.$get])}var ye=T(L()),d0=T(V()),u0=T(be());function Ze(e){let{set:t,unset:o}=W(e),n=(0,d0.useSelect)(w=>w(u0.store).getBlock(e)?.innerBlocks?.length||0,[e]),r=ge(e),i=r?.columns?.template??null,l=r?.rows?.template??null,s=r?.areas?.template??null,p=(0,ye.useMemo)(()=>{if(i){let v=Ee(i),b=N(v?.count??v);if(b>0)return b}let w=N(r?.rows?.count)||(()=>{if(!l)return 0;let v=Ee(l);return N(v?.count??v)})();return w>0&&n>0?Math.ceil(n/w):0},[i]),u=(0,ye.useMemo)(()=>{let w=N(r?.rows?.count);if(w>0)return w;if(l){let b=Ee(l),a=N(b?.count??b);if(a>0)return a}let v=N(p);return v>0&&n>0?Math.ceil(n/v):0},[l,r?.rows?.count]),d=(0,ye.useCallback)(w=>{let v=i0(w,".");console.log("[areas write]",v),v?t("gridTemplateAreas",v):o("gridTemplateAreas")},[t,o]),f=(0,ye.useCallback)(()=>{o("gridTemplateAreas")},[o]),h=(0,ye.useCallback)((w=".")=>{let v=c0(s,w),b=N(v[0]?.length)||N(p),a=N(v.length)||N(u);return b===0&&a>0&&n>0?b=Math.ceil(n/a):a===0&&b>0&&n>0&&(a=Math.ceil(n/b)),b===0&&(b=1),a===0&&(a=1),Oe(v,b,a,w)},[s,p,u,n]);return{areasTemplate:s,trackColumnCount:p,trackRowCount:u,applyMatrixToStore:d,clearAreasInStore:f,seedFromStore:h}}var xt=T(L()),vt=T(V()),Pr=T(be());function bt(e,t={}){let o=t.keys??Array.from(e0),{parentId:n,parentBlock:r}=(0,vt.useSelect)(p=>{let u=p("core/block-editor"),d=e||u.getSelectedBlockClientId();if(!d)return{parentId:null,parentBlock:null};let f=u.getBlockRootClientId(d);return f?{parentId:f,parentBlock:u.getBlock(f)||null}:{parentId:null,parentBlock:null}},[]),i=(0,vt.useSelect)(re,[]),l=(0,xt.useMemo)(()=>{let p=r?.attributes;return p?ue(p,i):null},[r?.attributes,i]),s=(0,xt.useMemo)(()=>{if(!r)return null;let p={};for(let u of o)p[u]=l?.$get(u);return p},[r,l,o]);return{parentId:n,parentAttrs:s,parentBlock:r,parentAugmented:l}}var io=T(V()),co=T(L());var p0=T(V()),m0=T(be());function qe(e,t){return(0,p0.useSelect)(o=>{if(e)return e;let n=o(m0.store),r=t||n.getSelectedBlockClientId();return(r?n.getBlock(r):null)?.name??null},[e,t])}var kt=T(V()),f0=T(be()),h0=T(L());var g0=Object.freeze({});function Tt(){let e=(0,kt.useSelect)(re,[]),{selectedBlock:t,clientId:o,attrVersion:n}=(0,kt.useSelect)(i=>{let l=i(f0.store),s=l.getSelectedBlockClientId(),p=s?l.getBlock(s):null,u=p?.attributes||g0,d=u&&typeof u.costered=="object"&&u.costered||{},f=Object.keys(d&&d.desktop||{}).length,h=Object.keys(d&&d.tablet||{}).length,w=Object.keys(d&&d.mobile||{}).length,v=`${f}-${h}-${w}`;return{selectedBlock:p,clientId:s,attrVersion:v}},[]),r=(0,h0.useMemo)(()=>ue(t?.attributes,e)||g0,[t,e,n]);return{selectedBlock:t,clientId:o,attributes:r}}var Je=T(V()),Ct=T(x0());function ce(e,t,o="costered-blocks"){let n=(0,Je.useSelect)(p=>p(Ct.store).get(o,e)??t,[o,e,t]),{set:r,__experimentalReset:i}=(0,Je.useDispatch)(Ct.store);return[n,p=>{e.startsWith("__invalid__")||r(o,e,p)},()=>{e.startsWith("__invalid__")||i?.(o,e)}]}var ae=(e,{blockName:t,variant:o}={})=>!t&&!o?e:t&&!o?`${e}:${t}`:!t&&o?`${e}#${o}`:`${e}:${t}#${o}`;var k0=T(Se());var b0={pluginSidebar:{noBlockSelected:"Please select a block to edit its settings.",title:"Costered Blocks",selectedBlock:"Selected block",blockWarningSummary:"Style changes may not appear in the editor",blockWarningDetails:"There may be some differences between the editor and the frontend. This is due to limitations with the block editor, which does not always allow custom inline styles to be displayed here."},displayControls:{panelTitle:"Display Controls",displayLabel:"Display",display:{unset:"unset / initial",block:"Block",inline:"Inline",flex:"Flex",grid:"Grid",none:"None"},visibilityLabel:"Visibility",visibility:{unset:"unset / initial",visible:"Visible",hidden:"Hidden",collapse:"Collapse"}},dimensionControls:{panelTitle:"Dimension Controls",dimensionPanel:"Dimensions",dimensions:{width:"Width",height:"Height"},minPanel:"Minimum Dimensions",minDimensions:{width:"Min Width",height:"Min Height"},maxPanel:"Maximum Dimensions",maxDimensions:{width:"Max Width",height:"Max Height"}},spacingControls:{panelTitle:"Spacing Controls",panelLabel:"Spacing",marginLabel:"Margin",paddingLabel:"Padding"},flexBoxControls:{panelTitle:"Flexbox Controls",flexWrapLabel:"Flex Wrap",flexWrapNone:"No Wrap",flexWrapWrap:"Wrap",flexWrapReverse:"Reverse",alignmentPanel:"Alignment",gapPanel:"Gap"},flexItemControls:{panelTitle:"Flex Item Controls",flexGrow:"Grow",flexShrink:"Shrink",flexBasis:"Basis",flexBasisPlaceholder:"Enter value",order:"Order"},gridControls:{panelTitle:"Grid Container Controls",templateMode:"Template Mode",simplePanel:{title:"Simple",description:"In Simple mode, you can define the number of columns. All columns equally divide the total available width.",columns:"Columns",columnsClear:"Clear Columns",columnSpan:"Use %1$s as column width",columnUnit:"Unit",columnIsDisabled:"Column settings are disabled because the parent grid uses subgrid for columns.",columnIsDisabledHelp:"To enable column settings, change the parent grid to not use subgrid for columns.",rows:"Rows",rowsClear:"Clear Rows",rowSpan:"Use %1$s as row height",rowUnit:"Unit",rowIsDisabled:"Row settings are disabled because the parent grid uses subgrid for rows.",rowIsDisabledHelp:"To enable row settings, change the parent grid to not use subgrid for rows."},tracksPanel:{title:"Tracks",description:"In Tracks mode, you can define the exact track sizes using any valid CSS Grid value.",columns:{label:"Columns",clear:"Clear Columns",size:"Column Sizes",addPlaceholder:"Add track or [line names]",addToken:"Add column size",addLabel:"Add [line name]"},rows:{label:"Rows",clear:"Clear Rows",size:"Row Sizes",addPlaceholder:"Add track or [line names]",addToken:"Add row size",addLabel:"Add [line name]"}},subgridPanel:{title:"Subgrid",columns:{label:"Columns use subgrid (%1$s)",help:"Inherit column tracks from the parent grid on this breakpoint.",notice:"Parent grid has no explicit columns; subgrid columns will inherit implicit tracks."},rows:{label:"Rows use subgrid (%1$s)",help:"Inherit row tracks from the parent grid on this breakpoint.",notice:"Parent grid has no explicit rows; subgrid rows will inherit implicit tracks."}},gapPanel:{title:"Gap"},areasPanel:{title:"Grid Template Areas",sizeHint:"Grid Size: %1$d columns x %2$d rows",editLarge:"Edit in larger view",modalTitle:"Edit Grid Template Areas",noticePanel:{mismatchText:"Templates areas (%1$dx%2$d) do not match current tracks (%3$dx%4$d)",resizeToTracks:"Resize areas to match tracks",growTracksToAreas:"Grow tracks to match areas",shrinkTracks:{button:"Shrink tracks to areas",warning:"Shrinking tracks may remove named lines please review afterwards.",confirm:"Shrink tracks",cancel:"Cancel",heading:"Remove named lines?",description:"Shrinking tracks will drop line names (e.g. [sidebar-start]). This can change template references. Continue?"}}}},gridItemsControls:{panelTitle:"Grid Item Controls",simplePanel:{title:"Simple",columnStart:"Column Start",columnStartHelp:"%1$d columns",columnStartHelpUnknown:"Parent grid columns unknown; using a default range (1\u201324).",columnSpan:"Column Span",columnSpanHelp:"Max updates with start",rowStart:"Row Start",rowStartHelp:"%1$d rows",rowStartHelpUnknown:"Parent grid rows unknown; using a default range (1\u201324).",rowSpan:"Row Span",rowSpanHelp:"Max updates with start"},tracksPanel:{title:"Tracks",hasAreasNotice:"This item uses a named grid area. Line-based placement is disabled.",namedLineMismatch:"No named lines are defined in the parent grid.",zeroInvalid:"0 isn\u2019t a valid grid line. Use 1..N or negative indices like -1",columns:{legend:"Columns",trackStartMode:"Start uses",trackStartModeNamed:"Named Line",trackStartModeNumber:"Line Number",trackEndMode:"End uses",trackEndModeSpan:"Span",trackEndModeEnd:"End",startNumber:"Line Number",startNumberHelp:"Positive or negative line number",startNamed:"Named Line",startNamedHelp:"Named lines from parent grid template",spanNumber:"Span",spanNumberHelp:"Max updates with start",endAuto:"Auto",endAutoHelp:"Automatically size based on start/span",endNamed:"Named Line",endNamedHelp:"Named lines from parent grid template",endNumber:"Line Number",endNumberHelp:"Positive or negative line number"},rows:{legend:"Rows",trackStartMode:"Start uses",trackStartModeNamed:"Named Line",trackStartModeNumber:"Line Number",trackEndMode:"End uses",trackEndModeSpan:"Span",trackEndModeEnd:"End",startNumber:"Line Number",startNumberHelp:"Positive or negative line number",startNamed:"Named Line",startNamedHelp:"Named lines from parent grid template",spanNumber:"Span",spanNumberHelp:"Max updates with start",endAuto:"Auto",endAutoHelp:"Automatically size based on start/span",endNamed:"Named Line",endNamedHelp:"Named lines from parent grid template",endNumber:"Line Number",endNumberHelp:"Positive or negative line number"}},areasPanel:{title:"Areas",gridAreaLabel:"Named area (grid-area)",gridAreaNone:"\u2014 None \u2014",gridAreaHelp:"Setting a named area overrides row/column placement."},alignmentPanel:{title:"Alignment"},orderPanel:{title:"Order",label:"Order"}},positioningControls:{panelTitle:"Positioning Controls",position:{label:"Position",help:"Controls the positioning of the element.",values:{unset:"unset / initial",static:"Static",relative:"Relative",absolute:"Absolute",fixed:"Fixed",sticky:"Sticky"}},coordinates:{label:"Coordinates",help:"Set the coordinates for the element. Works with relative, absolute, fixed, and sticky positioning.",top:"Top",right:"Right",bottom:"Bottom",left:"Left",useCustom:"Use custom values (e.g auto, calc)"},zIndex:{label:"Z-Index",help:"Controls the stack order of the element. Elements with a higher z-index cover those with a lower one."}},flexDirection:{label:"Flex Direction",row:"Row",rowReverse:"Row Reverse",column:"Column",columnReverse:"Column Reverse"},justifyControls:{label:"Justify Content",start:"Start",end:"End",center:"Center",spaceAround:"Space Around",spaceBetween:"Space Between",spaceEvenly:"Space Evenly"},alignControls:{label:"Align Items",start:"Start",end:"End",center:"Center",stretch:"Stretch",baseline:"Baseline",spaceAround:"Space Around",spaceBetween:"Space Between",spaceEvenly:"Space Evenly"},customSelectControl:{defaultText:"choose..."},dimensionInputGroup:{label:"Dimensions",labelPre:"%1$s Dimensions",width:"Width",height:"Height",useCustom:"Use custom values (e.g auto, calc)"},directionalInputGroup:{label:"Directions",top:"Top",right:"Right",bottom:"Bottom",left:"Left",useCustom:"Use custom values (e.g auto, calc)"},gapControls:{label:"Gaps",rowLabel:"Row Gap",switchToSingle:"Switch to Single Gap",switchToDual:"Switch to Dual Gap",columnLabel:"Column Gap",useCustom:"Use custom values (e.g auto, calc)"},gridAxisAside:{label:"Grid Axis",horizontal:"Horizontal",vertical:"Vertical",pip:{noValue:"No value set",valueHere:"Value matches this panel",valueElsewhere:"Value set in %s panel",valueRaw:"Value set (unrecognised format)"},clearRows:"Clear Rows",clearColumns:"Clear Columns"},panelToggle:{label:"Panel"},token:{expand:"Edit token",collapse:"Close editor",remove:"Remove",moveLeft:"Move left",moveRight:"Move right"},tokenGrid:{title:"Cells",clear:"Clear",sizeHint:"Cells: %1$d columns x %2$d rows",tokenExpand:"Edit cell",tokenCollapse:"Close editor",tokenRemove:"Clear cell",tokenMoveLeft:"Previous cell",tokenMoveRight:"Next cell",addColumn:"Add column",removeColumn:"Remove column",addRow:"Add row",removeRow:"Remove row"},tokenEditor:{add:"Add",addToken:"Add token",addLineNames:"Add line names",listAriaLabel:"List of tokens",moveLeft:"Move left",moveRight:"Move right",remove:"Remove",expand:"Edit token",collapse:"Close editor"},tokenGridNotice:{mismatchText:"Cells (%1$dx%2$d) do not match current dimensions (%3$dx%4$d)",resizeToTracks:"Resize cells to match dimensions",growTracksToAreas:"Grow dimensions to match cells",shrinkTracks:{button:"Shrink dimensions to cells",warning:"Shrinking dimensions may remove columns/rows. Please review afterwards.",confirm:"Shrink dimensions",cancel:"Cancel",heading:"Remove rows/columns?",description:"Shrinking dimensions will drop rows/columns. Continue?"}},actions:{apply:"Apply",close:"Close",cancel:"Cancel",confirm:"Confirm",clear:"Clear",reset:"Reset",remove:"Remove",add:"Add",edit:"Edit",save:"Save",copy:"Copy",undo:"Undo",redo:"Redo"}};var uo="costered-blocks";function yt(e){if(typeof e=="string")return(0,k0.__)(e,uo);if(Array.isArray(e))return e.map(yt);if(e&&typeof e=="object"){let t={};for(let[o,n]of Object.entries(e))t[o]=yt(n);return t}return e}var x=yt(b0);var fe=T(L()),Z=T(O());var po=({size:e=24,...t})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t},React.createElement("path",{d:"M11.271,12.013l0,-1.784c0,-0.403 0.327,-0.729 0.729,-0.729c0.402,0 0.729,0.326 0.729,0.729l-0,1.784l0.213,-0.214c0.284,-0.284 0.746,-0.284 1.03,0c0.284,0.285 0.284,0.746 0,1.031l-1.457,1.457c-0.137,0.137 -0.321,0.213 -0.515,0.213c-0.194,-0 -0.378,-0.076 -0.515,-0.213l-1.457,-1.457c-0.284,-0.285 -0.284,-0.746 -0,-1.031c0.284,-0.284 0.746,-0.284 1.03,0l0.213,0.214Z"}),React.createElement("path",{d:"M3.199,19.503l0,-2.001c0,-0.994 0.807,-1.8 1.801,-1.8l14,-0c0.994,-0 1.801,0.806 1.801,1.8l-0,2.001c-0,0.993 -0.807,1.8 -1.801,1.8l-14,-0c-0.994,-0 -1.801,-0.807 -1.801,-1.8Zm1.6,-0c0,0.11 0.09,0.2 0.201,0.2l14,-0c0.111,-0 0.201,-0.09 0.201,-0.2l-0,-2.001c-0,-0.111 -0.09,-0.2 -0.201,-0.2l-14,-0c-0.111,-0 -0.201,0.089 -0.201,0.2l0,2.001Z"}),React.createElement("path",{d:"M12.701,6.498l-0,-2.001c-0,-0.993 0.806,-1.8 1.8,-1.8l4.499,0c0.994,0 1.801,0.807 1.801,1.8l-0,2.001c-0,0.994 -0.807,1.8 -1.801,1.8l-4.499,0c-0.994,0 -1.8,-0.806 -1.8,-1.8Zm1.6,0c-0,0.111 0.089,0.2 0.2,0.2l4.499,0c0.111,0 0.201,-0.089 0.201,-0.2l-0,-2.001c-0,-0.11 -0.09,-0.2 -0.201,-0.2l-4.499,0c-0.111,0 -0.2,0.09 -0.2,0.2l-0,2.001Z"}),React.createElement("path",{d:"M3.199,6.498l0,-2.001c0,-0.993 0.807,-1.8 1.801,-1.8l4.499,0c0.994,0 1.8,0.807 1.8,1.8l0,2.001c0,0.994 -0.806,1.8 -1.8,1.8l-4.499,0c-0.994,0 -1.801,-0.806 -1.801,-1.8Zm1.6,0c0,0.111 0.09,0.2 0.201,0.2l4.499,0c0.111,0 0.2,-0.089 0.2,-0.2l0,-2.001c0,-0.11 -0.089,-0.2 -0.2,-0.2l-4.499,0c-0.111,0 -0.201,0.09 -0.201,0.2l0,2.001Z"})),St=po;var mo=({size:e=24,...t})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t},React.createElement("path",{fill:"currentColor",d:"M5 21h1v-3H3v1q0 .825.588 1.413T5 21m3 0h3v-3H8zm5 0h3v-3h-3zm5 0h1q.825 0 1.413-.587T21 19v-1h-3zM3 6h3V3H5q-.825 0-1.412.588T3 5zm0 5h3V8H3zm0 5h3v-3H3zM8 6h3V3H8zm0 5h3V8H8zm0 5h3v-3H8zm5-10h3V3h-3zm0 5h3V8h-3zm0 5h3v-3h-3zm5-10h3V5q0-.825-.587-1.412T19 3h-1zm0 5h3V8h-3zm0 5h3v-3h-3z"})),Mt=mo;var go=({size:e=24,...t})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t},React.createElement("path",{d:"M11.271,12.013l0,-1.784c0,-0.403 0.327,-0.729 0.729,-0.729c0.402,0 0.729,0.326 0.729,0.729l-0,1.784l0.213,-0.214c0.284,-0.284 0.746,-0.284 1.03,0c0.284,0.285 0.284,0.746 0,1.031l-1.457,1.457c-0.137,0.137 -0.321,0.213 -0.515,0.213c-0.194,-0 -0.378,-0.076 -0.515,-0.213l-1.457,-1.457c-0.284,-0.285 -0.284,-0.746 -0,-1.031c0.284,-0.284 0.746,-0.284 1.03,0l0.213,0.214Z"}),React.createElement("path",{d:"M20.801,4.497l-0,2.001c-0,0.994 -0.807,1.8 -1.801,1.8l-14,0c-0.994,0 -1.801,-0.806 -1.801,-1.8l0,-2.001c0,-0.993 0.807,-1.8 1.801,-1.8l14,0c0.994,0 1.801,0.807 1.801,1.8Zm-1.6,0c-0,-0.11 -0.09,-0.2 -0.201,-0.2l-14,0c-0.111,0 -0.201,0.09 -0.201,0.2l0,2.001c0,0.111 0.09,0.2 0.201,0.2l14,0c0.111,0 0.201,-0.089 0.201,-0.2l-0,-2.001Z"}),React.createElement("path",{d:"M11.299,17.502l0,2.001c0,0.993 -0.806,1.8 -1.8,1.8l-4.499,-0c-0.994,-0 -1.801,-0.807 -1.801,-1.8l0,-2.001c0,-0.994 0.807,-1.8 1.801,-1.8l4.499,-0c0.994,-0 1.8,0.806 1.8,1.8Zm-1.6,-0c0,-0.111 -0.089,-0.2 -0.2,-0.2l-4.499,-0c-0.111,-0 -0.201,0.089 -0.201,0.2l0,2.001c0,0.11 0.09,0.2 0.201,0.2l4.499,-0c0.111,-0 0.2,-0.09 0.2,-0.2l0,-2.001Z"}),React.createElement("path",{d:"M20.801,17.502l-0,2.001c-0,0.993 -0.807,1.8 -1.801,1.8l-4.499,-0c-0.994,-0 -1.8,-0.807 -1.8,-1.8l-0,-2.001c-0,-0.994 0.806,-1.8 1.8,-1.8l4.499,-0c0.994,-0 1.801,0.806 1.801,1.8Zm-1.6,-0c-0,-0.111 -0.09,-0.2 -0.201,-0.2l-4.499,-0c-0.111,-0 -0.2,0.089 -0.2,0.2l-0,2.001c-0,0.11 0.089,0.2 0.2,0.2l4.499,-0c0.111,-0 0.201,-0.09 0.201,-0.2l-0,-2.001Z"})),At=go;var Rt=(e="")=>(e+"").trim().split(/\s+(?![^(]*\))/).filter(Boolean).slice(0,2),Nt=(e="",t="")=>[e,t].filter(Boolean).join(" ").trim(),Bt=e=>e==null?"":String(e).trim();var T0=T(O());function Xe(e="",t={}){let{trim:o=!0,toLower:n=!1,toUpper:r=!1,toCapitalFirst:i=!1,toCapitalCase:l=!1,toCamelCase:s=!1,toDashes:p=!1,toSpaces:u=!1}=t,d=e;return typeof d!="string"&&(d=String(d)),o&&(d=d.trim()),n&&(d=d.toLowerCase()),r&&(d=d.toUpperCase()),i&&(d=d.charAt(0).toUpperCase()+d.slice(1)),l&&(d=d.replace(/\b\w/g,f=>f.toUpperCase())),s&&(d=d.replace(/[-_\s]+(.)?/g,(f,h)=>h?h.toUpperCase():"").replace(/^(.)/,f=>f.toLowerCase())),p&&(d=d.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()),u&&(d=d.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/[-_]+/g," ").toLowerCase()),d}function Pe(e){let{value:t,onChange:o,label:n}=e,r=Xe(n,{toCapitalFirst:!0,trim:!0,toSpaces:!0});return React.createElement(T0.__experimentalUnitControl,{__next40pxDefaultSize:!0,label:r,value:t,onChange:o,placeholder:"0",style:{padding:"0 2px"},units:[{name:"rem",value:"rem",label:"rem"},{name:"px",value:"px",label:"px"},{name:"em",value:"em",label:"em"},{name:"%",value:"%",label:"%"},{name:"vw",value:"vw",label:"vw"},{name:"vh",value:"vh",label:"vh"}],isResettable:!0,allowReset:!0})}var C0=T(O());function Et({value:e,onChange:t,label:o,placeholder:n="",help:r=""}){let i=Xe(o,{toDashes:!0,toSpaces:!1});return React.createElement("div",{style:{padding:"0 2px"}},React.createElement(C0.TextControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:i,value:e,onChange:t,placeholder:n,help:r}))}function Pt({clientId:e,blockName:t=null}){let{get:o}=xe(e),{set:n}=W(e),r=qe(t,e),i=ae("gapMode",{blockName:r}),[l,s]=ce(i,"unit"),p=ae("gapInputMode",{blockName:r}),[u,d]=ce(p,"single"),f=o("gap")||"";(0,fe.useEffect)(()=>{u===void 0&&d(Rt(f).length===2?"dual":"single")},[u,f]);let[h,w]=(0,fe.useMemo)(()=>{let y=Rt(f);return[y[0]||"",y[1]||""]},[f]),v=(0,fe.useCallback)(y=>{let R=Bt(y);if(u==="single")n("gap",R||void 0);else{let B=Nt(R,w);n("gap",B||void 0)}},[u,n,w]),b=(0,fe.useCallback)(y=>{let R=Bt(y),B=Nt(h,R);n("gap",B||void 0)},[n,h]),a=l==="unit"?Pe:Et,m=u==="single"?x.gapControls.label:x.gapControls.columnLabel,c=(0,fe.useCallback)(()=>{d(u==="single"?"dual":"single")},[u,d]),g=(0,fe.useCallback)(()=>{s(l==="unit"?"text":"unit")},[l,s]);return React.createElement(Z.Flex,{direction:"column",className:"gap-controls"},React.createElement(Z.FlexBlock,null,React.createElement(Z.Flex,{align:"flex-end",gap:1},React.createElement(Z.FlexBlock,null,React.createElement(Z.Flex,{gap:0,direction:"row",align:"flex-end"},React.createElement(Z.FlexItem,null,React.createElement(a,{label:m,value:u==="single"?f:h,onChange:v,allowReset:!0})),u==="dual"&&React.createElement(Z.FlexItem,null,React.createElement(a,{label:x.gapControls.rowLabel,value:w,onChange:b,allowReset:!0})))),React.createElement(Z.FlexItem,null,React.createElement(Z.Button,{icon:u==="single"?At:St,label:u==="single"?x.gapControls.switchToDual:x.gapControls.switchToSingle,onClick:c,style:{marginBottom:"2px"},"aria-pressed":u==="dual"})))),React.createElement(Z.FlexBlock,null),React.createElement(Z.FlexBlock,null,React.createElement(Z.ToggleControl,{label:x.gapControls.useCustom,checked:l==="text",onChange:g,__nextHasNoMarginBottom:!0})))}var se=T(L()),ze=T(O()),R0=T(Se());var q=T(L()),$e=T(O());var J=T(L()),X=T(O());function Ve({index:e,value:t,isExpanded:o,onToggle:n,onRemove:r,onChange:i,onMoveLeft:l,onMoveRight:s,labels:p,emptyPlaceholder:u,floatingEditor:d=!1,popoverPlacement:f="bottom-start",popoverWidth:h}){let w=(0,J.useRef)(null),v=(0,J.useRef)(null),b=(0,J.useRef)("pointer"),a=(0,J.useCallback)(M=>{let K=M?.inputRef?.current||M||null;v.current=K},[]);(0,J.useEffect)(()=>{if(!(!o||!v.current)){if(b.current==="keyboard"){let M=v.current;M.focus?.({preventScroll:!0});let K=typeof M.value=="string"?M.value.length:0;typeof M.setSelectionRange=="function"&&M.setSelectionRange(K,K)}b.current="pointer"}},[o]);let m={expand:x.token.expand,collapse:x.token.collapse,remove:x.token.remove,moveLeft:x.token.moveLeft,moveRight:x.token.moveRight,...p},c=t&&t.trim().length?t:u??"",g=(0,J.useCallback)(M=>{M.stopPropagation(),r(e)},[e,r]),y=(0,J.useCallback)(()=>{b.current="pointer",n(e,!o)},[e,o,n]),R=(0,J.useCallback)(()=>{b.current="keyboard",n(e,!o)},[e,o,n]),B=(0,J.useCallback)(M=>{M.key==="Enter"||M.key===" "?(M.preventDefault(),R()):M.key==="Escape"&&o&&(M.preventDefault(),n(e,!1))},[R,e,o,n]),U=React.createElement("div",{id:`costered-blocks--token--panel-${e}`,className:"costered-blocks--token--panel"},React.createElement(X.TextControl,{ref:a,value:t??"",placeholder:u??"",onChange:M=>i(e,M),onBlur:M=>i(e,M?.target?.value??""),onKeyDownCapture:M=>M.stopPropagation(),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),React.createElement("div",{className:"costered-blocks--token--actions"},React.createElement(X.Tooltip,{text:m.moveLeft},React.createElement(X.Button,{icon:"arrow-left-alt2",onClick:()=>l(e),label:m.moveLeft,variant:"tertiary"})),React.createElement(X.Tooltip,{text:m.moveRight},React.createElement(X.Button,{icon:"arrow-right-alt2",onClick:()=>s(e),label:m.moveRight,variant:"tertiary"}))));return React.createElement("div",{className:`costered-blocks--token ${o?"is-expanded":""}`},React.createElement("div",{className:"costered-blocks--token--chip",ref:w},React.createElement("button",{type:"button",className:"costered-blocks--token--chipButton","aria-expanded":o,"aria-controls":`costered-blocks--token--panel-${e}`,onClick:y,onKeyDown:B,title:o?m.collapse:m.expand},React.createElement("span",{className:"costered-blocks--token--chipText"},c)),React.createElement(X.Tooltip,{text:m.remove},React.createElement(X.Button,{icon:"no-alt",label:m.remove,onClick:g,variant:"tertiary",className:"costered-blocks--token--remove"}))),!d&&o&&U,d&&o&&w.current&&React.createElement(X.Popover,{className:"costered-blocks--token--popover",anchor:w.current,placement:f,onClose:()=>n(e,!1),focusOnMount:"firstElement",onFocusOutside:M=>M.preventDefault(),expandOnMobile:!0},React.createElement("div",{className:"costered-blocks--token--popoverInner",style:h?{width:h}:void 0},U)))}function y0(e){let{matrix:t,columnData:o,rowData:n,setCell:r,resize:i,clear:l,emptyToken:s=".",labels:p={},onEditingChange:u}=e,d=Array.isArray(t)?t:[],f=N(o?.count??o)||d[0]?.length||0,h=N(n?.count??n)||d.length||0,w=Math.max(1,f),v=Math.max(1,h),[b,a]=(0,q.useState)(null),m=(0,q.useRef)(null),c=(0,q.useCallback)((k,C)=>C*w+k,[w]),g=(0,q.useCallback)(k=>{let C=k%w,S=Math.floor(k/w);return[C,S]},[w]);(0,q.useEffect)(()=>{u?.(b!=null)},[b,u]),(0,q.useEffect)(()=>{a(k=>{if(k==null)return k;let[C,S]=g(k);return C<w&&S<v?k:null})},[w,v,g]);let y=(0,q.useCallback)((k,C)=>{a((typeof C=="boolean"?C:b!==k)?k:null)},[b]),R=(0,q.useCallback)(k=>{let[C,S]=g(k);C<=0||a(c(C-1,S))},[g,c]),B=(0,q.useCallback)(k=>{let[C,S]=g(k);C>=w-1||a(c(C+1,S))},[g,c,w]),U=(0,q.useCallback)(()=>i({cols:f+1,rows:h}),[i,f,h]),M=(0,q.useCallback)(()=>i({cols:Math.max(1,f-1),rows:h}),[i,f,h]),K=(0,q.useCallback)(()=>i({cols:f,rows:h+1}),[i,f,h]),Y=(0,q.useCallback)(()=>i({cols:f,rows:Math.max(1,h-1)}),[i,f,h]);return React.createElement("div",{className:"costered-blocks--token-grid--area",ref:m},React.createElement("div",{className:"costered-blocks--token-grid--row costered-blocks--token-grid--row-head"},React.createElement("div",{className:"costered-blocks--token-grid--cell costered-blocks--token-grid--cell-corner"})," ",Array.from({length:w}).map((k,C)=>React.createElement("div",{className:"costered-blocks--token-grid--cell costered-blocks--token-grid--cell-head",key:`col-${C}`},React.createElement("div",{key:`header-col-${C}`,className:"costered-blocks--token-grid--controls"},React.createElement($e.Button,{onClick:M,disabled:f<=1,variant:"tertiary",icon:"minus",label:p.removeColumn}),React.createElement($e.Button,{onClick:U,variant:"tertiary",icon:"plus",label:p.addColumn}))))),d.map((k,C)=>React.createElement("div",{key:`row-${C}`,className:"costered-blocks--token-grid--row"},React.createElement("div",{className:"costered-blocks--token-grid--cell costered-blocks--token-grid--cell-head"},React.createElement("div",{className:"costered-blocks--token-grid--controls"},React.createElement($e.Button,{onClick:Y,disabled:h<=1,variant:"tertiary",icon:"minus",label:p.removeRow}),React.createElement($e.Button,{onClick:K,variant:"tertiary",icon:"plus",label:p.addRow}))),k.map((S,P)=>{let _=c(P,C),F=S===s?"":S;return React.createElement("div",{key:`cell-${P}-${C}`,className:"costered-blocks--token-grid--cell"},React.createElement(Ve,{index:_,value:F,isExpanded:b===_,onToggle:y,onRemove:oe=>{let[he,Re]=g(oe);r(he,Re,s),a(null)},onChange:(oe,he)=>{let[Re,we]=g(oe);r(Re,we,he),console.log({change_index:oe,cellX:Re,cellY:we,next:he})},onMoveLeft:R,onMoveRight:B,emptyPlaceholder:s,floatingEditor:!0,popoverWidth:m.current?.offsetWidth??void 0,labels:{expand:p.tokenExpand,collapse:p.tokenCollapse,remove:p.tokenRemove,moveLeft:p.tokenMoveLeft,moveRight:p.tokenMoveRight}}))}))))}var S0=T(Se()),M0=T(V()),Me=T(L()),H=T(O());function A0({clientId:e,columnData:t,rowData:o,gridMatrix:{resize:n},labels:r=x.tokenGridNotice}){let{updateBlockAttributes:i}=(0,M0.useDispatch)("core/block-editor"),{set:l}=W(i,e),{trackColumnCount:s,trackRowCount:p}=Ze(e),u=ge(e),[d,f]=(0,Me.useState)(!1),h=S=>S&&typeof S=="object"?S.count??0:Number(S)||0,w=(S,P)=>S&&typeof S=="object"&&S.unit?S.unit:P,v=Number(t)||0,b=Number(o)||0,a=h(s),m=h(p),c=w(s,A),g=w(p,"auto"),y=v!==a,R=b!==m,B=v<a||b<m,U=(0,Me.useCallback)(()=>{n(a||v||1,m||b||1)},[n,a,m,v,b]),M=v>a,K=b>m,Y=(0,Me.useCallback)(()=>{let S=u?.columns?.template||"",P=u?.rows?.template||"",_=M?pt(S,v,c):S,F=K?pt(P,b,g):P;_===S&&F===P||(l("gridTemplateColumns",_),l("gridTemplateRows",F))},[v,b,c,g,u,l]),k=(0,Me.useCallback)(()=>{let S=mt(u?.columns?.template||"",v),P=mt(u?.rows?.template||"",b);l("gridTemplateColumns",S),l("gridTemplateRows",P)},[v,b,u,l]),C=(0,Me.useCallback)(()=>{/\[[^\]]+]/.test(u?.columns?.template||"")||/\[[^\]]+]/.test(u?.rows?.template||"")?f(!0):k()},[u,k]);return!y&&!R?null:React.createElement(H.Flex,{direction:"column",gap:2,className:"costered-blocks--grid-area-notices"},React.createElement(H.Notice,{status:"info",isDismissible:!1},(0,S0.sprintf)(r.mismatchText,v,b,a,m),React.createElement(H.Flex,{direction:"column",gap:2,style:{marginTop:8}},React.createElement(H.FlexBlock,null,React.createElement(H.Button,{variant:"secondary",onClick:U},r.resizeToTracks)),(M||K)&&React.createElement(H.FlexBlock,null,React.createElement(H.Button,{variant:"secondary",onClick:Y,disabled:!M&&!K},r.growTracksToAreas)),B&&React.createElement(H.FlexBlock,null,React.createElement(H.Button,{variant:"secondary",isDestructive:!0,onClick:C},r.shrinkTracks.button)))),B&&React.createElement(H.Notice,{status:"warning",isDismissible:!1,className:"costered-blocks--grid-area-notice--shrink-warning"},React.createElement("span",null,r.shrinkTracks.warning)),React.createElement(H.__experimentalConfirmDialog,{isOpen:d,onConfirm:()=>{k(),f(!1)},onCancel:()=>f(!1),confirmButtonText:r.shrinkTracks.confirm,cancelButtonText:r.shrinkTracks.cancel},React.createElement(H.__experimentalHeading,null,r.shrinkTracks.heading),React.createElement("p",null,r.shrinkTracks.description)))}function Qe({clientId:e,labels:t={}}){let[o,n]=(0,se.useState)(!1),r=(0,se.useRef)(null),i=(0,se.useMemo)(()=>({...x.tokenGrid,...t.tokenGrid}),[t]),l=(0,se.useMemo)(()=>({...x.tokenGridNotice,...t.tokenGridNotice}),[t]),{matrix:s,columnData:p,rowData:u,setCell:d,resize:f,clear:h}=ft(e),w=Array.isArray(s)&&Array.isArray(s[0])?s[0].length:0,v=Array.isArray(s)?s.length:0,b=N(p?.count??p),a=N(u?.count??u),m=w||v||b||a?w!==b||v!==a:!1,c=(0,se.useCallback)(g=>{r.current&&clearTimeout(r.current),g?n(!0):r.current=setTimeout(()=>n(!1),60)},[]);return(0,se.useEffect)(()=>()=>r.current&&clearTimeout(r.current),[]),React.createElement(ze.Flex,{direction:"column",gap:2,className:"costered-blocks--token-grid-component"},m&&React.createElement(A0,{clientId:e,columnData:b,rowData:a,gridMatrix:s,labels:l}),React.createElement(ze.Flex,{direction:"row",gap:2,align:"center",justify:"space-between",className:"costered-blocks--token-grid-header"},w>0&&v>0&&React.createElement(ze.FlexItem,null,React.createElement("span",{className:"costered-blocks--token-grid-help"},(0,R0.sprintf)(i.sizeHint,w,v)))),React.createElement(y0,{matrix:s,columnData:w,rowData:v,emptyToken:".",labels:i,setCell:d,resize:f,clear:h,onEditingChange:c}))}var de=T(L()),ot=T(O());var et=T(L()),Q=T(O());function fo({value:e,onChange:t,label:o="",isBlock:n=!0,children:r,...i}){let l=(0,et.useCallback)(s=>t(s),[t]);return React.createElement(Q.__experimentalToggleGroupControl,{className:`costered-blocks--custom-toggle-group ${e?"has-selection":"is-empty"}`,label:o,value:e,onChange:l,isBlock:n,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,isDeselectable:!0,...i},r)}function ho({value:e,label:t,disabled:o}){return React.createElement(Q.__experimentalToggleGroupControlOption,{className:"costered-blocks--custom-toggle-group--text-option",value:e,label:t,disabled:o})}function wo({value:e,icon:t,label:o,showTooltip:n=!0,disabled:r}){return React.createElement(Q.__experimentalToggleGroupControlOptionIcon,{className:"costered-blocks--custom-toggle-group--icon-option",value:e,icon:t,"aria-label":o,label:o,showTooltip:n,disabled:r})}function xo({value:e,icon:t,label:o,disabled:n}){return React.createElement(Q.__experimentalToggleGroupControlOption,{className:"costered-blocks--custom-toggle-group--combined-option",value:e,"aria-label":o,label:React.createElement(Q.Flex,{direction:"column",gap:0,align:"center",style:{paddingBlock:"0.5em"}},React.createElement(Q.FlexItem,null,t),React.createElement(Q.FlexItem,null,o)),disabled:n})}var tt=(0,et.memo)(fo);tt.TextOption=ho;tt.IconOption=wo;tt.CombinedOption=xo;var Ue=tt;function vo({value:e,onChange:t,panels:o,panelProps:n={},label:r=x.panelToggle.label,forceActive:i=!1,className:l,children:s,...p}){let u=de.Children.toArray(s).map(b=>b?.props?.value).filter(b=>typeof b=="string"&&b.length>0),d=u.length>0?u:Object.keys(o||{}),f=d[0]??null;(0,de.useEffect)(()=>{d.length&&(!e||!d.includes(e))&&t?.(f)},[e,f,d.join("|")]);let h=(0,de.useCallback)(b=>{let a=b??null;i&&a===null||t?.(a)},[t,i]),w=e?o?.[e]:null,v=typeof n=="function"?e?n(e):{}:n;return React.createElement(ot.Flex,{direction:"column",gap:2,className:l,...p},React.createElement(Ue,{label:r,value:e||void 0,onChange:h},s),w?React.createElement(ot.FlexBlock,null,React.createElement(de.Suspense,{fallback:null},React.createElement(w,{...v}))):null)}var rt=(0,de.memo)(vo);rt.TextOption=Ue.TextOption;rt.IconOption=Ue.IconOption;rt.CombinedOption=Ue.CombinedOption;var nt=rt;var It=T(Se()),ee=T(O()),N0=T(V());function Lt({clientId:e,blockName:t,onAxisDisableChange:o}){let{parentAttrs:n}=bt(e),r=(0,N0.useSelect)(re,[]),{get:i}=xe(e),{set:l,unset:s}=W(e),p=typeof n?.$get=="function"?n.$get("display"):n?.display;if(!(typeof p=="string"&&p.includes("grid")))return null;let d=ae("subgridPanelOpen",{blockName:t}),[f,h]=ce(d,!1),w=i("gridTemplateColumns",{raw:!0})==="subgrid",v=i("gridTemplateRows",{raw:!0})==="subgrid",b=()=>{i("display",{raw:!0})!=="grid"&&l("display","grid")},a=c=>{c?(b(),l("gridTemplateColumns","subgrid")):s("gridTemplateColumns"),o?.({columns:c,rows:v})},m=c=>{c?(b(),l("gridTemplateRows","subgrid")):s("gridTemplateRows"),o?.({columns:w,rows:c})};return React.createElement(ee.PanelBody,{title:x.gridControls.subgridPanel.title,initialOpen:f,onToggle:h,className:"costered-blocks--grid-controls--subgrid"},React.createElement(ee.PanelRow,{className:"costered-blocks--grid-controls--subgrid-toggle"},React.createElement(ee.Flex,{direction:"column",gap:4},React.createElement(ee.FlexBlock,null,React.createElement(ee.ToggleControl,{label:(0,It.sprintf)(x.gridControls.subgridPanel.columns.label,r),help:x.gridControls.subgridPanel.columns.help,checked:w,onChange:a})),React.createElement(ee.FlexBlock,null,React.createElement(ee.ToggleControl,{label:(0,It.sprintf)(x.gridControls.subgridPanel.rows.label,r),help:x.gridControls.subgridPanel.rows.help,checked:v,onChange:m})))))}var E=T(L()),P0=T(V()),$=T(O()),Dt=T(Se());var st=T(O());function lt({type:e,icon:t=null,title:o,content:n,className:r=""}){let i=`costered-blocks--custom-notice--type-${e} ${r}`;return React.createElement(st.Notice,{status:e,isDismissible:!1,className:`costered-blocks--custom-notice ${i}`},React.createElement("details",{key:".0",className:"costered-blocks--custom-notice--details"},React.createElement("summary",{className:"costered-blocks--custom-notice--summary"},t&&React.createElement("span",{className:"costered-blocks--custom-notice--icon"},t),o),React.createElement(st.Flex,{className:"costered-blocks--custom-notice--body",direction:"column",gap:2},n)))}var je=T(O()),B0=T(Se());function Ie({axis:e,canClear:t=!1,onClear:o,active:n,owner:r=null,here:i=null,label:l,disabled:s=!1}){let p=l||(e==="columns"?x.gridAxisAside.clearColumns:x.gridAxisAside.clearRows),u=!s&&t,d=typeof n=="boolean"?n:u&&r&&i&&r===i,h=u?d?"here":u&&r&&i&&r!=="raw"&&r!==i&&!d?"elsewhere":"none":"none",w=h==="none"?x.gridAxisAside.pip.noValue:h==="here"?x.gridAxisAside.pip.valueHere:r==="raw"?x.gridAxisAside.pip.valueRaw:(0,B0.sprintf)(x.gridAxisAside.pip.valueElsewhere,r0(r));return React.createElement("div",{className:`costered-blocks--grid-axis-aside ${h==="here"?"is-owned-here":""} ${h==="elsewhere"?"is-elsewhere":""}`,"data-state":h,"data-owner":r||"none","data-here":i||"none","aria-label":e},React.createElement(je.Tooltip,{text:w},React.createElement("span",{className:"costered-blocks--grid-axis-aside--pip"})),React.createElement(je.Tooltip,{text:p},React.createElement(je.Button,{icon:"trash",label:p,onClick:o,disabled:!u,variant:"tertiary",className:"costered-blocks--grid-axis-aside__clear"})))}var E0={mode:"raw",template:null,normalised:"",simple:null,tracks:null};function I0({clientId:e,axisDisabled:t={}}){if(!e)return null;let{updateBlockAttributes:o}=(0,P0.useDispatch)("core/block-editor"),{set:n,unset:r}=W(o,e),i=ge(e)||{},l=i.columns??E0,s=i.rows??E0,[p,u]=(0,E.useState)(l.simple?.count??0),[d,f]=(0,E.useState)(l.simple?.unit??A),[h,w]=(0,E.useState)((l.simple?.unit??A)===A),[v,b]=(0,E.useState)(s.simple?.count??0),[a,m]=(0,E.useState)(s.simple?.unit??A),[c,g]=(0,E.useState)((s.simple?.unit??A)===A),y=l?.normalised??"",R=s?.normalised??"";(0,E.useEffect)(()=>{u(l.simple?.count??0),f(l.simple?.unit??A),w((l.simple?.unit??A)===A)},[y]),(0,E.useEffect)(()=>{b(s.simple?.count??0),m(s.simple?.unit??A),g((s.simple?.unit??A)===A)},[R]);let B=(0,E.useMemo)(()=>h?A:d||A,[h,d]),U=(0,E.useMemo)(()=>c?A:a||A,[c,a]),M=Be(p,B),K=Be(v,U),Y=(0,E.useCallback)((I,D)=>{let De=Be(I,D);De==null?r("gridTemplateColumns"):n("gridTemplateColumns",De)},[n,r]),k=(0,E.useCallback)((I,D)=>{let De=Be(I,D);De==null?r("gridTemplateRows"):n("gridTemplateRows",De)},[n,r]),C=(0,E.useCallback)(I=>{let D=typeof I=="number"?I:parseInt(I||"0",10);u(D),Y(D,h?A:d)},[h,d,Y]),S=(0,E.useCallback)(I=>{let D=typeof I=="number"?I:parseInt(I||"0",10);b(D),k(D,c?A:a)},[c,a,k]),P=(0,E.useCallback)(I=>{w(I);let D=I?A:d||A;!I&&!d&&f(D),Y(p,D)},[p,d,Y]),_=(0,E.useCallback)(I=>{g(I);let D=I?A:a||A;!I&&!a&&m(D),k(v,D)},[v,a,k]),F=(0,E.useCallback)(I=>{let D=(I||"").trim();f(D),Y(p,h?A:D||A)},[p,h,Y]),oe=(0,E.useCallback)(I=>{let D=(I||"").trim();m(D),k(v,c?A:D||A)},[v,c,k]),he=(0,E.useCallback)(()=>{u(0),r("gridTemplateColumns")},[r]),Re=(0,E.useCallback)(()=>{b(0),r("gridTemplateRows")},[r]),we=t?.columns??!1,Le=t?.rows??!1;return React.createElement($.Flex,{direction:"column",gap:6},React.createElement($.FlexBlock,{className:"costered-blocks--grid-panel-simple--description"},x.gridControls.simplePanel.description),we&&React.createElement($.FlexBlock,null,React.createElement(lt,{type:"info",title:x.gridControls.simplePanel.columnIsDisabled,content:x.gridControls.simplePanel.columnIsDisabledHelp})),React.createElement($.Flex,{direction:"column",gap:3,className:"costered-blocks--grid-panel-simple--axis-controls"},React.createElement($.Flex,{direction:"row",justify:"space-between",align:"center"},React.createElement("span",{className:"costered-blocks--grid-panel-simple--axis-label"},x.gridControls.simplePanel.columns),React.createElement(Ie,{axis:"columns",canClear:!!l?.template,onClear:he,owner:i.activePane.columns,here:"simple",label:x.gridControls.simplePanel.columnsClear,disabled:we})),React.createElement($.RangeControl,{min:0,max:12,step:1,value:p,onChange:C,disabled:we,className:"costered-blocks--grid-columns-simple--axis-control",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),React.createElement($.ToggleControl,{label:(0,Dt.sprintf)(x.gridControls.simplePanel.columnSpan,A),checked:h,onChange:P,disabled:we,__nextHasNoMarginBottom:!0}),!h&&React.createElement(Pe,{label:x.gridControls.simplePanel.columnUnit,value:d,onChange:F,disabled:we})),Le&&React.createElement($.FlexBlock,null,React.createElement(lt,{type:"info",title:x.gridControls.simplePanel.rowIsDisabled,content:x.gridControls.simplePanel.rowIsDisabledHelp})),React.createElement($.Flex,{direction:"column",gap:2,className:"costered-blocks--grid-panel-simple--axis-controls"},React.createElement($.Flex,{direction:"row",justify:"space-between",align:"center"},React.createElement("span",{className:"costered-blocks--grid-panel-simple--axis-label"},x.gridControls.simplePanel.rows),React.createElement(Ie,{axis:"rows",canClear:!!s.template,onClear:Re,owner:i.activePane.rows,here:"simple",label:x.gridControls.simplePanel.rowsClear,disabled:Le})),React.createElement($.RangeControl,{min:0,max:12,step:1,value:v,onChange:S,disabled:Le,className:"costered-blocks--grid-rows-simple--axis-control",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),React.createElement($.ToggleControl,{label:(0,Dt.sprintf)(x.gridControls.simplePanel.rowSpan,A),checked:c,onChange:_,disabled:Le,__nextHasNoMarginBottom:!0}),!c&&React.createElement(Pe,{label:x.gridControls.simplePanel.rowUnit,value:a,onChange:oe,disabled:Le})))}var G=T(L()),L0=T(V()),le=T(O());var te=T(L()),ve=T(O());function Gt({tokens:e,onAdd:t,onEdit:o,onRemove:n,onMove:r,labels:i,allowLineNames:l=!0}){let s=(0,te.useMemo)(()=>({...x.tokenEditor,...i}),[i]),[p,u]=(0,te.useState)(""),[d,f]=(0,te.useState)(null),h=(0,te.useCallback)(()=>{let c=String(p||"").trim();c&&(t(c),u(""),f(null))},[p,t]),w=(0,te.useCallback)(()=>{let c=String(p||"").trim();c&&(t(`[${c}]`),u(""),f(null))},[p,t]),v=(0,te.useCallback)((c,g)=>{f(g?c:null)},[]),b=(0,te.useCallback)((c,g)=>{o(c,g)},[o]),a=(0,te.useCallback)(c=>{n(c),f(g=>g===c?null:g>c?g-1:g)},[n]),m=(0,te.useCallback)((c,g)=>{r(c,g),f(y=>y===c?c+g:y===c+g?c:y)},[r]);return React.createElement("div",{className:"costered-blocks--token-editor",role:"list","aria-label":s.listAriaLabel},React.createElement("div",{className:"costered-blocks--token-editor--list"},e.map((c,g)=>React.createElement(Ve,{key:`token-${g}`,index:g,value:c,isExpanded:d===g,onToggle:v,onRemove:a,onChange:b,onMoveLeft:y=>m(y,-1),onMoveRight:y=>m(y,1),labels:s}))),React.createElement("div",{className:"costered-blocks--token-editor--add"},React.createElement(ve.TextControl,{placeholder:s.addPlaceholder,value:p,onChange:u,onKeyDown:c=>{c.key==="Enter"&&h()},__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),l?React.createElement(ve.Flex,{className:"costered-blocks--token-editor--add-options",gap:0,align:"center"},React.createElement(ve.Button,{icon:"editor-code",onClick:h,label:s.addToken}),React.createElement(ve.Button,{icon:"tag",onClick:w,label:s.addLabel})):React.createElement(ve.Button,{variant:"secondary",onClick:h},s.addToken)))}function D0({clientId:e,axisDisabled:t}){if(!e)return null;let{updateBlockAttributes:o}=(0,L0.useDispatch)("core/block-editor"),{set:n,unset:r}=W(o,e),i=ge(e),l=i?.columns,s=i?.rows,p=(0,G.useMemo)(()=>l?l.tracks?.length?l.tracks:l.template?[String(l.template)]:[]:[],[l]),u=(0,G.useMemo)(()=>s?s.tracks?.length?s.tracks:s.template?[String(s.template)]:[]:[],[s]),[d,f]=(0,G.useState)(p),[h,w]=(0,G.useState)(u),v=l&&(l.normalised??me(l.template||""))||"",b=s&&(s.normalised??me(s.template||""))||"";(0,G.useEffect)(()=>{f(p)},[v]),(0,G.useEffect)(()=>{w(u)},[b]);let a=(0,G.useCallback)(k=>{let C=k.map(S=>String(S||"").trim()).filter(Boolean);return C.length?C.join(" "):null},[]),m=(0,G.useCallback)(k=>{let C=a(k);C==null?r("gridTemplateColumns"):n("gridTemplateColumns",C)},[a,n,r]),c=(0,G.useCallback)(k=>{let C=a(k);C==null?r("gridTemplateRows"):n("gridTemplateRows",C)},[a,n,r]),g=(0,G.useMemo)(()=>{let k=a(d);return!!l?.template&&me(k||"")===v},[l?.template,v,d,a]),y=(0,G.useMemo)(()=>{let k=a(h);return!!s?.template&&me(k||"")===b},[s?.template,b,h,a]),R=(0,G.useCallback)((k,C,S,P)=>{let _=String(P||"").trim();if(!_)return;let F=[...k,_];C(F),S(F)},[]),B=(0,G.useCallback)((k,C,S,P,_)=>{let F=k.slice();F[P]=_,C(F),S(F)},[]),U=(0,G.useCallback)((k,C,S,P)=>{let _=k.slice();_.splice(P,1),C(_),S(_)},[]),M=(0,G.useCallback)((k,C,S,P,_)=>{let F=P+_;if(F<0||F>=k.length)return;let oe=k.slice(),he=oe.splice(P,1)[0];oe.splice(F,0,he),C(oe),S(oe)},[]),K=(0,G.useCallback)(()=>{f([]),r("gridTemplateColumns")},[r]),Y=(0,G.useCallback)(()=>{w([]),r("gridTemplateRows")},[r]);return React.createElement(le.Flex,{direction:"column",gap:6},React.createElement(le.FlexBlock,null,x.gridControls.tracksPanel.description),React.createElement(le.FlexBlock,null,React.createElement(le.Flex,{direction:"column",gap:3,className:"costered-blocks--grid-panel-tracks--axis-controls"},React.createElement(le.Flex,{direction:"row",justify:"space-between",align:"center"},React.createElement("span",{className:"costered-blocks--grid-panel-tracks--axis-label"},x.gridControls.tracksPanel.columns.label),React.createElement(Ie,{axis:"columns",canClear:!!l?.template,onClear:K,owner:i.activePane.columns,here:"tracks",label:x.gridControls.tracksPanel.columns.clear})),React.createElement(Gt,{tokens:d,setTokens:f,onAdd:k=>R(d,f,m,k),onEdit:(k,C)=>B(d,f,m,k,C),onRemove:k=>U(d,f,m,k),onMove:(k,C)=>M(d,f,m,k,C),labels:{addPlaceholder:x.gridControls.tracksPanel.columns.addPlaceholder,addToken:x.gridControls.tracksPanel.columns.addToken,addLabel:x.gridControls.tracksPanel.columns.addLabel}}))),React.createElement(le.FlexBlock,null,React.createElement(le.Flex,{direction:"column",gap:3,className:"costered-blocks--grid-panel-tracks--axis-controls"},React.createElement(le.Flex,{direction:"row",gap:2,justify:"space-between",align:"center"},React.createElement(le.FlexBlock,null,React.createElement("span",{className:"costered-blocks--grid-panel-tracks--axis-label"},x.gridControls.tracksPanel.rows.label)),React.createElement(Ie,{axis:"rows",canClear:!!s?.template,onClear:Y,owner:i.activePane.rows,here:"tracks",label:x.gridControls.tracksPanel.rows.clear})),React.createElement(Gt,{tokens:h,setTokens:w,onAdd:k=>R(h,w,c,k),onEdit:(k,C)=>B(h,w,c,k,C),onRemove:k=>U(h,w,c,k),onMove:(k,C)=>M(h,w,c,k,C),labels:{addPlaceholder:x.gridControls.tracksPanel.rows.addPlaceholder,addToken:x.gridControls.tracksPanel.rows.addToken,addLabel:x.gridControls.tracksPanel.rows.addLabel}}))))}var bo=()=>{let{selectedBlock:e,clientId:t}=Tt(),{name:o}=e,{get:n}=xe(t),[r,i]=(0,Ae.useState)(null),[l,s]=(0,Ae.useState)(!1),p=(0,Ae.useCallback)(()=>s(!0),[]),u=(0,Ae.useCallback)(()=>s(!1),[]),d=qe(o,t),f=ae("gridTemplatePanelOpen",{blockName:d}),h=ae("gridGapPanelOpen",{blockName:d}),w=ae("gridTemplateAreasPanelOpen",{blockName:d}),[v,b]=ce(f,!0),[a,m]=ce(h,!1),[c,g]=ce(w,!1),y=n("gridTemplateColumns",{raw:!0})==="subgrid",R=n("gridTemplateRows",{raw:!0})==="subgrid",[B,U]=(0,Ae.useState)({columns:y,rows:R});return React.createElement(z.Panel,{className:"costered-blocks--tab--grid-controls"},React.createElement(Lt,{clientId:t,blockName:d,onAxisDisableChange:U}),React.createElement(z.PanelBody,{title:x.gridControls.panelTitle,className:"costered-blocks--grid-controls--template-axis-inner",initialOpen:v,onToggle:b},React.createElement(nt,{className:"costered-blocks--grid-controls--template-axis",value:r,onChange:i,label:x.gridControls.templateMode,forceActive:!0,panels:{simple:I0,tracks:D0},panelProps:{clientId:t,axisDisabled:B}},React.createElement(nt.TextOption,{value:"simple",label:x.gridControls.simplePanel.title}),React.createElement(nt.TextOption,{value:"tracks",label:x.gridControls.tracksPanel.title}))),React.createElement(z.PanelBody,{title:x.gridControls.gapPanel.title,className:"costered-blocks--grid-controls--gap-inner",initialOpen:a,onToggle:m},React.createElement(z.Flex,{direction:"column",expanded:!0,className:"costered-blocks--grid-controls--gap"},React.createElement(z.FlexBlock,null,React.createElement(Pt,{clientId:t,blockName:o})))),React.createElement(z.PanelBody,{title:x.gridControls.areasPanel.title,className:"costered-blocks--grid-controls--template-areas-inner",initialOpen:c,onToggle:g},React.createElement(z.Flex,{direction:"column",gap:4,className:"costered-blocks--grid-controls--template-areas"},React.createElement(Qe,{clientId:t,labels:{tokenGrid:x.gridControls.areasPanel,tokenGridNotice:x.gridControls.areasPanel.noticePanel}}),React.createElement(z.Flex,{justify:"flex-end"},React.createElement(z.Button,{variant:"secondary",onClick:p},x.gridControls.areasPanel.editLarge))),l&&React.createElement(z.Modal,{title:x.gridControls.gridTemplateAreasModal,onRequestClose:u,className:"costered-blocks--grid-controls--modal costered-blocks--modal--wide",shouldCloseOnClickOutside:!0},React.createElement(Qe,{clientId:t,labels:{tokenGrid:x.gridControls.areasPanel,tokenGridNotice:x.gridControls.areasPanel.noticePanel}}))))},ko=(e={})=>{let t=(typeof e?.$get=="function"?e.$get("display"):e?.display)??"";return/^(grid|inline-grid)$/i.test(String(t))},qc={name:"grid-controls",title:x.gridControls.panelTitle,icon:React.createElement(Mt,null),isVisible:({attributes:e})=>ko(e),render:()=>React.createElement(bo,null)};})();
