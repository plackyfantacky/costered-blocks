(()=>{var lo=Object.create;var it=Object.defineProperty;var so=Object.getOwnPropertyDescriptor;var no=Object.getOwnPropertyNames;var co=Object.getPrototypeOf,ao=Object.prototype.hasOwnProperty;var we=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var io=(e,t,r,l)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of no(t))!ao.call(e,s)&&s!==r&&it(e,s,{get:()=>t[s],enumerable:!(l=so(t,s))||l.enumerable});return e};var w=(e,t,r)=>(r=e!=null?lo(co(e)):{},io(t||!e||!e.__esModule?it(r,"default",{value:e,enumerable:!0}):r,e));var H=we((Lo,dt)=>{dt.exports=wp.element});var Q=we((qo,mt)=>{mt.exports=wp.data});var W=we((Vo,pt)=>{pt.exports=wp.components});var Be=we((r0,Bt)=>{Bt.exports=wp.blockEditor});var Ot=we((p0,Vt)=>{Vt.exports=wp.preferences});var ne=we((y0,Pt)=>{Pt.exports=wp.i18n});var Se=w(H()),to=w(Q()),U=w(W());var ae=w(H());var De={display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"}};function se(e){return Object.fromEntries(Object.entries(De).filter(([t,r])=>r.group===e))}var ut=se("display"),gt=se("dimension"),ht=se("margin"),ft=se("padding"),xt=se("flex"),kt=se("flex-item"),wt=se("grid"),je=se("grid-item"),vt=se("shared"),Ho={...ut,...gt,...ht,...ft,...xt,...kt,...wt,...je,...vt},bt=new Set([...Object.keys(je)]);var S="1fr",Zo=new Set([...Object.keys(ut),...Object.keys(gt),...Object.keys(ft),...Object.keys(ht),...Object.keys(xt),...Object.keys(kt),...Object.keys(wt),...Object.keys(je),...Object.keys(vt)]),$o=Object.fromEntries(Object.entries(De).map(([e,t])=>[e,t.css]));function X(e,t,{trim:r=!0,emptyUnsets:l=!0}={}){let s=t!=null,n=(0,ae.useCallback)((m,d)=>{if(bt.has(d)){let p=typeof m=="string"&&r?m.trim():String(m);return l&&p===""?void 0:p}let i=m;if(r&&typeof i=="string"&&(i=i.trim()),!(l&&(i===""||i==null)))return i},[r,l]),c=(0,ae.useCallback)(m=>{if(s)return e(t,m);{let d={};for(let[i,p]of Object.entries(m)){let b=n(p,i);b!==void 0&&(d[i]=b)}Object.keys(d).length&&e(t,d)}},[s,e,t,n]),u=(0,ae.useCallback)((m,d)=>{c({[m]:n(d,m)})},[c,n]),h=(0,ae.useCallback)(m=>{let d={};for(let[i,p]of Object.entries(m))d[i]=n(p,i);c(d)},[c,n]),g=(0,ae.useCallback)(m=>{c({[m]:void 0})}),a=(0,ae.useCallback)(m=>{let d={};for(let i of m)d[i]=void 0;c(d)},[c]),k=(0,ae.useCallback)(m=>({set:(d,i)=>u(`${m}${d}`,i),setMany:d=>{let i={};for(let[p,b]of Object.entries(d))i[`${m}${p}`]=b;h(i)},unset:d=>g(`${m}${d}`),unsetMany:d=>a(d.map(i=>`${m}${i}`))}),[u,h,g,a]);return{set:u,setMany:h,unset:g,unsetMany:a,withPrefix:k}}var te=w(H());var Ct=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"";function ee(e){return String(e||"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function po(e){let t=String(e||"").trim();if(!t)return[];let r=0,l=0,s="",n=[];for(let c=0;c<t.length;c++){let u=t[c];if(u==="("){r++,s+=u;continue}if(u===")"){r=Math.max(0,r-1),s+=u;continue}if(u==="["){l++,s+=u;continue}if(u==="]"){l=Math.max(0,l-1),s+=u;continue}if(u===" "&&r===0&&l===0){s&&(n.push(s),s="");continue}s+=u}return s&&n.push(s),n}function uo(e){if(!e)return null;let t=e.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);return t?{count:parseInt(t[1],10),unit:t[2].trim()}:null}function ve(e,t=S){return e>0?`repeat(${e}, ${t})`:null}var go=/^(?:[0-9.]+(?:px|rem|em|ch|vh|vw|vmin|vmax|fr|%)|auto|max-content|min-content|fit-content\([^)]+\)|minmax\([^)]+\)|clamp\([^)]+\)|var\([^)]+\))$/i;function We(e,t,r="1fr"){let l=Math.max(0,Number(t)||0),s=String(e||"").trim();if(l<=0)return s;let{count:n}=Re(s);if(n===0){let a=String(r||"").trim()||"1fr";return`repeat(${l}, ${a})`}if(n>=l)return s;let c=l-n,u=String(r||"").trim()||"1fr",h=s.match(/^repeat\(\s*([0-9]+)\s*,\s*([^)]+)\)\s*$/i);if(h){let a=h[2].trim();if(go.test(a))return`repeat(${l}, ${a})`}let g=Array.from({length:c}).map(()=>u).join(" ");return`${s} ${g}`.trim()}function ze(e,t){if(!e||typeof e!="string")return"";let r=Math.max(0,t|0),l=e.replace(/\[[^\]]*\]/g," ").trim();if(!l)return"";let s=l.match(/^repeat\(\s*([0-9]+)\s*,\s*([^)]+)\)\s*$/i);if(s){let n=s[2].trim();if(!/\s/.test(n))return r<=0?"":`repeat(${r}, ${n})`;let c=ho(l);return Tt(c,r)}return Tt(l,r)}function Re(e,t=S){if(!e||typeof e!="string")return{count:0,unit:t};let r=e.trim();if(!r)return{count:0,unit:t};if(/^subgrid\b/i.test(r))return{count:0,unit:t};if(r=r.replace(/\[[^\]]*]/g," ").trim(),!r)return{count:0,unit:t};let l=r.match(/repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)$/i);if(l){let c=l[2];return{count:0,unit:yt(c,t)}}let{count:s,unit:n}=Mt(r,t);return{count:s,unit:n||t}}function Mt(e,t){let r=St(e);if(r){let c=r.inner.trim(),{count:u,unit:h}=Mt(c,t);return{count:r.times*u,unit:h||yt(c,t)}}let l=Ue(e),s=l.length,n="";if(l.length===1)n=Ae(l[0])||t;else{let c=l.find(At);n=Ae(c)||t}return{count:s,unit:n}}function St(e){let t=e.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!t)return null;let r=parseInt(t[1],10),l=t[2];return!Number.isFinite(r)||r<0?null:{times:r,inner:l}}function Ue(e){let t=[],r=0,l="";for(let s=0;s<e.length;s++){let n=e[s];if(n==="("){r++,l+=n;continue}if(n===")"){r=Math.max(0,r-1),l+=n;continue}if(r===0&&/\s/.test(n)){l.trim()&&t.push(l.trim()),l="";continue}l+=n}return l.trim()&&t.push(l.trim()),t}function yt(e,t){if(!e)return t;let r=St(e);if(r){let n=Ue(r.inner);if(n.length===1)return Ae(n[0])||t}let l=Ue(e);if(l.length===1)return Ae(l[0])||t;let s=l.find(At);return Ae(s)||t}function At(e){return e?!!(/^(minmax|fit-content|clamp|var)\(/i.test(e)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(e)||/^(auto|max-content|min-content)$/i.test(e)):!1}function Ae(e){return e?e.trim():""}function ho(e){return e.replace(/repeat\(\s*([0-9]+)\s*,\s*([^)]+)\)/gi,(t,r,l)=>{let s=parseInt(r,10),n=l.trim();return Array.from({length:s}).map(()=>n).join(" ")})}function Tt(e,t){if(t<=0)return"";let r=0,l="",s=[];for(let c of e)c==="("&&r++,c===")"&&(r=Math.max(0,r-1)),/\s/.test(c)&&r===0?l&&(s.push(l),l=""):l+=c;l&&s.push(l);let n=s.slice(0,t);return n.length===0?"":n.join(" ")}function fo(e){let t=uo(e);if(!t)return null;let r=ee(ve(t.count,t.unit));return{mode:"simple",template:e||null,normalised:r,simple:{count:t.count,unit:t.unit}}}function xo(e){let t=po(e);if(!t.length)return null;let r=ee(t.join(" "));return{mode:"tracks",template:e||null,normalised:r,tracks:t}}var ko=[fo,xo];function Ke(e){let t=e||"";for(let r of ko){let l=r(t);if(l)return l}return{mode:"raw",template:e||null,normalised:ee(e||"")}}function Rt(e){let t=(e||"").trim();if(!t)return{hasAreas:!1,cols:0,rows:0};let r=t.split(/(['"])(?:(?=(\\?))\2.)*?\1/).map(s=>s.replace(/^['"]|['"]$/g,"").trim()).filter(s=>s&&!/^[\s]+$/.test(s));return r.length?{hasAreas:!0,cols:Math.max(0,...r.map(s=>s.split(/\s+/).filter(Boolean).length)),rows:r.length}:{hasAreas:!1,cols:0,rows:0}}function be(e,t="."){if(!Array.isArray(e)||e.length===0)return"";let r=e.map(s=>(Array.isArray(s)?s:[]).map(n=>{let c=String(n??"").trim();return c===""?t:c}));return r.some(s=>s.some(n=>n!==t))?r.map(s=>`"${s.join(" ")}"`).join(" "):""}function Je(e,t="."){let r=String(e||"").trim();if(!r)return[];let l=[];return r.replace(/(['"])(.*?)\1/g,(s,n,c)=>(l.push(c),"")),l.map(s=>s.trim().split(/\s+/).map(n=>n&&n!==t?n:t))}function Te(e,t,r,l="."){let s=[];for(let n=0;n<r;n++){let c=e[n]||[],u=Array.from({length:t},(h,g)=>c[g]??l);s.push(u)}return s}function Ye({seedMatrix:e,emptyToken:t=".",onApply:r,suspendResync:l=!1}){let[s,n]=(0,te.useState)(()=>e),c=(0,te.useRef)(be(s));(0,te.useEffect)(()=>{c.current=be(s)},[s]),(0,te.useEffect)(()=>{if(l)return;be(e)!==c.current&&n(e)},[e,l]);let u=s[0]?.length||0,h=s.length||0,g=(0,te.useCallback)((m,d,i)=>{n(p=>{let b=String(i??"").trim(),M=b===""?t:b,I=p.map((T,y)=>y===d?T.map((A,O)=>O===m?M:A):T);return r?.(I),I})},[r,t]),a=(0,te.useCallback)((m,d)=>{n(i=>{let p=Te(i,m,d,t);return r?.(p),p})},[t,r]),k=(0,te.useCallback)((m=1,d=1)=>{n(()=>{let i=Te([],Math.max(1,m),Math.max(1,d),t);return r?.(i),i})},[t,r]);return{matrix:s,columnData:u,rowData:h,setCell:g,resize:a,clear:k}}var To=w(H());var wo=w(H());var _t=w(Q()),Nt=w(Be()),Ft=w(H());function re(e){let t=(0,_t.useSelect)(l=>e?l(Nt.store).getBlock(e)?.attributes??{}:{},[e]);return(0,Ft.useMemo)(()=>{let l=Ke(t.gridTemplateColumns),s=Ke(t.gridTemplateRows),n=t.gridTemplateAreas??null,c=Rt(n);return{columns:l,rows:s,areas:{template:n,...c},activePane:{columns:l.mode,rows:s.mode}}},[t.gridTemplateColumns,t.gridTemplateRows,t.gridTemplateAreas])}var fe=w(H()),It=w(Q()),Et=w(Be());function _e(e){let{updateBlockAttributes:t}=(0,It.useDispatch)(Et.store),{set:r,unset:l}=X(t,e),s=re(e),n=s?.columns?.template??null,c=s?.rows?.template??null,u=s?.areas?.template??null,h=(0,fe.useMemo)(()=>n?Re(n):0,[n]),g=(0,fe.useMemo)(()=>c?Re(c):0,[c]),a=(0,fe.useCallback)(d=>{let i=be(d,".");i?r("gridTemplateAreas",i):l("gridTemplateAreas")},[r,l]),k=(0,fe.useCallback)(()=>{l("gridTemplateAreas")},[l]),m=(0,fe.useCallback)((d=".")=>{let i=Je(u,d),p=i[0]?.length||h||1,b=i.length||g||1;return Te(i,p,b,d)},[u,h,g]);return{areasTemplate:u,trackColumnCount:h,trackRowCount:g,applyMatrixToStore:a,clearAreasInStore:k,seedFromStore:m}}var Co=w(Q());var Gt=w(Q()),Lt=w(Be());function Ne(e,t){return(0,Gt.useSelect)(r=>{if(e)return e;let l=r(Lt.store),s=t||l.getSelectedBlockClientId();return(s?l.getBlock(s):null)?.name??null},[e,t])}var qt=w(Q());function Qe(){return(0,qt.useSelect)(e=>{let t=e("core/block-editor"),r=t.getSelectedBlockClientId();return{selectedBlock:r?t.getBlock(r):null,clientId:r}},[])}var Le=w(Q()),Xe=w(Ot());function ie(e,t,r="costered-blocks"){let l=(0,Le.useSelect)(h=>h(Xe.store).get(r,e)??t,[r,e,t]),{set:s,__experimentalReset:n}=(0,Le.useDispatch)(Xe.store);return[l,h=>{e.startsWith("__invalid__")||s(r,e,h)},()=>{e.startsWith("__invalid__")||n?.(r,e)}]}var de=(e,{blockName:t,variant:r}={})=>!t&&!r?e:t&&!r?`${e}:${t}`:!t&&r?`${e}#${r}`:`${e}:${t}#${r}`;var o=w(ne()),x={pluginSidebar:{noBlockSelected:(0,o.__)("Please select a block to edit its settings.","costered-blocks"),title:(0,o.__)("Costered Blocks","costered-blocks"),selectedBlock:(0,o.__)("Selected block","costered-blocks"),blockWarningSummary:(0,o.__)("Style changes may not appear in the editor","costered-blocks"),blockWarningDetails:(0,o.__)("There may be some differences between the editor and the frontend. This is due to limitations with the block editor, which does not always allow custom inline styles to be displayed here.","costered-blocks")},displayControls:{panelTitle:(0,o.__)("Display Controls","costered-blocks"),displayLabel:(0,o.__)("Display","costered-blocks"),unset:(0,o.__)("unset / initial","costered-blocks"),displayBlock:(0,o.__)("Block","costered-blocks"),displayInline:(0,o.__)("Inline","costered-blocks"),displayFlex:(0,o.__)("Flex","costered-blocks"),displayGrid:(0,o.__)("Grid","costered-blocks"),displayNone:(0,o.__)("None","costered-blocks"),visibilityLabel:(0,o.__)("Visibility","costered-blocks"),visibilityUnset:(0,o.__)("unset / initial","costered-blocks"),visibilityVisible:(0,o.__)("Visible","costered-blocks"),visibilityHidden:(0,o.__)("Hidden","costered-blocks"),visibilityCollapse:(0,o.__)("Collapse","costered-blocks")},dimensionControls:{panelTitle:(0,o.__)("Dimension Controls","costered-blocks"),dimensionPanel:(0,o.__)("Dimensions","costered-blocks"),dimensions:{width:(0,o.__)("Width","costered-blocks"),height:(0,o.__)("Height","costered-blocks")},minPanel:(0,o.__)("Minimum Dimensions","costered-blocks"),minDimensions:{width:(0,o.__)("Min Width","costered-blocks"),height:(0,o.__)("Min Height","costered-blocks")},maxPanel:(0,o.__)("Maximum Dimensions","costered-blocks"),maxDimensions:{width:(0,o.__)("Max Width","costered-blocks"),height:(0,o.__)("Max Height","costered-blocks")}},spacingControls:{panelTitle:(0,o.__)("Spacing Controls","costered-blocks"),panelLabel:(0,o.__)("Spacing","costered-blocks"),marginLabel:(0,o.__)("Margin","costered-blocks"),paddingLabel:(0,o.__)("Padding","costered-blocks")},flexBoxControls:{panelTitle:(0,o.__)("Flexbox Controls","costered-blocks"),flexWrapLabel:(0,o.__)("Flex Wrap","costered-blocks"),flexWrapNone:(0,o.__)("No Wrap","costered-blocks"),flexWrapWrap:(0,o.__)("Wrap","costered-blocks"),flexWrapReverse:(0,o.__)("Reverse","costered-blocks"),alignmentPanel:(0,o.__)("Alignment","costered-blocks"),gapPanel:(0,o.__)("Gap","costered-blocks")},flexItemControls:{panelTitle:(0,o.__)("Flex Item Controls","costered-blocks"),flexGrow:(0,o.__)("Grow","costered-blocks"),flexShrink:(0,o.__)("Shrink","costered-blocks"),flexBasis:(0,o.__)("Basis","costered-blocks"),flexBasisPlaceholder:(0,o.__)("Enter value","costered-blocks"),order:(0,o.__)("Order","costered-blocks")},gridControls:{panelTitle:(0,o.__)("Grid Controls","costered-blocks"),gridTemplatePanel:(0,o.__)("Grid Template","costered-blocks"),gridTemplatePanelSimple:(0,o.__)("Simple","costered-blocks"),gridTemplatePanelTracks:(0,o.__)("Tracks","costered-blocks"),gapPanel:(0,o.__)("Gap","costered-blocks"),gridTemplateAreasPanel:(0,o.__)("Grid Template Areas","costered-blocks"),gridTemplateAreasEditLarge:(0,o.__)("Edit in larger view","costered-blocks"),gridTemplateAreasModal:(0,o.__)("Edit Grid Template Areas","costered-blocks")},gridItemsControls:{simplePanel:(0,o.__)("Simple","costered-blocks"),tracksPanel:(0,o.__)("Tracks","costered-blocks"),areasPanel:(0,o.__)("Areas","costered-blocks"),gridAreaLabel:(0,o.__)("Named area (grid-area)","costered-blocks"),gridAreaNone:(0,o.__)("\u2014 None \u2014","costered-blocks"),gridAreaHelp:(0,o.__)("Setting a named area overrides row/column placement.","costered-blocks"),panelTitle:(0,o.__)("Grid Item Controls","costered-blocks"),settingsIsAdvancedOwned:(0,o.__)("Settings use Advanced features (read-only here). Switch to the Advanced panel to edit.","costered-blocks"),settingsIsSimpleOwned:(0,o.__)("Settings use Simple features (read-only here). Switch to the Simple panel to edit.","costered-blocks"),settingsHasArea:(0,o.__)("This item uses a named grid area. Line-based placement is disabled.","costered-blocks"),panelAlignment:(0,o.__)("Alignment","costered-blocks"),panelOrder:(0,o.__)("Order","costered-blocks"),simple:(0,o.__)("Simple","costered-blocks"),advanced:(0,o.__)("Advanced","costered-blocks"),columnsLabel:(0,o.__)("Columns","costered-blocks"),rowsLabel:(0,o.__)("Rows","costered-blocks"),columnPlacementMode:(0,o.__)("Placement uses","costered-blocks"),columnPlacementSpan:(0,o.__)("Span","costered-blocks"),columnPlacementEnd:(0,o.__)("End","costered-blocks"),columnStartMode:(0,o.__)("Start uses","costered-blocks"),columnStartModeNumber:(0,o.__)("Line number","costered-blocks"),columnStartModeNamed:(0,o.__)("Named line","costered-blocks"),columnStart:(0,o.__)("Column Start","costered-blocks"),columnStartHelp:(0,o.__)("%1$d columns","costered-blocks"),columnStartNamed:(0,o.__)("Column Start (named line)","costered-blocks"),columnStartNamedHelp:(0,o.__)("Free text allowed; suggestions from parent column template.","costered-blocks"),columnStartNameMismatch:(0,o.__)("Parent grid has no named column lines; this item currently uses a named start token.","costered-blocks"),columnSpan:(0,o.__)("Column Span","costered-blocks"),columnSpanHelp:(0,o.__)("Max updates with start","costered-blocks"),columnSpanParentHelp:(0,o.__)("Max updates with start & parent columns.","costered-blocks"),columnEndMode:(0,o.__)("End uses","costered-blocks"),columnEndModeNumber:(0,o.__)("Line number","costered-blocks"),columnEndModeNamed:(0,o.__)("Named line","costered-blocks"),columnEndModeAuto:(0,o.__)("Auto","costered-blocks"),columnEnd:(0,o.__)("Column End","costered-blocks"),columnEndHelp:(0,o.__)("Max updates with start","costered-blocks"),columnEndNumber:(0,o.__)("Column End (line number)","costered-blocks"),columnEndNumberHelp:(0,o.__)("Supports negative indices (e.g. -1 = last line).","costered-blocks"),columnEndNamed:(0,o.__)("Column End (named line)","costered-blocks"),columnEndNamedHelp:(0,o.__)("Free text allowed; suggestions from parent column template.","costered-blocks"),columnEndNameMismatch:(0,o.__)("Parent grid has no named column lines; this item currently uses a named end token.","costered-blocks"),rowStart:(0,o.__)("Row Start","costered-blocks"),rowStartHelp:(0,o.__)("%1$d rows","costered-blocks"),rowSpan:(0,o.__)("Row Span","costered-blocks"),rowSpanHelp:(0,o.__)("Max updates with start","costered-blocks"),order:(0,o.__)("Order","costered-blocks")},flexDirection:{label:(0,o.__)("Flex Direction","costered-blocks"),row:(0,o.__)("Row","costered-blocks"),rowReverse:(0,o.__)("Row Reverse","costered-blocks"),column:(0,o.__)("Column","costered-blocks"),columnReverse:(0,o.__)("Column Reverse","costered-blocks")},justifyControls:{label:(0,o.__)("Justify Content","costered-blocks"),start:(0,o.__)("Start","costered-blocks"),end:(0,o.__)("End","costered-blocks"),center:(0,o.__)("Center","costered-blocks"),spaceAround:(0,o.__)("Space Around","costered-blocks"),spaceBetween:(0,o.__)("Space Between","costered-blocks"),spaceEvenly:(0,o.__)("Space Evenly","costered-blocks")},alignControls:{label:(0,o.__)("Align Items","costered-blocks"),start:(0,o.__)("Start","costered-blocks"),end:(0,o.__)("End","costered-blocks"),center:(0,o.__)("Center","costered-blocks"),stretch:(0,o.__)("Stretch","costered-blocks"),baseline:(0,o.__)("Baseline","costered-blocks"),spaceAround:(0,o.__)("Space Around","costered-blocks"),spaceBetween:(0,o.__)("Space Between","costered-blocks"),spaceEvenly:(0,o.__)("Space Evenly","costered-blocks")},customSelectControl:{defaultText:(0,o.__)("choose...","costered-blocks")},dimensionInputGroup:{label:(0,o.__)("Dimensions","costered-blocks"),labelPre:(0,o.__)("%1$s Dimensions","costered-blocks"),width:(0,o.__)("Width","costered-blocks"),height:(0,o.__)("Height","costered-blocks"),useCustom:(0,o.__)("Use custom values (e.g auto, calc)","costered-blocks")},directionalInputGroup:{label:(0,o.__)("Directions","costered-blocks"),top:(0,o.__)("Top","costered-blocks"),right:(0,o.__)("Right","costered-blocks"),bottom:(0,o.__)("Bottom","costered-blocks"),left:(0,o.__)("Left","costered-blocks"),useCustom:(0,o.__)("Use custom values (e.g auto, calc)","costered-blocks")},gapControls:{label:(0,o.__)("Gaps","costered-blocks"),rowLabel:(0,o.__)("Row Gap","costered-blocks"),switchToSingle:(0,o.__)("Switch to Single Gap","costered-blocks"),switchToDual:(0,o.__)("Switch to Dual Gap","costered-blocks"),columnLabel:(0,o.__)("Column Gap","costered-blocks"),useCustom:(0,o.__)("Use custom values (e.g auto, calc)","costered-blocks")},gridAxisAside:{label:(0,o.__)("Grid Axis","costered-blocks"),horizontal:(0,o.__)("Horizontal","costered-blocks"),vertical:(0,o.__)("Vertical","costered-blocks"),pipTitleNoValue:(0,o.__)("No value set","costered-blocks"),pipTitleValueHere:(0,o.__)("Value matches this panel","costered-blocks"),pipTitleValueElsewhere:(0,o.__)("Value set in %s panel","costered-blocks"),pipTitleValueRaw:(0,o.__)("Value set (unrecognised format)","costered-blocks"),clearRows:(0,o.__)("Clear Rows","costered-blocks"),clearColumns:(0,o.__)("Clear Columns","costered-blocks")},panelToggle:{label:(0,o.__)("Panel","costered-blocks")},token:{expand:(0,o.__)("Edit token","costered-blocks"),collapse:(0,o.__)("Close editor","costered-blocks"),remove:(0,o.__)("Remove","costered-blocks"),moveLeft:(0,o.__)("Move left","costered-blocks"),moveRight:(0,o.__)("Move right","costered-blocks")},tokenGrid:{title:(0,o.__)("Areas","costered-blocks"),clear:(0,o.__)("Clear","costered-blocks"),sizeHint:(0,o.__)("%1$d columns x %2$d rows","costered-blocks"),mismatchText:(0,o.__)("Templates areas (%1$dx%2$d) do not match current tracks (%3$dx%4$d)","costered-blocks"),resizeToTracks:(0,o.__)("Resize areas to match tracks","costered-blocks"),growTracksToAreas:(0,o.__)("Grow tracks to match areas","costered-blocks"),shrinkTracks:(0,o.__)("Shrink tracks to areas","costered-blocks"),shrinkTracksWarning:(0,o.__)("Shrinking may remove named lines. Continue?","costered-blocks"),shrinkTracksNote:(0,o.__)("Shrinking tracks may remove named lines; please review afterwards.","costered-blocks"),shrinkTracksConfirm:(0,o.__)("Shrink tracks","costered-blocks"),shrinkTracksCancel:(0,o.__)("Cancel","costered-blocks"),shrinkTracksHeading:(0,o.__)("Remove named lines?","costered-blocks"),shrinkTracksDescription:(0,o.__)("Shrinking tracks will drop line names (e.g. [sidebar-start]). This can change template references. Continue?","costered-blocks"),tokenExpand:(0,o.__)("Edit cell","costered-blocks"),tokenCollapse:(0,o.__)("Close editor","costered-blocks"),tokenRemove:(0,o.__)("Clear cell","costered-blocks"),tokenMoveLeft:(0,o.__)("Previous cell","costered-blocks"),tokenMoveRight:(0,o.__)("Next cell","costered-blocks"),addColumn:(0,o.__)("Add column","costered-blocks"),removeColumn:(0,o.__)("Remove column","costered-blocks"),addRow:(0,o.__)("Add row","costered-blocks"),removeRow:(0,o.__)("Remove row","costered-blocks")},tokenEditor:{add:(0,o.__)("Add","costered-blocks"),addPlaceholder:(0,o.__)("Add token","costered-blocks"),addLineNames:(0,o.__)("Add line names","costered-blocks"),listAriaLabel:(0,o.__)("List of tokens","costered-blocks"),moveLeft:(0,o.__)("Move left","costered-blocks"),moveRight:(0,o.__)("Move right","costered-blocks"),remove:(0,o.__)("Remove","costered-blocks"),expand:(0,o.__)("Edit token","costered-blocks"),collapse:(0,o.__)("Close editor","costered-blocks")}};var ds=w(ne()),ce=w(H()),$=w(W());var Mo=({size:e=24,...t})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t},React.createElement("path",{d:"M11.271,12.013l0,-1.784c0,-0.403 0.327,-0.729 0.729,-0.729c0.402,0 0.729,0.326 0.729,0.729l-0,1.784l0.213,-0.214c0.284,-0.284 0.746,-0.284 1.03,0c0.284,0.285 0.284,0.746 0,1.031l-1.457,1.457c-0.137,0.137 -0.321,0.213 -0.515,0.213c-0.194,-0 -0.378,-0.076 -0.515,-0.213l-1.457,-1.457c-0.284,-0.285 -0.284,-0.746 -0,-1.031c0.284,-0.284 0.746,-0.284 1.03,0l0.213,0.214Z"}),React.createElement("path",{d:"M3.199,19.503l0,-2.001c0,-0.994 0.807,-1.8 1.801,-1.8l14,-0c0.994,-0 1.801,0.806 1.801,1.8l-0,2.001c-0,0.993 -0.807,1.8 -1.801,1.8l-14,-0c-0.994,-0 -1.801,-0.807 -1.801,-1.8Zm1.6,-0c0,0.11 0.09,0.2 0.201,0.2l14,-0c0.111,-0 0.201,-0.09 0.201,-0.2l-0,-2.001c-0,-0.111 -0.09,-0.2 -0.201,-0.2l-14,-0c-0.111,-0 -0.201,0.089 -0.201,0.2l0,2.001Z"}),React.createElement("path",{d:"M12.701,6.498l-0,-2.001c-0,-0.993 0.806,-1.8 1.8,-1.8l4.499,0c0.994,0 1.801,0.807 1.801,1.8l-0,2.001c-0,0.994 -0.807,1.8 -1.801,1.8l-4.499,0c-0.994,0 -1.8,-0.806 -1.8,-1.8Zm1.6,0c-0,0.111 0.089,0.2 0.2,0.2l4.499,0c0.111,0 0.201,-0.089 0.201,-0.2l-0,-2.001c-0,-0.11 -0.09,-0.2 -0.201,-0.2l-4.499,0c-0.111,0 -0.2,0.09 -0.2,0.2l-0,2.001Z"}),React.createElement("path",{d:"M3.199,6.498l0,-2.001c0,-0.993 0.807,-1.8 1.801,-1.8l4.499,0c0.994,0 1.8,0.807 1.8,1.8l0,2.001c0,0.994 -0.806,1.8 -1.8,1.8l-4.499,0c-0.994,0 -1.801,-0.806 -1.801,-1.8Zm1.6,0c0,0.111 0.09,0.2 0.201,0.2l4.499,0c0.111,0 0.2,-0.089 0.2,-0.2l0,-2.001c0,-0.11 -0.089,-0.2 -0.2,-0.2l-4.499,0c-0.111,0 -0.201,0.09 -0.201,0.2l0,2.001Z"})),et=Mo;var So=({size:e=24,...t})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t},React.createElement("path",{fill:"currentColor",d:"M5 11q-.825 0-1.412-.587T3 9V5q0-.825.588-1.412T5 3h4q.825 0 1.413.588T11 5v4q0 .825-.587 1.413T9 11zm0 10q-.825 0-1.412-.587T3 19v-4q0-.825.588-1.412T5 13h4q.825 0 1.413.588T11 15v4q0 .825-.587 1.413T9 21zm10-10q-.825 0-1.412-.587T13 9V5q0-.825.588-1.412T15 3h4q.825 0 1.413.588T21 5v4q0 .825-.587 1.413T19 11zm0 10q-.825 0-1.412-.587T13 19v-4q0-.825.588-1.412T15 13h4q.825 0 1.413.588T21 15v4q0 .825-.587 1.413T19 21z"})),tt=So;var yo=({size:e=24,...t})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t},React.createElement("path",{d:"M11.271,12.013l0,-1.784c0,-0.403 0.327,-0.729 0.729,-0.729c0.402,0 0.729,0.326 0.729,0.729l-0,1.784l0.213,-0.214c0.284,-0.284 0.746,-0.284 1.03,0c0.284,0.285 0.284,0.746 0,1.031l-1.457,1.457c-0.137,0.137 -0.321,0.213 -0.515,0.213c-0.194,-0 -0.378,-0.076 -0.515,-0.213l-1.457,-1.457c-0.284,-0.285 -0.284,-0.746 -0,-1.031c0.284,-0.284 0.746,-0.284 1.03,0l0.213,0.214Z"}),React.createElement("path",{d:"M20.801,4.497l-0,2.001c-0,0.994 -0.807,1.8 -1.801,1.8l-14,0c-0.994,0 -1.801,-0.806 -1.801,-1.8l0,-2.001c0,-0.993 0.807,-1.8 1.801,-1.8l14,0c0.994,0 1.801,0.807 1.801,1.8Zm-1.6,0c-0,-0.11 -0.09,-0.2 -0.201,-0.2l-14,0c-0.111,0 -0.201,0.09 -0.201,0.2l0,2.001c0,0.111 0.09,0.2 0.201,0.2l14,0c0.111,0 0.201,-0.089 0.201,-0.2l-0,-2.001Z"}),React.createElement("path",{d:"M11.299,17.502l0,2.001c0,0.993 -0.806,1.8 -1.8,1.8l-4.499,-0c-0.994,-0 -1.801,-0.807 -1.801,-1.8l0,-2.001c0,-0.994 0.807,-1.8 1.801,-1.8l4.499,-0c0.994,-0 1.8,0.806 1.8,1.8Zm-1.6,-0c0,-0.111 -0.089,-0.2 -0.2,-0.2l-4.499,-0c-0.111,-0 -0.201,0.089 -0.201,0.2l0,2.001c0,0.11 0.09,0.2 0.201,0.2l4.499,-0c0.111,-0 0.2,-0.09 0.2,-0.2l0,-2.001Z"}),React.createElement("path",{d:"M20.801,17.502l-0,2.001c-0,0.993 -0.807,1.8 -1.801,1.8l-4.499,-0c-0.994,-0 -1.8,-0.807 -1.8,-1.8l-0,-2.001c-0,-0.994 0.806,-1.8 1.8,-1.8l4.499,-0c0.994,-0 1.801,0.806 1.801,1.8Zm-1.6,-0c-0,-0.111 -0.09,-0.2 -0.201,-0.2l-4.499,-0c-0.111,-0 -0.2,0.089 -0.2,0.2l-0,2.001c-0,0.11 0.089,0.2 0.2,0.2l4.499,-0c0.111,-0 0.201,-0.09 0.201,-0.2l-0,-2.001Z"})),ot=yo;var rt=(e="")=>(e+"").trim().split(/\s+(?![^(]*\))/).filter(Boolean).slice(0,2),lt=(e="",t="")=>[e,t].filter(Boolean).join(" ").trim(),st=e=>e==null?"":String(e).trim();var Zt=w(W());function Ht(e="",{formatting:t={}}){let{trim:r=!0,toLower:l=!1,toUpper:s=!1,toCapitalFirst:n=!1,toCapitalCase:c=!1,toCamelCase:u=!1,toDashes:h=!1,toSpaces:g=!1}=t,a=e;return typeof a!="string"&&(a=String(a)),r&&(a=a.trim()),l&&(a=a.toLowerCase()),s&&(a=a.toUpperCase()),n&&(a=a.charAt(0).toUpperCase()+a.slice(1)),c&&(a=a.replace(/\b\w/g,k=>k.toUpperCase())),u&&(a=a.replace(/[-_\s]+(.)?/g,(k,m)=>m?m.toUpperCase():"").replace(/^(.)/,k=>k.toLowerCase())),h&&(a=a.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()),g&&(a=a.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/[-_]+/g," ").toLowerCase()),a}function Ce(e){let{value:t,onChange:r,label:l}=e,s=Ht(l,{toCapitalFirst:!0,trim:!0,toSpaces:!0});return React.createElement(Zt.__experimentalUnitControl,{__next40pxDefaultSize:!0,label:s,value:t,onChange:r,placeholder:"0",style:{padding:"0 2px"},units:[{name:"rem",value:"rem",label:"rem"},{name:"px",value:"px",label:"px"},{name:"em",value:"em",label:"em"},{name:"%",value:"%",label:"%"},{name:"vw",value:"vw",label:"vw"},{name:"vh",value:"vh",label:"vh"}],isResettable:!0,allowReset:!0})}var $t=w(W());function nt({value:e,onChange:t,label:r,placeholder:l="",help:s=""}){let n=r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return React.createElement("div",{style:{padding:"0 2px"}},React.createElement($t.TextControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:n,value:e,onChange:t,placeholder:l,help:s}))}function ct({attributes:e,clientId:t,updateBlockAttributes:r,blockName:l=null}){let{set:s}=X(r,t),n=Ne(l,t),c=de("gapMode",{blockName:n}),[u,h]=ie(c,"unit"),g=de("gapInputMode",{blockName:n}),[a,k]=ie(g,"single"),m=e?.gap||"";(0,ce.useEffect)(()=>{a===void 0&&k(rt(m).length===2?"dual":"single")},[a,m]);let[d,i]=(0,ce.useMemo)(()=>{let A=rt(m);return[A[0]||"",A[1]||""]},[m]),p=(0,ce.useCallback)(A=>{let O=st(A);if(a==="single")s("gap",O||void 0);else{let P=lt(O,i);s("gap",P||void 0)}},[a,s,i]),b=(0,ce.useCallback)(A=>{let O=st(A),P=lt(d,O);s("gap",P||void 0)},[s,d]),M=u==="unit"?Ce:nt,I=a==="single"?x.gapControls.label:x.gapControls.rowLabel,T=(0,ce.useCallback)(()=>{k(a==="single"?"dual":"single")},[a,k]),y=(0,ce.useCallback)(()=>{h(u==="unit"?"text":"unit")},[u,h]);return React.createElement($.Flex,{direction:"column",className:"gap-controls"},React.createElement($.FlexBlock,null,React.createElement($.Flex,{align:"flex-end",gap:1},React.createElement($.FlexBlock,null,React.createElement($.Flex,{gap:0,direction:"row",align:"flex-end"},React.createElement($.FlexItem,null,React.createElement(M,{label:I,value:a==="single"?m:d,onChange:p,allowReset:!0})),a==="dual"&&React.createElement($.FlexItem,null,React.createElement(M,{label:x.gapControls.column,value:i,onChange:b,allowReset:!0})))),React.createElement($.FlexItem,null,React.createElement($.Button,{icon:a==="single"?ot:et,label:a==="single"?x.gapControls.switchToDual:x.gapControls.switchToSingle,onClick:T,style:{marginBottom:"2px"},"aria-pressed":a==="dual"})))),React.createElement($.FlexBlock,null),React.createElement($.FlexBlock,null,React.createElement($.ToggleControl,{label:x.gapControls.useCustom,checked:u==="text",onChange:y,__nextHasNoMarginBottom:!0})))}var me=w(H()),ke=w(W()),zt=w(ne());var D=w(H()),Ie=w(W());var K=w(H()),J=w(W());function Fe({index:e,value:t,isExpanded:r,onToggle:l,onRemove:s,onChange:n,onMoveLeft:c,onMoveRight:u,labels:h,emptyPlaceholder:g,floatingEditor:a=!1,popoverPlacement:k="bottom-start",popoverWidth:m}){let d=(0,K.useRef)(null),i=(0,K.useRef)(null),p=(0,K.useRef)("pointer"),b=(0,K.useCallback)(R=>{let B=R?.inputRef?.current||R||null;i.current=B},[]);(0,K.useEffect)(()=>{if(!(!r||!i.current)){if(p.current==="keyboard"){let R=i.current;R.focus?.({preventScroll:!0});let B=typeof R.value=="string"?R.value.length:0;typeof R.setSelectionRange=="function"&&R.setSelectionRange(B,B)}p.current="pointer"}},[r]);let M={expand:x.token.expand,collapse:x.token.collapse,remove:x.token.remove,moveLeft:x.token.moveLeft,moveRight:x.token.moveRight,...h},I=t&&t.trim().length?t:g??"",T=(0,K.useCallback)(R=>{R.stopPropagation(),s(e)},[e,s]),y=(0,K.useCallback)(()=>{p.current="pointer",l(e,!r)},[e,r,l]),A=(0,K.useCallback)(()=>{p.current="keyboard",l(e,!r)},[e,r,l]),O=(0,K.useCallback)(R=>{R.key==="Enter"||R.key===" "?(R.preventDefault(),A()):R.key==="Escape"&&r&&(R.preventDefault(),l(e,!1))},[A,e,r,l]),P=React.createElement("div",{id:`costered-token-panel-${e}`,className:"costered-token__panel"},React.createElement(J.TextControl,{ref:b,value:t??"",placeholder:g??"",onChange:R=>n(e,R),onBlur:R=>n(e,R?.target?.value??""),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),React.createElement("div",{className:"costered-token__actions"},React.createElement(J.Tooltip,{text:M.moveLeft},React.createElement(J.Button,{icon:"arrow-left-alt2",onClick:()=>c(e),label:M.moveLeft,variant:"tertiary"})),React.createElement(J.Tooltip,{text:M.moveRight},React.createElement(J.Button,{icon:"arrow-right-alt2",onClick:()=>u(e),label:M.moveRight,variant:"tertiary"}))));return React.createElement("div",{className:`costered-token${r?" is-expanded":""}`},React.createElement("div",{className:"costered-token__chip",ref:d},React.createElement("button",{type:"button",className:"costered-token__chipButton","aria-expanded":r,"aria-controls":`costered-token-panel-${e}`,onClick:y,onKeyDown:O,title:r?M.collapse:M.expand},React.createElement("span",{className:"costered-token__chipText"},I)),React.createElement(J.Tooltip,{text:M.remove},React.createElement(J.Button,{icon:"no-alt",label:M.remove,onClick:T,variant:"tertiary",className:"costered-token__remove"}))),!a&&r&&P,a&&r&&React.createElement(J.Popover,{className:"costered-blocks-token__popover",anchor:d.current,placement:k,onClose:()=>l(e,!1),focusOnMount:"firstElement",expandOnMobile:!0},React.createElement("div",{className:"costered-blocks-token__popoverInner",style:m?{width:m}:void 0},P)))}function Dt({matrix:e,columnData:t,rowData:r,emptyToken:l=".",labels:s,setCell:n,resize:c,onEditingChange:u}){let h=Number(e?.[0]?.length??t??0),g=Math.max(1,Number.isFinite(t)?h:parseInt(t,10)||0),a=Math.max(1,Number.isFinite(r)?r:parseInt(r,10)||0),[k,m]=(0,D.useState)(null),d=(0,D.useRef)(null),i=(0,D.useCallback)((B,f)=>f*g+B,[g]),p=(0,D.useCallback)(B=>{let f=B%g,v=Math.floor(B/g);return[f,v]},[g]);(0,D.useEffect)(()=>{u?.(k!=null)},[k,u]),(0,D.useEffect)(()=>{m(B=>{if(B==null)return B;let[f,v]=p(B);return f<g&&v<a?B:null})},[g,a,p]);let b=(0,D.useCallback)((B,f)=>{m((typeof f=="boolean"?f:k!==B)?B:null)},[k]),M=(0,D.useCallback)(B=>{let[f,v]=p(B);f<=0||m(i(f-1,v))},[p,i]),I=(0,D.useCallback)(B=>{let[f,v]=p(B);f>=g-1||m(i(f+1,v))},[p,i,g]),T=Number(t)||0,y=Number(r)||0,A=(0,D.useCallback)(()=>c(t+1,r),[c,t,r]),O=(0,D.useCallback)(()=>c(Math.max(1,t-1),r),[c,t,r]),P=(0,D.useCallback)(()=>c(t,r+1),[c,t,r]),R=(0,D.useCallback)(()=>c(t,Math.max(1,r-1)),[c,t,r]);return React.createElement("div",{className:"costered-blocks-gridarea",ref:d,style:{gridTemplateColumns:`80px repeat(${g}, minmax(110px, max-content))`}},React.createElement("div",{className:"costered-blocks-gridarea__row costered-blocks-gridarea__row--head"},React.createElement("div",{className:"costered-blocks-gridarea__cell costered-blocks-gridarea__cell--corner"})," ",Array.from({length:g}).map((B,f)=>React.createElement("div",{className:"costered-blocks-gridarea__cell costered-blocks-gridarea__cell--head",key:`col-${f}`},React.createElement("div",{key:`header-col-${f}`,className:"costered-blocks-gridarea__headControls"},React.createElement(Ie.Button,{onClick:O,disabled:T<=1,variant:"tertiary",icon:"minus",label:s.removeColumn}),React.createElement(Ie.Button,{onClick:A,variant:"tertiary",icon:"plus",label:s.addColumn}))))),e.map((B,f)=>React.createElement("div",{key:`row-${f}`,className:"costered-blocks-gridarea__row"},React.createElement("div",{className:"costered-blocks-gridarea__cell costered-blocks-gridarea__cell--head"},React.createElement("div",{className:"costered-blocks-gridarea__headControls"},React.createElement(Ie.Button,{onClick:R,disabled:y<=1,variant:"tertiary",icon:"minus",label:s.removeRow}),React.createElement(Ie.Button,{onClick:P,variant:"tertiary",icon:"plus",label:s.addRow}))),B.map((v,C)=>{let E=i(C,f),Z=v===l?"":v;return React.createElement("div",{key:`cell-${C}-${f}`,className:"costered-blocks-gridarea__cell"},React.createElement(Fe,{index:E,value:Z,isExpanded:k===E,onToggle:b,onRemove:V=>{let[oe,he]=p(V);n(oe,he,""),m(null)},onChange:(V,oe)=>{let[he,$e]=p(V);n(he,$e,oe)},onMoveLeft:M,onMoveRight:I,emptyPlaceholder:l,floatingEditor:!0,popoverWidth:d.current?.offsetWidth??void 0,labels:{expand:s.tokenExpand,collapse:s.tokenCollapse,remove:s.tokenRemove,moveLeft:s.tokenMoveLeft,moveRight:s.tokenMoveRight}}))}))))}var jt=w(ne()),Ut=w(Q()),xe=w(H()),j=w(W());function Wt({clientId:e,columnData:t,rowData:r,gridMatrix:{resize:l}}){let{updateBlockAttributes:s}=(0,Ut.useDispatch)("core/block-editor"),{set:n}=X(s,e),{trackColumnCount:c,trackRowCount:u}=_e(e),h=re(e),[g,a]=(0,xe.useState)(!1),k=C=>C&&typeof C=="object"?C.count??0:Number(C)||0,m=(C,E)=>C&&typeof C=="object"&&C.unit?C.unit:E,d=Number(t)||0,i=Number(r)||0,p=k(c),b=k(u),M=m(c,S),I=m(u,"auto"),T=d!==p,y=i!==b,A=d<p||i<b,O=(0,xe.useCallback)(()=>{l(p||d||1,b||i||1)},[l,p,b,d,i]),P=d>p,R=i>b,B=(0,xe.useCallback)(()=>{let C=h?.columns?.template||"",E=h?.rows?.template||"",Z=P?We(C,d,M):C,V=R?We(E,i,I):E;Z===C&&V===E||(n("gridTemplateColumns",Z),n("gridTemplateRows",V))},[d,i,M,I,h,n]),f=(0,xe.useCallback)(()=>{let C=ze(h?.columns?.template||"",d),E=ze(h?.rows?.template||"",i);n("gridTemplateColumns",C),n("gridTemplateRows",E)},[d,i,h,n]),v=(0,xe.useCallback)(()=>{/\[[^\]]+]/.test(h?.columns?.template||"")||/\[[^\]]+]/.test(h?.rows?.template||"")?a(!0):f()},[h,f]);return!T&&!y?null:React.createElement("div",{className:"costered-blocks-tokengrid__notices"},React.createElement(j.Notice,{status:"warning",isDismissible:!1},(0,jt.sprintf)(x.tokenGrid.mismatchText,d,i,p,b),React.createElement(j.Flex,{direction:"column",gap:2,style:{marginTop:8}},React.createElement(j.FlexBlock,null,React.createElement(j.Button,{variant:"secondary",onClick:O},x.tokenGrid.resizeToTracks)),React.createElement(j.FlexBlock,null,React.createElement(j.Button,{variant:"secondary",onClick:B,disabled:!P&&!R},x.tokenGrid.growTracksToAreas)),A&&React.createElement(j.FlexBlock,null,React.createElement(j.Button,{variant:"secondary",isDestructive:!0,onClick:v},x.tokenGrid.shrinkTracks))),A&&React.createElement("p",{className:"costered-blocks-gridarea__noticeHint"},x.tokenGrid.shrinkTracksNote)),React.createElement(j.__experimentalConfirmDialog,{isOpen:g,onConfirm:()=>{f(),a(!1)},onCancel:()=>a(!1),confirmButtonText:x.tokenGrid.shrinkTracksConfirm,cancelButtonText:x.tokenGrid.shrinkTracksCancel},React.createElement(j.__experimentalHeading,null,x.tokenGrid.shrinkTracksHeading),React.createElement("p",null,x.tokenGrid.shrinkTracksDescription)))}function qe({clientId:e}){let{applyMatrixToStore:t,seedFromStore:r,trackColumnCount:l,trackRowCount:s}=_e(e),n=(0,me.useMemo)(()=>r("."),[r]),[c,u]=(0,me.useState)(!1),h=(0,me.useRef)(null),g=(0,me.useCallback)(I=>{h.current&&clearTimeout(h.current),I?u(!0):h.current=setTimeout(()=>u(!1),60)},[]),a=Ye({seedMatrix:n,emptyToken:".",onApply:t,suspendResync:c}),{matrix:k,setCell:m,resize:d,clear:i}=a,p=k[0]?.length||0,b=k.length||0;return React.createElement("div",{className:"costered-blocks-tokengrid"},((l||0)!==p||(s||0)!==b)&&React.createElement(React.Fragment,null,React.createElement(Wt,{clientId:e,columnData:p,rowData:b,gridMatrix:a})," "),React.createElement(ke.Flex,{direction:"row",gap:2,align:"center",justify:"space-between",style:{marginBottom:8},className:"costered-blocks-tokengrid__header"},React.createElement(ke.FlexItem,null,React.createElement("strong",null,x.tokenGrid.title)," ",React.createElement("span",{className:"components-help-text"},(0,zt.sprintf)(x.tokenGrid.sizeHint,p,b))),React.createElement(ke.FlexItem,null,React.createElement(ke.Button,{icon:"trash",variant:"tertiary",onClick:()=>i(l,s)},x.tokenGrid.clear))),React.createElement(Dt,{matrix:k,columnData:p,rowData:b,emptyToken:".",labels:x.tokenGrid,setCell:m,resize:d,onEditingChange:g}))}var le=w(H()),Pe=w(W());var Ve=w(H()),Y=w(W());function Ao({value:e,onChange:t,label:r="",isBlock:l=!0,children:s,...n}){let c=(0,Ve.useCallback)(u=>t(u),[t]);return React.createElement(Y.__experimentalToggleGroupControl,{className:`costered-custom-toggle-group ${e?"has-selection":"is-empty"}`,label:r,value:e,onChange:c,isBlock:l,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,isDeselectable:!0,...n},s)}function Ro({value:e,label:t,disabled:r}){return React.createElement(Y.__experimentalToggleGroupControlOption,{value:e,label:t,disabled:r})}function Bo({value:e,icon:t,label:r,showTooltip:l=!0,disabled:s}){return React.createElement(Y.__experimentalToggleGroupControlOptionIcon,{value:e,icon:t,"aria-label":r,label:r,showTooltip:l,disabled:s})}function _o({value:e,icon:t,label:r,disabled:l}){return React.createElement(Y.__experimentalToggleGroupControlOption,{value:e,"aria-label":r,label:React.createElement(Y.Flex,{direction:"column",gap:0,align:"center",style:{paddingBlock:"0.5em"}},React.createElement(Y.FlexItem,null,t),React.createElement(Y.FlexItem,null,r)),disabled:l})}var Oe=(0,Ve.memo)(Ao);Oe.TextOption=Ro;Oe.IconOption=Bo;Oe.CombinedOption=_o;var Ee=Oe;function No({value:e,onChange:t,panels:r,panelProps:l={},label:s=x.panelToggle.label,forceActive:n=!1,className:c,children:u,...h}){let g=le.Children.toArray(u).map(p=>p?.props?.value).filter(p=>typeof p=="string"&&p.length>0),a=g.length>0?g:Object.keys(r||{}),k=a[0]??null;(0,le.useEffect)(()=>{a.length&&(!e||!a.includes(e))&&t?.(k)},[e,k,a.join("|")]);let m=(0,le.useCallback)(p=>{let b=p??null;n&&b===null||t?.(b)},[t,n]),d=e?r?.[e]:null,i=typeof l=="function"?e?l(e):{}:l;return React.createElement(Pe.Flex,{direction:"column",gap:2,className:c,...h},React.createElement(Ee,{label:s,value:e||void 0,onChange:m},u),d?React.createElement(Pe.FlexBlock,null,React.createElement(le.Suspense,{fallback:null},React.createElement(d,{...i}))):null)}var He=(0,le.memo)(No);He.TextOption=Ee.TextOption;He.IconOption=Ee.IconOption;He.CombinedOption=Ee.CombinedOption;var Ze=He;var N=w(H()),Yt=w(Q()),_=w(W()),pe=w(ne());var Ge=w(W()),Kt=w(ne());function Me({axis:e,canClear:t=!1,onClear:r,active:l,owner:s=null,here:n=null}){let c=e==="columns"?x.gridAxisAside.clearColumns:x.gridAxisAside.clearRows,u=!!t,h=typeof l=="boolean"?l:u&&s&&n&&s===n,a=u?h?"here":u&&s&&n&&s!=="raw"&&s!==n&&!h?"elsewhere":"none":"none",k=a==="none"?x.gridAxisAside.pipTitleNoValue:a==="here"?x.gridAxisAside.pipTitleValueHere:s==="raw"?x.gridAxisAside.pipTitleValueRaw:(0,Kt.sprintf)(x.gridAxisAside.pipTitleValueElsewhere,Ct(s));return React.createElement("div",{className:`costered-blocks-grid-axis-aside${a==="here"?" is-owned-here":""}${a==="elsewhere"?" is-elsewhere":""}`,"data-state":a,"data-owner":s||"none","data-here":n||"none","aria-label":e},React.createElement(Ge.Tooltip,{text:k},React.createElement("span",{className:"costered-blocks-grid-axis__pip"})),React.createElement(Ge.Tooltip,{text:c},React.createElement(Ge.Button,{icon:"trash",label:c,onClick:r,disabled:!u,variant:"tertiary",className:"costered-blocks-grid-axis-aside__clear"})))}var Jt={mode:"raw",template:null,normalised:"",simple:null,tracks:null};function Qt({clientId:e}){if(!e)return null;let{updateBlockAttributes:t}=(0,Yt.useDispatch)("core/block-editor"),{set:r,unset:l}=X(t,e),s=re(e)||{},n=s.columns??Jt,c=s.rows??Jt,[u,h]=(0,N.useState)(n.simple?.count??0),[g,a]=(0,N.useState)(n.simple?.unit??S),[k,m]=(0,N.useState)((n.simple?.unit??S)===S),[d,i]=(0,N.useState)(c.simple?.count??0),[p,b]=(0,N.useState)(c.simple?.unit??S),[M,I]=(0,N.useState)((c.simple?.unit??S)===S),T=n?.normalised??"",y=c?.normalised??"";(0,N.useEffect)(()=>{h(n.simple?.count??0),a(n.simple?.unit??S),m((n.simple?.unit??S)===S)},[T]),(0,N.useEffect)(()=>{i(c.simple?.count??0),b(c.simple?.unit??S),I((c.simple?.unit??S)===S)},[y]);let A=(0,N.useMemo)(()=>k?S:g||S,[k,g]),O=(0,N.useMemo)(()=>M?S:p||S,[M,p]),P=ve(u,A),R=ve(d,O),B=!!n.template&&ee(P)===T,f=!!c.template&&ee(R)===y,v=(0,N.useCallback)((F,G)=>{let ye=ve(F,G);ye==null?l("gridTemplateColumns"):r("gridTemplateColumns",ye)},[r,l]),C=(0,N.useCallback)((F,G)=>{let ye=ve(F,G);ye==null?l("gridTemplateRows"):r("gridTemplateRows",ye)},[r,l]),E=(0,N.useCallback)(F=>{let G=typeof F=="number"?F:parseInt(F||"0",10);h(G),v(G,k?S:g)},[k,g,v]),Z=(0,N.useCallback)(F=>{let G=typeof F=="number"?F:parseInt(F||"0",10);i(G),C(G,M?S:p)},[M,p,C]),V=(0,N.useCallback)(F=>{m(F);let G=F?S:g||S;!F&&!g&&a(G),v(u,G)},[u,g,v]),oe=(0,N.useCallback)(F=>{I(F);let G=F?S:p||S;!F&&!p&&b(G),C(d,G)},[d,p,C]),he=(0,N.useCallback)(F=>{let G=(F||"").trim();a(G),v(u,k?S:G||S)},[u,k,v]),$e=(0,N.useCallback)(F=>{let G=(F||"").trim();b(G),C(d,M?S:G||S)},[d,M,C]),oo=(0,N.useCallback)(()=>{h(0),l("gridTemplateColumns")},[l]),ro=(0,N.useCallback)(()=>{i(0),l("gridTemplateRows")},[l]);return React.createElement(_.Flex,{direction:"column",gap:4},React.createElement(_.FlexBlock,null,(0,pe.__)("In Simple mode, you can define the number of columns. All columns equally divide the total available width.","costered-blocks")),React.createElement(_.FlexBlock,null,React.createElement(_.Flex,{direction:"column",gap:1},React.createElement(_.FlexItem,null,React.createElement(_.Flex,{direction:"row",gap:2,justify:"space-between",align:"center"},React.createElement(_.FlexBlock,null,React.createElement("span",{className:"costered-blocks--grid-panel-simple-label"},(0,pe.__)("Columns","costered-blocks"))),React.createElement(_.FlexItem,{style:{width:32,flex:"0 0 32px"}},React.createElement(Me,{axis:"columns",canClear:!!n?.template,onClear:oo,owner:s.activePane.columns,here:"simple"})))),React.createElement(_.FlexBlock,null,React.createElement(_.RangeControl,{min:0,max:12,step:1,value:u,onChange:E,className:"costered-blocks--grid-columns-simple-control",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})),React.createElement(_.FlexBlock,null,React.createElement(_.ToggleControl,{label:(0,pe.__)(`Use ${S}`,"costered-blocks"),checked:k,onChange:V,__nextHasNoMarginBottom:!0})),!k&&React.createElement(_.FlexBlock,null,React.createElement(Ce,{label:(0,pe.__)("Unit","costered-blocks"),value:g,onChange:he})))),React.createElement(_.FlexBlock,null,React.createElement(_.Flex,{direction:"column",gap:1},React.createElement(_.Flex,{direction:"row",gap:2,justify:"space-between",align:"center"},React.createElement(_.FlexBlock,null,React.createElement("span",{className:"costered-blocks--grid-panel-simple-label"},(0,pe.__)("Rows","costered-blocks"))),React.createElement(_.FlexItem,{style:{width:32,flex:"0 0 32px"}},React.createElement(Me,{axis:"rows",canClear:!!c.template,onClear:ro,owner:s.activePane.rows,here:"simple"}))),React.createElement(_.FlexBlock,null,React.createElement(_.RangeControl,{min:0,max:12,step:1,value:d,onChange:Z,className:"costered-blocks--grid-rows-simple-control",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})),React.createElement(_.FlexBlock,null,React.createElement(_.ToggleControl,{label:(0,pe.__)(`Use ${S}`,"costered-blocks"),checked:M,onChange:oe,__nextHasNoMarginBottom:!0})),!M&&React.createElement(_.FlexBlock,null,React.createElement(Ce,{label:(0,pe.__)("Unit","costered-blocks"),value:p,onChange:$e})))))}var L=w(H()),Xt=w(Q()),Xs=w(Be()),ge=w(ne()),q=w(W());var z=w(H()),ue=w(W()),zs=w(ne());function at({tokens:e,onAdd:t,onEdit:r,onRemove:l,onMove:s,labels:n,allowLineNames:c=!0}){let u=(0,z.useMemo)(()=>({add:x.tokenEditor.add,addPlaceholder:x.tokenEditor.addPlaceholder,addLineNames:x.tokenEditor.addLineNames,listAriaLabel:x.tokenEditor.listAriaLabel,moveLeft:x.tokenEditor.moveLeft,moveRight:x.tokenEditor.moveRight,remove:x.tokenEditor.remove,expand:x.tokenEditor.expand,collapse:x.tokenEditor.collapse}),[]),h=(0,z.useMemo)(()=>({...u,...n||{}}),[u,n]),[g,a]=(0,z.useState)(""),[k,m]=(0,z.useState)(null),d=(0,z.useCallback)(()=>{let T=String(g||"").trim();T&&(t(T),a(""),m(null))},[g,t]),i=(0,z.useCallback)(()=>{let T=String(g||"").trim();T&&(t(`[${T}]`),a(""),m(null))},[g,t]),p=(0,z.useCallback)((T,y)=>{m(y?T:null)},[]),b=(0,z.useCallback)((T,y)=>{r(T,y)},[r]),M=(0,z.useCallback)(T=>{l(T),m(y=>y===T?null:y>T?y-1:y)},[l]),I=(0,z.useCallback)((T,y)=>{s(T,y),m(A=>A===T?T+y:A===T+y?T:A)},[s]);return React.createElement("div",{className:"costered-token-editor",role:"list","aria-label":h.listAriaLabel},React.createElement("div",{className:"costered-token-list"},e.map((T,y)=>React.createElement(Fe,{key:`token-${y}`,index:y,value:T,isExpanded:k===y,onToggle:p,onRemove:M,onChange:b,onMoveLeft:A=>I(A,-1),onMoveRight:A=>I(A,1),labels:h}))),React.createElement("div",{className:"costered-token-add"},React.createElement(ue.TextControl,{placeholder:h.addPlaceholder,value:g,onChange:a,onKeyDown:T=>{T.key==="Enter"&&d()},__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),c?React.createElement(ue.Flex,{className:"costered-token-add-options",gap:0,align:"center",style:{width:"fit-content"}},React.createElement(ue.Button,{icon:"editor-code",onClick:d,label:h.add}),React.createElement(ue.Button,{icon:"tag",onClick:i,label:h.addLineNames})):React.createElement(ue.Button,{variant:"secondary",onClick:d},h.add)))}function eo({clientId:e}){if(!e)return null;let{updateBlockAttributes:t}=(0,Xt.useDispatch)("core/block-editor"),{set:r,unset:l}=X(t,e),s=re(e),n=s?.columns,c=s?.rows,u=(0,L.useMemo)(()=>n?n.tracks?.length?n.tracks:n.template?[String(n.template)]:[]:[],[n]),h=(0,L.useMemo)(()=>c?c.tracks?.length?c.tracks:c.template?[String(c.template)]:[]:[],[c]),[g,a]=(0,L.useState)(u),[k,m]=(0,L.useState)(h),d=n&&(n.normalised??ee(n.template||""))||"",i=c&&(c.normalised??ee(c.template||""))||"";(0,L.useEffect)(()=>{a(u)},[d]),(0,L.useEffect)(()=>{m(h)},[i]);let p=(0,L.useCallback)(f=>{let v=f.map(C=>String(C||"").trim()).filter(Boolean);return v.length?v.join(" "):null},[]),b=(0,L.useCallback)(f=>{let v=p(f);v==null?l("gridTemplateColumns"):r("gridTemplateColumns",v)},[p,r,l]),M=(0,L.useCallback)(f=>{let v=p(f);v==null?l("gridTemplateRows"):r("gridTemplateRows",v)},[p,r,l]),I=(0,L.useMemo)(()=>{let f=p(g);return!!n?.template&&ee(f||"")===d},[n?.template,d,g,p]),T=(0,L.useMemo)(()=>{let f=p(k);return!!c?.template&&ee(f||"")===i},[c?.template,i,k,p]),y=(0,L.useCallback)((f,v,C,E)=>{let Z=String(E||"").trim();if(!Z)return;let V=[...f,Z];v(V),C(V)},[]),A=(0,L.useCallback)((f,v,C,E,Z)=>{let V=f.slice();V[E]=Z,v(V),C(V)},[]),O=(0,L.useCallback)((f,v,C,E)=>{let Z=f.slice();Z.splice(E,1),v(Z),C(Z)},[]),P=(0,L.useCallback)((f,v,C,E,Z)=>{let V=E+Z;if(V<0||V>=f.length)return;let oe=f.slice(),he=oe.splice(E,1)[0];oe.splice(V,0,he),v(oe),C(oe)},[]),R=(0,L.useCallback)(()=>{a([]),l("gridTemplateColumns")},[l]),B=(0,L.useCallback)(()=>{m([]),l("gridTemplateRows")},[l]);return React.createElement(q.Flex,{direction:"column",gap:4},React.createElement(q.FlexBlock,null,(0,ge.__)("In Tracks mode, you can define the exact track sizes using any valid CSS Grid value.","costered-blocks")),React.createElement(q.FlexBlock,null,React.createElement(q.Flex,{direction:"column",gap:1},React.createElement(q.FlexItem,null,React.createElement(q.Flex,{direction:"row",gap:2,justify:"space-between",align:"center"},React.createElement(q.FlexBlock,null,React.createElement("span",{className:"costered-blocks--grid-panel-tracks-label"},(0,ge.__)("Columns","costered-blocks"))),React.createElement(q.FlexItem,{style:{width:32,flex:"0 0 32px"}},React.createElement(Me,{axis:"columns",canClear:!!n?.template,onClear:R,owner:s.activePane.columns,here:"tracks"})))),React.createElement(q.FlexBlock,null,React.createElement(q.Flex,{direction:"column",gap:2,className:"costered-axis-body"},React.createElement(at,{tokens:g,setTokens:a,onAdd:f=>y(g,a,b,f),onEdit:(f,v)=>A(g,a,b,f,v),onRemove:f=>O(g,a,b,f),onMove:(f,v)=>P(g,a,b,f,v),labels:{placeholder:(0,ge.__)("Add track (e.g. 240px or minmax(10ch, 2fr))","costered-blocks"),addPlaceholder:(0,ge.__)("Add track or [line names]","costered-blocks")}}))))),React.createElement(q.FlexBlock,null,React.createElement(q.Flex,{direction:"column",gap:1},React.createElement(q.FlexItem,null,React.createElement(q.Flex,{direction:"row",gap:2,justify:"space-between",align:"center"},React.createElement(q.FlexBlock,null,React.createElement("span",{className:"costered-blocks--grid-panel-tracks-label"},(0,ge.__)("Rows","costered-blocks"))),React.createElement(q.FlexItem,{style:{width:32,flex:"0 0 32px"}},React.createElement(Me,{axis:"rows",canClear:!!c?.template,onClear:B,owner:s.activePane.rows,here:"tracks"})))),React.createElement(q.FlexBlock,null,React.createElement(q.Flex,{direction:"column",gap:2,className:"costered-axis-body"},React.createElement(at,{tokens:k,setTokens:m,onAdd:f=>y(k,m,M,f),onEdit:(f,v)=>A(k,m,M,f,v),onRemove:f=>O(k,m,M,f),onMove:(f,v)=>P(k,m,M,f,v),labels:{placeholder:(0,ge.__)("Add track (e.g. 240px or minmax(10ch, 2fr))","costered-blocks"),addPlaceholder:(0,ge.__)("Add track or [line names]","costered-blocks")}}))))))}var Fo=()=>{let{selectedBlock:e,clientId:t}=Qe(),{attributes:r,name:l}=e;return e?React.createElement(Io,{clientId:t,attributes:r,name:l}):null},Io=({clientId:e,attributes:t,name:r})=>{let{updateBlockAttributes:l}=(0,to.useDispatch)("core/block-editor"),[s,n]=(0,Se.useState)(null),[c,u]=(0,Se.useState)(!1),h=(0,Se.useCallback)(()=>u(!0),[]),g=(0,Se.useCallback)(()=>u(!1),[]),a=Ne(r,e),k=de("gridTemplatePanelOpen",{blockName:a}),[m,d]=ie(k,!0),i=de("gridGapPanelOpen",{blockName:a}),[p,b]=ie(i,!1),M=de("gridTemplateAreasPanelOpen",{blockName:a}),[I,T]=ie(M,!1);return React.createElement(React.Fragment,null,React.createElement(U.Panel,null,React.createElement(U.PanelBody,{title:x.gridControls.gridTemplatePanel,initialOpen:m,onToggle:d},React.createElement(Ze,{value:s,onChange:n,label:null,forceActive:!0,panels:{simple:Qt,tracks:eo},panelProps:{clientId:e}},React.createElement(Ze.TextOption,{value:"simple",label:x.gridControls.gridTemplatePanelSimple}),React.createElement(Ze.TextOption,{value:"tracks",label:x.gridControls.gridTemplatePanelTracks}))),React.createElement(U.PanelBody,{title:x.gridControls.gapPanel,initialOpen:p,onToggle:b},React.createElement(U.Flex,{direction:"column",expanded:!0},React.createElement(U.FlexBlock,null,React.createElement(ct,{attributes:t,clientId:e,updateBlockAttributes:l,blockName:r})))),React.createElement(U.PanelBody,{title:x.gridControls.gridTemplateAreasPanel,initialOpen:I,onToggle:T},React.createElement(U.Flex,{direction:"column",gap:4},React.createElement(qe,{clientId:e}),React.createElement(U.Flex,{justify:"flex-end"},React.createElement(U.Button,{variant:"secondary",onClick:h},x.gridControls.gridTemplateAreasEditLarge))))),c&&React.createElement(U.Modal,{title:x.gridControls.gridTemplateAreasModal,onRequestClose:g,className:"costered-blocks-modal--wide",shouldCloseOnClickOutside:!0},React.createElement(qe,{clientId:e})))},Eo=(e={})=>{let t=e?.display??e?.style?.display??"";return/^(grid|inline-grid)$/.test(t)},wn={name:"grid-controls",title:x.gridControls.panelTitle,icon:React.createElement(tt,null),isVisible:({attributes:e})=>Eo(e),render:()=>React.createElement(Fo,null)};})();
