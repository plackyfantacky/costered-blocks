(()=>{var ro=Object.create;var ct=Object.defineProperty;var lo=Object.getOwnPropertyDescriptor;var no=Object.getOwnPropertyNames;var so=Object.getPrototypeOf,co=Object.prototype.hasOwnProperty;var fe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ao=(e,t,r,l)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of no(t))!co.call(e,n)&&n!==r&&ct(e,n,{get:()=>t[n],enumerable:!(l=lo(t,n))||l.enumerable});return e};var k=(e,t,r)=>(r=e!=null?ro(so(e)):{},ao(t||!e||!e.__esModule?ct(r,"default",{value:e,enumerable:!0}):r,e));var O=fe((qo,at)=>{at.exports=wp.element});var Q=fe((Vo,it)=>{it.exports=wp.data});var z=fe((Po,dt)=>{dt.exports=wp.components});var ye=fe((l0,At)=>{At.exports=wp.blockEditor});var qt=fe((u0,Gt)=>{Gt.exports=wp.preferences});var ne=fe((R0,Vt)=>{Vt.exports=wp.i18n});var Ce=k(O()),eo=k(Q()),U=k(z());var ce=k(O());var mt={display:{type:"string"},visibility:{type:"string"},overflow:{type:"string"}},pt={width:{type:"string"},height:{type:"string"},maxWidth:{type:"string"},maxHeight:{type:"string"},minWidth:{type:"string"},minHeight:{type:"string"}},io={marginTop:{type:"string"},marginRight:{type:"string"},marginBottom:{type:"string"},marginLeft:{type:"string"}},ut={paddingTop:{type:"string"},paddingRight:{type:"string"},paddingBottom:{type:"string"},paddingLeft:{type:"string"}},gt={flexDirection:{type:"string"},flexWrap:{type:"string"},justifyContent:{type:"string"},alignItems:{type:"string"},alignContent:{type:"string"}},ht={flexGrow:{type:"number"},flexShrink:{type:"number"},flexBasis:{type:"string"}},ft={gridTemplateColumns:{type:"string"},gridTemplateRows:{type:"string"},gridTemplateAreas:{type:"string"}},Oe={gridColumn:{type:"string",default:""},gridRow:{type:"string",default:""},gridArea:{type:"string",default:""}},Ze={gridColumnStart:{type:"string"},gridColumnSpan:{type:"string"},gridColumnEnd:{type:"string"},gridRowStart:{type:"string"},gridRowSpan:{type:"string"},gridRowEnd:{type:"string"}},xt={gap:{type:"string"},order:{type:"number"},alignSelf:{type:"string"},justifySelf:{type:"string"}},mo={...mt,...pt,...io,...ut,...gt,...ht,...ft,...Oe,...Ze,...xt},Ho=Object.assign({},...Object.values(mo)),po=["dimensionMode","minDimensionMode","maxDimensionMode","marginMode","paddingMode","gapMode","gapInputMode","gridTemplateColumnsMode","gridTemplateRowsMode"],kt=new Set([...po]),wt=new Set([...Object.keys(Oe)]);var S="1fr",Oo=new Set([...Object.keys(ut)]),Zo=new Set([...Object.keys(pt)]),$o=new Set([...Object.keys(Ze)]),Do=new Set([{},...Object.keys(mt),...Object.keys(gt),...Object.keys(ht),...Object.keys(ft),...Object.keys(Oe),...Object.keys(Ze),...Object.keys(xt)]);function X(e,t,{trim:r=!0,emptyUnsets:l=!0}={}){let n=t!=null,s=(0,ce.useCallback)((m,d)=>{if(wt.has(d)){let u=typeof m=="string"&&r?m.trim():String(m);return l&&u===""?void 0:u}let i=m;if(r&&typeof i=="string"&&(i=i.trim()),!(l&&(i===""||i==null)))return i},[r,l]),c=(0,ce.useCallback)(m=>{if(n)return e(t,m);{let d={};for(let[i,u]of Object.entries(m)){let b=s(u,i);b!==void 0&&(d[i]=b)}Object.keys(d).length&&e(t,d)}},[n,e,t,s]),p=(0,ce.useCallback)((m,d)=>{c({[m]:s(d,m)})},[c,s]),h=(0,ce.useCallback)(m=>{let d={};for(let[i,u]of Object.entries(m))d[i]=s(u,i);c(d)},[c,s]),g=(0,ce.useCallback)(m=>{c({[m]:void 0})}),a=(0,ce.useCallback)(m=>{let d={};for(let i of m)d[i]=void 0;c(d)},[c]),w=(0,ce.useCallback)(m=>({set:(d,i)=>p(`${m}${d}`,i),setMany:d=>{let i={};for(let[u,b]of Object.entries(d))i[`${m}${u}`]=b;h(i)},unset:d=>g(`${m}${d}`),unsetMany:d=>a(d.map(i=>`${m}${i}`))}),[p,h,g,a]);return{set:p,setMany:h,unset:g,unsetMany:a,withPrefix:w}}var te=k(O());var bt=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"";function ee(e){return String(e||"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function uo(e){let t=String(e||"").trim();if(!t)return[];let r=0,l=0,n="",s=[];for(let c=0;c<t.length;c++){let p=t[c];if(p==="("){r++,n+=p;continue}if(p===")"){r=Math.max(0,r-1),n+=p;continue}if(p==="["){l++,n+=p;continue}if(p==="]"){l=Math.max(0,l-1),n+=p;continue}if(p===" "&&r===0&&l===0){n&&(s.push(n),n="");continue}n+=p}return n&&s.push(n),s}function go(e){if(!e)return null;let t=e.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);return t?{count:parseInt(t[1],10),unit:t[2].trim()}:null}function xe(e,t=S){return e>0?`repeat(${e}, ${t})`:null}var ho=/^(?:[0-9.]+(?:px|rem|em|ch|vh|vw|vmin|vmax|fr|%)|auto|max-content|min-content|fit-content\([^)]+\)|minmax\([^)]+\)|clamp\([^)]+\)|var\([^)]+\))$/i;function De(e,t,r="1fr"){let l=Math.max(0,Number(t)||0),n=String(e||"").trim();if(l<=0)return n;let{count:s}=Se(n);if(s===0){let a=String(r||"").trim()||"1fr";return`repeat(${l}, ${a})`}if(s>=l)return n;let c=l-s,p=String(r||"").trim()||"1fr",h=n.match(/^repeat\(\s*([0-9]+)\s*,\s*([^)]+)\)\s*$/i);if(h){let a=h[2].trim();if(ho.test(a))return`repeat(${l}, ${a})`}let g=Array.from({length:c}).map(()=>p).join(" ");return`${n} ${g}`.trim()}function je(e,t){if(!e||typeof e!="string")return"";let r=Math.max(0,t|0),l=e.replace(/\[[^\]]*\]/g," ").trim();if(!l)return"";let n=l.match(/^repeat\(\s*([0-9]+)\s*,\s*([^)]+)\)\s*$/i);if(n){let s=n[2].trim();if(!/\s/.test(s))return r<=0?"":`repeat(${r}, ${s})`;let c=fo(l);return vt(c,r)}return vt(l,r)}function Se(e,t=S){if(!e||typeof e!="string")return{count:0,unit:t};let r=e.trim();if(!r)return{count:0,unit:t};if(/^subgrid\b/i.test(r))return{count:0,unit:t};if(r=r.replace(/\[[^\]]*]/g," ").trim(),!r)return{count:0,unit:t};let l=r.match(/repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)$/i);if(l){let c=l[2];return{count:0,unit:Mt(c,t)}}let{count:n,unit:s}=Ct(r,t);return{count:n,unit:s||t}}function Ct(e,t){let r=Tt(e);if(r){let c=r.inner.trim(),{count:p,unit:h}=Ct(c,t);return{count:r.times*p,unit:h||Mt(c,t)}}let l=$e(e),n=l.length,s="";if(l.length===1)s=Me(l[0])||t;else{let c=l.find(St);s=Me(c)||t}return{count:n,unit:s}}function Tt(e){let t=e.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!t)return null;let r=parseInt(t[1],10),l=t[2];return!Number.isFinite(r)||r<0?null:{times:r,inner:l}}function $e(e){let t=[],r=0,l="";for(let n=0;n<e.length;n++){let s=e[n];if(s==="("){r++,l+=s;continue}if(s===")"){r=Math.max(0,r-1),l+=s;continue}if(r===0&&/\s/.test(s)){l.trim()&&t.push(l.trim()),l="";continue}l+=s}return l.trim()&&t.push(l.trim()),t}function Mt(e,t){if(!e)return t;let r=Tt(e);if(r){let s=$e(r.inner);if(s.length===1)return Me(s[0])||t}let l=$e(e);if(l.length===1)return Me(l[0])||t;let n=l.find(St);return Me(n)||t}function St(e){return e?!!(/^(minmax|fit-content|clamp|var)\(/i.test(e)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(e)||/^(auto|max-content|min-content)$/i.test(e)):!1}function Me(e){return e?e.trim():""}function fo(e){return e.replace(/repeat\(\s*([0-9]+)\s*,\s*([^)]+)\)/gi,(t,r,l)=>{let n=parseInt(r,10),s=l.trim();return Array.from({length:n}).map(()=>s).join(" ")})}function vt(e,t){if(t<=0)return"";let r=0,l="",n=[];for(let c of e)c==="("&&r++,c===")"&&(r=Math.max(0,r-1)),/\s/.test(c)&&r===0?l&&(n.push(l),l=""):l+=c;l&&n.push(l);let s=n.slice(0,t);return s.length===0?"":s.join(" ")}function xo(e){let t=go(e);if(!t)return null;let r=ee(xe(t.count,t.unit));return{mode:"simple",template:e||null,normalised:r,simple:{count:t.count,unit:t.unit}}}function ko(e){let t=uo(e);if(!t.length)return null;let r=ee(t.join(" "));return{mode:"tracks",template:e||null,normalised:r,tracks:t}}var wo=[xo,ko];function Ue(e){let t=e||"";for(let r of wo){let l=r(t);if(l)return l}return{mode:"raw",template:e||null,normalised:ee(e||"")}}function yt(e){let t=(e||"").trim();if(!t)return{hasAreas:!1,cols:0,rows:0};let r=t.split(/(['"])(?:(?=(\\?))\2.)*?\1/).map(n=>n.replace(/^['"]|['"]$/g,"").trim()).filter(n=>n&&!/^[\s]+$/.test(n));return r.length?{hasAreas:!0,cols:Math.max(0,...r.map(n=>n.split(/\s+/).filter(Boolean).length)),rows:r.length}:{hasAreas:!1,cols:0,rows:0}}function ke(e,t="."){if(!Array.isArray(e)||e.length===0)return"";let r=e.map(n=>(Array.isArray(n)?n:[]).map(s=>{let c=String(s??"").trim();return c===""?t:c}));return r.some(n=>n.some(s=>s!==t))?r.map(n=>`"${n.join(" ")}"`).join(" "):""}function ze(e,t="."){let r=String(e||"").trim();if(!r)return[];let l=[];return r.replace(/(['"])(.*?)\1/g,(n,s,c)=>(l.push(c),"")),l.map(n=>n.trim().split(/\s+/).map(s=>s&&s!==t?s:t))}function we(e,t,r,l="."){let n=[];for(let s=0;s<r;s++){let c=e[s]||[],p=Array.from({length:t},(h,g)=>c[g]??l);n.push(p)}return n}function We({seedMatrix:e,emptyToken:t=".",onApply:r,suspendResync:l=!1}){let[n,s]=(0,te.useState)(()=>e),c=(0,te.useRef)(ke(n));(0,te.useEffect)(()=>{c.current=ke(n)},[n]),(0,te.useEffect)(()=>{if(l)return;ke(e)!==c.current&&s(e)},[e,l]);let p=n[0]?.length||0,h=n.length||0,g=(0,te.useCallback)((m,d,i)=>{s(u=>{let b=String(i??"").trim(),M=b===""?t:b,q=u.map((C,y)=>y===d?C.map((A,P)=>P===m?M:A):C);return r?.(q),q})},[r,t]),a=(0,te.useCallback)((m,d)=>{s(i=>{let u=we(i,m,d,t);return r?.(u),u})},[t,r]),w=(0,te.useCallback)((m=1,d=1)=>{s(()=>{let i=we([],Math.max(1,m),Math.max(1,d),t);return r?.(i),i})},[t,r]);return{matrix:n,columnData:p,rowData:h,setCell:g,resize:a,clear:w}}var To=k(O());var vo=k(O());var Rt=k(Q()),Bt=k(ye()),_t=k(O());function re(e){let t=(0,Rt.useSelect)(l=>e?l(Bt.store).getBlock(e)?.attributes??{}:{},[e]);return(0,_t.useMemo)(()=>{let l=Ue(t.gridTemplateColumns),n=Ue(t.gridTemplateRows),s=t.gridTemplateAreas??null,c=yt(s);return{columns:l,rows:n,areas:{template:s,...c},activePane:{columns:l.mode,rows:n.mode}}},[t.gridTemplateColumns,t.gridTemplateRows,t.gridTemplateAreas])}var ue=k(O()),Ft=k(Q()),Nt=k(ye());function Ae(e){let{updateBlockAttributes:t}=(0,Ft.useDispatch)(Nt.store),{set:r,unset:l}=X(t,e),n=re(e),s=n?.columns?.template??null,c=n?.rows?.template??null,p=n?.areas?.template??null,h=(0,ue.useMemo)(()=>s?Se(s):0,[s]),g=(0,ue.useMemo)(()=>c?Se(c):0,[c]),a=(0,ue.useCallback)(d=>{let i=ke(d,".");i?r("gridTemplateAreas",i):l("gridTemplateAreas")},[r,l]),w=(0,ue.useCallback)(()=>{l("gridTemplateAreas")},[l]),m=(0,ue.useCallback)((d=".")=>{let i=ze(p,d),u=i[0]?.length||h||1,b=i.length||g||1;return we(i,u,b,d)},[p,h,g]);return{areasTemplate:p,trackColumnCount:h,trackRowCount:g,applyMatrixToStore:a,clearAreasInStore:w,seedFromStore:m}}var Mo=k(Q());var Et=k(Q()),It=k(ye());function Ke(e,t){return(0,Et.useSelect)(r=>{if(e)return e;let l=r(It.store),n=t||l.getSelectedBlockClientId();return(n?l.getBlock(n):null)?.name??null},[e,t])}var Lt=k(Q());function Je(){return(0,Lt.useSelect)(e=>{let t=e("core/block-editor"),r=t.getSelectedBlockClientId();return{selectedBlock:r?t.getBlock(r):null,clientId:r}},[])}var Ne=k(Q()),Ye=k(qt());function Ee(e,t,r="costered-blocks"){let l=(0,Ne.useSelect)(h=>h(Ye.store).get(r,e)??t,[r,e,t]),{set:n,__experimentalReset:s}=(0,Ne.useDispatch)(Ye.store);return[l,h=>{e.startsWith("__invalid__")||n(r,e,h)},()=>{e.startsWith("__invalid__")||s?.(r,e)}]}var Ie=(e,{blockName:t,variant:r}={})=>kt.has(e)&&!(!!t||!!r)?`${e}:__unscoped__`:!t&&!r?e:t&&!r?`${e}:${t}`:!t&&r?`${e}#${r}`:`${e}:${t}#${r}`;var o=k(ne()),x={displayControls:{panelTitle:(0,o.__)("Display Controls","costered-blocks"),displayLabel:(0,o.__)("Display","costered-blocks"),unset:(0,o.__)("unset / initial","costered-blocks"),displayBlock:(0,o.__)("Block","costered-blocks"),displayInline:(0,o.__)("Inline","costered-blocks"),displayFlex:(0,o.__)("Flex","costered-blocks"),displayGrid:(0,o.__)("Grid","costered-blocks"),displayNone:(0,o.__)("None","costered-blocks"),visibilityLabel:(0,o.__)("Visibility","costered-blocks"),visibilityUnset:(0,o.__)("unset / initial","costered-blocks"),visibilityVisible:(0,o.__)("Visible","costered-blocks"),visibilityHidden:(0,o.__)("Hidden","costered-blocks"),visibilityCollapse:(0,o.__)("Collapse","costered-blocks")},dimensionControls:{panelTitle:(0,o.__)("Dimension Controls","costered-blocks"),dimensionPanel:(0,o.__)("Dimensions","costered-blocks"),minPanel:(0,o.__)("Minimum Dimensions","costered-blocks"),maxPanel:(0,o.__)("Maximum Dimensions","costered-blocks")},spacingControls:{panelTitle:(0,o.__)("Spacing Controls","costered-blocks"),panelLabel:(0,o.__)("Spacing","costered-blocks"),marginLabel:(0,o.__)("Margin","costered-blocks"),paddingLabel:(0,o.__)("Padding","costered-blocks")},flexBoxControls:{panelTitle:(0,o.__)("Flexbox Controls","costered-blocks"),flexWrapLabel:(0,o.__)("Flex Wrap","costered-blocks"),flexWrapNone:(0,o.__)("No Wrap","costered-blocks"),flexWrapWrap:(0,o.__)("Wrap","costered-blocks"),flexWrapReverse:(0,o.__)("Reverse","costered-blocks"),alignmentPanel:(0,o.__)("Alignment","costered-blocks"),gapPanel:(0,o.__)("Gap","costered-blocks")},flexItemControls:{panelTitle:(0,o.__)("Flex Item Controls","costered-blocks"),flexGrow:(0,o.__)("Grow","costered-blocks"),flexShrink:(0,o.__)("Shrink","costered-blocks"),flexBasis:(0,o.__)("Basis","costered-blocks"),flexBasisPlaceholder:(0,o.__)("Enter value","costered-blocks"),order:(0,o.__)("Order","costered-blocks")},gridControls:{panelTitle:(0,o.__)("Grid Controls","costered-blocks"),gridTemplatePanel:(0,o.__)("Grid Template","costered-blocks"),gridTemplatePanelSimple:(0,o.__)("Simple","costered-blocks"),gridTemplatePanelTracks:(0,o.__)("Tracks","costered-blocks"),gapPanel:(0,o.__)("Gap","costered-blocks"),gridTemplateAreasPanel:(0,o.__)("Grid Template Areas","costered-blocks"),gridTemplateAreasEditLarge:(0,o.__)("Edit in larger view","costered-blocks"),gridTemplateAreasModal:(0,o.__)("Edit Grid Template Areas","costered-blocks")},gridItemsControls:{simplePanel:(0,o.__)("Simple","costered-blocks"),tracksPanel:(0,o.__)("Tracks","costered-blocks"),areasPanel:(0,o.__)("Areas","costered-blocks"),gridAreaLabel:(0,o.__)("Named area (grid-area)","costered-blocks"),gridAreaNone:(0,o.__)("\u2014 None \u2014","costered-blocks"),gridAreaHelp:(0,o.__)("Setting a named area overrides row/column placement.","costered-blocks"),panelTitle:(0,o.__)("Grid Item Controls","costered-blocks"),settingsIsAdvancedOwned:(0,o.__)("Settings use Advanced features (read-only here). Switch to the Advanced panel to edit.","costered-blocks"),settingsIsSimpleOwned:(0,o.__)("Settings use Simple features (read-only here). Switch to the Simple panel to edit.","costered-blocks"),settingsHasArea:(0,o.__)("This item uses a named grid area. Line-based placement is disabled.","costered-blocks"),panelAlignment:(0,o.__)("Alignment","costered-blocks"),panelOrder:(0,o.__)("Order","costered-blocks"),simple:(0,o.__)("Simple","costered-blocks"),advanced:(0,o.__)("Advanced","costered-blocks"),columnsLabel:(0,o.__)("Columns","costered-blocks"),rowsLabel:(0,o.__)("Rows","costered-blocks"),columnPlacementMode:(0,o.__)("Placement uses","costered-blocks"),columnPlacementSpan:(0,o.__)("Span","costered-blocks"),columnPlacementEnd:(0,o.__)("End","costered-blocks"),columnStartMode:(0,o.__)("Start uses","costered-blocks"),columnStartModeNumber:(0,o.__)("Line number","costered-blocks"),columnStartModeNamed:(0,o.__)("Named line","costered-blocks"),columnStart:(0,o.__)("Column Start","costered-blocks"),columnStartHelp:(0,o.__)("%1$d columns","costered-blocks"),columnStartNamed:(0,o.__)("Column Start (named line)","costered-blocks"),columnStartNamedHelp:(0,o.__)("Free text allowed; suggestions from parent column template.","costered-blocks"),columnStartNameMismatch:(0,o.__)("Parent grid has no named column lines; this item currently uses a named start token.","costered-blocks"),columnSpan:(0,o.__)("Column Span","costered-blocks"),columnSpanHelp:(0,o.__)("Max updates with start","costered-blocks"),columnSpanParentHelp:(0,o.__)("Max updates with start & parent columns.","costered-blocks"),columnEndMode:(0,o.__)("End uses","costered-blocks"),columnEndModeNumber:(0,o.__)("Line number","costered-blocks"),columnEndModeNamed:(0,o.__)("Named line","costered-blocks"),columnEndModeAuto:(0,o.__)("Auto","costered-blocks"),columnEnd:(0,o.__)("Column End","costered-blocks"),columnEndHelp:(0,o.__)("Max updates with start","costered-blocks"),columnEndNumber:(0,o.__)("Column End (line number)","costered-blocks"),columnEndNumberHelp:(0,o.__)("Supports negative indices (e.g. -1 = last line).","costered-blocks"),columnEndNamed:(0,o.__)("Column End (named line)","costered-blocks"),columnEndNamedHelp:(0,o.__)("Free text allowed; suggestions from parent column template.","costered-blocks"),columnEndNameMismatch:(0,o.__)("Parent grid has no named column lines; this item currently uses a named end token.","costered-blocks"),rowStart:(0,o.__)("Row Start","costered-blocks"),rowStartHelp:(0,o.__)("%1$d rows","costered-blocks"),rowSpan:(0,o.__)("Row Span","costered-blocks"),rowSpanHelp:(0,o.__)("Max updates with start","costered-blocks"),order:(0,o.__)("Order","costered-blocks")},flexDirection:{label:(0,o.__)("Flex Direction","costered-blocks"),row:(0,o.__)("Row","costered-blocks"),rowReverse:(0,o.__)("Row Reverse","costered-blocks"),column:(0,o.__)("Column","costered-blocks"),columnReverse:(0,o.__)("Column Reverse","costered-blocks")},justifyControls:{label:(0,o.__)("Justify Content","costered-blocks"),start:(0,o.__)("Start","costered-blocks"),end:(0,o.__)("End","costered-blocks"),center:(0,o.__)("Center","costered-blocks"),spaceAround:(0,o.__)("Space Around","costered-blocks"),spaceBetween:(0,o.__)("Space Between","costered-blocks"),spaceEvenly:(0,o.__)("Space Evenly","costered-blocks")},alignControls:{label:(0,o.__)("Align Items","costered-blocks"),start:(0,o.__)("Start","costered-blocks"),end:(0,o.__)("End","costered-blocks"),center:(0,o.__)("Center","costered-blocks"),stretch:(0,o.__)("Stretch","costered-blocks"),baseline:(0,o.__)("Baseline","costered-blocks"),spaceAround:(0,o.__)("Space Around","costered-blocks"),spaceBetween:(0,o.__)("Space Between","costered-blocks"),spaceEvenly:(0,o.__)("Space Evenly","costered-blocks")},customSelectControl:{defaultText:(0,o.__)("choose...","costered-blocks")},dimensionInputGroup:{label:(0,o.__)("Dimensions","costered-blocks"),labelPre:(0,o.__)("%1$s Dimensions","costered-blocks"),width:(0,o.__)("Width","costered-blocks"),height:(0,o.__)("Height","costered-blocks"),useCustom:(0,o.__)("Use custom values (e.g auto, calc)","costered-blocks")},directionalInputGroup:{label:(0,o.__)("Directions","costered-blocks"),top:(0,o.__)("Top","costered-blocks"),right:(0,o.__)("Right","costered-blocks"),bottom:(0,o.__)("Bottom","costered-blocks"),left:(0,o.__)("Left","costered-blocks"),all:(0,o.__)("All","costered-blocks"),horizontal:(0,o.__)("Horizontal","costered-blocks"),vertical:(0,o.__)("Vertical","costered-blocks")},gapControls:{label:(0,o.__)("Gaps","costered-blocks"),rowLabel:(0,o.__)("Row Gap","costered-blocks"),switchToSingle:(0,o.__)("Switch to Single Gap","costered-blocks"),switchToDual:(0,o.__)("Switch to Dual Gap","costered-blocks"),columnLabel:(0,o.__)("Column Gap","costered-blocks"),useCustom:(0,o.__)("Use custom values (e.g auto, calc)","costered-blocks")},gridAxisAside:{label:(0,o.__)("Grid Axis","costered-blocks"),horizontal:(0,o.__)("Horizontal","costered-blocks"),vertical:(0,o.__)("Vertical","costered-blocks"),pipTitleNoValue:(0,o.__)("No value set","costered-blocks"),pipTitleValueHere:(0,o.__)("Value matches this panel","costered-blocks"),pipTitleValueElsewhere:(0,o.__)("Value set in %s panel","costered-blocks"),pipTitleValueRaw:(0,o.__)("Value set (unrecognised format)","costered-blocks"),clearRows:(0,o.__)("Clear Rows","costered-blocks"),clearColumns:(0,o.__)("Clear Columns","costered-blocks")},panelToggle:{label:(0,o.__)("Panel","costered-blocks")},token:{expand:(0,o.__)("Edit token","costered-blocks"),collapse:(0,o.__)("Close editor","costered-blocks"),remove:(0,o.__)("Remove","costered-blocks"),moveLeft:(0,o.__)("Move left","costered-blocks"),moveRight:(0,o.__)("Move right","costered-blocks")},tokenGrid:{title:(0,o.__)("Areas","costered-blocks"),clear:(0,o.__)("Clear","costered-blocks"),sizeHint:(0,o.__)("%1$d columns x %2$d rows","costered-blocks"),mismatchText:(0,o.__)("Templates areas (%1$dx%2$d) do not match current tracks (%3$dx%4$d)","costered-blocks"),resizeToTracks:(0,o.__)("Resize areas to match tracks","costered-blocks"),growTracksToAreas:(0,o.__)("Grow tracks to match areas","costered-blocks"),shrinkTracks:(0,o.__)("Shrink tracks to areas","costered-blocks"),shrinkTracksWarning:(0,o.__)("Shrinking may remove named lines. Continue?","costered-blocks"),shrinkTracksNote:(0,o.__)("Shrinking tracks may remove named lines; please review afterwards.","costered-blocks"),shrinkTracksConfirm:(0,o.__)("Shrink tracks","costered-blocks"),shrinkTracksCancel:(0,o.__)("Cancel","costered-blocks"),shrinkTracksHeading:(0,o.__)("Remove named lines?","costered-blocks"),shrinkTracksDescription:(0,o.__)("Shrinking tracks will drop line names (e.g. [sidebar-start]). This can change template references. Continue?","costered-blocks"),tokenExpand:(0,o.__)("Edit cell","costered-blocks"),tokenCollapse:(0,o.__)("Close editor","costered-blocks"),tokenRemove:(0,o.__)("Clear cell","costered-blocks"),tokenMoveLeft:(0,o.__)("Previous cell","costered-blocks"),tokenMoveRight:(0,o.__)("Next cell","costered-blocks"),addColumn:(0,o.__)("Add column","costered-blocks"),removeColumn:(0,o.__)("Remove column","costered-blocks"),addRow:(0,o.__)("Add row","costered-blocks"),removeRow:(0,o.__)("Remove row","costered-blocks")},tokenEditor:{add:(0,o.__)("Add","costered-blocks"),addPlaceholder:(0,o.__)("Add token","costered-blocks"),addLineNames:(0,o.__)("Add line names","costered-blocks"),listAriaLabel:(0,o.__)("List of tokens","costered-blocks"),moveLeft:(0,o.__)("Move left","costered-blocks"),moveRight:(0,o.__)("Move right","costered-blocks"),remove:(0,o.__)("Remove","costered-blocks"),expand:(0,o.__)("Edit token","costered-blocks"),collapse:(0,o.__)("Close editor","costered-blocks")}};var un=k(ne()),se=k(O()),$=k(z());var So=({size:e=24,...t})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t},React.createElement("path",{d:"M11.271,12.013l0,-1.784c0,-0.403 0.327,-0.729 0.729,-0.729c0.402,0 0.729,0.326 0.729,0.729l-0,1.784l0.213,-0.214c0.284,-0.284 0.746,-0.284 1.03,0c0.284,0.285 0.284,0.746 0,1.031l-1.457,1.457c-0.137,0.137 -0.321,0.213 -0.515,0.213c-0.194,-0 -0.378,-0.076 -0.515,-0.213l-1.457,-1.457c-0.284,-0.285 -0.284,-0.746 -0,-1.031c0.284,-0.284 0.746,-0.284 1.03,0l0.213,0.214Z"}),React.createElement("path",{d:"M3.199,19.503l0,-2.001c0,-0.994 0.807,-1.8 1.801,-1.8l14,-0c0.994,-0 1.801,0.806 1.801,1.8l-0,2.001c-0,0.993 -0.807,1.8 -1.801,1.8l-14,-0c-0.994,-0 -1.801,-0.807 -1.801,-1.8Zm1.6,-0c0,0.11 0.09,0.2 0.201,0.2l14,-0c0.111,-0 0.201,-0.09 0.201,-0.2l-0,-2.001c-0,-0.111 -0.09,-0.2 -0.201,-0.2l-14,-0c-0.111,-0 -0.201,0.089 -0.201,0.2l0,2.001Z"}),React.createElement("path",{d:"M12.701,6.498l-0,-2.001c-0,-0.993 0.806,-1.8 1.8,-1.8l4.499,0c0.994,0 1.801,0.807 1.801,1.8l-0,2.001c-0,0.994 -0.807,1.8 -1.801,1.8l-4.499,0c-0.994,0 -1.8,-0.806 -1.8,-1.8Zm1.6,0c-0,0.111 0.089,0.2 0.2,0.2l4.499,0c0.111,0 0.201,-0.089 0.201,-0.2l-0,-2.001c-0,-0.11 -0.09,-0.2 -0.201,-0.2l-4.499,0c-0.111,0 -0.2,0.09 -0.2,0.2l-0,2.001Z"}),React.createElement("path",{d:"M3.199,6.498l0,-2.001c0,-0.993 0.807,-1.8 1.801,-1.8l4.499,0c0.994,0 1.8,0.807 1.8,1.8l0,2.001c0,0.994 -0.806,1.8 -1.8,1.8l-4.499,0c-0.994,0 -1.801,-0.806 -1.801,-1.8Zm1.6,0c0,0.111 0.09,0.2 0.201,0.2l4.499,0c0.111,0 0.2,-0.089 0.2,-0.2l0,-2.001c0,-0.11 -0.089,-0.2 -0.2,-0.2l-4.499,0c-0.111,0 -0.201,0.09 -0.201,0.2l0,2.001Z"})),Qe=So;var yo=({size:e=24,...t})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t},React.createElement("path",{fill:"currentColor",d:"M5 11q-.825 0-1.412-.587T3 9V5q0-.825.588-1.412T5 3h4q.825 0 1.413.588T11 5v4q0 .825-.587 1.413T9 11zm0 10q-.825 0-1.412-.587T3 19v-4q0-.825.588-1.412T5 13h4q.825 0 1.413.588T11 15v4q0 .825-.587 1.413T9 21zm10-10q-.825 0-1.412-.587T13 9V5q0-.825.588-1.412T15 3h4q.825 0 1.413.588T21 5v4q0 .825-.587 1.413T19 11zm0 10q-.825 0-1.412-.587T13 19v-4q0-.825.588-1.412T15 13h4q.825 0 1.413.588T21 15v4q0 .825-.587 1.413T19 21z"})),Xe=yo;var Ao=({size:e=24,...t})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t},React.createElement("path",{d:"M11.271,12.013l0,-1.784c0,-0.403 0.327,-0.729 0.729,-0.729c0.402,0 0.729,0.326 0.729,0.729l-0,1.784l0.213,-0.214c0.284,-0.284 0.746,-0.284 1.03,0c0.284,0.285 0.284,0.746 0,1.031l-1.457,1.457c-0.137,0.137 -0.321,0.213 -0.515,0.213c-0.194,-0 -0.378,-0.076 -0.515,-0.213l-1.457,-1.457c-0.284,-0.285 -0.284,-0.746 -0,-1.031c0.284,-0.284 0.746,-0.284 1.03,0l0.213,0.214Z"}),React.createElement("path",{d:"M20.801,4.497l-0,2.001c-0,0.994 -0.807,1.8 -1.801,1.8l-14,0c-0.994,0 -1.801,-0.806 -1.801,-1.8l0,-2.001c0,-0.993 0.807,-1.8 1.801,-1.8l14,0c0.994,0 1.801,0.807 1.801,1.8Zm-1.6,0c-0,-0.11 -0.09,-0.2 -0.201,-0.2l-14,0c-0.111,0 -0.201,0.09 -0.201,0.2l0,2.001c0,0.111 0.09,0.2 0.201,0.2l14,0c0.111,0 0.201,-0.089 0.201,-0.2l-0,-2.001Z"}),React.createElement("path",{d:"M11.299,17.502l0,2.001c0,0.993 -0.806,1.8 -1.8,1.8l-4.499,-0c-0.994,-0 -1.801,-0.807 -1.801,-1.8l0,-2.001c0,-0.994 0.807,-1.8 1.801,-1.8l4.499,-0c0.994,-0 1.8,0.806 1.8,1.8Zm-1.6,-0c0,-0.111 -0.089,-0.2 -0.2,-0.2l-4.499,-0c-0.111,-0 -0.201,0.089 -0.201,0.2l0,2.001c0,0.11 0.09,0.2 0.201,0.2l4.499,-0c0.111,-0 0.2,-0.09 0.2,-0.2l0,-2.001Z"}),React.createElement("path",{d:"M20.801,17.502l-0,2.001c-0,0.993 -0.807,1.8 -1.801,1.8l-4.499,-0c-0.994,-0 -1.8,-0.807 -1.8,-1.8l-0,-2.001c-0,-0.994 0.806,-1.8 1.8,-1.8l4.499,-0c0.994,-0 1.801,0.806 1.801,1.8Zm-1.6,-0c-0,-0.111 -0.09,-0.2 -0.201,-0.2l-4.499,-0c-0.111,-0 -0.2,0.089 -0.2,0.2l-0,2.001c-0,0.11 0.089,0.2 0.2,0.2l4.499,-0c0.111,-0 0.201,-0.09 0.201,-0.2l-0,-2.001Z"})),et=Ao;var tt=(e="")=>(e+"").trim().split(/\s+(?![^(]*\))/).filter(Boolean).slice(0,2),ot=(e="",t="")=>[e,t].filter(Boolean).join(" ").trim(),rt=e=>e==null?"":String(e).trim();var Ht=k(z());function Pt(e="",{formatting:t={}}){let{trim:r=!0,toLower:l=!1,toUpper:n=!1,toCapitalFirst:s=!1,toCapitalCase:c=!1,toCamelCase:p=!1,toDashes:h=!1,toSpaces:g=!1}=t,a=e;return typeof a!="string"&&(a=String(a)),r&&(a=a.trim()),l&&(a=a.toLowerCase()),n&&(a=a.toUpperCase()),s&&(a=a.charAt(0).toUpperCase()+a.slice(1)),c&&(a=a.replace(/\b\w/g,w=>w.toUpperCase())),p&&(a=a.replace(/[-_\s]+(.)?/g,(w,m)=>m?m.toUpperCase():"").replace(/^(.)/,w=>w.toLowerCase())),h&&(a=a.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()),g&&(a=a.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/[-_]+/g," ").toLowerCase()),a}function ve(e){let{value:t,onChange:r,label:l}=e,n=Pt(l,{toCapitalFirst:!0,trim:!0,toSpaces:!0});return React.createElement(Ht.__experimentalUnitControl,{__next40pxDefaultSize:!0,label:n,value:t,onChange:r,placeholder:"0",style:{padding:"0 2px"},units:[{name:"rem",value:"rem",label:"rem"},{name:"px",value:"px",label:"px"},{name:"em",value:"em",label:"em"},{name:"%",value:"%",label:"%"},{name:"vw",value:"vw",label:"vw"},{name:"vh",value:"vh",label:"vh"}],isResettable:!0,allowReset:!0})}var Ot=k(z());function lt({value:e,onChange:t,label:r,placeholder:l="",help:n=""}){let s=r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return React.createElement("div",{style:{padding:"0 2px"}},React.createElement(Ot.TextControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:s,value:e,onChange:t,placeholder:l,help:n}))}function Zt({attributes:e,clientId:t,updateBlockAttributes:r,blockName:l=null}){let{set:n}=X(r,t),s=Ke(l,t),c=Ie("gapMode",{blockName:s}),[p,h]=Ee(c,"unit"),g=Ie("gapInputMode",{blockName:s}),[a,w]=Ee(g,"single"),m=e?.gap||"";(0,se.useEffect)(()=>{a===void 0&&w(tt(m).length===2?"dual":"single")},[a,m]);let[d,i]=(0,se.useMemo)(()=>{let A=tt(m);return[A[0]||"",A[1]||""]},[m]),u=(0,se.useCallback)(A=>{let P=rt(A);if(a==="single")n("gap",P||void 0);else{let H=ot(P,i);n("gap",H||void 0)}},[a,n,i]),b=(0,se.useCallback)(A=>{let P=rt(A),H=ot(d,P);n("gap",H||void 0)},[n,d]),M=p==="unit"?ve:lt,q=a==="single"?x.gapControls.label:x.gapControls.rowLabel,C=(0,se.useCallback)(()=>{w(a==="single"?"dual":"single")},[a,w]),y=(0,se.useCallback)(()=>{h(p==="unit"?"text":"unit")},[p,h]);return React.createElement($.Flex,{direction:"column",className:"gap-controls"},React.createElement($.FlexBlock,null,React.createElement($.Flex,{align:"flex-end",gap:1},React.createElement($.FlexBlock,null,React.createElement($.Flex,{gap:0,direction:"row",align:"flex-end"},React.createElement($.FlexItem,null,React.createElement(M,{label:q,value:a==="single"?m:d,onChange:u,allowReset:!0})),a==="dual"&&React.createElement($.FlexItem,null,React.createElement(M,{label:x.gapControls.column,value:i,onChange:b,allowReset:!0})))),React.createElement($.FlexItem,null,React.createElement($.Button,{icon:a==="single"?et:Qe,label:a==="single"?x.gapControls.switchToDual:x.gapControls.switchToSingle,onClick:C,style:{marginBottom:"2px"},"aria-pressed":a==="dual"})))),React.createElement($.FlexBlock,null),React.createElement($.FlexBlock,null,React.createElement($.ToggleControl,{label:x.gapControls.useCustom,checked:p==="text",onChange:y,__nextHasNoMarginBottom:!0})))}var ae=k(O()),he=k(z()),zt=k(ne());var D=k(O()),Be=k(z());var K=k(O()),J=k(z());function Re({index:e,value:t,isExpanded:r,onToggle:l,onRemove:n,onChange:s,onMoveLeft:c,onMoveRight:p,labels:h,emptyPlaceholder:g,floatingEditor:a=!1,popoverPlacement:w="bottom-start",popoverWidth:m}){let d=(0,K.useRef)(null),i=(0,K.useRef)(null),u=(0,K.useRef)("pointer"),b=(0,K.useCallback)(R=>{let B=R?.inputRef?.current||R||null;i.current=B},[]);(0,K.useEffect)(()=>{if(!(!r||!i.current)){if(u.current==="keyboard"){let R=i.current;R.focus?.({preventScroll:!0});let B=typeof R.value=="string"?R.value.length:0;typeof R.setSelectionRange=="function"&&R.setSelectionRange(B,B)}u.current="pointer"}},[r]);let M={expand:x.token.expand,collapse:x.token.collapse,remove:x.token.remove,moveLeft:x.token.moveLeft,moveRight:x.token.moveRight,...h},q=t&&t.trim().length?t:g??"",C=(0,K.useCallback)(R=>{R.stopPropagation(),n(e)},[e,n]),y=(0,K.useCallback)(()=>{u.current="pointer",l(e,!r)},[e,r,l]),A=(0,K.useCallback)(()=>{u.current="keyboard",l(e,!r)},[e,r,l]),P=(0,K.useCallback)(R=>{R.key==="Enter"||R.key===" "?(R.preventDefault(),A()):R.key==="Escape"&&r&&(R.preventDefault(),l(e,!1))},[A,e,r,l]),H=React.createElement("div",{id:`costered-token-panel-${e}`,className:"costered-token__panel"},React.createElement(J.TextControl,{ref:b,value:t??"",placeholder:g??"",onChange:R=>s(e,R),onBlur:R=>s(e,R?.target?.value??""),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),React.createElement("div",{className:"costered-token__actions"},React.createElement(J.Tooltip,{text:M.moveLeft},React.createElement(J.Button,{icon:"arrow-left-alt2",onClick:()=>c(e),label:M.moveLeft,variant:"tertiary"})),React.createElement(J.Tooltip,{text:M.moveRight},React.createElement(J.Button,{icon:"arrow-right-alt2",onClick:()=>p(e),label:M.moveRight,variant:"tertiary"}))));return React.createElement("div",{className:`costered-token${r?" is-expanded":""}`},React.createElement("div",{className:"costered-token__chip",ref:d},React.createElement("button",{type:"button",className:"costered-token__chipButton","aria-expanded":r,"aria-controls":`costered-token-panel-${e}`,onClick:y,onKeyDown:P,title:r?M.collapse:M.expand},React.createElement("span",{className:"costered-token__chipText"},q)),React.createElement(J.Tooltip,{text:M.remove},React.createElement(J.Button,{icon:"no-alt",label:M.remove,onClick:C,variant:"tertiary",className:"costered-token__remove"}))),!a&&r&&H,a&&r&&React.createElement(J.Popover,{className:"costered-blocks-token__popover",anchor:d.current,placement:w,onClose:()=>l(e,!1),focusOnMount:"firstElement",expandOnMobile:!0},React.createElement("div",{className:"costered-blocks-token__popoverInner",style:m?{width:m}:void 0},H)))}function $t({matrix:e,columnData:t,rowData:r,emptyToken:l=".",labels:n,setCell:s,resize:c,onEditingChange:p}){let h=Number(e?.[0]?.length??t??0),g=Math.max(1,Number.isFinite(t)?h:parseInt(t,10)||0),a=Math.max(1,Number.isFinite(r)?r:parseInt(r,10)||0),[w,m]=(0,D.useState)(null),d=(0,D.useRef)(null),i=(0,D.useCallback)((B,f)=>f*g+B,[g]),u=(0,D.useCallback)(B=>{let f=B%g,v=Math.floor(B/g);return[f,v]},[g]);(0,D.useEffect)(()=>{p?.(w!=null)},[w,p]),(0,D.useEffect)(()=>{m(B=>{if(B==null)return B;let[f,v]=u(B);return f<g&&v<a?B:null})},[g,a,u]);let b=(0,D.useCallback)((B,f)=>{m((typeof f=="boolean"?f:w!==B)?B:null)},[w]),M=(0,D.useCallback)(B=>{let[f,v]=u(B);f<=0||m(i(f-1,v))},[u,i]),q=(0,D.useCallback)(B=>{let[f,v]=u(B);f>=g-1||m(i(f+1,v))},[u,i,g]),C=Number(t)||0,y=Number(r)||0,A=(0,D.useCallback)(()=>c(t+1,r),[c,t,r]),P=(0,D.useCallback)(()=>c(Math.max(1,t-1),r),[c,t,r]),H=(0,D.useCallback)(()=>c(t,r+1),[c,t,r]),R=(0,D.useCallback)(()=>c(t,Math.max(1,r-1)),[c,t,r]);return React.createElement("div",{className:"costered-blocks-gridarea",ref:d,style:{gridTemplateColumns:`80px repeat(${g}, minmax(110px, max-content))`}},React.createElement("div",{className:"costered-blocks-gridarea__row costered-blocks-gridarea__row--head"},React.createElement("div",{className:"costered-blocks-gridarea__cell costered-blocks-gridarea__cell--corner"})," ",Array.from({length:g}).map((B,f)=>React.createElement("div",{className:"costered-blocks-gridarea__cell costered-blocks-gridarea__cell--head",key:`col-${f}`},React.createElement("div",{key:`header-col-${f}`,className:"costered-blocks-gridarea__headControls"},React.createElement(Be.Button,{onClick:P,disabled:C<=1,variant:"tertiary",icon:"minus",label:n.removeColumn}),React.createElement(Be.Button,{onClick:A,variant:"tertiary",icon:"plus",label:n.addColumn}))))),e.map((B,f)=>React.createElement("div",{key:`row-${f}`,className:"costered-blocks-gridarea__row"},React.createElement("div",{className:"costered-blocks-gridarea__cell costered-blocks-gridarea__cell--head"},React.createElement("div",{className:"costered-blocks-gridarea__headControls"},React.createElement(Be.Button,{onClick:R,disabled:y<=1,variant:"tertiary",icon:"minus",label:n.removeRow}),React.createElement(Be.Button,{onClick:H,variant:"tertiary",icon:"plus",label:n.addRow}))),B.map((v,T)=>{let E=i(T,f),Z=v===l?"":v;return React.createElement("div",{key:`cell-${T}-${f}`,className:"costered-blocks-gridarea__cell"},React.createElement(Re,{index:E,value:Z,isExpanded:w===E,onToggle:b,onRemove:V=>{let[oe,pe]=u(V);s(oe,pe,""),m(null)},onChange:(V,oe)=>{let[pe,He]=u(V);s(pe,He,oe)},onMoveLeft:M,onMoveRight:q,emptyPlaceholder:l,floatingEditor:!0,popoverWidth:d.current?.offsetWidth??void 0,labels:{expand:n.tokenExpand,collapse:n.tokenCollapse,remove:n.tokenRemove,moveLeft:n.tokenMoveLeft,moveRight:n.tokenMoveRight}}))}))))}var Dt=k(ne()),jt=k(Q()),ge=k(O()),j=k(z());function Ut({clientId:e,columnData:t,rowData:r,gridMatrix:{resize:l}}){let{updateBlockAttributes:n}=(0,jt.useDispatch)("core/block-editor"),{set:s}=X(n,e),{trackColumnCount:c,trackRowCount:p}=Ae(e),h=re(e),[g,a]=(0,ge.useState)(!1),w=T=>T&&typeof T=="object"?T.count??0:Number(T)||0,m=(T,E)=>T&&typeof T=="object"&&T.unit?T.unit:E,d=Number(t)||0,i=Number(r)||0,u=w(c),b=w(p),M=m(c,S),q=m(p,"auto"),C=d!==u,y=i!==b,A=d<u||i<b,P=(0,ge.useCallback)(()=>{l(u||d||1,b||i||1)},[l,u,b,d,i]),H=d>u,R=i>b,B=(0,ge.useCallback)(()=>{let T=h?.columns?.template||"",E=h?.rows?.template||"",Z=H?De(T,d,M):T,V=R?De(E,i,q):E;Z===T&&V===E||(s("gridTemplateColumns",Z),s("gridTemplateRows",V))},[d,i,M,q,h,s]),f=(0,ge.useCallback)(()=>{let T=je(h?.columns?.template||"",d),E=je(h?.rows?.template||"",i);s("gridTemplateColumns",T),s("gridTemplateRows",E)},[d,i,h,s]),v=(0,ge.useCallback)(()=>{/\[[^\]]+]/.test(h?.columns?.template||"")||/\[[^\]]+]/.test(h?.rows?.template||"")?a(!0):f()},[h,f]);return!C&&!y?null:React.createElement("div",{className:"costered-blocks-tokengrid__notices"},React.createElement(j.Notice,{status:"warning",isDismissible:!1},(0,Dt.sprintf)(x.tokenGrid.mismatchText,d,i,u,b),React.createElement(j.Flex,{direction:"column",gap:2,style:{marginTop:8}},React.createElement(j.FlexBlock,null,React.createElement(j.Button,{variant:"secondary",onClick:P},x.tokenGrid.resizeToTracks)),React.createElement(j.FlexBlock,null,React.createElement(j.Button,{variant:"secondary",onClick:B,disabled:!H&&!R},x.tokenGrid.growTracksToAreas)),A&&React.createElement(j.FlexBlock,null,React.createElement(j.Button,{variant:"secondary",isDestructive:!0,onClick:v},x.tokenGrid.shrinkTracks))),A&&React.createElement("p",{className:"costered-blocks-gridarea__noticeHint"},x.tokenGrid.shrinkTracksNote)),React.createElement(j.__experimentalConfirmDialog,{isOpen:g,onConfirm:()=>{f(),a(!1)},onCancel:()=>a(!1),confirmButtonText:x.tokenGrid.shrinkTracksConfirm,cancelButtonText:x.tokenGrid.shrinkTracksCancel},React.createElement(j.__experimentalHeading,null,x.tokenGrid.shrinkTracksHeading),React.createElement("p",null,x.tokenGrid.shrinkTracksDescription)))}function nt({clientId:e}){let{applyMatrixToStore:t,seedFromStore:r,trackColumnCount:l,trackRowCount:n}=Ae(e),s=(0,ae.useMemo)(()=>r("."),[r]),[c,p]=(0,ae.useState)(!1),h=(0,ae.useRef)(null),g=(0,ae.useCallback)(q=>{h.current&&clearTimeout(h.current),q?p(!0):h.current=setTimeout(()=>p(!1),60)},[]),a=We({seedMatrix:s,emptyToken:".",onApply:t,suspendResync:c}),{matrix:w,setCell:m,resize:d,clear:i}=a,u=w[0]?.length||0,b=w.length||0;return React.createElement("div",{className:"costered-blocks-tokengrid"},((l||0)!==u||(n||0)!==b)&&React.createElement(React.Fragment,null,React.createElement(Ut,{clientId:e,columnData:u,rowData:b,gridMatrix:a})," "),React.createElement(he.Flex,{direction:"row",gap:2,align:"center",justify:"space-between",style:{marginBottom:8},className:"costered-blocks-tokengrid__header"},React.createElement(he.FlexItem,null,React.createElement("strong",null,x.tokenGrid.title)," ",React.createElement("span",{className:"components-help-text"},(0,zt.sprintf)(x.tokenGrid.sizeHint,u,b))),React.createElement(he.FlexItem,null,React.createElement(he.Button,{icon:"trash",variant:"tertiary",onClick:()=>i(l,n)},x.tokenGrid.clear))),React.createElement($t,{matrix:w,columnData:u,rowData:b,emptyToken:".",labels:x.tokenGrid,setCell:m,resize:d,onEditingChange:g}))}var le=k(O()),qe=k(z());var Le=k(O()),Y=k(z());function Ro({value:e,onChange:t,label:r="",isBlock:l=!0,children:n,...s}){let c=(0,Le.useCallback)(p=>t(p),[t]);return React.createElement(Y.__experimentalToggleGroupControl,{className:`costered-custom-toggle-group ${e?"has-selection":"is-empty"}`,label:r,value:e,onChange:c,isBlock:l,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,isDeselectable:!0,...s},n)}function Bo({value:e,label:t,disabled:r}){return React.createElement(Y.__experimentalToggleGroupControlOption,{value:e,label:t,disabled:r})}function _o({value:e,icon:t,label:r,showTooltip:l=!0,disabled:n}){return React.createElement(Y.__experimentalToggleGroupControlOptionIcon,{value:e,icon:t,"aria-label":r,label:r,showTooltip:l,disabled:n})}function Fo({value:e,icon:t,label:r,disabled:l}){return React.createElement(Y.__experimentalToggleGroupControlOption,{value:e,"aria-label":r,label:React.createElement(Y.Flex,{direction:"column",gap:0,align:"center",style:{paddingBlock:"0.5em"}},React.createElement(Y.FlexItem,null,t),React.createElement(Y.FlexItem,null,r)),disabled:l})}var Ge=(0,Le.memo)(Ro);Ge.TextOption=Bo;Ge.IconOption=_o;Ge.CombinedOption=Fo;var _e=Ge;function No({value:e,onChange:t,panels:r,panelProps:l={},label:n=x.panelToggle.label,forceActive:s=!1,className:c,children:p,...h}){let g=le.Children.toArray(p).map(u=>u?.props?.value).filter(u=>typeof u=="string"&&u.length>0),a=g.length>0?g:Object.keys(r||{}),w=a[0]??null;(0,le.useEffect)(()=>{a.length&&(!e||!a.includes(e))&&t?.(w)},[e,w,a.join("|")]);let m=(0,le.useCallback)(u=>{let b=u??null;s&&b===null||t?.(b)},[t,s]),d=e?r?.[e]:null,i=typeof l=="function"?e?l(e):{}:l;return React.createElement(qe.Flex,{direction:"column",gap:2,className:c,...h},React.createElement(_e,{label:n,value:e||void 0,onChange:m},p),d?React.createElement(qe.FlexBlock,null,React.createElement(le.Suspense,{fallback:null},React.createElement(d,{...i}))):null)}var Ve=(0,le.memo)(No);Ve.TextOption=_e.TextOption;Ve.IconOption=_e.IconOption;Ve.CombinedOption=_e.CombinedOption;var Pe=Ve;var F=k(O()),Jt=k(Q()),_=k(z()),ie=k(ne());var Fe=k(z()),Wt=k(ne());function be({axis:e,canClear:t=!1,onClear:r,active:l,owner:n=null,here:s=null}){let c=e==="columns"?x.gridAxisAside.clearColumns:x.gridAxisAside.clearRows,p=!!t,h=typeof l=="boolean"?l:p&&n&&s&&n===s,a=p?h?"here":p&&n&&s&&n!=="raw"&&n!==s&&!h?"elsewhere":"none":"none",w=a==="none"?x.gridAxisAside.pipTitleNoValue:a==="here"?x.gridAxisAside.pipTitleValueHere:n==="raw"?x.gridAxisAside.pipTitleValueRaw:(0,Wt.sprintf)(x.gridAxisAside.pipTitleValueElsewhere,bt(n));return React.createElement("div",{className:`costered-blocks-grid-axis-aside${a==="here"?" is-owned-here":""}${a==="elsewhere"?" is-elsewhere":""}`,"data-state":a,"data-owner":n||"none","data-here":s||"none","aria-label":e},React.createElement(Fe.Tooltip,{text:w},React.createElement("span",{className:"costered-blocks-grid-axis__pip"})),React.createElement(Fe.Tooltip,{text:c},React.createElement(Fe.Button,{icon:"trash",label:c,onClick:r,disabled:!p,variant:"tertiary",className:"costered-blocks-grid-axis-aside__clear"})))}var Kt={mode:"raw",template:null,normalised:"",simple:null,tracks:null};function Yt({clientId:e}){if(!e)return null;let{updateBlockAttributes:t}=(0,Jt.useDispatch)("core/block-editor"),{set:r,unset:l}=X(t,e),n=re(e)||{},s=n.columns??Kt,c=n.rows??Kt,[p,h]=(0,F.useState)(s.simple?.count??0),[g,a]=(0,F.useState)(s.simple?.unit??S),[w,m]=(0,F.useState)((s.simple?.unit??S)===S),[d,i]=(0,F.useState)(c.simple?.count??0),[u,b]=(0,F.useState)(c.simple?.unit??S),[M,q]=(0,F.useState)((c.simple?.unit??S)===S),C=s?.normalised??"",y=c?.normalised??"";(0,F.useEffect)(()=>{h(s.simple?.count??0),a(s.simple?.unit??S),m((s.simple?.unit??S)===S)},[C]),(0,F.useEffect)(()=>{i(c.simple?.count??0),b(c.simple?.unit??S),q((c.simple?.unit??S)===S)},[y]);let A=(0,F.useMemo)(()=>w?S:g||S,[w,g]),P=(0,F.useMemo)(()=>M?S:u||S,[M,u]),H=xe(p,A),R=xe(d,P),B=!!s.template&&ee(H)===C,f=!!c.template&&ee(R)===y,v=(0,F.useCallback)((N,I)=>{let Te=xe(N,I);Te==null?l("gridTemplateColumns"):r("gridTemplateColumns",Te)},[r,l]),T=(0,F.useCallback)((N,I)=>{let Te=xe(N,I);Te==null?l("gridTemplateRows"):r("gridTemplateRows",Te)},[r,l]),E=(0,F.useCallback)(N=>{let I=typeof N=="number"?N:parseInt(N||"0",10);h(I),v(I,w?S:g)},[w,g,v]),Z=(0,F.useCallback)(N=>{let I=typeof N=="number"?N:parseInt(N||"0",10);i(I),T(I,M?S:u)},[M,u,T]),V=(0,F.useCallback)(N=>{m(N);let I=N?S:g||S;!N&&!g&&a(I),v(p,I)},[p,g,v]),oe=(0,F.useCallback)(N=>{q(N);let I=N?S:u||S;!N&&!u&&b(I),T(d,I)},[d,u,T]),pe=(0,F.useCallback)(N=>{let I=(N||"").trim();a(I),v(p,w?S:I||S)},[p,w,v]),He=(0,F.useCallback)(N=>{let I=(N||"").trim();b(I),T(d,M?S:I||S)},[d,M,T]),to=(0,F.useCallback)(()=>{h(0),l("gridTemplateColumns")},[l]),oo=(0,F.useCallback)(()=>{i(0),l("gridTemplateRows")},[l]);return React.createElement(_.Flex,{direction:"column",gap:4},React.createElement(_.FlexBlock,null,(0,ie.__)("In Simple mode, you can define the number of columns. All columns equally divide the total available width.","costered-blocks")),React.createElement(_.FlexBlock,null,React.createElement(_.Flex,{direction:"column",gap:1},React.createElement(_.FlexItem,null,React.createElement(_.Flex,{direction:"row",gap:2,justify:"space-between",align:"center"},React.createElement(_.FlexBlock,null,React.createElement("span",{className:"costered-blocks--grid-panel-simple-label"},(0,ie.__)("Columns","costered-blocks"))),React.createElement(_.FlexItem,{style:{width:32,flex:"0 0 32px"}},React.createElement(be,{axis:"columns",canClear:!!s?.template,onClear:to,owner:n.activePane.columns,here:"simple"})))),React.createElement(_.FlexBlock,null,React.createElement(_.RangeControl,{min:0,max:12,step:1,value:p,onChange:E,className:"costered-blocks--grid-columns-simple-control",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})),React.createElement(_.FlexBlock,null,React.createElement(_.ToggleControl,{label:(0,ie.__)(`Use ${S}`,"costered-blocks"),checked:w,onChange:V,__nextHasNoMarginBottom:!0})),!w&&React.createElement(_.FlexBlock,null,React.createElement(ve,{label:(0,ie.__)("Unit","costered-blocks"),value:g,onChange:pe})))),React.createElement(_.FlexBlock,null,React.createElement(_.Flex,{direction:"column",gap:1},React.createElement(_.Flex,{direction:"row",gap:2,justify:"space-between",align:"center"},React.createElement(_.FlexBlock,null,React.createElement("span",{className:"costered-blocks--grid-panel-simple-label"},(0,ie.__)("Rows","costered-blocks"))),React.createElement(_.FlexItem,{style:{width:32,flex:"0 0 32px"}},React.createElement(be,{axis:"rows",canClear:!!c.template,onClear:oo,owner:n.activePane.rows,here:"simple"}))),React.createElement(_.FlexBlock,null,React.createElement(_.RangeControl,{min:0,max:12,step:1,value:d,onChange:Z,className:"costered-blocks--grid-rows-simple-control",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})),React.createElement(_.FlexBlock,null,React.createElement(_.ToggleControl,{label:(0,ie.__)(`Use ${S}`,"costered-blocks"),checked:M,onChange:oe,__nextHasNoMarginBottom:!0})),!M&&React.createElement(_.FlexBlock,null,React.createElement(ve,{label:(0,ie.__)("Unit","costered-blocks"),value:u,onChange:He})))))}var L=k(O()),Qt=k(Q()),os=k(ye()),me=k(ne()),G=k(z());var W=k(O()),de=k(z()),Yn=k(ne());function st({tokens:e,onAdd:t,onEdit:r,onRemove:l,onMove:n,labels:s,allowLineNames:c=!0}){let p=(0,W.useMemo)(()=>({add:x.tokenEditor.add,addPlaceholder:x.tokenEditor.addPlaceholder,addLineNames:x.tokenEditor.addLineNames,listAriaLabel:x.tokenEditor.listAriaLabel,moveLeft:x.tokenEditor.moveLeft,moveRight:x.tokenEditor.moveRight,remove:x.tokenEditor.remove,expand:x.tokenEditor.expand,collapse:x.tokenEditor.collapse}),[]),h=(0,W.useMemo)(()=>({...p,...s||{}}),[p,s]),[g,a]=(0,W.useState)(""),[w,m]=(0,W.useState)(null),d=(0,W.useCallback)(()=>{let C=String(g||"").trim();C&&(t(C),a(""),m(null))},[g,t]),i=(0,W.useCallback)(()=>{let C=String(g||"").trim();C&&(t(`[${C}]`),a(""),m(null))},[g,t]),u=(0,W.useCallback)((C,y)=>{m(y?C:null)},[]),b=(0,W.useCallback)((C,y)=>{r(C,y)},[r]),M=(0,W.useCallback)(C=>{l(C),m(y=>y===C?null:y>C?y-1:y)},[l]),q=(0,W.useCallback)((C,y)=>{n(C,y),m(A=>A===C?C+y:A===C+y?C:A)},[n]);return React.createElement("div",{className:"costered-token-editor",role:"list","aria-label":h.listAriaLabel},React.createElement("div",{className:"costered-token-list"},e.map((C,y)=>React.createElement(Re,{key:`token-${y}`,index:y,value:C,isExpanded:w===y,onToggle:u,onRemove:M,onChange:b,onMoveLeft:A=>q(A,-1),onMoveRight:A=>q(A,1),labels:h}))),React.createElement("div",{className:"costered-token-add"},React.createElement(de.TextControl,{placeholder:h.addPlaceholder,value:g,onChange:a,onKeyDown:C=>{C.key==="Enter"&&d()},__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),c?React.createElement(de.Flex,{className:"costered-token-add-options",gap:0,align:"center",style:{width:"fit-content"}},React.createElement(de.Button,{icon:"editor-code",onClick:d,label:h.add}),React.createElement(de.Button,{icon:"tag",onClick:i,label:h.addLineNames})):React.createElement(de.Button,{variant:"secondary",onClick:d},h.add)))}function Xt({clientId:e}){if(!e)return null;let{updateBlockAttributes:t}=(0,Qt.useDispatch)("core/block-editor"),{set:r,unset:l}=X(t,e),n=re(e),s=n?.columns,c=n?.rows,p=(0,L.useMemo)(()=>s?s.tracks?.length?s.tracks:s.template?[String(s.template)]:[]:[],[s]),h=(0,L.useMemo)(()=>c?c.tracks?.length?c.tracks:c.template?[String(c.template)]:[]:[],[c]),[g,a]=(0,L.useState)(p),[w,m]=(0,L.useState)(h),d=s&&(s.normalised??ee(s.template||""))||"",i=c&&(c.normalised??ee(c.template||""))||"";(0,L.useEffect)(()=>{a(p)},[d]),(0,L.useEffect)(()=>{m(h)},[i]);let u=(0,L.useCallback)(f=>{let v=f.map(T=>String(T||"").trim()).filter(Boolean);return v.length?v.join(" "):null},[]),b=(0,L.useCallback)(f=>{let v=u(f);v==null?l("gridTemplateColumns"):r("gridTemplateColumns",v)},[u,r,l]),M=(0,L.useCallback)(f=>{let v=u(f);v==null?l("gridTemplateRows"):r("gridTemplateRows",v)},[u,r,l]),q=(0,L.useMemo)(()=>{let f=u(g);return!!s?.template&&ee(f||"")===d},[s?.template,d,g,u]),C=(0,L.useMemo)(()=>{let f=u(w);return!!c?.template&&ee(f||"")===i},[c?.template,i,w,u]),y=(0,L.useCallback)((f,v,T,E)=>{let Z=String(E||"").trim();if(!Z)return;let V=[...f,Z];v(V),T(V)},[]),A=(0,L.useCallback)((f,v,T,E,Z)=>{let V=f.slice();V[E]=Z,v(V),T(V)},[]),P=(0,L.useCallback)((f,v,T,E)=>{let Z=f.slice();Z.splice(E,1),v(Z),T(Z)},[]),H=(0,L.useCallback)((f,v,T,E,Z)=>{let V=E+Z;if(V<0||V>=f.length)return;let oe=f.slice(),pe=oe.splice(E,1)[0];oe.splice(V,0,pe),v(oe),T(oe)},[]),R=(0,L.useCallback)(()=>{a([]),l("gridTemplateColumns")},[l]),B=(0,L.useCallback)(()=>{m([]),l("gridTemplateRows")},[l]);return React.createElement(G.Flex,{direction:"column",gap:4},React.createElement(G.FlexBlock,null,(0,me.__)("In Tracks mode, you can define the exact track sizes using any valid CSS Grid value.","costered-blocks")),React.createElement(G.FlexBlock,null,React.createElement(G.Flex,{direction:"column",gap:1},React.createElement(G.FlexItem,null,React.createElement(G.Flex,{direction:"row",gap:2,justify:"space-between",align:"center"},React.createElement(G.FlexBlock,null,React.createElement("span",{className:"costered-blocks--grid-panel-tracks-label"},(0,me.__)("Columns","costered-blocks"))),React.createElement(G.FlexItem,{style:{width:32,flex:"0 0 32px"}},React.createElement(be,{axis:"columns",canClear:!!s?.template,onClear:R,owner:n.activePane.columns,here:"tracks"})))),React.createElement(G.FlexBlock,null,React.createElement(G.Flex,{direction:"column",gap:2,className:"costered-axis-body"},React.createElement(st,{tokens:g,setTokens:a,onAdd:f=>y(g,a,b,f),onEdit:(f,v)=>A(g,a,b,f,v),onRemove:f=>P(g,a,b,f),onMove:(f,v)=>H(g,a,b,f,v),labels:{placeholder:(0,me.__)("Add track (e.g. 240px or minmax(10ch, 2fr))","costered-blocks"),addPlaceholder:(0,me.__)("Add track or [line names]","costered-blocks")}}))))),React.createElement(G.FlexBlock,null,React.createElement(G.Flex,{direction:"column",gap:1},React.createElement(G.FlexItem,null,React.createElement(G.Flex,{direction:"row",gap:2,justify:"space-between",align:"center"},React.createElement(G.FlexBlock,null,React.createElement("span",{className:"costered-blocks--grid-panel-tracks-label"},(0,me.__)("Rows","costered-blocks"))),React.createElement(G.FlexItem,{style:{width:32,flex:"0 0 32px"}},React.createElement(be,{axis:"rows",canClear:!!c?.template,onClear:B,owner:n.activePane.rows,here:"tracks"})))),React.createElement(G.FlexBlock,null,React.createElement(G.Flex,{direction:"column",gap:2,className:"costered-axis-body"},React.createElement(st,{tokens:w,setTokens:m,onAdd:f=>y(w,m,M,f),onEdit:(f,v)=>A(w,m,M,f,v),onRemove:f=>P(w,m,M,f),onMove:(f,v)=>H(w,m,M,f,v),labels:{placeholder:(0,me.__)("Add track (e.g. 240px or minmax(10ch, 2fr))","costered-blocks"),addPlaceholder:(0,me.__)("Add track or [line names]","costered-blocks")}}))))))}var Eo=()=>{let{selectedBlock:e,clientId:t}=Je(),{attributes:r,name:l}=e;return e?React.createElement(Io,{clientId:t,attributes:r,name:l}):null},Io=({clientId:e,attributes:t,name:r})=>{let{updateBlockAttributes:l}=(0,eo.useDispatch)("core/block-editor"),[n,s]=(0,Ce.useState)(null),[c,p]=(0,Ce.useState)(!1),h=(0,Ce.useCallback)(()=>p(!0),[]),g=(0,Ce.useCallback)(()=>p(!1),[]);return React.createElement(React.Fragment,null,React.createElement(U.Panel,null,React.createElement(U.PanelBody,{title:x.gridControls.gridTemplatePanel,initialOpen:!0},React.createElement(Pe,{value:n,onChange:s,label:null,forceActive:!0,panels:{simple:Yt,tracks:Xt},panelProps:{clientId:e}},React.createElement(Pe.TextOption,{value:"simple",label:x.gridControls.gridTemplatePanelSimple}),React.createElement(Pe.TextOption,{value:"tracks",label:x.gridControls.gridTemplatePanelTracks}))),React.createElement(U.PanelBody,{title:x.gridControls.gapPanel,initialOpen:!0},React.createElement(U.Flex,{direction:"column",expanded:!0},React.createElement(U.FlexBlock,null,React.createElement(Zt,{attributes:t,clientId:e,updateBlockAttributes:l,blockName:r})))),React.createElement(U.PanelBody,{title:x.gridControls.gridTemplateAreasPanel,initialOpen:!0},React.createElement(U.Flex,{direction:"column",gap:4},React.createElement(nt,{clientId:e}),React.createElement(U.Flex,{justify:"flex-end"},React.createElement(U.Button,{variant:"secondary",onClick:h},x.gridControls.gridTemplateAreasEditLarge))))),c&&React.createElement(U.Modal,{title:x.gridControls.gridTemplateAreasModal,onRequestClose:g,className:"costered-blocks-modal--wide",shouldCloseOnClickOutside:!0},React.createElement(nt,{clientId:e})))},Lo=(e={})=>{let t=e?.display??e?.style?.display??"";return/^(grid|inline-grid)$/.test(t)},bs={name:"grid-controls",title:x.gridControls.panelTitle,icon:React.createElement(Xe,null),isVisible:({attributes:e})=>Lo(e),render:()=>React.createElement(Eo,null)};})();
