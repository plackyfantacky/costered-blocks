(()=>{var At=Object.create;var N0=Object.defineProperty;var Bt=Object.getOwnPropertyDescriptor;var qt=Object.getOwnPropertyNames;var _t=Object.getPrototypeOf,Rt=Object.prototype.hasOwnProperty;var s0=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Ft=(t,e,o,l)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of qt(e))!Rt.call(t,r)&&r!==o&&N0(t,r,{get:()=>e[r],enumerable:!(l=Bt(e,r))||l.enumerable});return t};var d=(t,e,o)=>(o=t!=null?At(_t(t)):{},Ft(e||!t||!t.__esModule?N0(o,"default",{value:t,enumerable:!0}):o,t));var O=s0((te,E0)=>{E0.exports=wp.i18n});var z=s0((ee,D0)=>{D0.exports=wp.data});var Z=s0((oe,O0)=>{O0.exports=wp.components});var P=s0((ne,$0)=>{$0.exports=wp.element});var z0=s0((ce,j0)=>{j0.exports=wp.preferences});var k0=s0((ge,ot)=>{ot.exports=wp.blockEditor});var C0=d(O()),bt=d(z()),K=d(Z());var U0=d(z());function u0(){return(0,U0.useSelect)(t=>{let e=t("core/block-editor"),o=e.getSelectedBlockClientId();return{selectedBlock:o?e.getBlock(o):null,clientId:o}},[])}var Vt=d(z());var Y=d(P());function o0(t,e,{trim:o=!0,emptyUnsets:l=!0}={}){let r=e!=null,n=(0,Y.useCallback)(i=>{let p=i;if(o&&typeof p=="string"&&(p=p.trim()),!(l&&(p===""||p==null)))return p},[o,l]),s=(0,Y.useCallback)(i=>r?t(e,i):t(i),[r,t,e]),a=(0,Y.useCallback)((i,p)=>{s({[i]:n(p)})},[s,n]),g=(0,Y.useCallback)(i=>{let p={};for(let[h,M]of Object.entries(i))p[h]=n(M);s(p)},[s,n]),m=(0,Y.useCallback)(i=>{s({[i]:void 0})}),c=(0,Y.useCallback)(i=>{let p={};for(let h of i)p[h]=void 0;s(p)},[s]),w=(0,Y.useCallback)(i=>({set:(p,h)=>a(`${i}${p}`,h),setMany:p=>{let h={};for(let[M,F]of Object.entries(p))h[`${i}${M}`]=F;g(h)},unset:p=>m(`${i}${p}`),unsetMany:p=>c(p.map(h=>`${i}${h}`))}),[a,g,m,c]);return{set:a,setMany:g,unset:m,unsetMany:c,withPrefix:w}}var x0=d(z()),A0=d(z0());var W0={display:{type:"string"},visibility:{type:"string"},overflow:{type:"string"}},K0={width:{type:"string"},height:{type:"string"},maxWidth:{type:"string"},maxHeight:{type:"string"},minWidth:{type:"string"},minHeight:{type:"string"}},It={marginTop:{type:"string"},marginRight:{type:"string"},marginBottom:{type:"string"},marginLeft:{type:"string"}},J0={paddingTop:{type:"string"},paddingRight:{type:"string"},paddingBottom:{type:"string"},paddingLeft:{type:"string"}},Y0={flexDirection:{type:"string"},flexWrap:{type:"string"},justifyContent:{type:"string"},alignItems:{type:"string"},alignContent:{type:"string"}},Q0={flexGrow:{type:"number"},flexShrink:{type:"number"},flexBasis:{type:"string"},alignSelf:{type:"string"},order:{type:"number"}},X0={gridTemplateColumns:{type:"string"},gridTemplateRows:{type:"string"}},Gt=["dimensionMode","minDimensionMode","maxDimensionMode","marginMode","paddingMode","gapMode","gapInputMode","gridTemplateColumnsMode","gridTemplateRowsMode"],tt={gap:{type:"string"}},Zt={...W0,...K0,...It,...J0,...Y0,...Q0,...X0,...tt},ae=Object.assign({},...Object.values(Zt)),et=new Set([...Gt]);var x="1fr",ie=new Set([{},...Object.keys(J0)]),pe=new Set([{},...Object.keys(K0)]),de=new Set([{},...Object.keys(W0),...Object.keys(Y0),...Object.keys(Q0),...Object.keys(X0),...Object.keys(tt)]);function v0(t,e,o="costered-blocks"){let l=(0,x0.useSelect)(g=>g(A0.store).get(o,t)??e,[o,t,e]),{set:r,__experimentalReset:n}=(0,x0.useDispatch)(A0.store);return[l,g=>{t.startsWith("__invalid__")||r(o,t,g)},()=>{t.startsWith("__invalid__")||n?.(o,t)}]}var w0=(t,{blockName:e,variant:o}={})=>et.has(t)&&!(!!e||!!o)?`${t}:__unscoped__`:!e&&!o?t:e&&!o?`${t}:${e}`:!e&&o?`${t}#${o}`:`${t}:${e}#${o}`;var lt=d(z()),rt=d(k0());function B0(t,e){return(0,lt.useSelect)(o=>{if(t)return t;let l=o(rt.store),r=e||l.getSelectedBlockClientId();return(r?l.getBlock(r):null)?.name??null},[t,e])}var st=d(z()),ct=d(k0()),at=d(P());function L(t){return String(t||"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function Ht(t){let e=String(t||"").trim();if(!e)return[];let o=0,l=0,r="",n=[];for(let s=0;s<e.length;s++){let a=e[s];if(a==="("){o++,r+=a;continue}if(a===")"){o=Math.max(0,o-1),r+=a;continue}if(a==="["){l++,r+=a;continue}if(a==="]"){l=Math.max(0,l-1),r+=a;continue}if(a===" "&&o===0&&l===0){r&&(n.push(r),r="");continue}r+=a}return r&&n.push(r),n}function Pt(t){if(!t)return null;let e=t.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);return e?{count:parseInt(e[1],10),unit:e[2].trim()}:null}function c0(t,e=x){return t>0?`repeat(${t}, ${e})`:null}function Lt(t){let e=Pt(t);if(!e)return null;let o=L(c0(e.count,e.unit));return{mode:"simple",template:t||null,normalised:o,simple:{count:e.count,unit:e.unit}}}function Nt(t){let e=Ht(t);if(!e.length)return null;let o=L(e.join(" "));return{mode:"tracks",template:t||null,normalised:o,tracks:e}}var Et=[Lt,Nt];function q0(t){let e=t||"";for(let o of Et){let l=o(e);if(l)return l}return{mode:"raw",template:t||null,normalised:L(t||"")}}function nt(t){if(!t)return{template:null,cols:0,rows:0,matrix:[]};let l=String(t).trim().split(/"\s*"\s*|'\s*'\s*|\n+/).map(s=>s.replace(/^["']|["']$/g,"").trim()).filter(Boolean).map(s=>s.split(/\s+/).filter(Boolean)),r=l.length,n=r?Math.max(...l.map(s=>s.length)):0;return{template:t,cols:n,rows:r,matrix:l}}function h0(t){let e=(0,st.useSelect)(l=>t?l(ct.store).getBlock(t)?.attributes??{}:{},[t]);return(0,at.useMemo)(()=>{let l=q0(e.gridTemplateColumns),r=q0(e.gridTemplateRows),n=nt(e.gridTemplateAreas);return{columns:l,rows:r,areas:n,activePane:{columns:l.mode,rows:r.mode}}},[e.gridTemplateColumns,e.gridTemplateRows,e.gridTemplateAreas])}var l0=d(O()),W=d(P()),_=d(Z());var it=d(Z());function a0(t){let{value:e,onChange:o,label:l}=t,r=l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return React.createElement(it.__experimentalUnitControl,{__next40pxDefaultSize:!0,label:r,value:e,onChange:o,placeholder:"0",style:{padding:"0 2px"},units:[{name:"rem",value:"rem",label:"rem"},{name:"px",value:"px",label:"px"},{name:"em",value:"em",label:"em"},{name:"%",value:"%",label:"%"},{name:"vw",value:"vw",label:"vw"},{name:"vh",value:"vh",label:"vh"}],isResettable:!0,allowReset:!0})}var pt=d(Z());function _0({value:t,onChange:e,label:o,placeholder:l="",help:r=""}){let n=o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return React.createElement("div",{style:{padding:"0 2px"}},React.createElement(pt.TextControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:n,value:t,onChange:e,placeholder:l,help:r}))}var Dt=({size:t=24,...e})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,...e},React.createElement("path",{d:"M11.271,12.013l0,-1.784c0,-0.403 0.327,-0.729 0.729,-0.729c0.402,0 0.729,0.326 0.729,0.729l-0,1.784l0.213,-0.214c0.284,-0.284 0.746,-0.284 1.03,0c0.284,0.285 0.284,0.746 0,1.031l-1.457,1.457c-0.137,0.137 -0.321,0.213 -0.515,0.213c-0.194,-0 -0.378,-0.076 -0.515,-0.213l-1.457,-1.457c-0.284,-0.285 -0.284,-0.746 -0,-1.031c0.284,-0.284 0.746,-0.284 1.03,0l0.213,0.214Z"}),React.createElement("path",{d:"M3.199,19.503l0,-2.001c0,-0.994 0.807,-1.8 1.801,-1.8l14,-0c0.994,-0 1.801,0.806 1.801,1.8l-0,2.001c-0,0.993 -0.807,1.8 -1.801,1.8l-14,-0c-0.994,-0 -1.801,-0.807 -1.801,-1.8Zm1.6,-0c0,0.11 0.09,0.2 0.201,0.2l14,-0c0.111,-0 0.201,-0.09 0.201,-0.2l-0,-2.001c-0,-0.111 -0.09,-0.2 -0.201,-0.2l-14,-0c-0.111,-0 -0.201,0.089 -0.201,0.2l0,2.001Z"}),React.createElement("path",{d:"M12.701,6.498l-0,-2.001c-0,-0.993 0.806,-1.8 1.8,-1.8l4.499,0c0.994,0 1.801,0.807 1.801,1.8l-0,2.001c-0,0.994 -0.807,1.8 -1.801,1.8l-4.499,0c-0.994,0 -1.8,-0.806 -1.8,-1.8Zm1.6,0c-0,0.111 0.089,0.2 0.2,0.2l4.499,0c0.111,0 0.201,-0.089 0.201,-0.2l-0,-2.001c-0,-0.11 -0.09,-0.2 -0.201,-0.2l-4.499,0c-0.111,0 -0.2,0.09 -0.2,0.2l-0,2.001Z"}),React.createElement("path",{d:"M3.199,6.498l0,-2.001c0,-0.993 0.807,-1.8 1.801,-1.8l4.499,0c0.994,0 1.8,0.807 1.8,1.8l0,2.001c0,0.994 -0.806,1.8 -1.8,1.8l-4.499,0c-0.994,0 -1.801,-0.806 -1.801,-1.8Zm1.6,0c0,0.111 0.09,0.2 0.201,0.2l4.499,0c0.111,0 0.2,-0.089 0.2,-0.2l0,-2.001c0,-0.11 -0.089,-0.2 -0.2,-0.2l-4.499,0c-0.111,0 -0.201,0.09 -0.201,0.2l0,2.001Z"})),R0=Dt;var Ot=({size:t=24,...e})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,...e},React.createElement("path",{fill:"currentColor",d:"M5 11q-.825 0-1.412-.587T3 9V5q0-.825.588-1.412T5 3h4q.825 0 1.413.588T11 5v4q0 .825-.587 1.413T9 11zm0 10q-.825 0-1.412-.587T3 19v-4q0-.825.588-1.412T5 13h4q.825 0 1.413.588T11 15v4q0 .825-.587 1.413T9 21zm10-10q-.825 0-1.412-.587T13 9V5q0-.825.588-1.412T15 3h4q.825 0 1.413.588T21 5v4q0 .825-.587 1.413T19 11zm0 10q-.825 0-1.412-.587T13 19v-4q0-.825.588-1.412T15 13h4q.825 0 1.413.588T21 15v4q0 .825-.587 1.413T19 21z"})),F0=Ot;var Ut=({size:t=24,...e})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,...e},React.createElement("path",{d:"M11.271,12.013l0,-1.784c0,-0.403 0.327,-0.729 0.729,-0.729c0.402,0 0.729,0.326 0.729,0.729l-0,1.784l0.213,-0.214c0.284,-0.284 0.746,-0.284 1.03,0c0.284,0.285 0.284,0.746 0,1.031l-1.457,1.457c-0.137,0.137 -0.321,0.213 -0.515,0.213c-0.194,-0 -0.378,-0.076 -0.515,-0.213l-1.457,-1.457c-0.284,-0.285 -0.284,-0.746 -0,-1.031c0.284,-0.284 0.746,-0.284 1.03,0l0.213,0.214Z"}),React.createElement("path",{d:"M20.801,4.497l-0,2.001c-0,0.994 -0.807,1.8 -1.801,1.8l-14,0c-0.994,0 -1.801,-0.806 -1.801,-1.8l0,-2.001c0,-0.993 0.807,-1.8 1.801,-1.8l14,0c0.994,0 1.801,0.807 1.801,1.8Zm-1.6,0c-0,-0.11 -0.09,-0.2 -0.201,-0.2l-14,0c-0.111,0 -0.201,0.09 -0.201,0.2l0,2.001c0,0.111 0.09,0.2 0.201,0.2l14,0c0.111,0 0.201,-0.089 0.201,-0.2l-0,-2.001Z"}),React.createElement("path",{d:"M11.299,17.502l0,2.001c0,0.993 -0.806,1.8 -1.8,1.8l-4.499,-0c-0.994,-0 -1.801,-0.807 -1.801,-1.8l0,-2.001c0,-0.994 0.807,-1.8 1.801,-1.8l4.499,-0c0.994,-0 1.8,0.806 1.8,1.8Zm-1.6,-0c0,-0.111 -0.089,-0.2 -0.2,-0.2l-4.499,-0c-0.111,-0 -0.201,0.089 -0.201,0.2l0,2.001c0,0.11 0.09,0.2 0.201,0.2l4.499,-0c0.111,-0 0.2,-0.09 0.2,-0.2l0,-2.001Z"}),React.createElement("path",{d:"M20.801,17.502l-0,2.001c-0,0.993 -0.807,1.8 -1.801,1.8l-4.499,-0c-0.994,-0 -1.8,-0.807 -1.8,-1.8l-0,-2.001c-0,-0.994 0.806,-1.8 1.8,-1.8l4.499,-0c0.994,-0 1.801,0.806 1.801,1.8Zm-1.6,-0c-0,-0.111 -0.09,-0.2 -0.201,-0.2l-4.499,-0c-0.111,-0 -0.2,0.089 -0.2,0.2l-0,2.001c-0,0.11 0.089,0.2 0.2,0.2l4.499,-0c0.111,-0 0.201,-0.09 0.201,-0.2l-0,-2.001Z"})),V0=Ut;var dt=(t="")=>(t+"").trim().split(/\s+(?![^(]*\))/).filter(Boolean).slice(0,2),mt=(t="",e="")=>[t,e].filter(Boolean).join(" ").trim(),ut=t=>t==null?"":String(t).trim();function ht({attributes:t,clientId:e,updateBlockAttributes:o,blockName:l=null}){let{set:r}=o0(o,e),n=B0(l,e),s=w0("gapMode",{blockName:n}),[a,g]=v0(s,"unit"),m=w0("gapInputMode",{blockName:n}),[c,w]=v0(m,"single"),i=t?.gap||"";(0,W.useEffect)(()=>{c===void 0&&w(dt(i).length===2?"dual":"single")},[c,i]);let[p,h]=(0,W.useMemo)(()=>{let B=dt(i);return[B[0]||"",B[1]||""]},[i]),M=(0,W.useCallback)(B=>{let N=ut(B);if(c==="single")r("gap",N||void 0);else{let E=mt(N,h);r("gap",E||void 0)}},[c,r,h]),F=(0,W.useCallback)(B=>{let N=ut(B),E=mt(p,N);r("gap",E||void 0)},[r,p]),q=a==="unit"?a0:_0,J=c==="single"?(0,l0.__)("Gap","costered-blocks"):(0,l0.__)("Row Gap","costered-blocks"),v=(0,W.useCallback)(()=>{w(c==="single"?"dual":"single")},[c,w]),T=(0,W.useCallback)(()=>{g(a==="unit"?"text":"unit")},[a,g]);return React.createElement(_.Flex,{direction:"column",className:"gap-controls"},React.createElement(_.FlexBlock,null,React.createElement(_.Flex,{align:"flex-end",gap:1},React.createElement(_.FlexBlock,null,React.createElement(_.Flex,{gap:0,direction:"row"},React.createElement(_.FlexItem,null,React.createElement(q,{label:J,value:c==="single"?i:p,onChange:M,allowReset:!0})),c==="dual"&&React.createElement(_.FlexItem,null,React.createElement(q,{label:(0,l0.__)("Column Gap","costered-blocks"),value:h,onChange:F,allowReset:!0})))),React.createElement(_.FlexItem,null,React.createElement(_.Button,{icon:c==="single"?V0:R0,label:c==="single"?(0,l0.__)("Switch to Dual Gap","costered-blocks"):(0,l0.__)("Switch to Single Gap","costered-blocks"),onClick:v,style:{marginBottom:"2px"},"aria-pressed":c==="dual"})))),React.createElement(_.FlexBlock,null),React.createElement(_.FlexBlock,null,React.createElement(_.ToggleControl,{label:(0,l0.__)("Use custom values (e.g auto, calc)","costered-blocks"),checked:a==="text",onChange:T,__nextHasNoMarginBottom:!0})))}var U=d(P()),gt=d(Z()),M0=(0,U.createContext)(null);function ft({active:t,defaultActive:e="simple",onChange:o,children:l}){let[r,n]=(0,U.useState)(e),s=t!==void 0?t:r,a=(0,U.useCallback)(m=>{o&&o(m),t===void 0&&n(m)},[o,t]),g=(0,U.useMemo)(()=>({active:s,setActive:a}),[s,a]);return React.createElement(M0.Provider,{value:g},React.createElement(gt.Flex,{direction:"column",gap:2,className:"costered-blocks-grid-panel-group"},l))}function I0({group:t,children:e}){let o=(0,U.useContext)(M0);return!o||o.active!==t?null:React.createElement("div",{className:"costered-blocks-grid-panel","data-group":t},e)}var g0=d(O()),xt=d(P());var h2=d(O()),T0=d(P()),H=d(Z());function $t({value:t,onChange:e,label:o="",isBlock:l=!0,children:r,...n}){let s=(0,T0.useCallback)(a=>e(a),[e]);return React.createElement(H.__experimentalToggleGroupControl,{className:`costered-custom-toggle-group ${t?"has-selection":"is-empty"}`,label:o,value:t,onChange:s,isBlock:l,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,isDeselectable:!0,...n},r)}function jt({value:t,label:e,disabled:o}){return React.createElement(H.__experimentalToggleGroupControlOption,{value:t,label:e,disabled:o})}function zt({value:t,icon:e,label:o,showTooltip:l=!0,disabled:r}){return React.createElement(H.__experimentalToggleGroupControlOptionIcon,{value:t,icon:e,"aria-label":o,label:o,showTooltip:l,disabled:r})}function Wt({value:t,icon:e,label:o,disabled:l}){return React.createElement(H.__experimentalToggleGroupControlOption,{value:t,"aria-label":o,label:React.createElement(H.Flex,{direction:"column",gap:0,align:"center",style:{paddingBlock:"0.5em"}},React.createElement(H.FlexItem,null,e),React.createElement(H.FlexItem,null,o)),disabled:l})}var b0=(0,T0.memo)($t);b0.TextOption=jt;b0.IconOption=zt;b0.CombinedOption=Wt;var i0=b0;function vt(){let t=(0,xt.useContext)(M0);if(!t)throw new Error("useGridPanel must be used within <GridPanelGroup>.");let{active:e,setActive:o}=t;return React.createElement(i0,{value:e,onChange:o},React.createElement(i0.TextOption,{value:"simple",label:(0,g0.__)("Simple","costered-blocks")}),React.createElement(i0.TextOption,{value:"tracks",label:(0,g0.__)("Tracks","costered-blocks")}),React.createElement(i0.TextOption,{value:"areas",label:(0,g0.__)("Areas","costered-blocks"),disabled:!0}),React.createElement(i0.TextOption,{value:"presets",label:(0,g0.__)("Presets","costered-blocks"),disabled:!0}))}var b=d(P()),kt=d(z()),k=d(Z()),Q=d(O());var f0=d(Z()),r0=d(O()),Kt=t=>t?t.charAt(0).toUpperCase()+t.slice(1):"";function p0({axis:t,canClear:e=!1,onClear:o,active:l,owner:r=null,here:n=null}){let s=t==="columns"?(0,r0.__)("Clear Columns","costered-blocks"):(0,r0.__)("Clear Rows","costered-blocks"),a=!!e,g=typeof l=="boolean"?l:a&&r&&n&&r===n,c=a?g?"here":a&&r&&n&&r!=="raw"&&r!==n&&!g?"elsewhere":"none":"none",w=c==="none"?(0,r0.__)("No value set","costered-blocks"):c==="here"?(0,r0.__)("Value matches this panel","costered-blocks"):r==="raw"?(0,r0.__)("Value set (unrecognised format)","costered-blocks"):sprintf((0,r0.__)("Value set in %s panel","costered-blocks"),Kt(r));return React.createElement("div",{className:`costered-blocks-grid-axis-aside${c==="here"?" is-owned-here":""}${c==="elsewhere"?" is-elsewhere":""}`,"data-state":c,"data-owner":r||"none","data-here":n||"none","aria-label":t},React.createElement(f0.Tooltip,{text:w},React.createElement("span",{className:"costered-blocks-grid-axis__pip"})),React.createElement(f0.Tooltip,{text:s},React.createElement(f0.Button,{icon:"trash",label:s,onClick:o,disabled:!a,variant:"tertiary",className:"costered-blocks-grid-axis-aside__clear"})))}var wt={mode:"raw",template:null,normalised:"",simple:null,tracks:null};function G0({clientId:t}){if(!t)return null;let{updateBlockAttributes:e}=(0,kt.useDispatch)("core/block-editor"),{set:o,unset:l}=o0(e,t),r=h0(t)||{},n=r.columns??wt,s=r.rows??wt,[a,g]=(0,b.useState)(n.simple?.count??0),[m,c]=(0,b.useState)(n.simple?.unit??x),[w,i]=(0,b.useState)((n.simple?.unit??x)===x),[p,h]=(0,b.useState)(s.simple?.count??0),[M,F]=(0,b.useState)(s.simple?.unit??x),[q,J]=(0,b.useState)((s.simple?.unit??x)===x),v=n?.normalised??"",T=s?.normalised??"";(0,b.useEffect)(()=>{g(n.simple?.count??0),c(n.simple?.unit??x),i((n.simple?.unit??x)===x)},[v]),(0,b.useEffect)(()=>{h(s.simple?.count??0),F(s.simple?.unit??x),J((s.simple?.unit??x)===x)},[T]);let B=(0,b.useMemo)(()=>w?x:m||x,[w,m]),N=(0,b.useMemo)(()=>q?x:M||x,[q,M]),E=c0(a,B),y0=c0(p,N),L0=!!n.template&&L(E)===v,u=!!s.template&&L(y0)===T,f=(0,b.useCallback)((C,y)=>{let m0=c0(C,y);m0==null?l("gridTemplateColumns"):o("gridTemplateColumns",m0)},[o,l]),R=(0,b.useCallback)((C,y)=>{let m0=c0(C,y);m0==null?l("gridTemplateRows"):o("gridTemplateRows",m0)},[o,l]),D=(0,b.useCallback)(C=>{let y=typeof C=="number"?C:parseInt(C||"0",10);g(y),f(y,w?x:m)},[w,m,f]),I=(0,b.useCallback)(C=>{let y=typeof C=="number"?C:parseInt(C||"0",10);h(y),R(y,q?x:M)},[q,M,R]),G=(0,b.useCallback)(C=>{i(C);let y=C?x:m||x;!C&&!m&&c(y),f(a,y)},[a,m,f]),n0=(0,b.useCallback)(C=>{J(C);let y=C?x:M||x;!C&&!M&&F(y),R(p,y)},[p,M,R]),S0=(0,b.useCallback)(C=>{let y=(C||"").trim();c(y),f(a,w?x:y||x)},[a,w,f]),Ct=(0,b.useCallback)(C=>{let y=(C||"").trim();F(y),R(p,q?x:y||x)},[p,q,R]),yt=(0,b.useCallback)(()=>{g(0),l("gridTemplateColumns")},[l]),St=(0,b.useCallback)(()=>{h(0),l("gridTemplateRows")},[l]);return React.createElement(k.Flex,{direction:"column",gap:4},React.createElement(k.FlexBlock,null,(0,Q.__)("In Simple mode, you can define the number of columns. All columns equally divide the total available width.","costered-blocks")),React.createElement(k.FlexBlock,null,React.createElement(k.Flex,{direction:"column",gap:1},React.createElement(k.FlexItem,null,React.createElement(k.Flex,{direction:"row",gap:2,justify:"space-between",align:"center"},React.createElement(k.FlexBlock,null,React.createElement("span",{className:"costered-blocks--grid-panel-simple-label"},(0,Q.__)("Columns","costered-blocks"))),React.createElement(k.FlexItem,{style:{width:32,flex:"0 0 32px"}},React.createElement(p0,{axis:"columns",canClear:!!n?.template,onClear:yt,owner:r.activePane.columns,here:"simple"})))),React.createElement(k.FlexBlock,null,React.createElement(k.RangeControl,{min:0,max:12,step:1,value:a,onChange:D,className:"costered-blocks--grid-columns-simple-control",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})),React.createElement(k.FlexBlock,null,React.createElement(k.ToggleControl,{label:(0,Q.__)(`Use ${x}`,"costered-blocks"),checked:w,onChange:G,__nextHasNoMarginBottom:!0})),!w&&React.createElement(k.FlexBlock,null,React.createElement(a0,{label:(0,Q.__)("Unit","costered-blocks"),value:m,onChange:S0})))),React.createElement(k.FlexBlock,null,React.createElement(k.Flex,{direction:"column",gap:1},React.createElement(k.Flex,{direction:"row",gap:2,justify:"space-between",align:"center"},React.createElement(k.FlexBlock,null,React.createElement("span",{className:"costered-blocks--grid-panel-simple-label"},(0,Q.__)("Rows","costered-blocks"))),React.createElement(k.FlexItem,{style:{width:32,flex:"0 0 32px"}},React.createElement(p0,{axis:"rows",canClear:!!s.template,onClear:St,owner:r.activePane.rows,here:"tracks"}))),React.createElement(k.FlexBlock,null,React.createElement(k.RangeControl,{min:0,max:12,step:1,value:p,onChange:I,className:"costered-blocks--grid-rows-simple-control",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})),React.createElement(k.FlexBlock,null,React.createElement(k.ToggleControl,{label:(0,Q.__)(`Use ${x}`,"costered-blocks"),checked:q,onChange:n0,__nextHasNoMarginBottom:!0})),!q&&React.createElement(k.FlexBlock,null,React.createElement(a0,{label:(0,Q.__)("Unit","costered-blocks"),value:M,onChange:Ct})))))}var S=d(P()),Mt=d(z()),I2=d(k0()),e0=d(O()),A=d(Z());var V=d(P()),t0=d(Z()),j=d(O());var X=d(P()),$=d(Z()),d0=d(O());function Z0({index:t,value:e,isExpanded:o,onToggle:l,onRemove:r,onChange:n,onMoveLeft:s,onMoveRight:a,labels:g}){let m=(0,X.useRef)(null),c={expand:(0,d0.__)("Edit token","costered-blocks"),collapse:(0,d0.__)("Close editor","costered-blocks"),remove:(0,d0.__)("Remove","costered-blocks"),moveLeft:(0,d0.__)("Move left","costered-blocks"),moveRight:(0,d0.__)("Move right","costered-blocks"),...g};(0,X.useEffect)(()=>{o&&m.current&&(m.current.focus(),m.current.select?.())},[o]);let w=(0,X.useCallback)(h=>{h.stopPropagation(),r(t)},[t,r]),i=(0,X.useCallback)(()=>{l(t,!o)},[t,o,l]),p=(0,X.useCallback)(h=>{h.key==="Enter"||h.key===" "?(h.preventDefault(),i()):h.key==="Escape"&&o&&(h.preventDefault(),l(t,!1))},[i,t,o,l]);return React.createElement("div",{className:`costered-token${o?" is-expanded":""}`},React.createElement("div",{className:"costered-token__chip"},React.createElement("button",{type:"button",className:"costered-token__chipButton","aria-expanded":o,"aria-controls":`costered-token-panel-${t}`,onClick:i,onKeyDown:p,title:o?c.collapse:c.expand},React.createElement("span",{className:"costered-token__chipText"},e)),React.createElement($.Tooltip,{text:c.remove},React.createElement($.Button,{icon:"no-alt",label:c.remove,onClick:w,variant:"tertiary",className:"costered-token__remove"}))),o&&React.createElement("div",{id:`costered-token-panel-${t}`,className:"costered-token__panel"},React.createElement($.TextControl,{ref:m,value:e,onChange:h=>n(t,h),__nextHasNoMarginBottom:!0}),React.createElement("div",{className:"costered-token__actions"},React.createElement($.Tooltip,{text:c.moveLeft},React.createElement($.Button,{icon:"arrow-left-alt2",onClick:()=>s(t),label:c.moveLeft,variant:"tertiary"})),React.createElement($.Tooltip,{text:c.moveRight},React.createElement($.Button,{icon:"arrow-right-alt2",onClick:()=>a(t),label:c.moveRight,variant:"tertiary"})))))}function H0({tokens:t,onAdd:e,onEdit:o,onRemove:l,onMove:r,labels:n,allowLineNames:s=!0}){let a=(0,V.useMemo)(()=>({add:(0,j.__)("Add","costered-blocks"),addPlaceholder:(0,j.__)("Add token","costered-blocks"),addLineNames:(0,j.__)("Add line names","costered-blocks"),listAriaLabel:(0,j.__)("List of tokens","costered-blocks"),moveLeft:(0,j.__)("Move left","costered-blocks"),moveRight:(0,j.__)("Move right","costered-blocks"),remove:(0,j.__)("Remove","costered-blocks"),expand:(0,j.__)("Edit token","costered-blocks"),collapse:(0,j.__)("Close editor","costered-blocks")}),[]),g=(0,V.useMemo)(()=>({...a,...n||{}}),[a,n]),[m,c]=(0,V.useState)(""),[w,i]=(0,V.useState)(null),p=(0,V.useCallback)(()=>{let v=String(m||"").trim();v&&(e(v),c(""),i(null))},[m,e]),h=(0,V.useCallback)(()=>{let v=String(m||"").trim();v&&(e(`[${v}]`),c(""),i(null))},[m,e]),M=(0,V.useCallback)((v,T)=>{i(T?v:null)},[]),F=(0,V.useCallback)((v,T)=>{o(v,T)},[o]),q=(0,V.useCallback)(v=>{l(v),i(T=>T===v?null:T>v?T-1:T)},[l]),J=(0,V.useCallback)((v,T)=>{r(v,T),i(B=>B===v?v+T:B===v+T?v:B)},[r]);return React.createElement("div",{className:"costered-token-editor",role:"list","aria-label":g.listAriaLabel},React.createElement("div",{className:"costered-token-list"},t.map((v,T)=>React.createElement(Z0,{key:`${T}-${v}`,index:T,value:v,isExpanded:w===T,onToggle:M,onRemove:q,onChange:F,onMoveLeft:B=>J(B,-1),onMoveRight:B=>J(B,1),labels:g}))),React.createElement("div",{className:"costered-token-add"},React.createElement(t0.TextControl,{placeholder:g.addPlaceholder,value:m,onChange:c,onKeyDown:v=>{v.key==="Enter"&&p()},__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),s?React.createElement(t0.Flex,{className:"costered-token-add-options",gap:0,align:"center",style:{width:"fit-content"}},React.createElement(t0.Button,{icon:"editor-code",onClick:p,label:g.add}),React.createElement(t0.Button,{icon:"tag",onClick:h,label:g.addLineNames})):React.createElement(t0.Button,{variant:"secondary",onClick:p},g.add)))}function P0({clientId:t}){if(!t)return null;let{updateBlockAttributes:e}=(0,Mt.useDispatch)("core/block-editor"),{set:o,unset:l}=o0(e,t),r=h0(t),n=r?.columns,s=r?.rows,a=(0,S.useMemo)(()=>n?n.tracks?.length?n.tracks:n.template?[String(n.template)]:[]:[],[n]),g=(0,S.useMemo)(()=>s?s.tracks?.length?s.tracks:s.template?[String(s.template)]:[]:[],[s]),[m,c]=(0,S.useState)(a),[w,i]=(0,S.useState)(g),p=n&&(n.normalised??L(n.template||""))||"",h=s&&(s.normalised??L(s.template||""))||"";(0,S.useEffect)(()=>{c(a)},[p]),(0,S.useEffect)(()=>{i(g)},[h]);let M=(0,S.useCallback)(u=>{let f=u.map(R=>String(R||"").trim()).filter(Boolean);return f.length?f.join(" "):null},[]),F=(0,S.useCallback)(u=>{let f=M(u);f==null?l("gridTemplateColumns"):o("gridTemplateColumns",f)},[M,o,l]),q=(0,S.useCallback)(u=>{let f=M(u);f==null?l("gridTemplateRows"):o("gridTemplateRows",f)},[M,o,l]),J=(0,S.useMemo)(()=>{let u=M(m);return!!n?.template&&L(u||"")===p},[n?.template,p,m,M]),v=(0,S.useMemo)(()=>{let u=M(w);return!!s?.template&&L(u||"")===h},[s?.template,h,w,M]),T=(0,S.useCallback)((u,f,R,D)=>{let I=String(D||"").trim();if(!I)return;let G=[...u,I];f(G),R(G)},[]),B=(0,S.useCallback)((u,f,R,D,I)=>{let G=u.slice();G[D]=I,f(G),R(G)},[]),N=(0,S.useCallback)((u,f,R,D)=>{let I=u.slice();I.splice(D,1),f(I),R(I)},[]),E=(0,S.useCallback)((u,f,R,D,I)=>{let G=D+I;if(G<0||G>=u.length)return;let n0=u.slice(),S0=n0.splice(D,1)[0];n0.splice(G,0,S0),f(n0),R(n0)},[]),y0=(0,S.useCallback)(()=>{c([]),l("gridTemplateColumns")},[l]),L0=(0,S.useCallback)(()=>{i([]),l("gridTemplateRows")},[l]);return React.createElement(A.Flex,{direction:"column",gap:4},React.createElement(A.FlexBlock,null,(0,e0.__)("In Tracks mode, you can define the exact track sizes using any valid CSS Grid value.","costered-blocks")),React.createElement(A.FlexBlock,null,React.createElement(A.Flex,{direction:"column",gap:1},React.createElement(A.FlexItem,null,React.createElement(A.Flex,{direction:"row",gap:2,justify:"space-between",align:"center"},React.createElement(A.FlexBlock,null,React.createElement("span",{className:"costered-blocks--grid-panel-tracks-label"},(0,e0.__)("Columns","costered-blocks"))),React.createElement(A.FlexItem,{style:{width:32,flex:"0 0 32px"}},React.createElement(p0,{axis:"columns",canClear:!!n?.template,onClear:y0,owner:r.activePane.columns,here:"tracks"})))),React.createElement(A.FlexBlock,null,React.createElement(A.Flex,{direction:"column",gap:2,className:"costered-axis-body"},React.createElement(H0,{tokens:m,setTokens:c,onAdd:u=>T(m,c,F,u),onEdit:(u,f)=>B(m,c,F,u,f),onRemove:u=>N(m,c,F,u),onMove:(u,f)=>E(m,c,F,u,f),labels:{placeholder:(0,e0.__)("Add track (e.g. 240px or minmax(10ch, 2fr))","costered-blocks"),addPlaceholder:(0,e0.__)("Add track or [line names]","costered-blocks")}}))))),React.createElement(A.FlexBlock,null,React.createElement(A.Flex,{direction:"column",gap:1},React.createElement(A.FlexItem,null,React.createElement(A.Flex,{direction:"row",gap:2,justify:"space-between",align:"center"},React.createElement(A.FlexBlock,null,React.createElement("span",{className:"costered-blocks--grid-panel-tracks-label"},(0,e0.__)("Rows","costered-blocks"))),React.createElement(A.FlexItem,{style:{width:32,flex:"0 0 32px"}},React.createElement(p0,{axis:"rows",canClear:!!s?.template,onClear:L0,owner:r.activePane.rows,here:"tracks"})))),React.createElement(A.FlexBlock,null,React.createElement(A.Flex,{direction:"column",gap:2,className:"costered-axis-body"},React.createElement(H0,{tokens:w,setTokens:i,onAdd:u=>T(w,i,q,u),onEdit:(u,f)=>B(w,i,q,u,f),onRemove:u=>N(w,i,q,u),onMove:(u,f)=>E(w,i,q,u,f),labels:{placeholder:(0,e0.__)("Add track (e.g. 240px or minmax(10ch, 2fr))","costered-blocks"),addPlaceholder:(0,e0.__)("Add track or [line names]","costered-blocks")}}))))))}function Tt(){let{clientId:t,attributes:e,name:o}=u0();return React.createElement(ft,{defaultActive:"simple",key:t},React.createElement(vt,null),React.createElement(I0,{group:"simple"},React.createElement(G0,{clientId:t,attributes:e,name:o})),React.createElement(I0,{group:"tracks"},React.createElement(P0,{clientId:t,attributes:e,name:o})))}var Jt=()=>{let{selectedBlock:t,clientId:e}=u0(),{attributes:o,name:l}=t;return t?React.createElement(Yt,{clientId:e,attributes:o,name:l}):null},Yt=({clientId:t,attributes:e,name:o})=>{let{updateBlockAttributes:l}=(0,bt.useDispatch)("core/block-editor");return React.createElement(K.Panel,null,React.createElement(K.PanelBody,{title:(0,C0.__)("Grid Template","costered-blocks"),initialOpen:!0},React.createElement(Tt,null)),React.createElement(K.PanelBody,{title:(0,C0.__)("Gap","costered-blocks"),initialOpen:!0},React.createElement(K.Flex,{direction:"column",expanded:!0},React.createElement(K.FlexBlock,null,React.createElement(ht,{attributes:e,clientId:t,updateBlockAttributes:l,blockName:o})))))},Qt=(t={})=>{let e=t?.display??t?.style?.display??"";return/^(grid|inline-grid)$/.test(e)},l1={name:"grid-controls",title:(0,C0.__)("Grid Controls","costered-blocks"),icon:React.createElement(F0,null),isVisible:({attributes:t})=>Qt(t),render:()=>React.createElement(Jt,null)};})();
