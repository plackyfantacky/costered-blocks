(()=>{var ao=Object.create;var mt=Object.defineProperty;var io=Object.getOwnPropertyDescriptor;var co=Object.getOwnPropertyNames;var mo=Object.getPrototypeOf,po=Object.prototype.hasOwnProperty;var we=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var uo=(e,t,o,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of co(t))!po.call(e,n)&&n!==o&&mt(e,n,{get:()=>t[n],enumerable:!(r=io(t,n))||r.enumerable});return e};var h=(e,t,o)=>(o=e!=null?ao(mo(e)):{},uo(t||!e||!e.__esModule?mt(o,"default",{value:e,enumerable:!0}):o,e));var q=we((Do,pt)=>{pt.exports=wp.element});var Y=we((Zo,ut)=>{ut.exports=wp.data});var U=we((jo,gt)=>{gt.exports=wp.components});var Re=we((M0,_t)=>{_t.exports=wp.blockEditor});var Ht=we((I0,Ot)=>{Ot.exports=wp.preferences});var se=we((J0,$t)=>{$t.exports=wp.i18n});var Me=h(q()),no=h(Y()),j=h(U());var ae=h(q());var je={display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"}};function ne(e){return Object.fromEntries(Object.entries(je).filter(([t,o])=>o.group===e))}var ft=ne("display"),ht=ne("dimension"),xt=ne("margin"),wt=ne("padding"),vt=ne("flex"),kt=ne("flex-item"),Tt=ne("grid"),Ue=ne("grid-item"),bt=ne("shared"),zo={...ft,...ht,...xt,...wt,...vt,...kt,...Tt,...Ue,...bt},Ct=new Set([...Object.keys(Ue)]);var M="1fr";var Ko=new Set([...Object.keys(ft),...Object.keys(ht),...Object.keys(wt),...Object.keys(xt),...Object.keys(vt),...Object.keys(kt),...Object.keys(Tt),...Object.keys(Ue),...Object.keys(bt)]),Jo=Object.fromEntries(Object.entries(je).map(([e,t])=>[e,t.css]));function X(e,t,{trim:o=!0,emptyUnsets:r=!0}={}){let n=t!=null,s=(0,ae.useCallback)((i,d)=>{if(i==null)return;if(Ct.has(d)){let v=typeof i=="string"&&o?i.trim():String(i);return r&&v===""?void 0:v}let c=i;if(o&&typeof c=="string"&&(c=c.trim()),r&&(c===""||c==null))return;let m=String(c).trim();if(!(!m||m==="undefined"||m==="null"))return m},[o,r]),l=(0,ae.useCallback)(i=>{if(n)return e(t,i);{let d={};for(let[c,m]of Object.entries(i)){let v=s(m,c);v!==void 0&&(d[c]=v)}Object.keys(d).length&&e(t,d)}},[n,e,t,s]),p=(0,ae.useCallback)((i,d)=>{l({[i]:s(d,i)})},[l,s]),g=(0,ae.useCallback)(i=>{let d={};for(let[c,m]of Object.entries(i))d[c]=s(m,c);l(d)},[l,s]),u=(0,ae.useCallback)(i=>{l({[i]:void 0})}),a=(0,ae.useCallback)(i=>{let d={};for(let c of i)d[c]=void 0;l(d)},[l]),w=(0,ae.useCallback)(i=>({set:(d,c)=>p(`${i}${d}`,c),setMany:d=>{let c={};for(let[m,v]of Object.entries(d))c[`${i}${m}`]=v;g(c)},unset:d=>u(`${i}${d}`),unsetMany:d=>a(d.map(c=>`${i}${c}`))}),[p,g,u,a]);return{set:p,setMany:g,unset:u,unsetMany:a,withPrefix:w}}var ee=h(q());var St=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"";function Q(e){return String(e||"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function fo(e){let t=String(e||"").trim();if(!t)return[];let o=0,r=0,n="",s=[];for(let l=0;l<t.length;l++){let p=t[l];if(p==="("){o++,n+=p;continue}if(p===")"){o=Math.max(0,o-1),n+=p;continue}if(p==="["){r++,n+=p;continue}if(p==="]"){r=Math.max(0,r-1),n+=p;continue}if(p===" "&&o===0&&r===0){n&&(s.push(n),n="");continue}n+=p}return n&&s.push(n),s}function ho(e){if(!e)return null;let t=e.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);return t?{count:parseInt(t[1],10),unit:t[2].trim()}:null}function ve(e,t=M){return e>0?`repeat(${e}, ${t})`:null}var xo=/^(?:[0-9.]+(?:px|rem|em|ch|vh|vw|vmin|vmax|fr|%)|auto|max-content|min-content|fit-content\([^)]+\)|minmax\([^)]+\)|clamp\([^)]+\)|var\([^)]+\))$/i;function ze(e,t,o="1fr"){let r=Math.max(0,Number(t)||0),n=String(e||"").trim();if(r<=0)return n;let{count:s}=Ae(n);if(s===0){let a=String(o||"").trim()||"1fr";return`repeat(${r}, ${a})`}if(s>=r)return n;let l=r-s,p=String(o||"").trim()||"1fr",g=n.match(/^repeat\(\s*([0-9]+)\s*,\s*([^)]+)\)\s*$/i);if(g){let a=g[2].trim();if(xo.test(a))return`repeat(${r}, ${a})`}let u=Array.from({length:l}).map(()=>p).join(" ");return`${n} ${u}`.trim()}function Ke(e,t){if(!e||typeof e!="string")return"";let o=Math.max(0,t|0),r=e.replace(/\[[^\]]*\]/g," ").trim();if(!r)return"";let n=r.match(/^repeat\(\s*([0-9]+)\s*,\s*([^)]+)\)\s*$/i);if(n){let s=n[2].trim();if(!/\s/.test(s))return o<=0?"":`repeat(${o}, ${s})`;let l=wo(r);return Mt(l,o)}return Mt(r,o)}function Ae(e,t=M){if(!e||typeof e!="string")return{count:0,unit:t};let o=e.trim();if(!o)return{count:0,unit:t};if(/^subgrid\b/i.test(o))return{count:0,unit:t};if(o=o.replace(/\[[^\]]*]/g," ").trim(),!o)return{count:0,unit:t};let r=o.match(/repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)$/i);if(r){let l=r[2];return{count:0,unit:Rt(l,t)}}let{count:n,unit:s}=yt(o,t);return{count:n,unit:s||t}}function yt(e,t){let o=At(e);if(o){let l=o.inner.trim(),{count:p,unit:g}=yt(l,t);return{count:o.times*p,unit:g||Rt(l,t)}}let r=We(e),n=r.length,s="";if(r.length===1)s=ye(r[0])||t;else{let l=r.find(Nt);s=ye(l)||t}return{count:n,unit:s}}function At(e){let t=e.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!t)return null;let o=parseInt(t[1],10),r=t[2];return!Number.isFinite(o)||o<0?null:{times:o,inner:r}}function We(e){let t=[],o=0,r="";for(let n=0;n<e.length;n++){let s=e[n];if(s==="("){o++,r+=s;continue}if(s===")"){o=Math.max(0,o-1),r+=s;continue}if(o===0&&/\s/.test(s)){r.trim()&&t.push(r.trim()),r="";continue}r+=s}return r.trim()&&t.push(r.trim()),t}function Rt(e,t){if(!e)return t;let o=At(e);if(o){let s=We(o.inner);if(s.length===1)return ye(s[0])||t}let r=We(e);if(r.length===1)return ye(r[0])||t;let n=r.find(Nt);return ye(n)||t}function Nt(e){return e?!!(/^(minmax|fit-content|clamp|var)\(/i.test(e)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(e)||/^(auto|max-content|min-content)$/i.test(e)):!1}function ye(e){return e?e.trim():""}function wo(e){return e.replace(/repeat\(\s*([0-9]+)\s*,\s*([^)]+)\)/gi,(t,o,r)=>{let n=parseInt(o,10),s=r.trim();return Array.from({length:n}).map(()=>s).join(" ")})}function Mt(e,t){if(t<=0)return"";let o=0,r="",n=[];for(let l of e)l==="("&&o++,l===")"&&(o=Math.max(0,o-1)),/\s/.test(l)&&o===0?r&&(n.push(r),r=""):r+=l;r&&n.push(r);let s=n.slice(0,t);return s.length===0?"":s.join(" ")}function vo(e){let t=ho(e);if(!t)return null;let o=Q(ve(t.count,t.unit));return{mode:"simple",template:e||null,normalised:o,simple:{count:t.count,unit:t.unit}}}function ko(e){let t=fo(e);if(!t.length)return null;let o=Q(t.join(" "));return{mode:"tracks",template:e||null,normalised:o,tracks:t}}var To=[vo,ko];function Je(e){let t=e||"";for(let o of To){let r=o(t);if(r)return r}return{mode:"raw",template:e||null,normalised:Q(e||"")}}function Bt(e){let t=(e||"").trim();if(!t)return{hasAreas:!1,cols:0,rows:0};let o=t.split(/(['"])(?:(?=(\\?))\2.)*?\1/).map(n=>n.replace(/^['"]|['"]$/g,"").trim()).filter(n=>n&&!/^[\s]+$/.test(n));return o.length?{hasAreas:!0,cols:Math.max(0,...o.map(n=>n.split(/\s+/).filter(Boolean).length)),rows:o.length}:{hasAreas:!1,cols:0,rows:0}}function ke(e,t="."){if(!Array.isArray(e)||e.length===0)return"";let o=e.map(n=>(Array.isArray(n)?n:[]).map(s=>{let l=String(s??"").trim();return l===""?t:l}));return o.some(n=>n.some(s=>s!==t))?o.map(n=>`"${n.join(" ")}"`).join(" "):""}function Ye(e,t="."){let o=String(e||"").trim();if(!o)return[];let r=[];return o.replace(/(['"])(.*?)\1/g,(n,s,l)=>(r.push(l),"")),r.map(n=>n.trim().split(/\s+/).map(s=>s&&s!==t?s:t))}function Te(e,t,o,r="."){let n=[];for(let s=0;s<o;s++){let l=e[s]||[],p=Array.from({length:t},(g,u)=>l[u]??r);n.push(p)}return n}function Xe({seedMatrix:e,emptyToken:t=".",onApply:o,suspendResync:r=!1}){let[n,s]=(0,ee.useState)(()=>e),l=(0,ee.useRef)(ke(n));(0,ee.useEffect)(()=>{l.current=ke(n)},[n]),(0,ee.useEffect)(()=>{if(r)return;ke(e)!==l.current&&s(e)},[e,r]);let p=n[0]?.length||0,g=n.length||0,u=(0,ee.useCallback)((i,d,c)=>{s(m=>{let v=String(c??"").trim(),C=v===""?t:v,E=m.map((T,S)=>S===d?T.map((y,V)=>V===i?C:y):T);return o?.(E),E})},[o,t]),a=(0,ee.useCallback)((i,d)=>{s(c=>{let m=Te(c,i,d,t);return o?.(m),m})},[t,o]),w=(0,ee.useCallback)((i=1,d=1)=>{s(()=>{let c=Te([],Math.max(1,i),Math.max(1,d),t);return o?.(c),c})},[t,o]);return{matrix:n,columnData:p,rowData:g,setCell:u,resize:a,clear:w}}var So=h(q());var bo=h(q());var Le=h(q());var T0=Number.MAX_SAFE_INTEGER;var Ao=h(q());var Et=h(Y()),It=h(Re()),Ft=h(q());function oe(e){let t=(0,Et.useSelect)(r=>e?r(It.store).getBlock(e)?.attributes??{}:{},[e]);return(0,Ft.useMemo)(()=>{let r=Je(t.gridTemplateColumns),n=Je(t.gridTemplateRows),s=t.gridTemplateAreas??null,l=Bt(s);return{columns:r,rows:n,areas:{template:s,...l},activePane:{columns:r.mode,rows:n.mode}}},[t.gridTemplateColumns,t.gridTemplateRows,t.gridTemplateAreas])}var fe=h(q()),Lt=h(Y()),Gt=h(Re());function Ne(e){let{updateBlockAttributes:t}=(0,Lt.useDispatch)(Gt.store),{set:o,unset:r}=X(t,e),n=oe(e),s=n?.columns?.template??null,l=n?.rows?.template??null,p=n?.areas?.template??null,g=(0,fe.useMemo)(()=>s?Ae(s):0,[s]),u=(0,fe.useMemo)(()=>l?Ae(l):0,[l]),a=(0,fe.useCallback)(d=>{let c=ke(d,".");c?o("gridTemplateAreas",c):r("gridTemplateAreas")},[o,r]),w=(0,fe.useCallback)(()=>{r("gridTemplateAreas")},[r]),i=(0,fe.useCallback)((d=".")=>{let c=Ye(p,d),m=c[0]?.length||g||1,v=c.length||u||1;return Te(c,m,v,d)},[p,g,u]);return{areasTemplate:p,trackColumnCount:g,trackRowCount:u,applyMatrixToStore:a,clearAreasInStore:w,seedFromStore:i}}var Ro=h(Y());var qt=h(Y()),Pt=h(Re());function Be(e,t){return(0,qt.useSelect)(o=>{if(e)return e;let r=o(Pt.store),n=t||r.getSelectedBlockClientId();return(n?r.getBlock(n):null)?.name??null},[e,t])}var Vt=h(Y());function Qe(){return(0,Vt.useSelect)(e=>{let t=e("core/block-editor"),o=t.getSelectedBlockClientId();return{selectedBlock:o?t.getBlock(o):null,clientId:o}},[])}var Ge=h(Y()),et=h(Ht());function ie(e,t,o="costered-blocks"){let r=(0,Ge.useSelect)(g=>g(et.store).get(o,e)??t,[o,e,t]),{set:n,__experimentalReset:s}=(0,Ge.useDispatch)(et.store);return[r,g=>{e.startsWith("__invalid__")||n(o,e,g)},()=>{e.startsWith("__invalid__")||s?.(o,e)}]}var ce=(e,{blockName:t,variant:o}={})=>!t&&!o?e:t&&!o?`${e}:${t}`:!t&&o?`${e}#${o}`:`${e}:${t}#${o}`;var Zt=h(se());var Dt={pluginSidebar:{noBlockSelected:"Please select a block to edit its settings.",title:"Costered Blocks",selectedBlock:"Selected block",blockWarningSummary:"Style changes may not appear in the editor",blockWarningDetails:"There may be some differences between the editor and the frontend. This is due to limitations with the block editor, which does not always allow custom inline styles to be displayed here."},displayControls:{panelTitle:"Display Controls",displayLabel:"Display",unset:"unset / initial",displayBlock:"Block",displayInline:"Inline",displayFlex:"Flex",displayGrid:"Grid",displayNone:"None",visibilityLabel:"Visibility",visibilityUnset:"unset / initial",visibilityVisible:"Visible",visibilityHidden:"Hidden",visibilityCollapse:"Collapse"},dimensionControls:{panelTitle:"Dimension Controls",dimensionPanel:"Dimensions",dimensions:{width:"Width",height:"Height"},minPanel:"Minimum Dimensions",minDimensions:{width:"Min Width",height:"Min Height"},maxPanel:"Maximum Dimensions",maxDimensions:{width:"Max Width",height:"Max Height"}},spacingControls:{panelTitle:"Spacing Controls",panelLabel:"Spacing",marginLabel:"Margin",paddingLabel:"Padding"},flexBoxControls:{panelTitle:"Flexbox Controls",flexWrapLabel:"Flex Wrap",flexWrapNone:"No Wrap",flexWrapWrap:"Wrap",flexWrapReverse:"Reverse",alignmentPanel:"Alignment",gapPanel:"Gap"},flexItemControls:{panelTitle:"Flex Item Controls",flexGrow:"Grow",flexShrink:"Shrink",flexBasis:"Basis",flexBasisPlaceholder:"Enter value",order:"Order"},gridControls:{panelTitle:"Grid Controls",gridTemplatePanel:"Grid Template",gridTemplatePanelSimple:"Simple",gridTemplatePanelTracks:"Tracks",gapPanel:"Gap",gridTemplateAreasPanel:"Grid Template Areas",gridTemplateAreasEditLarge:"Edit in larger view",gridTemplateAreasModal:"Edit Grid Template Areas"},gridItemsControls:{panelTitle:"Grid Item Controls",simplePanel:{title:"Simple",columnStart:"Column Start",columnStartHelp:"%1$d columns",columnSpan:"Column Span",columnSpanHelp:"Max updates with start",rowStart:"Row Start",rowStartHelp:"%1$d rows",rowSpan:"Row Span",rowSpanHelp:"Max updates with start"},tracksPanel:{title:"Tracks",hasAreasNotice:"This item uses a named grid area. Line-based placement is disabled.",namedLineMismatch:"No named lines are defined in the parent grid.",zeroInvalid:"0 isn\u2019t a valid grid line. Use 1..N or negative indices like -1",columns:{legend:"Columns",trackStartMode:"Start uses",trackStartModeNamed:"Named Line",trackStartModeNumber:"Line Number",trackEndMode:"End uses",trackEndModeSpan:"Span",trackEndModeEnd:"End",startNumber:"Line Number",startNumberHelp:"Positive or negative line number",startNamed:"Named Line",startNamedHelp:"Named lines from parent grid template",spanNumber:"Span",spanNumberHelp:"Max updates with start",endAuto:"Auto",endAutoHelp:"Automatically size based on start/span",endNamed:"Named Line",endNamedHelp:"Named lines from parent grid template",endNumber:"Line Number",endNumberHelp:"Positive or negative line number"},rows:{legend:"Rows",trackStartMode:"Start uses",trackStartModeNamed:"Named Line",trackStartModeNumber:"Line Number",trackEndMode:"End uses",trackEndModeSpan:"Span",trackEndModeEnd:"End",startNumber:"Line Number",startNumberHelp:"Positive or negative line number",startNamed:"Named Line",startNamedHelp:"Named lines from parent grid template",spanNumber:"Span",spanNumberHelp:"Max updates with start",endAuto:"Auto",endAutoHelp:"Automatically size based on start/span",endNamed:"Named Line",endNamedHelp:"Named lines from parent grid template",endNumber:"Line Number",endNumberHelp:"Positive or negative line number"}},areasPanel:{title:"Areas",gridAreaLabel:"Named area (grid-area)",gridAreaNone:"\u2014 None \u2014",gridAreaHelp:"Setting a named area overrides row/column placement."},alignmentPanel:{title:"Alignment"},orderPanel:{title:"Order",label:"Order"}},flexDirection:{label:"Flex Direction",row:"Row",rowReverse:"Row Reverse",column:"Column",columnReverse:"Column Reverse"},justifyControls:{label:"Justify Content",start:"Start",end:"End",center:"Center",spaceAround:"Space Around",spaceBetween:"Space Between",spaceEvenly:"Space Evenly"},alignControls:{label:"Align Items",start:"Start",end:"End",center:"Center",stretch:"Stretch",baseline:"Baseline",spaceAround:"Space Around",spaceBetween:"Space Between",spaceEvenly:"Space Evenly"},customSelectControl:{defaultText:"choose..."},dimensionInputGroup:{label:"Dimensions",labelPre:"%1$s Dimensions",width:"Width",height:"Height",useCustom:"Use custom values (e.g auto, calc)"},directionalInputGroup:{label:"Directions",top:"Top",right:"Right",bottom:"Bottom",left:"Left",useCustom:"Use custom values (e.g auto, calc)"},gapControls:{label:"Gaps",rowLabel:"Row Gap",switchToSingle:"Switch to Single Gap",switchToDual:"Switch to Dual Gap",columnLabel:"Column Gap",useCustom:"Use custom values (e.g auto, calc)"},gridAxisAside:{label:"Grid Axis",horizontal:"Horizontal",vertical:"Vertical",pipTitleNoValue:"No value set",pipTitleValueHere:"Value matches this panel",pipTitleValueElsewhere:"Value set in %s panel",pipTitleValueRaw:"Value set (unrecognised format)",clearRows:"Clear Rows",clearColumns:"Clear Columns"},panelToggle:{label:"Panel"},token:{expand:"Edit token",collapse:"Close editor",remove:"Remove",moveLeft:"Move left",moveRight:"Move right"},tokenGrid:{title:"Areas",clear:"Clear",sizeHint:"%1$d columns x %2$d rows",mismatchText:"Templates areas (%1$dx%2$d) do not match current tracks (%3$dx%4$d)",resizeToTracks:"Resize areas to match tracks",growTracksToAreas:"Grow tracks to match areas",shrinkTracks:"Shrink tracks to areas",shrinkTracksWarning:"Shrinking may remove named lines. Continue?",shrinkTracksNote:"Shrinking tracks may remove named lines; please review afterwards.",shrinkTracksConfirm:"Shrink tracks",shrinkTracksCancel:"Cancel",shrinkTracksHeading:"Remove named lines?",shrinkTracksDescription:"Shrinking tracks will drop line names (e.g. [sidebar-start]). This can change template references. Continue?",tokenExpand:"Edit cell",tokenCollapse:"Close editor",tokenRemove:"Clear cell",tokenMoveLeft:"Previous cell",tokenMoveRight:"Next cell",addColumn:"Add column",removeColumn:"Remove column",addRow:"Add row",removeRow:"Remove row"},tokenEditor:{add:"Add",addPlaceholder:"Add token",addLineNames:"Add line names",listAriaLabel:"List of tokens",moveLeft:"Move left",moveRight:"Move right",remove:"Remove",expand:"Edit token",collapse:"Close editor"}};var Bo="costered-blocks";function tt(e){if(typeof e=="string")return(0,Zt.__)(e,Bo);if(Array.isArray(e))return e.map(tt);if(e&&typeof e=="object"){let t={};for(let[o,r]of Object.entries(e))t[o]=tt(r);return t}return e}var x=tt(Dt);var Ps=h(se()),le=h(q()),$=h(U());var _o=({size:e=24,...t})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t},React.createElement("path",{d:"M11.271,12.013l0,-1.784c0,-0.403 0.327,-0.729 0.729,-0.729c0.402,0 0.729,0.326 0.729,0.729l-0,1.784l0.213,-0.214c0.284,-0.284 0.746,-0.284 1.03,0c0.284,0.285 0.284,0.746 0,1.031l-1.457,1.457c-0.137,0.137 -0.321,0.213 -0.515,0.213c-0.194,-0 -0.378,-0.076 -0.515,-0.213l-1.457,-1.457c-0.284,-0.285 -0.284,-0.746 -0,-1.031c0.284,-0.284 0.746,-0.284 1.03,0l0.213,0.214Z"}),React.createElement("path",{d:"M3.199,19.503l0,-2.001c0,-0.994 0.807,-1.8 1.801,-1.8l14,-0c0.994,-0 1.801,0.806 1.801,1.8l-0,2.001c-0,0.993 -0.807,1.8 -1.801,1.8l-14,-0c-0.994,-0 -1.801,-0.807 -1.801,-1.8Zm1.6,-0c0,0.11 0.09,0.2 0.201,0.2l14,-0c0.111,-0 0.201,-0.09 0.201,-0.2l-0,-2.001c-0,-0.111 -0.09,-0.2 -0.201,-0.2l-14,-0c-0.111,-0 -0.201,0.089 -0.201,0.2l0,2.001Z"}),React.createElement("path",{d:"M12.701,6.498l-0,-2.001c-0,-0.993 0.806,-1.8 1.8,-1.8l4.499,0c0.994,0 1.801,0.807 1.801,1.8l-0,2.001c-0,0.994 -0.807,1.8 -1.801,1.8l-4.499,0c-0.994,0 -1.8,-0.806 -1.8,-1.8Zm1.6,0c-0,0.111 0.089,0.2 0.2,0.2l4.499,0c0.111,0 0.201,-0.089 0.201,-0.2l-0,-2.001c-0,-0.11 -0.09,-0.2 -0.201,-0.2l-4.499,0c-0.111,0 -0.2,0.09 -0.2,0.2l-0,2.001Z"}),React.createElement("path",{d:"M3.199,6.498l0,-2.001c0,-0.993 0.807,-1.8 1.801,-1.8l4.499,0c0.994,0 1.8,0.807 1.8,1.8l0,2.001c0,0.994 -0.806,1.8 -1.8,1.8l-4.499,0c-0.994,0 -1.801,-0.806 -1.801,-1.8Zm1.6,0c0,0.111 0.09,0.2 0.201,0.2l4.499,0c0.111,0 0.2,-0.089 0.2,-0.2l0,-2.001c0,-0.11 -0.089,-0.2 -0.2,-0.2l-4.499,0c-0.111,0 -0.201,0.09 -0.201,0.2l0,2.001Z"})),ot=_o;var Eo=({size:e=24,...t})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t},React.createElement("path",{fill:"currentColor",d:"M5 11q-.825 0-1.412-.587T3 9V5q0-.825.588-1.412T5 3h4q.825 0 1.413.588T11 5v4q0 .825-.587 1.413T9 11zm0 10q-.825 0-1.412-.587T3 19v-4q0-.825.588-1.412T5 13h4q.825 0 1.413.588T11 15v4q0 .825-.587 1.413T9 21zm10-10q-.825 0-1.412-.587T13 9V5q0-.825.588-1.412T15 3h4q.825 0 1.413.588T21 5v4q0 .825-.587 1.413T19 11zm0 10q-.825 0-1.412-.587T13 19v-4q0-.825.588-1.412T15 13h4q.825 0 1.413.588T21 15v4q0 .825-.587 1.413T19 21z"})),rt=Eo;var Io=({size:e=24,...t})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...t},React.createElement("path",{d:"M11.271,12.013l0,-1.784c0,-0.403 0.327,-0.729 0.729,-0.729c0.402,0 0.729,0.326 0.729,0.729l-0,1.784l0.213,-0.214c0.284,-0.284 0.746,-0.284 1.03,0c0.284,0.285 0.284,0.746 0,1.031l-1.457,1.457c-0.137,0.137 -0.321,0.213 -0.515,0.213c-0.194,-0 -0.378,-0.076 -0.515,-0.213l-1.457,-1.457c-0.284,-0.285 -0.284,-0.746 -0,-1.031c0.284,-0.284 0.746,-0.284 1.03,0l0.213,0.214Z"}),React.createElement("path",{d:"M20.801,4.497l-0,2.001c-0,0.994 -0.807,1.8 -1.801,1.8l-14,0c-0.994,0 -1.801,-0.806 -1.801,-1.8l0,-2.001c0,-0.993 0.807,-1.8 1.801,-1.8l14,0c0.994,0 1.801,0.807 1.801,1.8Zm-1.6,0c-0,-0.11 -0.09,-0.2 -0.201,-0.2l-14,0c-0.111,0 -0.201,0.09 -0.201,0.2l0,2.001c0,0.111 0.09,0.2 0.201,0.2l14,0c0.111,0 0.201,-0.089 0.201,-0.2l-0,-2.001Z"}),React.createElement("path",{d:"M11.299,17.502l0,2.001c0,0.993 -0.806,1.8 -1.8,1.8l-4.499,-0c-0.994,-0 -1.801,-0.807 -1.801,-1.8l0,-2.001c0,-0.994 0.807,-1.8 1.801,-1.8l4.499,-0c0.994,-0 1.8,0.806 1.8,1.8Zm-1.6,-0c0,-0.111 -0.089,-0.2 -0.2,-0.2l-4.499,-0c-0.111,-0 -0.201,0.089 -0.201,0.2l0,2.001c0,0.11 0.09,0.2 0.201,0.2l4.499,-0c0.111,-0 0.2,-0.09 0.2,-0.2l0,-2.001Z"}),React.createElement("path",{d:"M20.801,17.502l-0,2.001c-0,0.993 -0.807,1.8 -1.801,1.8l-4.499,-0c-0.994,-0 -1.8,-0.807 -1.8,-1.8l-0,-2.001c-0,-0.994 0.806,-1.8 1.8,-1.8l4.499,-0c0.994,-0 1.801,0.806 1.801,1.8Zm-1.6,-0c-0,-0.111 -0.09,-0.2 -0.201,-0.2l-4.499,-0c-0.111,-0 -0.2,0.089 -0.2,0.2l-0,2.001c-0,0.11 0.089,0.2 0.2,0.2l4.499,-0c0.111,-0 0.201,-0.09 0.201,-0.2l-0,-2.001Z"})),nt=Io;var st=(e="")=>(e+"").trim().split(/\s+(?![^(]*\))/).filter(Boolean).slice(0,2),lt=(e="",t="")=>[e,t].filter(Boolean).join(" ").trim(),at=e=>e==null?"":String(e).trim();var jt=h(U());function qe(e="",t={}){let{trim:o=!0,toLower:r=!1,toUpper:n=!1,toCapitalFirst:s=!1,toCapitalCase:l=!1,toCamelCase:p=!1,toDashes:g=!1,toSpaces:u=!1}=t,a=e;return typeof a!="string"&&(a=String(a)),o&&(a=a.trim()),r&&(a=a.toLowerCase()),n&&(a=a.toUpperCase()),s&&(a=a.charAt(0).toUpperCase()+a.slice(1)),l&&(a=a.replace(/\b\w/g,w=>w.toUpperCase())),p&&(a=a.replace(/[-_\s]+(.)?/g,(w,i)=>i?i.toUpperCase():"").replace(/^(.)/,w=>w.toLowerCase())),g&&(a=a.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()),u&&(a=a.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/[-_]+/g," ").toLowerCase()),a}function be(e){let{value:t,onChange:o,label:r}=e,n=qe(r,{toCapitalFirst:!0,trim:!0,toSpaces:!0});return React.createElement(jt.__experimentalUnitControl,{__next40pxDefaultSize:!0,label:n,value:t,onChange:o,placeholder:"0",style:{padding:"0 2px"},units:[{name:"rem",value:"rem",label:"rem"},{name:"px",value:"px",label:"px"},{name:"em",value:"em",label:"em"},{name:"%",value:"%",label:"%"},{name:"vw",value:"vw",label:"vw"},{name:"vh",value:"vh",label:"vh"}],isResettable:!0,allowReset:!0})}var Ut=h(U());function it({value:e,onChange:t,label:o,placeholder:r="",help:n=""}){let s=qe(o,{toDashes:!0,toSpaces:!1});return React.createElement("div",{style:{padding:"0 2px"}},React.createElement(Ut.TextControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:s,value:e,onChange:t,placeholder:r,help:n}))}function ct({attributes:e,clientId:t,updateBlockAttributes:o,blockName:r=null}){let{set:n}=X(o,t),s=Be(r,t),l=ce("gapMode",{blockName:s}),[p,g]=ie(l,"unit"),u=ce("gapInputMode",{blockName:s}),[a,w]=ie(u,"single"),i=e?.gap||"";(0,le.useEffect)(()=>{a===void 0&&w(st(i).length===2?"dual":"single")},[a,i]);let[d,c]=(0,le.useMemo)(()=>{let y=st(i);return[y[0]||"",y[1]||""]},[i]),m=(0,le.useCallback)(y=>{let V=at(y);if(a==="single")n("gap",V||void 0);else{let O=lt(V,c);n("gap",O||void 0)}},[a,n,c]),v=(0,le.useCallback)(y=>{let V=at(y),O=lt(d,V);n("gap",O||void 0)},[n,d]),C=p==="unit"?be:it,E=a==="single"?x.gapControls.label:x.gapControls.rowLabel,T=(0,le.useCallback)(()=>{w(a==="single"?"dual":"single")},[a,w]),S=(0,le.useCallback)(()=>{g(p==="unit"?"text":"unit")},[p,g]);return React.createElement($.Flex,{direction:"column",className:"gap-controls"},React.createElement($.FlexBlock,null,React.createElement($.Flex,{align:"flex-end",gap:1},React.createElement($.FlexBlock,null,React.createElement($.Flex,{gap:0,direction:"row",align:"flex-end"},React.createElement($.FlexItem,null,React.createElement(C,{label:E,value:a==="single"?i:d,onChange:m,allowReset:!0})),a==="dual"&&React.createElement($.FlexItem,null,React.createElement(C,{label:x.gapControls.column,value:c,onChange:v,allowReset:!0})))),React.createElement($.FlexItem,null,React.createElement($.Button,{icon:a==="single"?nt:ot,label:a==="single"?x.gapControls.switchToDual:x.gapControls.switchToSingle,onClick:T,style:{marginBottom:"2px"},"aria-pressed":a==="dual"})))),React.createElement($.FlexBlock,null),React.createElement($.FlexBlock,null,React.createElement($.ToggleControl,{label:x.gapControls.useCustom,checked:p==="text",onChange:S,__nextHasNoMarginBottom:!0})))}var de=h(q()),xe=h(U()),Yt=h(se());var D=h(q()),Ee=h(U());var z=h(q()),K=h(U());function _e({index:e,value:t,isExpanded:o,onToggle:r,onRemove:n,onChange:s,onMoveLeft:l,onMoveRight:p,labels:g,emptyPlaceholder:u,floatingEditor:a=!1,popoverPlacement:w="bottom-start",popoverWidth:i}){let d=(0,z.useRef)(null),c=(0,z.useRef)(null),m=(0,z.useRef)("pointer"),v=(0,z.useCallback)(A=>{let R=A?.inputRef?.current||A||null;c.current=R},[]);(0,z.useEffect)(()=>{if(!(!o||!c.current)){if(m.current==="keyboard"){let A=c.current;A.focus?.({preventScroll:!0});let R=typeof A.value=="string"?A.value.length:0;typeof A.setSelectionRange=="function"&&A.setSelectionRange(R,R)}m.current="pointer"}},[o]);let C={expand:x.token.expand,collapse:x.token.collapse,remove:x.token.remove,moveLeft:x.token.moveLeft,moveRight:x.token.moveRight,...g},E=t&&t.trim().length?t:u??"",T=(0,z.useCallback)(A=>{A.stopPropagation(),n(e)},[e,n]),S=(0,z.useCallback)(()=>{m.current="pointer",r(e,!o)},[e,o,r]),y=(0,z.useCallback)(()=>{m.current="keyboard",r(e,!o)},[e,o,r]),V=(0,z.useCallback)(A=>{A.key==="Enter"||A.key===" "?(A.preventDefault(),y()):A.key==="Escape"&&o&&(A.preventDefault(),r(e,!1))},[y,e,o,r]),O=React.createElement("div",{id:`costered-token-panel-${e}`,className:"costered-token__panel"},React.createElement(K.TextControl,{ref:v,value:t??"",placeholder:u??"",onChange:A=>s(e,A),onBlur:A=>s(e,A?.target?.value??""),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),React.createElement("div",{className:"costered-token__actions"},React.createElement(K.Tooltip,{text:C.moveLeft},React.createElement(K.Button,{icon:"arrow-left-alt2",onClick:()=>l(e),label:C.moveLeft,variant:"tertiary"})),React.createElement(K.Tooltip,{text:C.moveRight},React.createElement(K.Button,{icon:"arrow-right-alt2",onClick:()=>p(e),label:C.moveRight,variant:"tertiary"}))));return React.createElement("div",{className:`costered-token${o?" is-expanded":""}`},React.createElement("div",{className:"costered-token__chip",ref:d},React.createElement("button",{type:"button",className:"costered-token__chipButton","aria-expanded":o,"aria-controls":`costered-token-panel-${e}`,onClick:S,onKeyDown:V,title:o?C.collapse:C.expand},React.createElement("span",{className:"costered-token__chipText"},E)),React.createElement(K.Tooltip,{text:C.remove},React.createElement(K.Button,{icon:"no-alt",label:C.remove,onClick:T,variant:"tertiary",className:"costered-token__remove"}))),!a&&o&&O,a&&o&&React.createElement(K.Popover,{className:"costered-blocks-token__popover",anchor:d.current,placement:w,onClose:()=>r(e,!1),focusOnMount:"firstElement",expandOnMobile:!0},React.createElement("div",{className:"costered-blocks-token__popoverInner",style:i?{width:i}:void 0},O)))}function Wt({matrix:e,columnData:t,rowData:o,emptyToken:r=".",labels:n,setCell:s,resize:l,onEditingChange:p}){let g=Number(e?.[0]?.length??t??0),u=Math.max(1,Number.isFinite(t)?g:parseInt(t,10)||0),a=Math.max(1,Number.isFinite(o)?o:parseInt(o,10)||0),[w,i]=(0,D.useState)(null),d=(0,D.useRef)(null),c=(0,D.useCallback)((R,f)=>f*u+R,[u]),m=(0,D.useCallback)(R=>{let f=R%u,k=Math.floor(R/u);return[f,k]},[u]);(0,D.useEffect)(()=>{p?.(w!=null)},[w,p]),(0,D.useEffect)(()=>{i(R=>{if(R==null)return R;let[f,k]=m(R);return f<u&&k<a?R:null})},[u,a,m]);let v=(0,D.useCallback)((R,f)=>{i((typeof f=="boolean"?f:w!==R)?R:null)},[w]),C=(0,D.useCallback)(R=>{let[f,k]=m(R);f<=0||i(c(f-1,k))},[m,c]),E=(0,D.useCallback)(R=>{let[f,k]=m(R);f>=u-1||i(c(f+1,k))},[m,c,u]),T=Number(t)||0,S=Number(o)||0,y=(0,D.useCallback)(()=>l(t+1,o),[l,t,o]),V=(0,D.useCallback)(()=>l(Math.max(1,t-1),o),[l,t,o]),O=(0,D.useCallback)(()=>l(t,o+1),[l,t,o]),A=(0,D.useCallback)(()=>l(t,Math.max(1,o-1)),[l,t,o]);return React.createElement("div",{className:"costered-blocks-gridarea",ref:d,style:{gridTemplateColumns:`80px repeat(${u}, minmax(110px, max-content))`}},React.createElement("div",{className:"costered-blocks-gridarea__row costered-blocks-gridarea__row--head"},React.createElement("div",{className:"costered-blocks-gridarea__cell costered-blocks-gridarea__cell--corner"})," ",Array.from({length:u}).map((R,f)=>React.createElement("div",{className:"costered-blocks-gridarea__cell costered-blocks-gridarea__cell--head",key:`col-${f}`},React.createElement("div",{key:`header-col-${f}`,className:"costered-blocks-gridarea__headControls"},React.createElement(Ee.Button,{onClick:V,disabled:T<=1,variant:"tertiary",icon:"minus",label:n.removeColumn}),React.createElement(Ee.Button,{onClick:y,variant:"tertiary",icon:"plus",label:n.addColumn}))))),e.map((R,f)=>React.createElement("div",{key:`row-${f}`,className:"costered-blocks-gridarea__row"},React.createElement("div",{className:"costered-blocks-gridarea__cell costered-blocks-gridarea__cell--head"},React.createElement("div",{className:"costered-blocks-gridarea__headControls"},React.createElement(Ee.Button,{onClick:A,disabled:S<=1,variant:"tertiary",icon:"minus",label:n.removeRow}),React.createElement(Ee.Button,{onClick:O,variant:"tertiary",icon:"plus",label:n.addRow}))),R.map((k,b)=>{let I=c(b,f),H=k===r?"":k;return React.createElement("div",{key:`cell-${b}-${f}`,className:"costered-blocks-gridarea__cell"},React.createElement(_e,{index:I,value:H,isExpanded:w===I,onToggle:v,onRemove:P=>{let[te,ge]=m(P);s(te,ge,""),i(null)},onChange:(P,te)=>{let[ge,Ze]=m(P);s(ge,Ze,te)},onMoveLeft:C,onMoveRight:E,emptyPlaceholder:r,floatingEditor:!0,popoverWidth:d.current?.offsetWidth??void 0,labels:{expand:n.tokenExpand,collapse:n.tokenCollapse,remove:n.tokenRemove,moveLeft:n.tokenMoveLeft,moveRight:n.tokenMoveRight}}))}))))}var zt=h(se()),Kt=h(Y()),he=h(q()),Z=h(U());function Jt({clientId:e,columnData:t,rowData:o,gridMatrix:{resize:r}}){let{updateBlockAttributes:n}=(0,Kt.useDispatch)("core/block-editor"),{set:s}=X(n,e),{trackColumnCount:l,trackRowCount:p}=Ne(e),g=oe(e),[u,a]=(0,he.useState)(!1),w=b=>b&&typeof b=="object"?b.count??0:Number(b)||0,i=(b,I)=>b&&typeof b=="object"&&b.unit?b.unit:I,d=Number(t)||0,c=Number(o)||0,m=w(l),v=w(p),C=i(l,M),E=i(p,"auto"),T=d!==m,S=c!==v,y=d<m||c<v,V=(0,he.useCallback)(()=>{r(m||d||1,v||c||1)},[r,m,v,d,c]),O=d>m,A=c>v,R=(0,he.useCallback)(()=>{let b=g?.columns?.template||"",I=g?.rows?.template||"",H=O?ze(b,d,C):b,P=A?ze(I,c,E):I;H===b&&P===I||(s("gridTemplateColumns",H),s("gridTemplateRows",P))},[d,c,C,E,g,s]),f=(0,he.useCallback)(()=>{let b=Ke(g?.columns?.template||"",d),I=Ke(g?.rows?.template||"",c);s("gridTemplateColumns",b),s("gridTemplateRows",I)},[d,c,g,s]),k=(0,he.useCallback)(()=>{/\[[^\]]+]/.test(g?.columns?.template||"")||/\[[^\]]+]/.test(g?.rows?.template||"")?a(!0):f()},[g,f]);return!T&&!S?null:React.createElement("div",{className:"costered-blocks-tokengrid__notices"},React.createElement(Z.Notice,{status:"warning",isDismissible:!1},(0,zt.sprintf)(x.tokenGrid.mismatchText,d,c,m,v),React.createElement(Z.Flex,{direction:"column",gap:2,style:{marginTop:8}},React.createElement(Z.FlexBlock,null,React.createElement(Z.Button,{variant:"secondary",onClick:V},x.tokenGrid.resizeToTracks)),React.createElement(Z.FlexBlock,null,React.createElement(Z.Button,{variant:"secondary",onClick:R,disabled:!O&&!A},x.tokenGrid.growTracksToAreas)),y&&React.createElement(Z.FlexBlock,null,React.createElement(Z.Button,{variant:"secondary",isDestructive:!0,onClick:k},x.tokenGrid.shrinkTracks))),y&&React.createElement("p",{className:"costered-blocks-gridarea__noticeHint"},x.tokenGrid.shrinkTracksNote)),React.createElement(Z.__experimentalConfirmDialog,{isOpen:u,onConfirm:()=>{f(),a(!1)},onCancel:()=>a(!1),confirmButtonText:x.tokenGrid.shrinkTracksConfirm,cancelButtonText:x.tokenGrid.shrinkTracksCancel},React.createElement(Z.__experimentalHeading,null,x.tokenGrid.shrinkTracksHeading),React.createElement("p",null,x.tokenGrid.shrinkTracksDescription)))}function Pe({clientId:e}){let{applyMatrixToStore:t,seedFromStore:o,trackColumnCount:r,trackRowCount:n}=Ne(e),s=(0,de.useMemo)(()=>o("."),[o]),[l,p]=(0,de.useState)(!1),g=(0,de.useRef)(null),u=(0,de.useCallback)(E=>{g.current&&clearTimeout(g.current),E?p(!0):g.current=setTimeout(()=>p(!1),60)},[]),a=Xe({seedMatrix:s,emptyToken:".",onApply:t,suspendResync:l}),{matrix:w,setCell:i,resize:d,clear:c}=a,m=w[0]?.length||0,v=w.length||0;return React.createElement("div",{className:"costered-blocks-tokengrid"},((r||0)!==m||(n||0)!==v)&&React.createElement(React.Fragment,null,React.createElement(Jt,{clientId:e,columnData:m,rowData:v,gridMatrix:a})," "),React.createElement(xe.Flex,{direction:"row",gap:2,align:"center",justify:"space-between",style:{marginBottom:8},className:"costered-blocks-tokengrid__header"},React.createElement(xe.FlexItem,null,React.createElement("strong",null,x.tokenGrid.title)," ",React.createElement("span",{className:"components-help-text"},(0,Yt.sprintf)(x.tokenGrid.sizeHint,m,v))),React.createElement(xe.FlexItem,null,React.createElement(xe.Button,{icon:"trash",variant:"tertiary",onClick:()=>c(r,n)},x.tokenGrid.clear))),React.createElement(Wt,{matrix:w,columnData:m,rowData:v,emptyToken:".",labels:x.tokenGrid,setCell:i,resize:d,onEditingChange:u}))}var re=h(q()),He=h(U());var Ve=h(q()),J=h(U());function Fo({value:e,onChange:t,label:o="",isBlock:r=!0,children:n,...s}){let l=(0,Ve.useCallback)(p=>t(p),[t]);return React.createElement(J.__experimentalToggleGroupControl,{className:`costered-custom-toggle-group ${e?"has-selection":"is-empty"}`,label:o,value:e,onChange:l,isBlock:r,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,isDeselectable:!0,...s},n)}function Lo({value:e,label:t,disabled:o}){return React.createElement(J.__experimentalToggleGroupControlOption,{value:e,label:t,disabled:o})}function Go({value:e,icon:t,label:o,showTooltip:r=!0,disabled:n}){return React.createElement(J.__experimentalToggleGroupControlOptionIcon,{value:e,icon:t,"aria-label":o,label:o,showTooltip:r,disabled:n})}function qo({value:e,icon:t,label:o,disabled:r}){return React.createElement(J.__experimentalToggleGroupControlOption,{value:e,"aria-label":o,label:React.createElement(J.Flex,{direction:"column",gap:0,align:"center",style:{paddingBlock:"0.5em"}},React.createElement(J.FlexItem,null,t),React.createElement(J.FlexItem,null,o)),disabled:r})}var Oe=(0,Ve.memo)(Fo);Oe.TextOption=Lo;Oe.IconOption=Go;Oe.CombinedOption=qo;var Ie=Oe;function Po({value:e,onChange:t,panels:o,panelProps:r={},label:n=x.panelToggle.label,forceActive:s=!1,className:l,children:p,...g}){let u=re.Children.toArray(p).map(m=>m?.props?.value).filter(m=>typeof m=="string"&&m.length>0),a=u.length>0?u:Object.keys(o||{}),w=a[0]??null;(0,re.useEffect)(()=>{a.length&&(!e||!a.includes(e))&&t?.(w)},[e,w,a.join("|")]);let i=(0,re.useCallback)(m=>{let v=m??null;s&&v===null||t?.(v)},[t,s]),d=e?o?.[e]:null,c=typeof r=="function"?e?r(e):{}:r;return React.createElement(He.Flex,{direction:"column",gap:2,className:l,...g},React.createElement(Ie,{label:n,value:e||void 0,onChange:i},p),d?React.createElement(He.FlexBlock,null,React.createElement(re.Suspense,{fallback:null},React.createElement(d,{...c}))):null)}var $e=(0,re.memo)(Po);$e.TextOption=Ie.TextOption;$e.IconOption=Ie.IconOption;$e.CombinedOption=Ie.CombinedOption;var De=$e;var B=h(q()),eo=h(Y()),N=h(U()),me=h(se());var Fe=h(U()),Xt=h(se());function Ce({axis:e,canClear:t=!1,onClear:o,active:r,owner:n=null,here:s=null}){let l=e==="columns"?x.gridAxisAside.clearColumns:x.gridAxisAside.clearRows,p=!!t,g=typeof r=="boolean"?r:p&&n&&s&&n===s,a=p?g?"here":p&&n&&s&&n!=="raw"&&n!==s&&!g?"elsewhere":"none":"none",w=a==="none"?x.gridAxisAside.pipTitleNoValue:a==="here"?x.gridAxisAside.pipTitleValueHere:n==="raw"?x.gridAxisAside.pipTitleValueRaw:(0,Xt.sprintf)(x.gridAxisAside.pipTitleValueElsewhere,St(n));return React.createElement("div",{className:`costered-blocks-grid-axis-aside${a==="here"?" is-owned-here":""}${a==="elsewhere"?" is-elsewhere":""}`,"data-state":a,"data-owner":n||"none","data-here":s||"none","aria-label":e},React.createElement(Fe.Tooltip,{text:w},React.createElement("span",{className:"costered-blocks-grid-axis__pip"})),React.createElement(Fe.Tooltip,{text:l},React.createElement(Fe.Button,{icon:"trash",label:l,onClick:o,disabled:!p,variant:"tertiary",className:"costered-blocks-grid-axis-aside__clear"})))}var Qt={mode:"raw",template:null,normalised:"",simple:null,tracks:null};function to({clientId:e}){if(!e)return null;let{updateBlockAttributes:t}=(0,eo.useDispatch)("core/block-editor"),{set:o,unset:r}=X(t,e),n=oe(e)||{},s=n.columns??Qt,l=n.rows??Qt,[p,g]=(0,B.useState)(s.simple?.count??0),[u,a]=(0,B.useState)(s.simple?.unit??M),[w,i]=(0,B.useState)((s.simple?.unit??M)===M),[d,c]=(0,B.useState)(l.simple?.count??0),[m,v]=(0,B.useState)(l.simple?.unit??M),[C,E]=(0,B.useState)((l.simple?.unit??M)===M),T=s?.normalised??"",S=l?.normalised??"";(0,B.useEffect)(()=>{g(s.simple?.count??0),a(s.simple?.unit??M),i((s.simple?.unit??M)===M)},[T]),(0,B.useEffect)(()=>{c(l.simple?.count??0),v(l.simple?.unit??M),E((l.simple?.unit??M)===M)},[S]);let y=(0,B.useMemo)(()=>w?M:u||M,[w,u]),V=(0,B.useMemo)(()=>C?M:m||M,[C,m]),O=ve(p,y),A=ve(d,V),R=!!s.template&&Q(O)===T,f=!!l.template&&Q(A)===S,k=(0,B.useCallback)((_,F)=>{let Se=ve(_,F);Se==null?r("gridTemplateColumns"):o("gridTemplateColumns",Se)},[o,r]),b=(0,B.useCallback)((_,F)=>{let Se=ve(_,F);Se==null?r("gridTemplateRows"):o("gridTemplateRows",Se)},[o,r]),I=(0,B.useCallback)(_=>{let F=typeof _=="number"?_:parseInt(_||"0",10);g(F),k(F,w?M:u)},[w,u,k]),H=(0,B.useCallback)(_=>{let F=typeof _=="number"?_:parseInt(_||"0",10);c(F),b(F,C?M:m)},[C,m,b]),P=(0,B.useCallback)(_=>{i(_);let F=_?M:u||M;!_&&!u&&a(F),k(p,F)},[p,u,k]),te=(0,B.useCallback)(_=>{E(_);let F=_?M:m||M;!_&&!m&&v(F),b(d,F)},[d,m,b]),ge=(0,B.useCallback)(_=>{let F=(_||"").trim();a(F),k(p,w?M:F||M)},[p,w,k]),Ze=(0,B.useCallback)(_=>{let F=(_||"").trim();v(F),b(d,C?M:F||M)},[d,C,b]),so=(0,B.useCallback)(()=>{g(0),r("gridTemplateColumns")},[r]),lo=(0,B.useCallback)(()=>{c(0),r("gridTemplateRows")},[r]);return React.createElement(N.Flex,{direction:"column",gap:4},React.createElement(N.FlexBlock,null,(0,me.__)("In Simple mode, you can define the number of columns. All columns equally divide the total available width.","costered-blocks")),React.createElement(N.FlexBlock,null,React.createElement(N.Flex,{direction:"column",gap:1},React.createElement(N.FlexItem,null,React.createElement(N.Flex,{direction:"row",gap:2,justify:"space-between",align:"center"},React.createElement(N.FlexBlock,null,React.createElement("span",{className:"costered-blocks--grid-panel-simple-label"},(0,me.__)("Columns","costered-blocks"))),React.createElement(N.FlexItem,{style:{width:32,flex:"0 0 32px"}},React.createElement(Ce,{axis:"columns",canClear:!!s?.template,onClear:so,owner:n.activePane.columns,here:"simple"})))),React.createElement(N.FlexBlock,null,React.createElement(N.RangeControl,{min:0,max:12,step:1,value:p,onChange:I,className:"costered-blocks--grid-columns-simple-control",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})),React.createElement(N.FlexBlock,null,React.createElement(N.ToggleControl,{label:(0,me.__)(`Use ${M}`,"costered-blocks"),checked:w,onChange:P,__nextHasNoMarginBottom:!0})),!w&&React.createElement(N.FlexBlock,null,React.createElement(be,{label:(0,me.__)("Unit","costered-blocks"),value:u,onChange:ge})))),React.createElement(N.FlexBlock,null,React.createElement(N.Flex,{direction:"column",gap:1},React.createElement(N.Flex,{direction:"row",gap:2,justify:"space-between",align:"center"},React.createElement(N.FlexBlock,null,React.createElement("span",{className:"costered-blocks--grid-panel-simple-label"},(0,me.__)("Rows","costered-blocks"))),React.createElement(N.FlexItem,{style:{width:32,flex:"0 0 32px"}},React.createElement(Ce,{axis:"rows",canClear:!!l.template,onClear:lo,owner:n.activePane.rows,here:"simple"}))),React.createElement(N.FlexBlock,null,React.createElement(N.RangeControl,{min:0,max:12,step:1,value:d,onChange:H,className:"costered-blocks--grid-rows-simple-control",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})),React.createElement(N.FlexBlock,null,React.createElement(N.ToggleControl,{label:(0,me.__)(`Use ${M}`,"costered-blocks"),checked:C,onChange:te,__nextHasNoMarginBottom:!0})),!C&&React.createElement(N.FlexBlock,null,React.createElement(be,{label:(0,me.__)("Unit","costered-blocks"),value:m,onChange:Ze})))))}var L=h(q()),oo=h(Y()),Al=h(Re()),ue=h(se()),G=h(U());var W=h(q()),pe=h(U()),bl=h(se());function dt({tokens:e,onAdd:t,onEdit:o,onRemove:r,onMove:n,labels:s,allowLineNames:l=!0}){let p=(0,W.useMemo)(()=>({add:x.tokenEditor.add,addPlaceholder:x.tokenEditor.addPlaceholder,addLineNames:x.tokenEditor.addLineNames,listAriaLabel:x.tokenEditor.listAriaLabel,moveLeft:x.tokenEditor.moveLeft,moveRight:x.tokenEditor.moveRight,remove:x.tokenEditor.remove,expand:x.tokenEditor.expand,collapse:x.tokenEditor.collapse}),[]),g=(0,W.useMemo)(()=>({...p,...s||{}}),[p,s]),[u,a]=(0,W.useState)(""),[w,i]=(0,W.useState)(null),d=(0,W.useCallback)(()=>{let T=String(u||"").trim();T&&(t(T),a(""),i(null))},[u,t]),c=(0,W.useCallback)(()=>{let T=String(u||"").trim();T&&(t(`[${T}]`),a(""),i(null))},[u,t]),m=(0,W.useCallback)((T,S)=>{i(S?T:null)},[]),v=(0,W.useCallback)((T,S)=>{o(T,S)},[o]),C=(0,W.useCallback)(T=>{r(T),i(S=>S===T?null:S>T?S-1:S)},[r]),E=(0,W.useCallback)((T,S)=>{n(T,S),i(y=>y===T?T+S:y===T+S?T:y)},[n]);return React.createElement("div",{className:"costered-token-editor",role:"list","aria-label":g.listAriaLabel},React.createElement("div",{className:"costered-token-list"},e.map((T,S)=>React.createElement(_e,{key:`token-${S}`,index:S,value:T,isExpanded:w===S,onToggle:m,onRemove:C,onChange:v,onMoveLeft:y=>E(y,-1),onMoveRight:y=>E(y,1),labels:g}))),React.createElement("div",{className:"costered-token-add"},React.createElement(pe.TextControl,{placeholder:g.addPlaceholder,value:u,onChange:a,onKeyDown:T=>{T.key==="Enter"&&d()},__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),l?React.createElement(pe.Flex,{className:"costered-token-add-options",gap:0,align:"center",style:{width:"fit-content"}},React.createElement(pe.Button,{icon:"editor-code",onClick:d,label:g.add}),React.createElement(pe.Button,{icon:"tag",onClick:c,label:g.addLineNames})):React.createElement(pe.Button,{variant:"secondary",onClick:d},g.add)))}function ro({clientId:e}){if(!e)return null;let{updateBlockAttributes:t}=(0,oo.useDispatch)("core/block-editor"),{set:o,unset:r}=X(t,e),n=oe(e),s=n?.columns,l=n?.rows,p=(0,L.useMemo)(()=>s?s.tracks?.length?s.tracks:s.template?[String(s.template)]:[]:[],[s]),g=(0,L.useMemo)(()=>l?l.tracks?.length?l.tracks:l.template?[String(l.template)]:[]:[],[l]),[u,a]=(0,L.useState)(p),[w,i]=(0,L.useState)(g),d=s&&(s.normalised??Q(s.template||""))||"",c=l&&(l.normalised??Q(l.template||""))||"";(0,L.useEffect)(()=>{a(p)},[d]),(0,L.useEffect)(()=>{i(g)},[c]);let m=(0,L.useCallback)(f=>{let k=f.map(b=>String(b||"").trim()).filter(Boolean);return k.length?k.join(" "):null},[]),v=(0,L.useCallback)(f=>{let k=m(f);k==null?r("gridTemplateColumns"):o("gridTemplateColumns",k)},[m,o,r]),C=(0,L.useCallback)(f=>{let k=m(f);k==null?r("gridTemplateRows"):o("gridTemplateRows",k)},[m,o,r]),E=(0,L.useMemo)(()=>{let f=m(u);return!!s?.template&&Q(f||"")===d},[s?.template,d,u,m]),T=(0,L.useMemo)(()=>{let f=m(w);return!!l?.template&&Q(f||"")===c},[l?.template,c,w,m]),S=(0,L.useCallback)((f,k,b,I)=>{let H=String(I||"").trim();if(!H)return;let P=[...f,H];k(P),b(P)},[]),y=(0,L.useCallback)((f,k,b,I,H)=>{let P=f.slice();P[I]=H,k(P),b(P)},[]),V=(0,L.useCallback)((f,k,b,I)=>{let H=f.slice();H.splice(I,1),k(H),b(H)},[]),O=(0,L.useCallback)((f,k,b,I,H)=>{let P=I+H;if(P<0||P>=f.length)return;let te=f.slice(),ge=te.splice(I,1)[0];te.splice(P,0,ge),k(te),b(te)},[]),A=(0,L.useCallback)(()=>{a([]),r("gridTemplateColumns")},[r]),R=(0,L.useCallback)(()=>{i([]),r("gridTemplateRows")},[r]);return React.createElement(G.Flex,{direction:"column",gap:4},React.createElement(G.FlexBlock,null,(0,ue.__)("In Tracks mode, you can define the exact track sizes using any valid CSS Grid value.","costered-blocks")),React.createElement(G.FlexBlock,null,React.createElement(G.Flex,{direction:"column",gap:1},React.createElement(G.FlexItem,null,React.createElement(G.Flex,{direction:"row",gap:2,justify:"space-between",align:"center"},React.createElement(G.FlexBlock,null,React.createElement("span",{className:"costered-blocks--grid-panel-tracks-label"},(0,ue.__)("Columns","costered-blocks"))),React.createElement(G.FlexItem,{style:{width:32,flex:"0 0 32px"}},React.createElement(Ce,{axis:"columns",canClear:!!s?.template,onClear:A,owner:n.activePane.columns,here:"tracks"})))),React.createElement(G.FlexBlock,null,React.createElement(G.Flex,{direction:"column",gap:2,className:"costered-axis-body"},React.createElement(dt,{tokens:u,setTokens:a,onAdd:f=>S(u,a,v,f),onEdit:(f,k)=>y(u,a,v,f,k),onRemove:f=>V(u,a,v,f),onMove:(f,k)=>O(u,a,v,f,k),labels:{placeholder:(0,ue.__)("Add track (e.g. 240px or minmax(10ch, 2fr))","costered-blocks"),addPlaceholder:(0,ue.__)("Add track or [line names]","costered-blocks")}}))))),React.createElement(G.FlexBlock,null,React.createElement(G.Flex,{direction:"column",gap:1},React.createElement(G.FlexItem,null,React.createElement(G.Flex,{direction:"row",gap:2,justify:"space-between",align:"center"},React.createElement(G.FlexBlock,null,React.createElement("span",{className:"costered-blocks--grid-panel-tracks-label"},(0,ue.__)("Rows","costered-blocks"))),React.createElement(G.FlexItem,{style:{width:32,flex:"0 0 32px"}},React.createElement(Ce,{axis:"rows",canClear:!!l?.template,onClear:R,owner:n.activePane.rows,here:"tracks"})))),React.createElement(G.FlexBlock,null,React.createElement(G.Flex,{direction:"column",gap:2,className:"costered-axis-body"},React.createElement(dt,{tokens:w,setTokens:i,onAdd:f=>S(w,i,C,f),onEdit:(f,k)=>y(w,i,C,f,k),onRemove:f=>V(w,i,C,f),onMove:(f,k)=>O(w,i,C,f,k),labels:{placeholder:(0,ue.__)("Add track (e.g. 240px or minmax(10ch, 2fr))","costered-blocks"),addPlaceholder:(0,ue.__)("Add track or [line names]","costered-blocks")}}))))))}var Vo=()=>{let{selectedBlock:e,clientId:t}=Qe(),{attributes:o,name:r}=e;return e?React.createElement(Oo,{clientId:t,attributes:o,name:r}):null},Oo=({clientId:e,attributes:t,name:o})=>{let{updateBlockAttributes:r}=(0,no.useDispatch)("core/block-editor"),[n,s]=(0,Me.useState)(null),[l,p]=(0,Me.useState)(!1),g=(0,Me.useCallback)(()=>p(!0),[]),u=(0,Me.useCallback)(()=>p(!1),[]),a=Be(o,e),w=ce("gridTemplatePanelOpen",{blockName:a}),[i,d]=ie(w,!0),c=ce("gridGapPanelOpen",{blockName:a}),[m,v]=ie(c,!1),C=ce("gridTemplateAreasPanelOpen",{blockName:a}),[E,T]=ie(C,!1);return React.createElement(React.Fragment,null,React.createElement(j.Panel,null,React.createElement(j.PanelBody,{title:x.gridControls.gridTemplatePanel,initialOpen:i,onToggle:d},React.createElement(De,{value:n,onChange:s,label:null,forceActive:!0,panels:{simple:to,tracks:ro},panelProps:{clientId:e}},React.createElement(De.TextOption,{value:"simple",label:x.gridControls.gridTemplatePanelSimple}),React.createElement(De.TextOption,{value:"tracks",label:x.gridControls.gridTemplatePanelTracks}))),React.createElement(j.PanelBody,{title:x.gridControls.gapPanel,initialOpen:m,onToggle:v},React.createElement(j.Flex,{direction:"column",expanded:!0},React.createElement(j.FlexBlock,null,React.createElement(ct,{attributes:t,clientId:e,updateBlockAttributes:r,blockName:o})))),React.createElement(j.PanelBody,{title:x.gridControls.gridTemplateAreasPanel,initialOpen:E,onToggle:T},React.createElement(j.Flex,{direction:"column",gap:4},React.createElement(Pe,{clientId:e}),React.createElement(j.Flex,{justify:"flex-end"},React.createElement(j.Button,{variant:"secondary",onClick:g},x.gridControls.gridTemplateAreasEditLarge))))),l&&React.createElement(j.Modal,{title:x.gridControls.gridTemplateAreasModal,onRequestClose:u,className:"costered-blocks-modal--wide",shouldCloseOnClickOutside:!0},React.createElement(Pe,{clientId:e})))},Ho=(e={})=>{let t=e?.display??e?.style?.display??"";return/^(grid|inline-grid)$/.test(t)},Ul={name:"grid-controls",title:x.gridControls.panelTitle,icon:React.createElement(rt,null),isVisible:({attributes:e})=>Ho(e),render:()=>React.createElement(Vo,null)};})();
