(()=>{var ut=Object.create;var j=Object.defineProperty;var at=Object.getOwnPropertyDescriptor;var ct=Object.getOwnPropertyNames;var pt=Object.getPrototypeOf,lt=Object.prototype.hasOwnProperty;var h=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var dt=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ct(t))!lt.call(e,i)&&i!==n&&j(e,i,{get:()=>t[i],enumerable:!(r=at(t,i))||r.enumerable});return e};var x=(e,t,n)=>(n=e!=null?ut(pt(e)):{},dt(t||!e||!e.__esModule?j(n,"default",{value:e,enumerable:!0}):n,e));var w=h((vt,$)=>{$.exports=wp.data});var L=h((Bt,G)=>{G.exports=wp.blockEditor});var H=h((Pt,N)=>{N.exports=wp.element});var _=x(w()),st=x(L()),I=x(H());var R=x(w());var u={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var b=e=>Array.isArray(e)?e:[],mt=e=>new Set(b(e));function l(e){let t=u.attributes||{};return Object.fromEntries(Object.entries(t).filter(([,n])=>n.group===e))}var K=l("display"),J=l("dimension"),Y=l("margin"),F=l("padding"),V=l("flex"),z=l("flex-item"),U=l("grid"),A=l("grid-item"),W=l("position"),X=l("shared"),Ot={...K,...J,...Y,...F,...V,...z,...U,...A,...W,...X},_t=new Set([...Object.keys(A)]),It=b(u?.collections?.editorStyles),Mt=mt(u?.collections?.unitless),q=u?.settings?.gridUnit||"1fr",jt=!!u?.settings?.appendImportantToMirroredStyles,$t=u?.settings?.styleTagId||"costered-blocks-style-mirror",T=u?.settings?.reduxStoreKey||"costered/ui",Gt=u?.settings?.breakpoints?.mobile??782,Lt=u?.settings?.breakpoints?.tablet??1024,Nt=u?.settings?.breakpoints?.desktop??1440,Ht=b(u?.collections?.clearSets?.gridAreas),Kt=b(u?.collections?.clearSets?.gridColumns),Jt=b(u?.collections?.clearSets?.gridRows);var Yt=new Set([...Object.keys(K),...Object.keys(J),...Object.keys(F),...Object.keys(Y),...Object.keys(V),...Object.keys(z),...Object.keys(U),...Object.keys(A),...Object.keys(W),...Object.keys(X)]),Ft=Object.fromEntries(Object.entries(u.attributes).map(([e,t])=>[e,t.css]));var C="desktop",v="tablet",B="mobile",ft=e=>{let t=String(e??"").toLowerCase();return t==="tablet"||t==="medium"?v:t==="mobile"||t==="phone"?B:C},Q=e=>{try{let n=e?.("core/editor")?.getDeviceType?.();if(n)return n}catch{}try{let t=e("core/edit-post");if(t){if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType()}}catch{}try{let t=e("core/edit-site");if(t){if(typeof t.getDeviceType=="function")return t.getDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType();if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType()}}catch{}},Z=e=>{try{let r=(typeof e=="function"?e(T):(0,R.select)(T))?.getBreakpoint?.();if(r===C||r===v||r===B)return r}catch{}let t=Q(typeof e=="function"?e:R.select);if(t)return ft(t);if(typeof window<"u"){let n=window.__COSTERED_VIEWPORT_BP;if(n===C||n===v||n===B)return n}return"desktop"};function P(e){return String(e??"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function yt(e){let t=String(e??"").trim();if(!t)return[];let n=0,r=0,i="",a=[];for(let s=0;s<t.length;s++){let o=t[s];if(o==="("){n++,i+=o;continue}if(o===")"){n=Math.max(0,n-1),i+=o;continue}if(o==="["){r++,i+=o;continue}if(o==="]"){r=Math.max(0,r-1),i+=o;continue}if(o===" "&&n===0&&r===0){i&&(a.push(i),i="");continue}i+=o}return i&&a.push(i),a}function St(e){let t=String(e??"").trim();if(!t)return null;let n=t.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);if(!n||n[1]===void 0||n[2]===void 0)return null;let r=Number.parseInt(n[1],10),i=n[2].trim();return!Number.isFinite(r)||r<0||i===""?null:{count:r,unit:i}}function bt(e,t=q){return e>0?`repeat(${e}, ${t})`:null}function tt(e){let t=String(e??"").trim();if(!t)return{hasAreas:!1,cols:0,rows:0};let n=[],r=/"([^"]*)"|'([^']*)'/g,i;for(;i=r.exec(t);){let s=(i[1]??i[2]??"").trim();s&&n.push(s)}return n.length?{hasAreas:!0,cols:n.reduce((s,o)=>{let k=o.split(/\s+/).filter(Boolean).length;return Math.max(s,k)},0),rows:n.length}:{hasAreas:!1,cols:0,rows:0}}function E(e){let t=String(e??"").trim();if(!t||/^subgrid\b/i.test(t))return 0;let n=t.replace(/\[[^\]]*\]/g," ").trim();return n=n.replace(/repeat\(\s*(\d+)\s*,\s*([^)]+)\)/gi,(r,i,a)=>Array.from({length:parseInt(i,10)||0},()=>"X").join(" ")),n=n.replace(/\s+/g," ").trim(),n?n.split(" ").filter(Boolean).length:0}function kt(e){let t=St(e);if(!t)return null;let n=P(bt(t.count,t.unit));return{mode:"simple",template:e?String(e):null,normalised:n,simple:{count:t.count,unit:t.unit}}}function xt(e){let t=yt(e);if(!t.length)return null;let n=P(t.join(" "));return{mode:"tracks",template:e?String(e):null,normalised:n,tracks:t}}var ht=[kt,xt];function D(e){let t=e??"";for(let n of ht){let r=n(t);if(r)return r}return{mode:"raw",template:e?String(e):null,normalised:P(e??"")}}var et=e=>{if(Array.isArray(e))return e.filter(Boolean).map(t=>{let n=String(t.property??""),r=t.value;return n&&r!==void 0?{property:n,value:r}:void 0}).filter(Boolean);if(e&&typeof e=="object"){let t=[];for(let[n,r]of Object.entries(e))r!==void 0&&t.push({property:n,value:r});return t}return[]},y=e=>e&&typeof e=="object"&&"styles"in e?{styles:et(e.styles)}:{styles:et(e)},nt=e=>{let t=e||{};return!!t.desktop||!!t.tablet||!!t.mobile?{desktop:y(t.desktop),tablet:y(t.tablet),mobile:y(t.mobile)}:{desktop:y(t),tablet:y(void 0),mobile:y(void 0)}};var O=e=>e==null||e===""||e==="null"||e==="undefined";function wt(e){return Array.isArray(e)}function At(e){if(wt(e)){let[t,n,r]=e;return r!==void 0?{property:t,value:n,important:r}:{property:t,value:n}}return e}function rt(e){if(!Array.isArray(e)||e.length===0)return[];let t=[];for(let n=0;n<e.length;n++)t.push(At(e[n]));return t}var Tt="desktop",Rt=Object.freeze({});function it(e,t){let n=rt(e);for(let r=0;r<n.length;r++){let i=n[r];if(i.property===t)return i.value}}function ot(e,t){let n=e||Rt,r={...n},i=nt(n.costered),a=c=>{switch(c){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},s=(c,p={})=>{let m=p&&Object.prototype.hasOwnProperty.call(p,"cascade")?!!p.cascade:!0,d=p&&Object.prototype.hasOwnProperty.call(p,"raw")?!!p.raw:!m,g=t||Tt;if(d){let f=it(i?.[g]?.styles,c);return O(f)?void 0:f}let S=a(g);for(let f of S){let M=it(i?.[f]?.styles,c);if(!O(M))return M}};return Object.defineProperties(r,{$get:{value:s,enumerable:!1},$getCascade:{value:c=>s(c,{cascade:!0}),enumerable:!1},$getMany:{value:(c,p)=>{let m={};for(let d=0;d<c.length;d++){let g=c[d];m[g]=s(g,p)}return m},enumerable:!1},$bp:{value:t,enumerable:!1}}),r}function oe(e){let t=(0,_.useSelect)(a=>e?a(st.store).getBlock(e)?.attributes??void 0:void 0,[e]),n=(0,_.useSelect)(Z,[]),r=(0,I.useMemo)(()=>t&&n?ot(t,n):void 0,[t,n]);if(!r)return;let i=a=>String(r.$get(a)??"");return(0,I.useMemo)(()=>{let a=i("gridTemplateColumns"),s=i("gridTemplateRows"),o=i("gridTemplateAreas"),k=D(a),c=D(s),p=E(a),m=E(s),d={...k,count:p},g={...c,count:m},S=tt(o),f={template:o||"",hasAreas:S.hasAreas,cols:S.cols,rows:S.rows};return{columns:d,rows:g,areas:f,activePane:{columns:d.mode,rows:g.mode}}},[r.$get,r.costered,n])}})();
