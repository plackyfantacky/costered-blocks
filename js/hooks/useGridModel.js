(()=>{var st=Object.create;var I=Object.defineProperty;var ot=Object.getOwnPropertyDescriptor;var ut=Object.getOwnPropertyNames;var ct=Object.getPrototypeOf,at=Object.prototype.hasOwnProperty;var S=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var pt=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of ut(t))!at.call(e,r)&&r!==n&&I(e,r,{get:()=>t[r],enumerable:!(i=ot(t,r))||i.enumerable});return e};var x=(e,t,n)=>(n=e!=null?st(ct(e)):{},pt(t||!e||!e.__esModule?I(n,"default",{value:e,enumerable:!0}):n,e));var h=S((At,$)=>{$.exports=wp.data});var G=S((Tt,j)=>{j.exports=wp.blockEditor});var N=S((Ct,L)=>{L.exports=wp.element});var D=x(h()),it=x(G()),O=x(N());var T=x(h());var c={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var b=e=>Array.isArray(e)?e:[],dt=e=>new Set(b(e));function l(e){let t=c.attributes||{};return Object.fromEntries(Object.entries(t).filter(([,n])=>n.group===e))}var H=l("display"),K=l("dimension"),J=l("margin"),Y=l("padding"),F=l("flex"),V=l("flex-item"),z=l("grid"),w=l("grid-item"),W=l("position"),U=l("shared"),vt={...H,...K,...J,...Y,...F,...V,...z,...w,...W,...U},Et=new Set([...Object.keys(w)]),Pt=b(c?.collections?.editorStyles),_t=dt(c?.collections?.unitless),X=c?.settings?.gridUnit||"1fr",Dt=!!c?.settings?.appendImportantToMirroredStyles,Ot=c?.settings?.styleTagId||"costered-blocks-style-mirror",A=c?.settings?.reduxStoreKey||"costered/ui",Mt=c?.settings?.breakpoints?.mobile??782,It=c?.settings?.breakpoints?.tablet??1024,$t=c?.settings?.breakpoints?.desktop??1440,jt=b(c?.collections?.clearSets?.gridAreas),Gt=b(c?.collections?.clearSets?.gridColumns),Lt=b(c?.collections?.clearSets?.gridRows);var Nt=new Set([...Object.keys(H),...Object.keys(K),...Object.keys(Y),...Object.keys(J),...Object.keys(F),...Object.keys(V),...Object.keys(z),...Object.keys(w),...Object.keys(W),...Object.keys(U)]),Ht=Object.fromEntries(Object.entries(c.attributes).map(([e,t])=>[e,t.css]));var C="desktop",R="tablet",B="mobile",gt=e=>{let t=String(e??"").toLowerCase();return t==="tablet"||t==="medium"?R:t==="mobile"||t==="phone"?B:C},q=e=>{try{let n=e?.("core/editor")?.getDeviceType?.();if(n)return n}catch{}try{let t=e("core/edit-post");if(t){if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType()}}catch{}try{let t=e("core/edit-site");if(t){if(typeof t.getDeviceType=="function")return t.getDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType();if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType()}}catch{}},Q=e=>{try{let i=(typeof e=="function"?e(A):(0,T.select)(A))?.getBreakpoint?.();if(i===C||i===R||i===B)return i}catch{}let t=q(typeof e=="function"?e:T.select);if(t)return gt(t);if(typeof window<"u"){let n=window.__COSTERED_VIEWPORT_BP;if(n===C||n===R||n===B)return n}return"desktop"};function v(e){return String(e??"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim()}function mt(e){let t=String(e??"").trim();if(!t)return[];let n=0,i=0,r="",s=[];for(let u=0;u<t.length;u++){let o=t[u];if(o==="("){n++,r+=o;continue}if(o===")"){n=Math.max(0,n-1),r+=o;continue}if(o==="["){i++,r+=o;continue}if(o==="]"){i=Math.max(0,i-1),r+=o;continue}if(n===0&&i===0&&/\s/.test(o)){r&&(s.push(r),r="");continue}r+=o}return r&&s.push(r),s}function Z(e){let n=String(e??"").trim().replace(/\]\s+\[/g," ");return n=n.replace(/\[\s+/g,"[").replace(/\s+\]/g,"]"),n=n.replace(/\[(?:\s+)?([^\]]*?)(?:\s+)?\]/g,(i,r)=>`[${String(r).replace(/\s+/g," ").trim()}]`),n}function ft(e){let t=String(e??"").trim();if(!t)return null;let n=t.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);if(!n||n[1]===void 0||n[2]===void 0)return null;let i=Number.parseInt(n[1],10),r=n[2].trim();return!Number.isFinite(i)||i<0||r===""?null:{count:i,unit:r}}function yt(e,t=X){return e>0?`repeat(${e}, ${t})`:null}function tt(e){let t=String(e??"").trim();if(!t)return{hasAreas:!1,cols:0,rows:0};let n=[],i=/"([^"]*)"|'([^']*)'/g,r;for(;r=i.exec(t);){let u=(r[1]??r[2]??"").trim();u&&n.push(u)}return n.length?{hasAreas:!0,cols:n.reduce((u,o)=>{let k=o.split(/\s+/).filter(Boolean).length;return Math.max(u,k)},0),rows:n.length}:{hasAreas:!1,cols:0,rows:0}}function E(e){let t=String(e??"").trim();if(!t||/^subgrid\b/i.test(t))return 0;let n=t.replace(/\[[^\]]*\]/g," ").trim();return n=n.replace(/repeat\(\s*(\d+)\s*,\s*([^)]+)\)/gi,(i,r,s)=>Array.from({length:parseInt(r,10)||0},()=>"X").join(" ")),n=n.replace(/\s+/g," ").trim(),n?n.split(" ").filter(Boolean).length:0}function bt(e){let t=ft(e);if(!t)return null;let n=v(yt(t.count,t.unit));return{mode:"simple",template:e?String(e):null,normalised:n,simple:{count:t.count,unit:t.unit}}}function kt(e){let t=Z(e),n=mt(t);if(!n.length)return null;let i=v(n.join(" "));return{mode:"tracks",template:e?String(e):null,normalised:i,tracks:n}}var xt=[bt,kt];function P(e){let t=Z(e);for(let n of xt){let i=n(t);if(i)return i}return{mode:"raw",template:e?String(e):null,normalised:v(e??"")}}var et=e=>{let t=r=>{let s=r?.styles;return s&&typeof s=="object"&&!Array.isArray(s)?{...r,styles:{...s}}:{...r||{},styles:{}}},n=e&&typeof e=="object"?e:{},i=!!n.desktop||!!n.tablet||!!n.mobile;return{desktop:t(n.desktop),tablet:t(n.tablet),mobile:t(n.mobile)}};var _=e=>e==null||e===""||e==="null"||e==="undefined";var St="desktop",ht=Object.freeze({});function nt(e,t){let n=e?e[t]:void 0;return typeof n=="string"||typeof n=="number"?n:void 0}function rt(e,t){let n=e||ht,i={...n},r=et(n.costered),s=a=>{switch(a){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},u=(a,p={})=>{let m=p&&Object.prototype.hasOwnProperty.call(p,"cascade")?!!p.cascade:!0,d=p&&Object.prototype.hasOwnProperty.call(p,"raw")?!!p.raw:!m,g=t||St;if(d){let f=nt(r?.[g]?.styles||{},a);return _(f)?void 0:f}let y=s(g);for(let f of y){let M=nt(r?.[f]?.styles||{},a);if(!_(M))return M}};return Object.defineProperties(i,{$get:{value:u,enumerable:!1},$getCascade:{value:a=>u(a,{cascade:!0}),enumerable:!1},$getMany:{value:(a,p)=>{let m={};for(let d=0;d<a.length;d++){let g=a[d];m[g]=u(g,p)}return m},enumerable:!1},$bp:{value:t,enumerable:!1}}),i}function Zt(e){let t=(0,D.useSelect)(s=>e?s(it.store).getBlock(e)?.attributes??void 0:void 0,[e]),n=(0,D.useSelect)(Q,[]),i=(0,O.useMemo)(()=>t&&n?rt(t,n):void 0,[t,n]);if(!i)return;let r=s=>String(i.$get(s)??"");return(0,O.useMemo)(()=>{let s=r("gridTemplateColumns"),u=r("gridTemplateRows"),o=r("gridTemplateAreas"),k=P(s),a=P(u),p=E(s),m=E(u),d={...k,count:p},g={...a,count:m},y=tt(o),f={template:o||"",hasAreas:y.hasAreas,cols:y.cols,rows:y.rows};return{columns:d,rows:g,areas:f,activePane:{columns:d.mode,rows:g.mode}}},[i.$get,i.costered,n])}})();
