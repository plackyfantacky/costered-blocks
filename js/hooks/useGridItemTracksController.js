(()=>{var ee=Object.create;var gt=Object.defineProperty;var ne=Object.getOwnPropertyDescriptor;var re=Object.getOwnPropertyNames;var oe=Object.getPrototypeOf,se=Object.prototype.hasOwnProperty;var tt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ie=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let u of re(t))!se.call(e,u)&&u!==n&&gt(e,u,{get:()=>t[u],enumerable:!(i=ne(t,u))||i.enumerable});return e};var y=(e,t,n)=>(n=e!=null?ee(oe(e)):{},ie(t||!e||!e.__esModule?gt(n,"default",{value:e,enumerable:!0}):n,e));var R=tt((Fe,kt)=>{kt.exports=wp.element});var I=tt((He,yt)=>{yt.exports=wp.data});var L=tt((Ye,bt)=>{bt.exports=wp.blockEditor});var Gt=tt((sr,Nt)=>{Nt.exports=wp.preferences});var m=y(R());var st=y(I()),Et=y(L()),P=y(R());var C={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var H=e=>Array.isArray(e)?e:[],ae=e=>new Set(H(e));function v(e){let t=C.attributes||{};return Object.fromEntries(Object.entries(t).filter(([,n])=>n.group===e))}var St=v("display"),xt=v("dimension"),At=v("margin"),wt=v("padding"),ht=v("flex"),Ct=v("flex-item"),Bt=v("grid"),rt=v("grid-item"),Tt=v("position"),Mt=v("shared"),ze={...St,...xt,...At,...wt,...ht,...Ct,...Bt,...rt,...Tt,...Mt},Rt=new Set([...Object.keys(rt)]),Xe=H(C?.collections?.editorStyles),It=ae(C?.collections?.unitless),ce=C?.settings?.gridUnit||"1fr",qe=!!C?.settings?.appendImportantToMirroredStyles,Ze=C?.settings?.styleTagId||"costered-blocks-style-mirror",Y=C?.settings?.reduxStoreKey||"costered/ui",Qe=C?.settings?.breakpoints?.mobile??782,tn=C?.settings?.breakpoints?.tablet??1024,en=C?.settings?.breakpoints?.desktop??1440,nn=H(C?.collections?.clearSets?.gridAreas),rn=H(C?.collections?.clearSets?.gridColumns),on=H(C?.collections?.clearSets?.gridRows);var pe=new Set([...Object.keys(St),...Object.keys(xt),...Object.keys(wt),...Object.keys(At),...Object.keys(ht),...Object.keys(Ct),...Object.keys(Bt),...Object.keys(rt),...Object.keys(Tt),...Object.keys(Mt)]),sn=Object.fromEntries(Object.entries(C.attributes).map(([e,t])=>[e,t.css]));var D=e=>{let t=u=>{let c=u?.styles;return c&&typeof c=="object"&&!Array.isArray(c)?{...u,styles:{...c}}:{...u||{},styles:{}}},n=e&&typeof e=="object"?e:{},i=!!n.desktop||!!n.tablet||!!n.mobile;return{desktop:t(n.desktop),tablet:t(n.tablet),mobile:t(n.mobile)}};var ot=e=>e==null||e===""||e==="null"||e==="undefined";var de="desktop",le=Object.freeze({});function vt(e,t){let n=e?e[t]:void 0;return typeof n=="string"||typeof n=="number"?n:void 0}function W(e,t){let n=e||le,i={...n},u=D(n.costered),c=o=>{switch(o){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},A=(o,r={})=>{let f=r&&Object.prototype.hasOwnProperty.call(r,"cascade")?!!r.cascade:!0,g=r&&Object.prototype.hasOwnProperty.call(r,"raw")?!!r.raw:!f,b=t||de;if(g){let x=vt(u?.[b]?.styles||{},o);return ot(x)?void 0:x}let $=c(b);for(let x of $){let _=vt(u?.[x]?.styles||{},o);if(!ot(_))return _}};return Object.defineProperties(i,{$get:{value:A,enumerable:!1},$getCascade:{value:o=>A(o,{cascade:!0}),enumerable:!1},$getMany:{value:(o,r)=>{let f={};for(let g=0;g<o.length;g++){let b=o[g];f[b]=A(b,r)}return f},enumerable:!1},$bp:{value:t,enumerable:!1}}),i}function it(e){let t=(0,st.useSelect)(r=>r(Y)?.getBreakpoint?.()||"desktop",[]),n=(0,st.useSelect)(r=>e?r(Et.store)?.getBlockAttributes?.(e):void 0,[e]),i=(0,P.useMemo)(()=>n?W(n,t):void 0,[n,t]),u=(0,P.useCallback)((r,f)=>{if(i?.$get)return i.$get(r,f)},[i]),c=(0,P.useCallback)((r,f)=>i?.$get?i.$get(r,f):void 0,[i]),A=(0,P.useCallback)((r,f)=>i?.$getMany?i.$getMany([...r],f):Object.fromEntries(r.map(g=>[g,void 0])),[i]),h=(0,P.useCallback)((r,f="")=>{let g=u(r);return typeof g=="string"?g:f},[u]),l=(0,P.useCallback)((r,f=0)=>{let g=u(r);return typeof g=="number"?g:f},[u]);function o(r,f,g){let b=u(r);return typeof b=="string"&&f.includes(b)?b:g}return(0,P.useMemo)(()=>({get:u,getAs:c,getMany:A,getString:h,getNumber:l,getEnum:o,bp:t,attributes:i}),[u,c,A,h,l,o,t,i])}var O=y(R()),N=y(I());function J(e,t){let i=e?.costered?.[t]?.styles;return i&&typeof i=="object"&&!Array.isArray(i)?{...i}:{}}function V(e,t,n){if(!n||typeof n!="object"||Array.isArray(n))throw new Error("withBreakpointStyles expects a plain object of camelCase CSS properties \u2192 string values.");let i=e.costered??{},c={...i[t]??{styles:{}},styles:{...n}},A={...i,[t]:c};return{...e,costered:A}}function me(e){return typeof e=="string"&&e.trim().length>0}function fe(){let e=globalThis?.crypto?.randomUUID;if(typeof e=="function")return e.call(globalThis.crypto);let t=Date.now().toString(36),n=Math.random().toString(36).slice(2,10);return`${t}-${n}`}function z(e){e&&(me(e.costeredId)||(e.costeredId=fe()))}var ut=y(I());var at="desktop",ct="tablet",pt="mobile",ge=e=>{let t=String(e??"").toLowerCase();return t==="tablet"||t==="medium"?ct:t==="mobile"||t==="phone"?pt:at},Pt=e=>{try{let n=e?.("core/editor")?.getDeviceType?.();if(n)return n}catch{}try{let t=e("core/edit-post");if(t){if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType()}}catch{}try{let t=e("core/edit-site");if(t){if(typeof t.getDeviceType=="function")return t.getDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType();if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType()}}catch{}},U=e=>{try{let i=(typeof e=="function"?e(Y):(0,ut.select)(Y))?.getBreakpoint?.();if(i===at||i===ct||i===pt)return i}catch{}let t=Pt(typeof e=="function"?e:ut.select);if(t)return ge(t);if(typeof window<"u"){let n=window.__COSTERED_VIEWPORT_BP;if(n===at||n===ct||n===pt)return n}return"desktop"};var ke="desktop";function et(e,t,n={trim:!0,emptyUnsets:!0}){let i=(typeof t=="object"?t:n)||{},{trim:u=!0,emptyUnsets:c=!0,breakpoint:A}=i,h=(0,N.useSelect)(U,[]),l=A||h||ke,{updateBlockAttributes:o}=(0,N.useDispatch)("core/block-editor"),r=(0,O.useMemo)(()=>{if(typeof e=="string"){let a=e;return p=>{if(a)if(typeof p=="function"){let s=(0,N.select)("core/block-editor")?.getBlockAttributes(a)||{},k=p(s)||s;o(a,k)}else o(a,p||{})}}if(typeof e=="function"&&typeof t=="string"){let a=e,p=t;return s=>{if(!p)return;if(typeof s=="function"){let w=(0,N.select)("core/block-editor")?.getBlockAttributes(p)||{},T=s(w)||w;try{a(p,T)}catch{a(T)}return}let k=s||{};try{a(p,k)}catch{a(k)}}}if(typeof e=="function"){let a=e;return p=>{if(typeof p=="function"){let s=p({});a(s)}else a(p||{})}}return()=>{}},[e,t,o]),f=(0,O.useCallback)((a,p)=>{if(a==null)return;if(Rt.has(p)){let k=typeof a=="string"&&u?a.trim():String(a);return c&&k===""?void 0:k}let s=a;if(u&&typeof s=="string"&&(s=s.trim()),!(c&&(s===""||s=="null"||s=="undefined"))){if(It.has(p)){if(typeof s=="string"&&/^-?\d+(\.\d+)?$/.test(s)){let k=Number(s);return Number.isFinite(k)?k:void 0}return typeof s=="number"&&Number.isFinite(s)?s:void 0}if(typeof s=="number")return Number.isFinite(s)?s:void 0;if(typeof s=="string")return s==="null"||s==="undefined"?void 0:s;try{return String(s)}catch{return}}},[u,c]),g=(0,O.useCallback)((a,p)=>{r(s=>{let k={...s||{}};z(k),k.costered=D(k.costered);let w=f(p,a),M={...J(k,l)};if(w===void 0)if(Object.prototype.hasOwnProperty.call(M,a))delete M[a];else return s;else M[a]=String(w);return V(k,l,M)})},[r,l,f]),b=(0,O.useCallback)(a=>{!a||typeof a!="object"||r(p=>{let s={...p||{}};z(s),s.costered=D(s.costered);let w={...J(s,l)};for(let[T,M]of Object.entries(a)){let j=f(M,T);j===void 0?Object.prototype.hasOwnProperty.call(w,T)&&delete w[T]:w[T]=String(j)}return V(s,l,w)})},[r,l,f]),$=(0,O.useCallback)(a=>{r(p=>{let s={...p||{}};z(s),s.costered=D(s.costered);let k=J(s,l);if(!Object.prototype.hasOwnProperty.call(k,a))return p;let w={...k};return delete w[a],V(s,l,w)})},[r,l]),x=(0,O.useCallback)(a=>{!Array.isArray(a)||a.length===0||r(p=>{let s={...p||{}};z(s),s.costered=D(s.costered);let k=J(s,l),w=!1,T={...k};for(let M=0;M<a.length;M++){let j=a[M];Object.prototype.hasOwnProperty.call(T,j)&&(delete T[j],w=!0)}return w?V(s,l,T):p})},[r,l]),_=(0,O.useCallback)(a=>({set:(p,s)=>g(`${a}${p}`,s),setMany:p=>{let s={};for(let[k,w]of Object.entries(p))s[`${a}${k}`]=w;b(s)},unset:p=>$(`${a}${p}`),unsetMany:p=>x(p.map(s=>`${a}${s}`))}),[g,b,$,x]);return{set:g,setMany:b,unset:$,unsetMany:x,withPrefix:_,activeBreakpoint:l}}var Ot=y(R());var q=y(R());function G(e,t,n){return Math.min(Math.max(e,t),n)}function B(e,t=1){let n=Number(e);return Number.isFinite(n)?Math.trunc(n):t}function E(e){if(typeof e=="number")return Number.isInteger(e);let t=String(e);return/^-?\d+$/.test(t)}function dt(e,t=1){let n=Number.parseInt(String(e),10);return Number.isFinite(n)&&n!==0?n:t}function $t(e){let t=Number.parseInt(String(e),10);return Number.isFinite(t)?t:""}var lt=e=>{let t={start:"",span:"",end:""},n=String(e??"").trim();if(!n)return t;let i=n.split("/").map(h=>h.trim());if(i.length===1)return/^span\s+\d+$/i.test(i[0])?t.span=i[0].replace(/^span\s+/i,""):t.start=i[0],t;let u=i[0],c=i[1];t.start=u||"auto";let A=/^span\s+(\d+)$/i.exec(c);return A?t.span=A[1]:t.end=c,t},X=({start:e,span:t,end:n},{mode:i="span",collapseSpanOne:u=!0}={})=>{let c=String(e??"").trim()||"auto";if(i==="end"){let h=String(n??"").trim()||"auto";return`${c} / ${h}`}let A=B(t,1);return u&&A===1&&c!=="auto"?c:`${c} / span ${A}`},mt=e=>{let t=new Set,n=/\[([^\]]+)\]/g,i;for(;(i=n.exec(String(e??"")))!==null;){let u=i[1].trim();u&&u.split(/\s+/).forEach(c=>t.add(c))}return Array.from(t)},_t=e=>/\//.test(String(e??""))||/\bspan\s+\d+\b/i.test(String(e??""));function ft(e){let{set:t,setMany:n,unset:i}=et(e),u=(0,q.useCallback)(l=>{let o=typeof l=="string"?l.trim():"";if(!o){i("gridArea");return}t("gridArea",o)},[t,i]),c=(0,q.useCallback)((l,o,r,f)=>{let g={};l!==void 0&&(g.gridRowStart=l||void 0),o!==void 0&&(g.gridRowEnd=o||void 0),r!==void 0&&(g.gridColumnStart=r||void 0),f!==void 0&&(g.gridColumnEnd=f||void 0),n(g)},[n]),A=(0,q.useCallback)((l,o)=>{let r=l==="end"?X({start:o.start,end:o.end},{mode:"end"}):X({start:o.start,span:o.span},{mode:"span"});t("gridColumn",r)},[t]),h=(0,q.useCallback)((l,o)=>{let r=l==="end"?X({start:o.start,end:o.end},{mode:"end"}):X({start:o.start,span:o.span},{mode:"span"});t("gridRow",r)},[t]);return{setArea:u,setTracks:c,writeColumn:A,writeRow:h,set:t,setMany:n,unset:i}}var xe=y(I()),Ae=y(L()),we=y(R());var Dt=y(R()),Be=y(I()),Te=y(L());var Me=y(R()),Re=y(I());var Ie=y(I()),ve=y(R());var Ee=y(I()),Pe=y(L());var Oe=y(I()),$e=y(L()),_e=y(R());var rr=Object.freeze({});var jt=y(I()),De=y(Gt()),Ne=y(R());var Lt=Number.MAX_SAFE_INTEGER;function Ge({clientId:e,setMany:t,parentMeta:n}){if(!e)return null;let{get:i}=it(e),{writeColumn:u,writeRow:c}=ft(e),A=_t(i("gridArea")),h=n?.columns??0,l=n?.rows??0,o=(0,m.useMemo)(()=>lt(i("gridColumn")),[i]),r=(0,m.useMemo)(()=>lt(i("gridRow")),[i]),f=o.end?"end":"span",g=r.end?"end":"span",[b,$]=(0,m.useState)(f),[x,_]=(0,m.useState)(g);(0,m.useEffect)(()=>{$(f)},[f]),(0,m.useEffect)(()=>{_(g)},[g]);let a=(0,m.useMemo)(()=>mt(n.columnTemplate),[n.columnTemplate]),p=(0,m.useMemo)(()=>mt(n.rowTemplate),[n.rowTemplate]),s=a.length>0,k=p.length>0,w=(d,S)=>S?E(d)?"number":"named":"number",T=d=>d?E(d)?"number":d==="auto"?"auto":"named":"number",M=(d,S)=>{let nt=T(d);return S?nt:nt==="named"?"number":nt},j=w(o.start,s),je=w(r.start,k),Le=M(o.end,s),We=M(r.end,k),K=(0,m.useMemo)(()=>{if(!h||!E(o.start))return Lt;let d=G(B(o.start,1),1,h);return Math.max(1,h-d+1)},[h,o.start]),F=(0,m.useMemo)(()=>{if(!l||!E(r.start))return Lt;let d=G(B(r.start,1),1,l);return Math.max(1,l-d+1)},[l,r.start]),[Wt,Z]=(0,m.useState)(null),[Ut,Q]=(0,m.useState)(null);(0,m.useEffect)(()=>{Z(null)},[i("gridColumn")]),(0,m.useEffect)(()=>{Q(null)},[i("gridRow")]);let Kt=(0,m.useCallback)(d=>{let S=B(d,1);o.end?u(b,{start:S,end:o.end}):u(b,{start:S,span:G(B(o.span,1),1,K)})},[o.end,o.span,K,u]),Ft=(0,m.useCallback)(d=>{let S=String(d||"auto").trim()||"auto";o.end?u(b,{start:S,end:o.end}):u(b,{start:S,span:B(o.span,1)})},[o.end,o.span,u]),Ht=(0,m.useCallback)(d=>{let S=G(B(d,1),1,K);u(b,{start:o.start||"auto",span:S})},[o.start,K,u]),Yt=(0,m.useCallback)(d=>{let S=B(d,0);Z(S),d!==0&&(u(b,{start:o.start||"auto",end:dt(d,1)}),Z(null))},[o.start,u]),Jt=(0,m.useCallback)(d=>{u(b,{start:o.start||"auto",end:String(d||"auto").trim()||"auto"})},[o.start,u]),Vt=(0,m.useCallback)(()=>{u(b,{start:o.start||"auto",end:"auto"})},[o.start,u]),zt=(0,m.useCallback)(d=>{let S=B(d,1);r.end?c(x,{start:S,end:r.end}):c(x,{start:S,span:G(B(r.span,1),1,F)})},[r.end,r.span,F,c]),Xt=(0,m.useCallback)(d=>{let S=String(d||"auto").trim()||"auto";r.end?c(x,{start:S,end:r.end}):c(x,{start:S,span:B(r.span,1)})},[r.end,r.span,x,c]),qt=(0,m.useCallback)(d=>{let S=G(B(d,1),1,F);c(x,{start:r.start||"auto",span:S})},[r.start,F,c]),Zt=(0,m.useCallback)(d=>{let S=B(d,0);Q(S),d!==0&&(c(x,{start:r.start||"auto",end:dt(d,1)}),Q(null))},[r.start,x,c]),Qt=(0,m.useCallback)(d=>{c(x,{start:r.start||"auto",end:String(d||"auto").trim()||"auto"})},[r.start,x,c]),te=(0,m.useCallback)(()=>{c(x,{start:r.start||"auto",end:"auto"})},[r.start,x,c]);return{hasArea:A,disabledLines:A,numbers:{isIntToken:E,toInt:B,parseSigned:$t},column:{values:{...o},modes:{uiStart:s?E(o.start)?"number":"named":"number",uiEnd:o.end?E(o.end)?"number":String(o.end)==="auto"?"auto":"named":"number",mode:b},setMode:$,named:{lines:a,hasLines:s},caps:{span:K},drafts:{end:Wt,setEnd:Z},handlers:{onStartNumber:Kt,onStartNamed:Ft,onSpan:Ht,onEndNumber:Yt,onEndNamed:Jt,onEndAuto:Vt}},row:{values:{...r},modes:{uiStart:k?E(r.start)?"number":"named":"number",uiEnd:r.end?E(r.end)?"number":String(r.end)==="auto"?"auto":"named":"number",mode:x},setMode:_,named:{lines:p,hasLines:k},caps:{span:F},drafts:{end:Ut,setEnd:Q},handlers:{onStartNumber:zt,onStartNamed:Xt,onSpan:qt,onEndNumber:Zt,onEndNamed:Qt,onEndAuto:te}}}}})();
