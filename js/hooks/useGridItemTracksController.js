(()=>{var se=Object.create;var kt=Object.defineProperty;var ie=Object.getOwnPropertyDescriptor;var ue=Object.getOwnPropertyNames;var ae=Object.getPrototypeOf,ce=Object.prototype.hasOwnProperty;var Q=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var de=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let u of ue(e))!ce.call(t,u)&&u!==n&&kt(t,u,{get:()=>e[u],enumerable:!(r=ie(e,u))||r.enumerable});return t};var y=(t,e,n)=>(n=t!=null?se(ae(t)):{},de(e||!t||!t.__esModule?kt(n,"default",{value:t,enumerable:!0}):n,t));var B=Q((ze,bt)=>{bt.exports=wp.element});var M=Q((Xe,St)=>{St.exports=wp.data});var L=Q((qe,wt)=>{wt.exports=wp.blockEditor});var Ut=Q((lr,Wt)=>{Wt.exports=wp.preferences});var f=y(B());var ut=y(M()),Dt=y(L()),D=y(B());var T={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var F=t=>Array.isArray(t)?t:[],pe=t=>new Set(F(t));function v(t){let e=T.attributes||{};return Object.fromEntries(Object.entries(e).filter(([,n])=>n.group===t))}var xt=v("display"),At=v("dimension"),ht=v("margin"),Ct=v("padding"),Tt=v("flex"),Rt=v("flex-item"),Bt=v("grid"),rt=v("grid-item"),Mt=v("position"),vt=v("shared"),tn={...xt,...At,...ht,...Ct,...Tt,...Rt,...Bt,...rt,...Mt,...vt},It=new Set([...Object.keys(rt)]),en=F(T?.collections?.editorStyles),Et=pe(T?.collections?.unitless),me=T?.settings?.gridUnit||"1fr",nn=!!T?.settings?.appendImportantToMirroredStyles,rn=T?.settings?.styleTagId||"costered-blocks-style-mirror",Y=T?.settings?.reduxStoreKey||"costered/ui",on=T?.settings?.breakpoints?.mobile??782,sn=T?.settings?.breakpoints?.tablet??1024,un=T?.settings?.breakpoints?.desktop??1440,an=F(T?.collections?.clearSets?.gridAreas),cn=F(T?.collections?.clearSets?.gridColumns),dn=F(T?.collections?.clearSets?.gridRows);var fe=new Set([...Object.keys(xt),...Object.keys(At),...Object.keys(Ct),...Object.keys(ht),...Object.keys(Tt),...Object.keys(Rt),...Object.keys(Bt),...Object.keys(rt),...Object.keys(Mt),...Object.keys(vt)]),ln=Object.fromEntries(Object.entries(T.attributes).map(([t,e])=>[t,e.css]));var Pt=t=>{if(Array.isArray(t))return t.filter(Boolean).map(e=>{let n=String(e.property??""),r=e.value;return n&&r!==void 0?{property:n,value:r}:void 0}).filter(Boolean);if(t&&typeof t=="object"){let e=[];for(let[n,r]of Object.entries(t))r!==void 0&&e.push({property:n,value:r});return e}return[]},j=t=>t&&typeof t=="object"&&"styles"in t?{styles:Pt(t.styles)}:{styles:Pt(t)},_=t=>{let e=t||{};return!!e.desktop||!!e.tablet||!!e.mobile?{desktop:j(e.desktop),tablet:j(e.tablet),mobile:j(e.mobile)}:{desktop:j(e),tablet:j(void 0),mobile:j(void 0)}};var ot=t=>t==null||t===""||t==="null"||t==="undefined";function ge(t){return Array.isArray(t)}function st(t){if(ge(t)){let[e,n,r]=t;return r!==void 0?{property:e,value:n,important:r}:{property:e,value:n}}return t}function $t(t){if(!Array.isArray(t)||t.length===0)return[];let e=[];for(let n=0;n<t.length;n++)e.push(st(t[n]));return e}function it(t,e,n,r){let u=Array.isArray(t)?t.slice():[],d=-1;for(let g=0;g<u.length;g++)if(st(u[g]).property===e){d=g;break}let b=r!==void 0?{property:e,value:n,important:r}:{property:e,value:n};return d===-1?u.push(b):u[d]=b,u}function J(t,e){let n=Array.isArray(t)?Array.from(t):[],r=[];for(let u=0;u<n.length;u++)st(n[u]).property!==e&&r.push(n[u]);return r}var ye="desktop",ke=Object.freeze({});function _t(t,e){let n=$t(t);for(let r=0;r<n.length;r++){let u=n[r];if(u.property===e)return u.value}}function W(t,e){let n=t||ke,r={...n},u=_(n.costered),d=s=>{switch(s){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},b=(s,i={})=>{let h=i&&Object.prototype.hasOwnProperty.call(i,"cascade")?!!i.cascade:!0,x=i&&Object.prototype.hasOwnProperty.call(i,"raw")?!!i.raw:!h,A=e||ye;if(x){let S=_t(u?.[A]?.styles,s);return ot(S)?void 0:S}let P=d(A);for(let S of P){let $=_t(u?.[S]?.styles,s);if(!ot($))return $}};return Object.defineProperties(r,{$get:{value:b,enumerable:!1},$getCascade:{value:s=>b(s,{cascade:!0}),enumerable:!1},$getMany:{value:(s,i)=>{let h={};for(let x=0;x<s.length;x++){let A=s[x];h[A]=b(A,i)}return h},enumerable:!1},$bp:{value:e,enumerable:!1}}),r}function at(t){let e=(0,ut.useSelect)(g=>g(Y)?.getBreakpoint?.()||"desktop",[]),n=(0,ut.useSelect)(g=>t?g(Dt.store)?.getBlockAttributes?.(t):void 0,[t]),r=(0,D.useMemo)(()=>n?W(n,e):void 0,[n,e]),u=(0,D.useCallback)((g,c)=>{if(r?.$get)return r.$get(g,c)},[r]),d=(0,D.useCallback)((g,c)=>r?.$get?r.$get(g,c):void 0,[r]),b=(0,D.useCallback)((g,c)=>r?.$getMany?r.$getMany([...g],c):Object.fromEntries(g.map(s=>[s,void 0])),[r]);return(0,D.useMemo)(()=>({get:u,getAs:d,getMany:b,bp:e,attributes:r}),[u,d,b,e,r])}var E=y(B()),O=y(M());function be(t){return typeof t=="string"&&t.trim().length>0}function Se(){let t=globalThis?.crypto?.randomUUID;if(typeof t=="function")return t.call(globalThis.crypto);let e=Date.now().toString(36),n=Math.random().toString(36).slice(2,10);return`${e}-${n}`}function V(t){t&&(be(t.costeredId)||(t.costeredId=Se()))}var ct=y(M());var dt="desktop",lt="tablet",pt="mobile",we=t=>{let e=String(t??"").toLowerCase();return e==="tablet"||e==="medium"?lt:e==="mobile"||e==="phone"?pt:dt},Ot=t=>{try{let n=t?.("core/editor")?.getDeviceType?.();if(n)return n}catch{}try{let e=t("core/edit-post");if(e){if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType()}}catch{}try{let e=t("core/edit-site");if(e){if(typeof e.getDeviceType=="function")return e.getDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType();if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType()}}catch{}},U=t=>{try{let r=(typeof t=="function"?t(Y):(0,ct.select)(Y))?.getBreakpoint?.();if(r===dt||r===lt||r===pt)return r}catch{}let e=Ot(typeof t=="function"?t:ct.select);if(e)return we(e);if(typeof window<"u"){let n=window.__COSTERED_VIEWPORT_BP;if(n===dt||n===lt||n===pt)return n}return"desktop"};var xe="desktop";function tt(t,e,n={trim:!0,emptyUnsets:!0}){let r=(typeof e=="object"?e:n)||{},{trim:u=!0,emptyUnsets:d=!0,breakpoint:b}=r,g=(0,O.useSelect)(U,[]),c=b||g||xe,{updateBlockAttributes:s}=(0,O.useDispatch)("core/block-editor"),i=(0,E.useMemo)(()=>{if(typeof t=="string"){let a=t;return l=>{if(a)if(typeof l=="function"){let o=(0,O.select)("core/block-editor")?.getBlockAttributes(a)||{},m=l(o)||o;s(a,m)}else s(a,l||{})}}if(typeof t=="function"&&typeof e=="string"){let a=t,l=e;return o=>{if(!l)return;if(typeof o=="function"){let w=(0,O.select)("core/block-editor")?.getBlockAttributes(l)||{},C=o(w)||w;try{a(l,C)}catch{a(C)}return}let m=o||{};try{a(l,m)}catch{a(m)}}}if(typeof t=="function"){let a=t;return l=>{if(typeof l=="function"){let o=l({});a(o)}else a(l||{})}}return()=>{}},[t,e,s]),h=(0,E.useCallback)((a,l)=>{if(a==null)return;if(It.has(l)){let m=typeof a=="string"&&u?a.trim():String(a);return d&&m===""?void 0:m}let o=a;if(u&&typeof o=="string"&&(o=o.trim()),!(d&&(o===""||o=="null"||o=="undefined"))){if(Et.has(l)){if(typeof o=="string"&&/^-?\d+(\.\d+)?$/.test(o)){let m=Number(o);return Number.isFinite(m)?m:void 0}return typeof o=="number"&&Number.isFinite(o)?o:void 0}if(typeof o=="number")return Number.isFinite(o)?o:void 0;if(typeof o=="string")return o==="null"||o==="undefined"?void 0:o;try{return String(o)}catch{return}}},[u,d]),x=(0,E.useCallback)((a,l)=>{i(o=>{let m={...o||{}};V(m),m.costered=_(m.costered);let w=m.costered[c].styles,C=h(l,a),G=C===void 0?J(w,a):it(w,a,C);return m.costered[c]={...m.costered[c],styles:G},m})},[i,c,h]),A=(0,E.useCallback)(a=>{!a||typeof a!="object"||i(l=>{let o={...l||{}};V(o),o.costered=_(o.costered);let w=o.costered[c].styles;for(let[C,G]of Object.entries(a)){let et=h(G,C);w=et===void 0?J(w,C):it(w,C,et)}return o.costered[c]={...o.costered[c],styles:w||[]},o})},[i,c,h]),P=(0,E.useCallback)(a=>{i(l=>{let o={...l||{}};V(o),o.costered=_(o.costered);let m=o.costered[c].styles,w=J(m,a);return(m?.length||0)===w.length?l:(o.costered[c]={...o.costered[c],styles:w},o)})},[i,c]),S=(0,E.useCallback)(a=>{!Array.isArray(a)||a.length===0||i(l=>{let o={...l||{}};V(o),o.costered=_(o.costered);let w=o.costered[c]?.styles;for(let C=0;C<a.length;C++)w=J(w,a[C]);return o.costered[c]={...o.costered[c],styles:w||[]},o})},[i,c]),$=(0,E.useCallback)(a=>({set:(l,o)=>x(`${a}${l}`,o),setMany:l=>{let o={};for(let[m,w]of Object.entries(l))o[`${a}${m}`]=w;A(o)},unset:l=>P(`${a}${l}`),unsetMany:l=>S(l.map(o=>`${a}${o}`))}),[x,A,P,S]);return{set:x,setMany:A,unset:P,unsetMany:S,withPrefix:$,activeBreakpoint:c}}var Nt=y(B());var X=y(B());function N(t,e,n){return Math.min(Math.max(t,e),n)}function R(t,e=1){let n=Number(t);return Number.isFinite(n)?Math.trunc(n):e}function I(t){if(typeof t=="number")return Number.isInteger(t);let e=String(t);return/^-?\d+$/.test(e)}function mt(t,e=1){let n=Number.parseInt(String(t),10);return Number.isFinite(n)&&n!==0?n:e}function Gt(t){let e=Number.parseInt(String(t),10);return Number.isFinite(e)?e:""}var ft=t=>{let e={start:"",span:"",end:""},n=String(t??"").trim();if(!n)return e;let r=n.split("/").map(g=>g.trim());if(r.length===1)return/^span\s+\d+$/i.test(r[0])?e.span=r[0].replace(/^span\s+/i,""):e.start=r[0],e;let u=r[0],d=r[1];e.start=u||"auto";let b=/^span\s+(\d+)$/i.exec(d);return b?e.span=b[1]:e.end=d,e},z=({start:t,span:e,end:n},{mode:r="span",collapseSpanOne:u=!0}={})=>{let d=String(t??"").trim()||"auto";if(r==="end"){let g=String(n??"").trim()||"auto";return`${d} / ${g}`}let b=R(e,1);return u&&b===1&&d!=="auto"?d:`${d} / span ${b}`},gt=t=>{let e=new Set,n=/\[([^\]]+)\]/g,r;for(;(r=n.exec(String(t??"")))!==null;){let u=r[1].trim();u&&u.split(/\s+/).forEach(d=>e.add(d))}return Array.from(e)},Lt=t=>/\//.test(String(t??""))||/\bspan\s+\d+\b/i.test(String(t??""));function yt(t){let{set:e,setMany:n,unset:r}=tt(t),u=(0,X.useCallback)(c=>{let s=typeof c=="string"?c.trim():"";if(!s){r("gridArea");return}e("gridArea",s)},[e,r]),d=(0,X.useCallback)((c,s,i,h)=>{let x={};c!==void 0&&(x.gridRowStart=c||void 0),s!==void 0&&(x.gridRowEnd=s||void 0),i!==void 0&&(x.gridColumnStart=i||void 0),h!==void 0&&(x.gridColumnEnd=h||void 0),n(x)},[n]),b=(0,X.useCallback)((c,s)=>{let i=c==="end"?z({start:s.start,end:s.end},{mode:"end"}):z({start:s.start,span:s.span},{mode:"span"});e("gridColumn",i)},[e]),g=(0,X.useCallback)((c,s)=>{let i=c==="end"?z({start:s.start,end:s.end},{mode:"end"}):z({start:s.start,span:s.span},{mode:"span"});e("gridRow",i)},[e]);return{setArea:u,setTracks:d,writeColumn:b,writeRow:g,set:e,setMany:n,unset:r}}var Te=y(M()),Re=y(L()),Be=y(B());var jt=y(B()),Ie=y(M()),Ee=y(L());var Pe=y(B()),$e=y(M());var _e=y(M()),De=y(B());var Oe=y(M()),Ne=y(L());var Ge=y(M()),Le=y(L()),je=y(B());var cr=Object.freeze({});var Kt=y(M()),We=y(Ut()),Ue=y(B());var Ht=Number.MAX_SAFE_INTEGER;function Ke({clientId:t,setMany:e,parentMeta:n}){if(!t)return null;let{get:r}=at(t),{writeColumn:u,writeRow:d}=yt(t),b=Lt(r("gridArea")),g=n?.columns??0,c=n?.rows??0,s=(0,f.useMemo)(()=>ft(r("gridColumn")),[r]),i=(0,f.useMemo)(()=>ft(r("gridRow")),[r]),h=s.end?"end":"span",x=i.end?"end":"span",[A,P]=(0,f.useState)(h),[S,$]=(0,f.useState)(x);(0,f.useEffect)(()=>{P(h)},[h]),(0,f.useEffect)(()=>{$(x)},[x]);let a=(0,f.useMemo)(()=>gt(n.columnTemplate),[n.columnTemplate]),l=(0,f.useMemo)(()=>gt(n.rowTemplate),[n.rowTemplate]),o=a.length>0,m=l.length>0,w=(p,k)=>k?I(p)?"number":"named":"number",C=p=>p?I(p)?"number":p==="auto"?"auto":"named":"number",G=(p,k)=>{let nt=C(p);return k?nt:nt==="named"?"number":nt},et=w(s.start,o),He=w(i.start,m),Fe=G(s.end,o),Ye=G(i.end,m),K=(0,f.useMemo)(()=>{if(!g||!I(s.start))return Ht;let p=N(R(s.start,1),1,g);return Math.max(1,g-p+1)},[g,s.start]),H=(0,f.useMemo)(()=>{if(!c||!I(i.start))return Ht;let p=N(R(i.start,1),1,c);return Math.max(1,c-p+1)},[c,i.start]),[Ft,q]=(0,f.useState)(null),[Yt,Z]=(0,f.useState)(null);(0,f.useEffect)(()=>{q(null)},[r("gridColumn")]),(0,f.useEffect)(()=>{Z(null)},[r("gridRow")]);let Jt=(0,f.useCallback)(p=>{let k=R(p,1);s.end?u(A,{start:k,end:s.end}):u(A,{start:k,span:N(R(s.span,1),1,K)})},[s.end,s.span,K,u]),Vt=(0,f.useCallback)(p=>{let k=String(p||"auto").trim()||"auto";s.end?u(A,{start:k,end:s.end}):u(A,{start:k,span:R(s.span,1)})},[s.end,s.span,u]),zt=(0,f.useCallback)(p=>{let k=N(R(p,1),1,K);u(A,{start:s.start||"auto",span:k})},[s.start,K,u]),Xt=(0,f.useCallback)(p=>{let k=R(p,0);q(k),p!==0&&(u(A,{start:s.start||"auto",end:mt(p,1)}),q(null))},[s.start,u]),qt=(0,f.useCallback)(p=>{u(A,{start:s.start||"auto",end:String(p||"auto").trim()||"auto"})},[s.start,u]),Zt=(0,f.useCallback)(()=>{u(A,{start:s.start||"auto",end:"auto"})},[s.start,u]),Qt=(0,f.useCallback)(p=>{let k=R(p,1);i.end?d(S,{start:k,end:i.end}):d(S,{start:k,span:N(R(i.span,1),1,H)})},[i.end,i.span,H,d]),te=(0,f.useCallback)(p=>{let k=String(p||"auto").trim()||"auto";i.end?d(S,{start:k,end:i.end}):d(S,{start:k,span:R(i.span,1)})},[i.end,i.span,S,d]),ee=(0,f.useCallback)(p=>{let k=N(R(p,1),1,H);d(S,{start:i.start||"auto",span:k})},[i.start,H,d]),ne=(0,f.useCallback)(p=>{let k=R(p,0);Z(k),p!==0&&(d(S,{start:i.start||"auto",end:mt(p,1)}),Z(null))},[i.start,S,d]),re=(0,f.useCallback)(p=>{d(S,{start:i.start||"auto",end:String(p||"auto").trim()||"auto"})},[i.start,S,d]),oe=(0,f.useCallback)(()=>{d(S,{start:i.start||"auto",end:"auto"})},[i.start,S,d]);return{hasArea:b,disabledLines:b,numbers:{isIntToken:I,toInt:R,parseSigned:Gt},column:{values:{...s},modes:{uiStart:o?I(s.start)?"number":"named":"number",uiEnd:s.end?I(s.end)?"number":String(s.end)==="auto"?"auto":"named":"number",mode:A},setMode:P,named:{lines:a,hasLines:o},caps:{span:K},drafts:{end:Ft,setEnd:q},handlers:{onStartNumber:Jt,onStartNamed:Vt,onSpan:zt,onEndNumber:Xt,onEndNamed:qt,onEndAuto:Zt}},row:{values:{...i},modes:{uiStart:m?I(i.start)?"number":"named":"number",uiEnd:i.end?I(i.end)?"number":String(i.end)==="auto"?"auto":"named":"number",mode:S},setMode:$,named:{lines:l,hasLines:m},caps:{span:H},drafts:{end:Yt,setEnd:Z},handlers:{onStartNumber:Qt,onStartNamed:te,onSpan:ee,onEndNumber:ne,onEndNamed:re,onEndAuto:oe}}}}})();
