(()=>{var ee=Object.create;var gt=Object.defineProperty;var ne=Object.getOwnPropertyDescriptor;var re=Object.getOwnPropertyNames;var oe=Object.getPrototypeOf,se=Object.prototype.hasOwnProperty;var tt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ie=(e,t,n,u)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of re(t))!se.call(e,i)&&i!==n&&gt(e,i,{get:()=>t[i],enumerable:!(u=ne(t,i))||u.enumerable});return e};var b=(e,t,n)=>(n=e!=null?ee(oe(e)):{},ie(t||!e||!e.__esModule?gt(n,"default",{value:e,enumerable:!0}):n,e));var I=tt((Fe,kt)=>{kt.exports=wp.element});var v=tt((He,yt)=>{yt.exports=wp.data});var L=tt((Ye,bt)=>{bt.exports=wp.blockEditor});var Gt=tt((sr,Nt)=>{Nt.exports=wp.preferences});var g=b(I());var st=b(v()),Et=b(L()),O=b(I());var C={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var H=e=>Array.isArray(e)?e:[],ae=e=>new Set(H(e));function E(e){let t=C.attributes||{};return Object.fromEntries(Object.entries(t).filter(([,n])=>n.group===e))}var St=E("display"),At=E("dimension"),xt=E("margin"),wt=E("padding"),ht=E("flex"),Ct=E("flex-item"),Bt=E("grid"),rt=E("grid-item"),Tt=E("position"),Mt=E("shared"),ze={...St,...At,...xt,...wt,...ht,...Ct,...Bt,...rt,...Tt,...Mt},Rt=new Set([...Object.keys(rt)]),Xe=H(C?.collections?.editorStyles),It=ae(C?.collections?.unitless),ce=C?.settings?.gridUnit||"1fr",qe=!!C?.settings?.appendImportantToMirroredStyles,Ze=C?.settings?.styleTagId||"costered-blocks-style-mirror",Y=C?.settings?.reduxStoreKey||"costered/ui",Qe=C?.settings?.breakpoints?.mobile??782,tn=C?.settings?.breakpoints?.tablet??1024,en=C?.settings?.breakpoints?.desktop??1440,nn=H(C?.collections?.clearSets?.gridAreas),rn=H(C?.collections?.clearSets?.gridColumns),on=H(C?.collections?.clearSets?.gridRows);var de=new Set([...Object.keys(St),...Object.keys(At),...Object.keys(wt),...Object.keys(xt),...Object.keys(ht),...Object.keys(Ct),...Object.keys(Bt),...Object.keys(rt),...Object.keys(Tt),...Object.keys(Mt)]),sn=Object.fromEntries(Object.entries(C.attributes).map(([e,t])=>[e,t.css]));var D=e=>{let t=i=>{let a=i?.styles;return a&&typeof a=="object"&&!Array.isArray(a)?{...i,styles:{...a}}:{...i||{},styles:{}}},n=e&&typeof e=="object"?e:{},u=!!n.desktop||!!n.tablet||!!n.mobile;return{desktop:t(n.desktop),tablet:t(n.tablet),mobile:t(n.mobile)}};var ot=e=>e==null||e===""||e==="null"||e==="undefined";var pe="desktop",le=Object.freeze({});function vt(e,t){let n=e?e[t]:void 0;return typeof n=="string"||typeof n=="number"?n:void 0}function W(e,t){let n=e||le,u={...n},i=D(n.costered),a=r=>{switch(r){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},x=(r,s={})=>{let l=s&&Object.prototype.hasOwnProperty.call(s,"cascade")?!!s.cascade:!0,f=s&&Object.prototype.hasOwnProperty.call(s,"raw")?!!s.raw:!l,k=t||pe;if(f){let A=vt(i?.[k]?.styles||{},r);return ot(A)?void 0:A}let R=a(k);for(let A of R){let _=vt(i?.[A]?.styles||{},r);if(!ot(_))return _}};return Object.defineProperties(u,{$get:{value:x,enumerable:!1},$getCascade:{value:r=>x(r,{cascade:!0}),enumerable:!1},$getMany:{value:(r,s)=>{let l={};for(let f=0;f<r.length;f++){let k=r[f];l[k]=x(k,s)}return l},enumerable:!1},$bp:{value:t,enumerable:!1}}),u}function it(e){let t=e??void 0,n=(0,st.useSelect)(l=>l(Y)?.getBreakpoint?.()||"desktop",[]),u=(0,st.useSelect)(l=>t?l(Et.store)?.getBlockAttributes?.(t):void 0,[t]),i=(0,O.useMemo)(()=>u?W(u,n):void 0,[u,n]),a=(0,O.useCallback)((l,f)=>{if(i?.$get)return i.$get(l,f)},[i]),x=(0,O.useCallback)((l,f)=>i?.$get?i.$get(l,f):void 0,[i]),h=(0,O.useCallback)((l,f)=>i?.$getMany?i.$getMany([...l],f):Object.fromEntries(l.map(k=>[k,void 0])),[i]),m=(0,O.useCallback)((l,f="")=>{let k=a(l);return typeof k=="string"?k:f},[a]),r=(0,O.useCallback)((l,f=0)=>{let k=a(l);return typeof k=="number"?k:f},[a]);function s(l,f,k){let R=a(l);return typeof R=="string"&&f.includes(R)?R:k}return(0,O.useMemo)(()=>({get:a,getAs:x,getMany:h,getString:m,getNumber:r,getEnum:s,bp:n,attributes:i}),[a,x,h,m,r,s,n,i])}var $=b(I()),N=b(v());function J(e,t){let u=e?.costered?.[t]?.styles;return u&&typeof u=="object"&&!Array.isArray(u)?{...u}:{}}function V(e,t,n){if(!n||typeof n!="object"||Array.isArray(n))throw new Error("withBreakpointStyles expects a plain object of camelCase CSS properties \u2192 string values.");let u=e.costered??{},a={...u[t]??{styles:{}},styles:{...n}},x={...u,[t]:a};return{...e,costered:x}}function me(e){return typeof e=="string"&&e.trim().length>0}function fe(){let e=globalThis?.crypto?.randomUUID;if(typeof e=="function")return e.call(globalThis.crypto);let t=Date.now().toString(36),n=Math.random().toString(36).slice(2,10);return`${t}-${n}`}function z(e){e&&(me(e.costeredId)||(e.costeredId=fe()))}var ut=b(v());var at="desktop",ct="tablet",dt="mobile",ge=e=>{let t=String(e??"").toLowerCase();return t==="tablet"||t==="medium"?ct:t==="mobile"||t==="phone"?dt:at},Pt=e=>{try{let n=e?.("core/editor")?.getDeviceType?.();if(n)return n}catch{}try{let t=e("core/edit-post");if(t){if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType()}}catch{}try{let t=e("core/edit-site");if(t){if(typeof t.getDeviceType=="function")return t.getDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType();if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType()}}catch{}},U=e=>{try{let u=(typeof e=="function"?e(Y):(0,ut.select)(Y))?.getBreakpoint?.();if(u===at||u===ct||u===dt)return u}catch{}let t=Pt(typeof e=="function"?e:ut.select);if(t)return ge(t);if(typeof window<"u"){let n=window.__COSTERED_VIEWPORT_BP;if(n===at||n===ct||n===dt)return n}return"desktop"};var ke="desktop";function et(e,t,n={trim:!0,emptyUnsets:!0}){let u=(typeof t=="object"?t:n)||{},{trim:i=!0,emptyUnsets:a=!0,breakpoint:x}=u,h=(0,N.useSelect)(U,[]),m=x||h||ke,{updateBlockAttributes:r}=(0,N.useDispatch)("core/block-editor"),s=(0,$.useMemo)(()=>{if(typeof e=="string"||e===null){let c=e??void 0;return d=>{if(c)if(typeof d=="function"){let o=(0,N.select)("core/block-editor")?.getBlockAttributes(c)||{},y=d(o)||o;r(c,y)}else r(c,d||{})}}if(typeof e=="function"&&(typeof t=="string"||t==null)){let c=e,d=t??void 0;return o=>{if(!d)return;if(typeof o=="function"){let w=(0,N.select)("core/block-editor")?.getBlockAttributes(d)||{},T=o(w)||w;try{c(d,T)}catch{c(T)}return}let y=o||{};try{c(d,y)}catch{c(y)}}}if(typeof e=="function"){let c=e;return d=>{if(typeof d=="function"){let o=d({});c(o)}else c(d||{})}}return()=>{}},[e,t,r]),l=(0,$.useCallback)((c,d)=>{if(c==null)return;if(Rt.has(d)){let y=typeof c=="string"&&i?c.trim():String(c);return a&&y===""?void 0:y}let o=c;if(i&&typeof o=="string"&&(o=o.trim()),!(a&&(o===""||o=="null"||o=="undefined"))){if(It.has(d)){if(typeof o=="string"&&/^-?\d+(\.\d+)?$/.test(o)){let y=Number(o);return Number.isFinite(y)?y:void 0}return typeof o=="number"&&Number.isFinite(o)?o:void 0}if(typeof o=="number")return Number.isFinite(o)?o:void 0;if(typeof o=="string")return o==="null"||o==="undefined"?void 0:o;try{return String(o)}catch{return}}},[i,a]),f=(0,$.useCallback)((c,d)=>{s(o=>{let y={...o||{}};z(y),y.costered=D(y.costered);let w=l(d,c),M={...J(y,m)};if(w===void 0)if(Object.prototype.hasOwnProperty.call(M,c))delete M[c];else return o;else M[c]=String(w);return V(y,m,M)})},[s,m,l]),k=(0,$.useCallback)(c=>{!c||typeof c!="object"||s(d=>{let o={...d||{}};z(o),o.costered=D(o.costered);let w={...J(o,m)};for(let[T,M]of Object.entries(c)){let j=l(M,T);j===void 0?Object.prototype.hasOwnProperty.call(w,T)&&delete w[T]:w[T]=String(j)}return V(o,m,w)})},[s,m,l]),R=(0,$.useCallback)(c=>{s(d=>{let o={...d||{}};z(o),o.costered=D(o.costered);let y=J(o,m);if(!Object.prototype.hasOwnProperty.call(y,c))return d;let w={...y};return delete w[c],V(o,m,w)})},[s,m]),A=(0,$.useCallback)(c=>{!Array.isArray(c)||c.length===0||s(d=>{let o={...d||{}};z(o),o.costered=D(o.costered);let y=J(o,m),w=!1,T={...y};for(let M=0;M<c.length;M++){let j=c[M];Object.prototype.hasOwnProperty.call(T,j)&&(delete T[j],w=!0)}return w?V(o,m,T):d})},[s,m]),_=(0,$.useCallback)(c=>({set:(d,o)=>f(`${c}${d}`,o),setMany:d=>{let o={};for(let[y,w]of Object.entries(d))o[`${c}${y}`]=w;k(o)},unset:d=>R(`${c}${d}`),unsetMany:d=>A(d.map(o=>`${c}${o}`))}),[f,k,R,A]);return{set:f,setMany:k,unset:R,unsetMany:A,withPrefix:_,activeBreakpoint:m}}var Ot=b(I());var q=b(I());function G(e,t,n){return Math.min(Math.max(e,t),n)}function B(e,t=1){let n=Number(e);return Number.isFinite(n)?Math.trunc(n):t}function P(e){if(typeof e=="number")return Number.isInteger(e);let t=String(e);return/^-?\d+$/.test(t)}function pt(e,t=1){let n=Number.parseInt(String(e),10);return Number.isFinite(n)&&n!==0?n:t}function $t(e){let t=Number.parseInt(String(e),10);return Number.isFinite(t)?t:""}var lt=e=>{let t={start:"",span:"",end:""},n=String(e??"").trim();if(!n)return t;let u=n.split("/").map(h=>h.trim());if(u.length===1)return/^span\s+\d+$/i.test(u[0])?t.span=u[0].replace(/^span\s+/i,""):t.start=u[0],t;let i=u[0],a=u[1];t.start=i||"auto";let x=/^span\s+(\d+)$/i.exec(a);return x?t.span=x[1]:t.end=a,t},X=({start:e,span:t,end:n},{mode:u="span",collapseSpanOne:i=!0}={})=>{let a=String(e??"").trim()||"auto";if(u==="end"){let h=String(n??"").trim()||"auto";return`${a} / ${h}`}let x=B(t,1);return i&&x===1&&a!=="auto"?a:`${a} / span ${x}`},mt=e=>{let t=new Set,n=/\[([^\]]+)\]/g,u;for(;(u=n.exec(String(e??"")))!==null;){let i=u[1].trim();i&&i.split(/\s+/).forEach(a=>t.add(a))}return Array.from(t)},_t=e=>/\//.test(String(e??""))||/\bspan\s+\d+\b/i.test(String(e??""));function ft(e){let{set:t,setMany:n,unset:u}=et(e),i=(0,q.useCallback)(m=>{let r=typeof m=="string"?m.trim():"";if(!r){u("gridArea");return}t("gridArea",r)},[t,u]),a=(0,q.useCallback)((m,r,s,l)=>{let f={};m!==void 0&&(f.gridRowStart=m||void 0),r!==void 0&&(f.gridRowEnd=r||void 0),s!==void 0&&(f.gridColumnStart=s||void 0),l!==void 0&&(f.gridColumnEnd=l||void 0),n(f)},[n]),x=(0,q.useCallback)((m,r)=>{let s=m==="end"?X({start:r.start,end:r.end},{mode:"end"}):X({start:r.start,span:r.span},{mode:"span"});t("gridColumn",s)},[t]),h=(0,q.useCallback)((m,r)=>{let s=m==="end"?X({start:r.start,end:r.end},{mode:"end"}):X({start:r.start,span:r.span},{mode:"span"});t("gridRow",s)},[t]);return{setArea:i,setTracks:a,writeColumn:x,writeRow:h,set:t,setMany:n,unset:u}}var Ae=b(v()),xe=b(L()),we=b(I());var Dt=b(I()),Be=b(v()),Te=b(L());var Me=b(I()),Re=b(v());var Ie=b(v()),ve=b(I());var Ee=b(v()),Pe=b(L());var Oe=b(v()),$e=b(L()),_e=b(I());var rr=Object.freeze({});var jt=b(v()),De=b(Gt()),Ne=b(I());var Lt=Number.MAX_SAFE_INTEGER;function Ge({clientId:e,setMany:t,parentMeta:n}){if(!e)return null;let{get:u}=it(e),{writeColumn:i,writeRow:a}=ft(e),x=_t(u("gridArea")),h=n?.columns??0,m=n?.rows??0,r=(0,g.useMemo)(()=>lt(u("gridColumn")),[u]),s=(0,g.useMemo)(()=>lt(u("gridRow")),[u]),l=r.end?"end":"span",f=s.end?"end":"span",[k,R]=(0,g.useState)(l),[A,_]=(0,g.useState)(f);(0,g.useEffect)(()=>{R(l)},[l]),(0,g.useEffect)(()=>{_(f)},[f]);let c=(0,g.useMemo)(()=>mt(n.columnTemplate),[n.columnTemplate]),d=(0,g.useMemo)(()=>mt(n.rowTemplate),[n.rowTemplate]),o=c.length>0,y=d.length>0,w=(p,S)=>S?P(p)?"number":"named":"number",T=p=>p?P(p)?"number":p==="auto"?"auto":"named":"number",M=(p,S)=>{let nt=T(p);return S?nt:nt==="named"?"number":nt},j=w(r.start,o),je=w(s.start,y),Le=M(r.end,o),We=M(s.end,y),K=(0,g.useMemo)(()=>{if(!h||!P(r.start))return Lt;let p=G(B(r.start,1),1,h);return Math.max(1,h-p+1)},[h,r.start]),F=(0,g.useMemo)(()=>{if(!m||!P(s.start))return Lt;let p=G(B(s.start,1),1,m);return Math.max(1,m-p+1)},[m,s.start]),[Wt,Z]=(0,g.useState)(null),[Ut,Q]=(0,g.useState)(null);(0,g.useEffect)(()=>{Z(null)},[u("gridColumn")]),(0,g.useEffect)(()=>{Q(null)},[u("gridRow")]);let Kt=(0,g.useCallback)(p=>{let S=B(p,1);r.end?i(k,{start:S,end:r.end}):i(k,{start:S,span:G(B(r.span,1),1,K)})},[r.end,r.span,K,i]),Ft=(0,g.useCallback)(p=>{let S=String(p||"auto").trim()||"auto";r.end?i(k,{start:S,end:r.end}):i(k,{start:S,span:B(r.span,1)})},[r.end,r.span,i]),Ht=(0,g.useCallback)(p=>{let S=G(B(p,1),1,K);i(k,{start:r.start||"auto",span:S})},[r.start,K,i]),Yt=(0,g.useCallback)(p=>{let S=B(p,0);Z(S),p!==0&&(i(k,{start:r.start||"auto",end:pt(p,1)}),Z(null))},[r.start,i]),Jt=(0,g.useCallback)(p=>{i(k,{start:r.start||"auto",end:String(p||"auto").trim()||"auto"})},[r.start,i]),Vt=(0,g.useCallback)(()=>{i(k,{start:r.start||"auto",end:"auto"})},[r.start,i]),zt=(0,g.useCallback)(p=>{let S=B(p,1);s.end?a(A,{start:S,end:s.end}):a(A,{start:S,span:G(B(s.span,1),1,F)})},[s.end,s.span,F,a]),Xt=(0,g.useCallback)(p=>{let S=String(p||"auto").trim()||"auto";s.end?a(A,{start:S,end:s.end}):a(A,{start:S,span:B(s.span,1)})},[s.end,s.span,A,a]),qt=(0,g.useCallback)(p=>{let S=G(B(p,1),1,F);a(A,{start:s.start||"auto",span:S})},[s.start,F,a]),Zt=(0,g.useCallback)(p=>{let S=B(p,0);Q(S),p!==0&&(a(A,{start:s.start||"auto",end:pt(p,1)}),Q(null))},[s.start,A,a]),Qt=(0,g.useCallback)(p=>{a(A,{start:s.start||"auto",end:String(p||"auto").trim()||"auto"})},[s.start,A,a]),te=(0,g.useCallback)(()=>{a(A,{start:s.start||"auto",end:"auto"})},[s.start,A,a]);return{hasArea:x,disabledLines:x,numbers:{isIntToken:P,toInt:B,parseSigned:$t},column:{values:{...r},modes:{uiStart:o?P(r.start)?"number":"named":"number",uiEnd:r.end?P(r.end)?"number":String(r.end)==="auto"?"auto":"named":"number",mode:k},setMode:R,named:{lines:c,hasLines:o},caps:{span:K},drafts:{end:Wt,setEnd:Z},handlers:{onStartNumber:Kt,onStartNamed:Ft,onSpan:Ht,onEndNumber:Yt,onEndNamed:Jt,onEndAuto:Vt}},row:{values:{...s},modes:{uiStart:y?P(s.start)?"number":"named":"number",uiEnd:s.end?P(s.end)?"number":String(s.end)==="auto"?"auto":"named":"number",mode:A},setMode:_,named:{lines:d,hasLines:y},caps:{span:F},drafts:{end:Ut,setEnd:Q},handlers:{onStartNumber:zt,onStartNamed:Xt,onSpan:qt,onEndNumber:Zt,onEndNamed:Qt,onEndAuto:te}}}}})();
