(()=>{var ee=Object.create;var gt=Object.defineProperty;var ne=Object.getOwnPropertyDescriptor;var re=Object.getOwnPropertyNames;var oe=Object.getPrototypeOf,se=Object.prototype.hasOwnProperty;var tt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ie=(t,e,n,u)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of re(e))!se.call(t,s)&&s!==n&&gt(t,s,{get:()=>e[s],enumerable:!(u=ne(e,s))||u.enumerable});return t};var b=(t,e,n)=>(n=t!=null?ee(oe(t)):{},ie(e||!t||!t.__esModule?gt(n,"default",{value:t,enumerable:!0}):n,t));var I=tt((Fe,yt)=>{yt.exports=wp.element});var v=tt((He,kt)=>{kt.exports=wp.data});var L=tt((Ye,bt)=>{bt.exports=wp.blockEditor});var Gt=tt((sr,Nt)=>{Nt.exports=wp.preferences});var g=b(I());var st=b(v()),Et=b(L()),O=b(I());var B={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var H=t=>Array.isArray(t)?t:[],ue=t=>new Set(H(t));function E(t){let e=B.attributes||{};return Object.fromEntries(Object.entries(e).filter(([,n])=>n.group===t))}var St=E("display"),At=E("dimension"),wt=E("margin"),xt=E("padding"),Ct=E("flex"),ht=E("flex-item"),Bt=E("grid"),rt=E("grid-item"),Mt=E("position"),Tt=E("shared"),ze={...St,...At,...wt,...xt,...Ct,...ht,...Bt,...rt,...Mt,...Tt},Rt=new Set([...Object.keys(rt)]),Xe=H(B?.collections?.editorStyles),It=ue(B?.collections?.unitless),ce=B?.settings?.gridUnit||"1fr",qe=!!B?.settings?.appendImportantToMirroredStyles,Ze=B?.settings?.styleTagId||"costered-blocks-style-mirror",Y=B?.settings?.reduxStoreKey||"costered/ui",Qe=B?.settings?.breakpoints?.mobile??782,tn=B?.settings?.breakpoints?.tablet??1024,en=B?.settings?.breakpoints?.desktop??1440,nn=H(B?.collections?.clearSets?.gridAreas),rn=H(B?.collections?.clearSets?.gridColumns),on=H(B?.collections?.clearSets?.gridRows);var de=new Set([...Object.keys(St),...Object.keys(At),...Object.keys(xt),...Object.keys(wt),...Object.keys(Ct),...Object.keys(ht),...Object.keys(Bt),...Object.keys(rt),...Object.keys(Mt),...Object.keys(Tt)]),sn=Object.fromEntries(Object.entries(B.attributes).map(([t,e])=>[t,e.css]));var D=t=>{let e=s=>{let a=s?.styles;return a&&typeof a=="object"&&!Array.isArray(a)?{...s,styles:{...a}}:{...s||{},styles:{}}},n=t&&typeof t=="object"?t:{},u=!!n.desktop||!!n.tablet||!!n.mobile;return{desktop:e(n.desktop),tablet:e(n.tablet),mobile:e(n.mobile)}};var ot=t=>t==null||t===""||t==="null"||t==="undefined";var le="desktop",pe=Object.freeze({});function vt(t,e){let n=t?t[e]:void 0;return typeof n=="string"||typeof n=="number"?n:void 0}function W(t,e){let n=t||pe,u={...n},s=D(n.costered),a=r=>{switch(r){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},S=(r,i={})=>{let p=i&&Object.prototype.hasOwnProperty.call(i,"cascade")?!!i.cascade:!0,f=i&&Object.prototype.hasOwnProperty.call(i,"raw")?!!i.raw:!p,k=e||le;if(f){let w=vt(s?.[k]?.styles||{},r);return ot(w)?void 0:w}let C=a(k);for(let w of C){let _=vt(s?.[w]?.styles||{},r);if(!ot(_))return _}};return Object.defineProperties(u,{$get:{value:S,enumerable:!1},$getCascade:{value:r=>S(r,{cascade:!0}),enumerable:!1},$getMany:{value:(r,i)=>{let p={};for(let f=0;f<r.length;f++){let k=r[f];p[k]=S(k,i)}return p},enumerable:!1},$bp:{value:e,enumerable:!1}}),u}function it(t){let e=t??void 0,n=(0,st.useSelect)(p=>p(Y)?.getBreakpoint?.()||"desktop",[]),u=(0,st.useSelect)(p=>e?p(Et.store)?.getBlockAttributes?.(e):void 0,[e]),s=(0,O.useMemo)(()=>u?W(u,n):void 0,[u,n]),a=(0,O.useCallback)((p,f)=>{if(s?.$get)return s.$get(p,f)},[s]),S=(0,O.useCallback)((p,f)=>s?.$get?s.$get(p,f):void 0,[s]),h=(0,O.useCallback)((p,f)=>s?.$getMany?s.$getMany([...p],f):Object.fromEntries(p.map(k=>[k,void 0])),[s]),m=(0,O.useCallback)((p,f="",k)=>{let C=a(p,k);return typeof C=="string"?C:f},[a]),r=(0,O.useCallback)((p,f=0,k)=>{let C=a(p,k);return typeof C=="number"?C:f},[a]);function i(p,f,k){let C=a(p);return typeof C=="string"&&f.includes(C)?C:k}return(0,O.useMemo)(()=>({get:a,getAs:S,getMany:h,getString:m,getNumber:r,getEnum:i,bp:n,attributes:s}),[a,S,h,m,r,i,n,s])}var $=b(I()),N=b(v());function V(t,e){if(t?.costered!==void 0){let s=t,a=s.costered??(s.costered={}),S=a[e]??(a[e]={styles:{}});return S.styles??(S.styles={})}let n=t?.costered?.styles??("desktop"in t||"tablet"in t||"mobile"in t?t:void 0);n||(n={},t?.costered?t.costered.styles=n:t?.costered===void 0&&t?t.costered={styles:n}:Object.assign(t,n));let u;return e==="mobile"?u=n.mobile??(n.mobile={}):e==="tablet"?u=n.tablet??(n.tablet={}):u=n.desktop??(n.desktop={}),u}function J(t,e,n){if(!n||typeof n!="object"||Array.isArray(n))throw new Error("withBreakpointStyles expects a plain object of camelCase CSS properties \u2192 string values.");let u=t.costered??{},a={...u[e]??{styles:{}},styles:{...n}},S={...u,[e]:a};return{...t,costered:S}}function me(t){return typeof t=="string"&&t.trim().length>0}function fe(){let t=globalThis?.crypto?.randomUUID;if(typeof t=="function")return t.call(globalThis.crypto);let e=Date.now().toString(36),n=Math.random().toString(36).slice(2,10);return`${e}-${n}`}function z(t){t&&(me(t.costeredId)||(t.costeredId=fe()))}var at=b(v());var ut="desktop",ct="tablet",dt="mobile",ge=t=>{let e=String(t??"").toLowerCase();return e==="tablet"||e==="medium"?ct:e==="mobile"||e==="phone"?dt:ut},Pt=t=>{try{let n=t?.("core/editor")?.getDeviceType?.();if(n)return n}catch{}try{let e=t("core/edit-post");if(e){if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType()}}catch{}try{let e=t("core/edit-site");if(e){if(typeof e.getDeviceType=="function")return e.getDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType();if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType()}}catch{}},U=t=>{try{let u=(typeof t=="function"?t(Y):(0,at.select)(Y))?.getBreakpoint?.();if(u===ut||u===ct||u===dt)return u}catch{}let e=Pt(typeof t=="function"?t:at.select);if(e)return ge(e);if(typeof window<"u"){let n=window.__COSTERED_VIEWPORT_BP;if(n===ut||n===ct||n===dt)return n}return"desktop"};var ye="desktop";function et(t,e,n={trim:!0,emptyUnsets:!0}){let u=(typeof e=="object"?e:n)||{},{trim:s=!0,emptyUnsets:a=!0,breakpoint:S}=u,h=(0,N.useSelect)(U,[]),m=S||h||ye,{updateBlockAttributes:r}=(0,N.useDispatch)("core/block-editor"),i=(0,$.useMemo)(()=>{if(typeof t=="string"||t===null){let c=t??void 0;return d=>{if(c)if(typeof d=="function"){let o=(0,N.select)("core/block-editor")?.getBlockAttributes(c)||{},y=d(o)||o;r(c,y)}else r(c,d||{})}}if(typeof t=="function"&&(typeof e=="string"||e==null)){let c=t,d=e??void 0;return o=>{if(!d)return;if(typeof o=="function"){let x=(0,N.select)("core/block-editor")?.getBlockAttributes(d)||{},T=o(x)||x;try{c(d,T)}catch{c(T)}return}let y=o||{};try{c(d,y)}catch{c(y)}}}if(typeof t=="function"){let c=t;return d=>{if(typeof d=="function"){let o=d({});c(o)}else c(d||{})}}return()=>{}},[t,e,r]),p=(0,$.useCallback)((c,d)=>{if(c==null)return;if(Rt.has(d)){let y=typeof c=="string"&&s?c.trim():String(c);return a&&y===""?void 0:y}let o=c;if(s&&typeof o=="string"&&(o=o.trim()),!(a&&(o===""||o=="null"||o=="undefined"))){if(It.has(d)){if(typeof o=="string"&&/^-?\d+(\.\d+)?$/.test(o)){let y=Number(o);return Number.isFinite(y)?y:void 0}return typeof o=="number"&&Number.isFinite(o)?o:void 0}if(typeof o=="number")return Number.isFinite(o)?o:void 0;if(typeof o=="string")return o==="null"||o==="undefined"?void 0:o;try{return String(o)}catch{return}}},[s,a]),f=(0,$.useCallback)((c,d)=>{i(o=>{let y={...o||{}};z(y),y.costered=D(y.costered);let x=p(d,c),R={...V(y,m)};if(x===void 0)if(Object.prototype.hasOwnProperty.call(R,c))delete R[c];else return o;else R[c]=String(x);return J(y,m,R)})},[i,m,p]),k=(0,$.useCallback)(c=>{!c||typeof c!="object"||i(d=>{let o={...d||{}};z(o),o.costered=D(o.costered);let x={...V(o,m)};for(let[T,R]of Object.entries(c)){let j=p(R,T);j===void 0?Object.prototype.hasOwnProperty.call(x,T)&&delete x[T]:x[T]=String(j)}return J(o,m,x)})},[i,m,p]),C=(0,$.useCallback)(c=>{i(d=>{let o={...d||{}};z(o),o.costered=D(o.costered);let y=V(o,m);if(!Object.prototype.hasOwnProperty.call(y,c))return d;let x={...y};return delete x[c],J(o,m,x)})},[i,m]),w=(0,$.useCallback)(c=>{!Array.isArray(c)||c.length===0||i(d=>{let o={...d||{}};z(o),o.costered=D(o.costered);let y=V(o,m),x=!1,T={...y};for(let R=0;R<c.length;R++){let j=c[R];Object.prototype.hasOwnProperty.call(T,j)&&(delete T[j],x=!0)}return x?J(o,m,T):d})},[i,m]),_=(0,$.useCallback)(c=>({set:(d,o)=>f(`${c}${d}`,o),setMany:d=>{let o={};for(let[y,x]of Object.entries(d))o[`${c}${y}`]=x;k(o)},unset:d=>C(`${c}${d}`),unsetMany:d=>w(d.map(o=>`${c}${o}`))}),[f,k,C,w]);return{set:f,setMany:k,unset:C,unsetMany:w,withPrefix:_,activeBreakpoint:m}}var Ot=b(I());var q=b(I());function G(t,e,n){return Math.min(Math.max(t,e),n)}function M(t,e=1){let n=Number(t);return Number.isFinite(n)?Math.trunc(n):e}function P(t){if(typeof t=="number")return Number.isInteger(t);let e=String(t);return/^-?\d+$/.test(e)}function lt(t,e=1){let n=Number.parseInt(String(t),10);return Number.isFinite(n)&&n!==0?n:e}function $t(t){let e=Number.parseInt(String(t),10);return Number.isFinite(e)?e:""}var pt=t=>{let e={start:"",span:"",end:""},n=String(t??"").trim();if(!n)return e;let u=n.split("/").map(h=>h.trim());if(u.length===1)return/^span\s+\d+$/i.test(u[0])?e.span=u[0].replace(/^span\s+/i,""):e.start=u[0],e;let s=u[0],a=u[1];e.start=s||"auto";let S=/^span\s+(\d+)$/i.exec(a);return S?e.span=S[1]:e.end=a,e},X=({start:t,span:e,end:n},{mode:u="span",collapseSpanOne:s=!0}={})=>{let a=String(t??"").trim()||"auto";if(u==="end"){let h=String(n??"").trim()||"auto";return`${a} / ${h}`}let S=M(e,1);return s&&S===1&&a!=="auto"?a:`${a} / span ${S}`},mt=t=>{let e=new Set,n=/\[([^\]]+)\]/g,u;for(;(u=n.exec(String(t??"")))!==null;){let s=u[1].trim();s&&s.split(/\s+/).forEach(a=>e.add(a))}return Array.from(e)},_t=t=>/\//.test(String(t??""))||/\bspan\s+\d+\b/i.test(String(t??""));function ft(t){let{set:e,setMany:n,unset:u}=et(t),s=(0,q.useCallback)(m=>{let r=typeof m=="string"?m.trim():"";if(!r){u("gridArea");return}e("gridArea",r)},[e,u]),a=(0,q.useCallback)((m,r,i,p)=>{let f={};m!==void 0&&(f.gridRowStart=m||void 0),r!==void 0&&(f.gridRowEnd=r||void 0),i!==void 0&&(f.gridColumnStart=i||void 0),p!==void 0&&(f.gridColumnEnd=p||void 0),n(f)},[n]),S=(0,q.useCallback)((m,r)=>{let i=m==="end"?X({start:r.start,end:r.end},{mode:"end"}):X({start:r.start,span:r.span},{mode:"span"});e("gridColumn",i)},[e]),h=(0,q.useCallback)((m,r)=>{let i=m==="end"?X({start:r.start,end:r.end},{mode:"end"}):X({start:r.start,span:r.span},{mode:"span"});e("gridRow",i)},[e]);return{setArea:s,setTracks:a,writeColumn:S,writeRow:h,set:e,setMany:n,unset:u}}var Ae=b(v()),we=b(L()),xe=b(I());var Dt=b(I()),Be=b(v()),Me=b(L());var Te=b(I()),Re=b(v());var Ie=b(v()),ve=b(I());var Ee=b(v()),Pe=b(L());var Oe=b(v()),$e=b(L()),_e=b(I());var rr=Object.freeze({});var jt=b(v()),De=b(Gt()),Ne=b(I());var Lt=Number.MAX_SAFE_INTEGER;function Ge({clientId:t,setMany:e,parentMeta:n}){if(!t)return null;let{get:u}=it(t),{writeColumn:s,writeRow:a}=ft(t),S=_t(u("gridArea")),h=n?.columns??0,m=n?.rows??0,r=(0,g.useMemo)(()=>pt(u("gridColumn")),[u]),i=(0,g.useMemo)(()=>pt(u("gridRow")),[u]),p=r.end?"end":"span",f=i.end?"end":"span",[k,C]=(0,g.useState)(p),[w,_]=(0,g.useState)(f);(0,g.useEffect)(()=>{C(p)},[p]),(0,g.useEffect)(()=>{_(f)},[f]);let c=(0,g.useMemo)(()=>mt(n.columnTemplate),[n.columnTemplate]),d=(0,g.useMemo)(()=>mt(n.rowTemplate),[n.rowTemplate]),o=c.length>0,y=d.length>0,x=(l,A)=>A?P(l)?"number":"named":"number",T=l=>l?P(l)?"number":l==="auto"?"auto":"named":"number",R=(l,A)=>{let nt=T(l);return A?nt:nt==="named"?"number":nt},j=x(r.start,o),je=x(i.start,y),Le=R(r.end,o),We=R(i.end,y),K=(0,g.useMemo)(()=>{if(!h||!P(r.start))return Lt;let l=G(M(r.start,1),1,h);return Math.max(1,h-l+1)},[h,r.start]),F=(0,g.useMemo)(()=>{if(!m||!P(i.start))return Lt;let l=G(M(i.start,1),1,m);return Math.max(1,m-l+1)},[m,i.start]),[Wt,Z]=(0,g.useState)(null),[Ut,Q]=(0,g.useState)(null);(0,g.useEffect)(()=>{Z(null)},[u("gridColumn")]),(0,g.useEffect)(()=>{Q(null)},[u("gridRow")]);let Kt=(0,g.useCallback)(l=>{let A=M(l,1);r.end?s(k,{start:A,end:r.end}):s(k,{start:A,span:G(M(r.span,1),1,K)})},[r.end,r.span,K,s]),Ft=(0,g.useCallback)(l=>{let A=String(l||"auto").trim()||"auto";r.end?s(k,{start:A,end:r.end}):s(k,{start:A,span:M(r.span,1)})},[r.end,r.span,s]),Ht=(0,g.useCallback)(l=>{let A=G(M(l,1),1,K);s(k,{start:r.start||"auto",span:A})},[r.start,K,s]),Yt=(0,g.useCallback)(l=>{let A=M(l,0);Z(A),l!==0&&(s(k,{start:r.start||"auto",end:lt(l,1)}),Z(null))},[r.start,s]),Vt=(0,g.useCallback)(l=>{s(k,{start:r.start||"auto",end:String(l||"auto").trim()||"auto"})},[r.start,s]),Jt=(0,g.useCallback)(()=>{s(k,{start:r.start||"auto",end:"auto"})},[r.start,s]),zt=(0,g.useCallback)(l=>{let A=M(l,1);i.end?a(w,{start:A,end:i.end}):a(w,{start:A,span:G(M(i.span,1),1,F)})},[i.end,i.span,F,a]),Xt=(0,g.useCallback)(l=>{let A=String(l||"auto").trim()||"auto";i.end?a(w,{start:A,end:i.end}):a(w,{start:A,span:M(i.span,1)})},[i.end,i.span,w,a]),qt=(0,g.useCallback)(l=>{let A=G(M(l,1),1,F);a(w,{start:i.start||"auto",span:A})},[i.start,F,a]),Zt=(0,g.useCallback)(l=>{let A=M(l,0);Q(A),l!==0&&(a(w,{start:i.start||"auto",end:lt(l,1)}),Q(null))},[i.start,w,a]),Qt=(0,g.useCallback)(l=>{a(w,{start:i.start||"auto",end:String(l||"auto").trim()||"auto"})},[i.start,w,a]),te=(0,g.useCallback)(()=>{a(w,{start:i.start||"auto",end:"auto"})},[i.start,w,a]);return{hasArea:S,disabledLines:S,numbers:{isIntToken:P,toInt:M,parseSigned:$t},column:{values:{...r},modes:{uiStart:o?P(r.start)?"number":"named":"number",uiEnd:r.end?P(r.end)?"number":String(r.end)==="auto"?"auto":"named":"number",mode:k},setMode:C,named:{lines:c,hasLines:o},caps:{span:K},drafts:{end:Wt,setEnd:Z},handlers:{onStartNumber:Kt,onStartNamed:Ft,onSpan:Ht,onEndNumber:Yt,onEndNamed:Vt,onEndAuto:Jt}},row:{values:{...i},modes:{uiStart:y?P(i.start)?"number":"named":"number",uiEnd:i.end?P(i.end)?"number":String(i.end)==="auto"?"auto":"named":"number",mode:w},setMode:_,named:{lines:d,hasLines:y},caps:{span:F},drafts:{end:Ut,setEnd:Q},handlers:{onStartNumber:zt,onStartNamed:Xt,onSpan:qt,onEndNumber:Zt,onEndNamed:Qt,onEndAuto:te}}}}})();
