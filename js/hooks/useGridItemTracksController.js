(()=>{var Qt=Object.create;var lt=Object.defineProperty;var te=Object.getOwnPropertyDescriptor;var ee=Object.getOwnPropertyNames;var ne=Object.getPrototypeOf,re=Object.prototype.hasOwnProperty;var Z=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var oe=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of ee(t))!re.call(e,s)&&s!==n&&lt(e,s,{get:()=>t[s],enumerable:!(o=te(t,s))||o.enumerable});return e};var k=(e,t,n)=>(n=e!=null?Qt(ne(e)):{},oe(t||!e||!e.__esModule?lt(n,"default",{value:e,enumerable:!0}):n,e));var v=Z((Ke,mt)=>{mt.exports=wp.element});var M=Z((Fe,ft)=>{ft.exports=wp.data});var L=Z((Ye,gt)=>{gt.exports=wp.blockEditor});var Ot=Z((ir,$t)=>{$t.exports=wp.preferences});var y=k(v());var it=k(M()),It=k(L()),$=k(v());var C={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var yt=e=>Array.isArray(e)?e:[],ie=e=>new Set(yt(e));function B(e){return Object.fromEntries(Object.entries(C.attributes).filter(([t,n])=>n.group===e))}var kt=B("display"),bt=B("dimension"),St=B("margin"),wt=B("padding"),xt=B("flex"),At=B("flex-item"),ht=B("grid"),nt=B("grid-item"),Tt=B("position"),Ct=B("shared"),Xe={...kt,...bt,...St,...wt,...xt,...At,...ht,...nt,...Tt,...Ct},Rt=new Set([...Object.keys(nt)]),qe=yt(C?.collections?.editorStyles),vt=ie(C?.collections?.unitless),ue=C?.settings?.gridUnit||"1fr",Ze=!!C?.settings?.appendImportantToMirroredStyles,Je=C?.settings?.styleTagId||"costered-blocks-style-mirror",J=C?.settings?.reduxStoreKey||"costered/ui",Qe=C?.settings?.breakpoints?.mobile??782,tn=C?.settings?.breakpoints?.tablet??1024,en=C?.settings?.breakpoints?.desktop??1440,nn=C?.collections?.clearSets?.gridAreas,rn=C?.collections?.clearSets?.gridColumns,on=C?.collections?.clearSets?.gridRows;var ae=new Set([...Object.keys(kt),...Object.keys(bt),...Object.keys(wt),...Object.keys(St),...Object.keys(xt),...Object.keys(At),...Object.keys(ht),...Object.keys(nt),...Object.keys(Tt),...Object.keys(Ct)]),sn=Object.fromEntries(Object.entries(C.attributes).map(([e,t])=>[e,t.css]));var D=e=>{let t=e||{},n=s=>{if(Array.isArray(s))return s;if(s&&typeof s=="object"){let a=[];for(let[f,m]of Object.entries(s))m!==void 0&&a.push({property:f,value:m});return a}return[]},o={desktop:{styles:[]},tablet:{styles:[]},mobile:{styles:[]},...t};return o.desktop={styles:n(t.desktop.styles),...t.desktop||{}},o.tablet={styles:n(t.tablet.styles),...t.tablet||{}},o.mobile={styles:n(t.mobile.styles),...t.mobile||{}},o};var rt=e=>e==null||e===""||e==="null"||e==="undefined";function ce(e){return Array.isArray(e)}function ot(e){if(ce(e)){let[t,n,o]=e;return o!==void 0?{property:t,value:n,important:o}:{property:t,value:n}}return e}function Mt(e){if(!Array.isArray(e)||e.length===0)return[];let t=[];for(let n=0;n<e.length;n++)t.push(ot(e[n]));return t}function st(e,t,n,o){let s=Array.isArray(e)?e.slice():[],a=-1;for(let m=0;m<s.length;m++)if(ot(s[m]).property===t){a=m;break}let f=o!==void 0?{property:t,value:n,important:o}:{property:t,value:n};return a===-1?s.push(f):s[a]=f,s}function K(e,t){let n=Array.isArray(e)?Array.from(e):[],o=[];for(let s=0;s<n.length;s++)ot(n[s]).property!==t&&o.push(n[s]);return o}var pe="desktop",de=Object.freeze({});function Bt(e,t){let n=Mt(e);for(let o=0;o<n.length;o++){let s=n[o];if(s.property===t)return s.value}}function j(e,t){let n=e||de,o={...n},s=D(n.costered),a=i=>{switch(i){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},f=(i,u={})=>{let h=u&&Object.prototype.hasOwnProperty.call(u,"cascade")?!!u.cascade:!0,x=u&&Object.prototype.hasOwnProperty.call(u,"raw")?!!u.raw:!h,A=t||pe;if(x){let S=Bt(s?.[A]?.styles,i);return rt(S)?void 0:S}let P=a(A);for(let S of P){let _=Bt(s?.[S]?.styles,i);if(!rt(_))return _}};return Object.defineProperties(o,{$get:{value:f,enumerable:!1},$getCascade:{value:i=>f(i,{cascade:!0}),enumerable:!1},$getMany:{value:(i,u)=>{let h={};for(let x=0;x<i.length;x++){let A=i[x];h[A]=f(A,u)}return h},enumerable:!1},$bp:{value:t,enumerable:!1}}),o}function ut(e){let t=(0,it.useSelect)(m=>m(J)?.getBreakpoint?.()||"desktop",[]),n=(0,it.useSelect)(m=>e?m(It.store)?.getBlockAttributes?.(e):void 0,[e]),o=(0,$.useMemo)(()=>n?j(n,t):void 0,[n,t]),s=(0,$.useCallback)((m,p)=>{if(o?.$get)return o.$get(m,p)},[o]),a=(0,$.useCallback)((m,p)=>o?.$get?o.$get(m,p):void 0,[o]),f=(0,$.useCallback)((m,p)=>o?.$getMany?o.$getMany([...m],p):Object.fromEntries(m.map(i=>[i,void 0])),[o]);return(0,$.useMemo)(()=>({get:s,getAs:a,getMany:f,bp:t,attributes:o}),[s,a,f,t,o])}var E=k(v()),O=k(M());function le(e){return typeof e=="string"&&e.trim().length>0}function me(){let e=globalThis?.crypto?.randomUUID;if(typeof e=="function")return e.call(globalThis.crypto);let t=Date.now().toString(36),n=Math.random().toString(36).slice(2,10);return`${t}-${n}`}function F(e){e&&(le(e.costeredId)||(e.costeredId=me()))}var Y=k(M());var fe=e=>{let t=String(e??"").toLowerCase();return t==="mobile"||t==="phone"||t==="tablet"?"mobile":"desktop"},ge=e=>{try{let t=e("core/edit-post");if(t){if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType()}}catch{}try{let t=e("core/edit-site");if(t){if(typeof t.getDeviceType=="function")return t.getDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType();if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType()}}catch{}},W=e=>{try{let n=(0,Y.select)(J);if(n&&typeof n.getBreakpoint=="function"){let o=n.getBreakpoint();if(o)return o}}catch{}let t=ge(e);if(t)return fe(t);if(typeof window<"u"&&typeof window.__COSTERED_VIEWPORT_BP=="string")return window.__COSTERED_VIEWPORT_BP||"desktop";try{if(window.COSTERED_DEBUG){let n=(0,Y.select)(STORE_KEY),o=n&&typeof n.getBreakpoint=="function"?n.getBreakpoint():null,s=(0,Y.select)("core/edit-post"),a=s&&(typeof s.getPreviewDeviceType=="function"&&s.getPreviewDeviceType()||typeof s.__experimentalGetPreviewDeviceType=="function"&&s.__experimentalGetPreviewDeviceType()),f=(0,Y.select)("core/edit-site"),m=f&&(typeof f.getDeviceType=="function"&&f.getDeviceType()||typeof f.__experimentalGetPreviewDeviceType=="function"&&f.__experimentalGetPreviewDeviceType()||typeof f.getPreviewDeviceType=="function"&&f.getPreviewDeviceType())}}catch{}return"desktop"};var ye="desktop";function Q(e,t,n={trim:!0,emptyUnsets:!0}){let o=(typeof t=="object"?t:n)||{},{trim:s=!0,emptyUnsets:a=!0,breakpoint:f}=o,m=(0,O.useSelect)(W,[]),p=f||m||ye,{updateBlockAttributes:i}=(0,O.useDispatch)("core/block-editor"),u=(0,E.useMemo)(()=>{if(typeof e=="string"){let c=e;return d=>{if(c)if(typeof d=="function"){let r=(0,O.select)("core/block-editor")?.getBlockAttributes(c)||{},g=d(r)||r;i(c,g)}else i(c,d||{})}}if(typeof e=="function"&&typeof t=="string"){let c=e,d=t;return r=>{if(!d)return;if(typeof r=="function"){let w=(0,O.select)("core/block-editor")?.getBlockAttributes(d)||{},T=r(w)||w;try{c(d,T)}catch{c(T)}return}let g=r||{};try{c(d,g)}catch{c(g)}}}if(typeof e=="function"){let c=e;return d=>{if(typeof d=="function"){let r=d({});c(r)}else c(d||{})}}return()=>{}},[e,t,i]),h=(0,E.useCallback)((c,d)=>{if(c==null)return;if(Rt.has(d)){let g=typeof c=="string"&&s?c.trim():String(c);return a&&g===""?void 0:g}let r=c;if(s&&typeof r=="string"&&(r=r.trim()),!(a&&(r===""||r=="null"||r=="undefined"))){if(vt.has(d)){if(typeof r=="string"&&/^-?\d+(\.\d+)?$/.test(r)){let g=Number(r);return Number.isFinite(g)?g:void 0}return typeof r=="number"&&Number.isFinite(r)?r:void 0}if(typeof r=="number")return Number.isFinite(r)?r:void 0;if(typeof r=="string")return r==="null"||r==="undefined"?void 0:r;try{return String(r)}catch{return}}},[s,a]),x=(0,E.useCallback)((c,d)=>{u(r=>{let g={...r||{}};F(g),g.costered=D(g.costered);let w=g.costered[p].styles,T=h(d,c),G=T===void 0?K(w,c):st(w,c,T);return g.costered[p]={...g.costered[p],styles:G},g})},[u,p,h]),A=(0,E.useCallback)(c=>{!c||typeof c!="object"||u(d=>{let r={...d||{}};F(r),r.costered=D(r.costered);let w=r.costered[p].styles;for(let[T,G]of Object.entries(c)){let tt=h(G,T);w=tt===void 0?K(w,T):st(w,T,tt)}return r.costered[p]={...r.costered[p],styles:w||[]},r})},[u,p,h]),P=(0,E.useCallback)(c=>{u(d=>{let r={...d||{}};F(r),r.costered=D(r.costered);let g=r.costered[p].styles,w=K(g,c);return(g?.length||0)===w.length?d:(r.costered[p]={...r.costered[p],styles:w},r)})},[u,p]),S=(0,E.useCallback)(c=>{!Array.isArray(c)||c.length===0||u(d=>{let r={...d||{}};F(r),r.costered=D(r.costered);let w=r.costered[p]?.styles;for(let T=0;T<c.length;T++)w=K(w,c[T]);return r.costered[p]={...r.costered[p],styles:w||[]},r})},[u,p]),_=(0,E.useCallback)(c=>({set:(d,r)=>x(`${c}${d}`,r),setMany:d=>{let r={};for(let[g,w]of Object.entries(d))r[`${c}${g}`]=w;A(r)},unset:d=>P(`${c}${d}`),unsetMany:d=>S(d.map(r=>`${c}${r}`))}),[x,A,P,S]);return{set:x,setMany:A,unset:P,unsetMany:S,withPrefix:_,activeBreakpoint:p}}var Et=k(v());var z=k(v());function N(e,t,n){return Math.min(Math.max(e,t),n)}function R(e,t=1){let n=Number(e);return Number.isFinite(n)?Math.trunc(n):t}function I(e){if(typeof e=="number")return Number.isInteger(e);let t=String(e);return/^-?\d+$/.test(t)}function at(e,t=1){let n=Number.parseInt(String(e),10);return Number.isFinite(n)&&n!==0?n:t}function Pt(e){let t=Number.parseInt(String(e),10);return Number.isFinite(t)?t:""}var ct=e=>{let t={start:"",span:"",end:""},n=String(e??"").trim();if(!n)return t;let o=n.split("/").map(m=>m.trim());if(o.length===1)return/^span\s+\d+$/i.test(o[0])?t.span=o[0].replace(/^span\s+/i,""):t.start=o[0],t;let s=o[0],a=o[1];t.start=s||"auto";let f=/^span\s+(\d+)$/i.exec(a);return f?t.span=f[1]:t.end=a,t},V=({start:e,span:t,end:n},{mode:o="span",collapseSpanOne:s=!0}={})=>{let a=String(e??"").trim()||"auto";if(o==="end"){let m=String(n??"").trim()||"auto";return`${a} / ${m}`}let f=R(t,1);return s&&f===1&&a!=="auto"?a:`${a} / span ${f}`},pt=e=>{let t=new Set,n=/\[([^\]]+)\]/g,o;for(;(o=n.exec(String(e??"")))!==null;){let s=o[1].trim();s&&s.split(/\s+/).forEach(a=>t.add(a))}return Array.from(t)},_t=e=>/\//.test(String(e??""))||/\bspan\s+\d+\b/i.test(String(e??""));function dt(e){let{set:t,setMany:n,unset:o}=Q(e),s=(0,z.useCallback)(p=>{let i=typeof p=="string"?p.trim():"";if(!i){o("gridArea");return}t("gridArea",i)},[t,o]),a=(0,z.useCallback)((p,i,u,h)=>{let x={};p!==void 0&&(x.gridRowStart=p||void 0),i!==void 0&&(x.gridRowEnd=i||void 0),u!==void 0&&(x.gridColumnStart=u||void 0),h!==void 0&&(x.gridColumnEnd=h||void 0),n(x)},[n]),f=(0,z.useCallback)((p,i)=>{let u=p==="end"?V({start:i.start,end:i.end},{mode:"end"}):V({start:i.start,span:i.span},{mode:"span"});t("gridColumn",u)},[t]),m=(0,z.useCallback)((p,i)=>{let u=p==="end"?V({start:i.start,end:i.end},{mode:"end"}):V({start:i.start,span:i.span},{mode:"span"});t("gridRow",u)},[t]);return{setArea:s,setTracks:a,writeColumn:f,writeRow:m,set:t,setMany:n,unset:o}}var we=k(M()),xe=k(L()),Ae=k(v());var Dt=k(v()),Ce=k(M()),Re=k(L());var ve=k(v()),Me=k(M());var Be=k(M()),Ie=k(v());var Ee=k(M()),Pe=k(L());var _e=k(M()),De=k(L()),$e=k(v());var or=Object.freeze({});var Nt=k(M()),Oe=k(Ot()),Ne=k(v());var Gt=Number.MAX_SAFE_INTEGER;function Ge({clientId:e,setMany:t,parentMeta:n}){if(!e)return null;let{get:o}=ut(e),{writeColumn:s,writeRow:a}=dt(e),f=_t(o("gridArea")),m=n?.columns??0,p=n?.rows??0,i=(0,y.useMemo)(()=>ct(o("gridColumn")),[o]),u=(0,y.useMemo)(()=>ct(o("gridRow")),[o]),h=i.end?"end":"span",x=u.end?"end":"span",[A,P]=(0,y.useState)(h),[S,_]=(0,y.useState)(x);(0,y.useEffect)(()=>{P(h)},[h]),(0,y.useEffect)(()=>{_(x)},[x]);let c=(0,y.useMemo)(()=>pt(n.columnTemplate),[n.columnTemplate]),d=(0,y.useMemo)(()=>pt(n.rowTemplate),[n.rowTemplate]),r=c.length>0,g=d.length>0,w=(l,b)=>b?I(l)?"number":"named":"number",T=l=>l?I(l)?"number":l==="auto"?"auto":"named":"number",G=(l,b)=>{let et=T(l);return b?et:et==="named"?"number":et},tt=w(i.start,r),Le=w(u.start,g),je=G(i.end,r),We=G(u.end,g),U=(0,y.useMemo)(()=>{if(!m||!I(i.start))return Gt;let l=N(R(i.start,1),1,m);return Math.max(1,m-l+1)},[m,i.start]),H=(0,y.useMemo)(()=>{if(!p||!I(u.start))return Gt;let l=N(R(u.start,1),1,p);return Math.max(1,p-l+1)},[p,u.start]),[Lt,X]=(0,y.useState)(null),[jt,q]=(0,y.useState)(null);(0,y.useEffect)(()=>{X(null)},[o("gridColumn")]),(0,y.useEffect)(()=>{q(null)},[o("gridRow")]);let Wt=(0,y.useCallback)(l=>{let b=R(l,1);i.end?s(A,{start:b,end:i.end}):s(A,{start:b,span:N(R(i.span,1),1,U)})},[i.end,i.span,U,s]),Ut=(0,y.useCallback)(l=>{let b=String(l||"auto").trim()||"auto";i.end?s(A,{start:b,end:i.end}):s(A,{start:b,span:R(i.span,1)})},[i.end,i.span,s]),Ht=(0,y.useCallback)(l=>{let b=N(R(l,1),1,U);s(A,{start:i.start||"auto",span:b})},[i.start,U,s]),Kt=(0,y.useCallback)(l=>{let b=R(l,0);X(b),l!==0&&(s(A,{start:i.start||"auto",end:at(l,1)}),X(null))},[i.start,s]),Ft=(0,y.useCallback)(l=>{s(A,{start:i.start||"auto",end:String(l||"auto").trim()||"auto"})},[i.start,s]),Yt=(0,y.useCallback)(()=>{s(A,{start:i.start||"auto",end:"auto"})},[i.start,s]),Vt=(0,y.useCallback)(l=>{let b=R(l,1);u.end?a(S,{start:b,end:u.end}):a(S,{start:b,span:N(R(u.span,1),1,H)})},[u.end,u.span,H,a]),zt=(0,y.useCallback)(l=>{let b=String(l||"auto").trim()||"auto";u.end?a(S,{start:b,end:u.end}):a(S,{start:b,span:R(u.span,1)})},[u.end,u.span,S,a]),Xt=(0,y.useCallback)(l=>{let b=N(R(l,1),1,H);a(S,{start:u.start||"auto",span:b})},[u.start,H,a]),qt=(0,y.useCallback)(l=>{let b=R(l,0);q(b),l!==0&&(a(S,{start:u.start||"auto",end:at(l,1)}),q(null))},[u.start,S,a]),Zt=(0,y.useCallback)(l=>{a(S,{start:u.start||"auto",end:String(l||"auto").trim()||"auto"})},[u.start,S,a]),Jt=(0,y.useCallback)(()=>{a(S,{start:u.start||"auto",end:"auto"})},[u.start,S,a]);return{hasArea:f,disabledLines:f,numbers:{isIntToken:I,toInt:R,parseSigned:Pt},column:{values:{...i},modes:{uiStart:r?I(i.start)?"number":"named":"number",uiEnd:i.end?I(i.end)?"number":String(i.end)==="auto"?"auto":"named":"number",mode:A},setMode:P,named:{lines:c,hasLines:r},caps:{span:U},drafts:{end:Lt,setEnd:X},handlers:{onStartNumber:Wt,onStartNamed:Ut,onSpan:Ht,onEndNumber:Kt,onEndNamed:Ft,onEndAuto:Yt}},row:{values:{...u},modes:{uiStart:g?I(u.start)?"number":"named":"number",uiEnd:u.end?I(u.end)?"number":String(u.end)==="auto"?"auto":"named":"number",mode:S},setMode:_,named:{lines:d,hasLines:g},caps:{span:H},drafts:{end:jt,setEnd:q},handlers:{onStartNumber:Vt,onStartNamed:zt,onSpan:Xt,onEndNumber:qt,onEndNamed:Zt,onEndAuto:Jt}}}}})();
