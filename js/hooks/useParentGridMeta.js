(()=>{var Z=Object.create;var I=Object.defineProperty;var tt=Object.getOwnPropertyDescriptor;var et=Object.getOwnPropertyNames;var nt=Object.getPrototypeOf,rt=Object.prototype.hasOwnProperty;var O=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var st=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of et(t))!rt.call(e,r)&&r!==n&&I(e,r,{get:()=>t[r],enumerable:!(s=tt(t,r))||s.enumerable});return e};var S=(e,t,n)=>(n=e!=null?Z(nt(e)):{},st(t||!e||!e.__esModule?I(n,"default",{value:e,enumerable:!0}):n,e));var k=O((dt,P)=>{P.exports=wp.data});var B=O((mt,C)=>{C.exports=wp.element});var R=S(k()),b=S(B());var x=S(k());var u={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var $=e=>Array.isArray(e)?e:[],ot=e=>new Set($(e));function g(e){return Object.fromEntries(Object.entries(u.attributes).filter(([t,n])=>n.group===e))}var j=g("display"),G=g("dimension"),M=g("margin"),L=g("padding"),N=g("flex"),H=g("flex-item"),K=g("grid"),_=g("grid-item"),Y=g("position"),V=g("shared"),xt={...j,...G,...M,...L,...N,...H,...K,..._,...Y,...V},ht=new Set([...Object.keys(_)]),bt=$(u?.collections?.editorStyles),wt=ot(u?.collections?.unitless),F=u?.settings?.gridUnit||"1fr",Tt=!!u?.settings?.appendImportantToMirroredStyles,St=u?.settings?.styleTagId||"costered-blocks-style-mirror",z=u?.settings?.reduxStoreKey||"costered/ui",kt=u?.settings?.breakpoints?.mobile??782,_t=u?.settings?.breakpoints?.tablet??1024,vt=u?.settings?.breakpoints?.desktop??1440,Et=u?.collections?.clearSets?.gridAreas,At=u?.collections?.clearSets?.gridColumns,Rt=u?.collections?.clearSets?.gridRows;var Dt=new Set([...Object.keys(j),...Object.keys(G),...Object.keys(L),...Object.keys(M),...Object.keys(N),...Object.keys(H),...Object.keys(K),...Object.keys(_),...Object.keys(Y),...Object.keys(V)]),It=Object.fromEntries(Object.entries(u.attributes).map(([e,t])=>[e,t.css]));var ct=e=>{let t=String(e||"").toLowerCase();return t==="mobile"||t==="phone"||t==="tablet"?"mobile":"desktop"},ut=e=>{try{let t=e("core/edit-post");if(t){if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType()}}catch{}try{let t=e("core/edit-site");if(t){if(typeof t.getDeviceType=="function")return t.getDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType();if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType()}}catch{}},W=e=>{try{let n=(0,x.select)(z);if(n&&typeof n.getBreakpoint=="function"){let s=n.getBreakpoint();if(s)return s}}catch{}let t=ut(e);if(t)return ct(t);if(typeof window<"u"&&typeof window.__COSTERED_VIEWPORT_BP=="string")return window.__COSTERED_VIEWPORT_BP||"desktop";try{if(window.COSTERED_DEBUG){let n=(0,x.select)(STORE_KEY),s=n&&typeof n.getBreakpoint=="function"?n.getBreakpoint():null,r=(0,x.select)("core/edit-post"),i=r&&(typeof r.getPreviewDeviceType=="function"&&r.getPreviewDeviceType()||typeof r.__experimentalGetPreviewDeviceType=="function"&&r.__experimentalGetPreviewDeviceType()),o=(0,x.select)("core/edit-site"),c=o&&(typeof o.getDeviceType=="function"&&o.getDeviceType()||typeof o.__experimentalGetPreviewDeviceType=="function"&&o.__experimentalGetPreviewDeviceType()||typeof o.getPreviewDeviceType=="function"&&o.getPreviewDeviceType())}}catch{}return"desktop"};var U=e=>{let t={desktop:{styles:{}},tablet:{styles:{}},mobile:{styles:{}},...e||{}};return t.desktop={styles:{},...t.desktop||{}},t.tablet={styles:{},...t.tablet||{}},t.mobile={styles:{},...t.mobile||{}},t.desktop.styles={...t.desktop.styles||{}},t.tablet.styles={...t.tablet.styles||{}},t.mobile.styles={...t.mobile.styles||{}},t};var v=e=>e==null||e===""||e==="null"||e==="undefined";var pt="desktop",at=Object.freeze({});function X(e,t){let n=e||at,s={...n},r=U(n.costered),i=a=>{switch(a){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},o=(a,p=void 0)=>{let d=p&&Object.prototype.hasOwnProperty.call(p,"cascade")?!!p.cascade:!0,m=p&&Object.prototype.hasOwnProperty.call(p,"raw")?!!p.raw:!d,y=t||pt;if(m){let w=r?.[y]?.styles?.[a];return v(w)?void 0:w}let Q=i(y);for(let w of Q){let D=r?.[w]?.styles?.[a];if(!v(D))return D}};return Object.defineProperties(s,{$get:{value:o,enumerable:!1},$getCascade:{value:a=>o(a,{cascade:!0}),enumerable:!1},$getMany:{value:(a,p)=>{let d={};for(let m of a)d[m]=o(m,p);return d},enumerable:!1},$bp:{value:t,enumerable:!1}}),s}function A(e,t=F){if(!e||typeof e!="string")return{count:0,unit:t};let n=e.trim();if(!n)return{count:0,unit:t};if(/^subgrid\b/i.test(n))return{count:0,unit:t};if(n=n.replace(/\[[^\]]*]/g," ").trim(),!n)return{count:0,unit:t};let s=n.match(/^\s*repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)\s*$/i);if(s){let i=s[2];return{count:0,unit:E(i,t)}}let r=lt(n,t);return{count:r.count,unit:r.unit||t}}function lt(e,t){let n=q(e);if(n){let c=n.inner.trim(),a=h(c).length,p=E(c,t);return{count:n.times*a,unit:p||t}}let s=h(e),r=0,i="";for(let c of s){if(/^\s*repeat\(/i.test(c)){let l=J(c);if(l){r+=l.count,!i&&l.unitHint&&(i=l.unitHint);continue}r+=1;continue}r+=1,!i&&T(c)&&(i=f(c)||"")}let o=i||E(e,t);return{count:r,unit:o||t}}function q(e){let t=e.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!t)return null;let n=parseInt(t[1],10),s=t[2];return!Number.isFinite(n)||n<0?null:{times:n,inner:s}}function J(e){if(e.match(/^\s*repeat\(\s*auto-(fit|fill)\s*,/i))return{count:0,unitHint:""};let n=e.match(/^\s*repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!n)return null;let s=parseInt(n[1],10)||0;if(s<=0)return{count:0,unitHint:""};let r=n[2].trim(),i=h(r),o=s*i.length,c="";if(i.length===1)c=f(i[0])||"";else{let l=i.find(T);c=f(l)||""}return{count:o,unitHint:c}}function h(e){let t=[],n=0,s="";for(let r=0;r<e.length;r++){let i=e[r];if(i==="("){n++,s+=i;continue}if(i===")"){n=Math.max(0,n-1),s+=i;continue}if(n===0&&/\s/.test(i)){s.trim()&&t.push(s.trim()),s="";continue}s+=i}return s.trim()&&t.push(s.trim()),t}function E(e,t){if(!e)return t;let n=q(e);if(n){let i=h(n.inner);if(i.length===1)return f(i[0])||t;let o=i.find(T);if(o)return f(o)||t}let s=h(e);if(s.length===1)return f(s[0])||t;let r=s.find(T);if(r)return f(r)||t;for(let i of s){let o=J(i);if(o&&o.unitHint)return o.unitHint}return t}function T(e){return e?!!(/^(minmax|fit-content|clamp|var)\(/i.test(e)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(e)||/^(auto|max-content|min-content)$/i.test(e)):!1}function f(e){return e?e.trim():""}function Kt(e){let{parentId:t,parentBlock:n}=(0,R.useSelect)(p=>{let d=p("core/block-editor"),m=e||d.getSelectedBlockClientId();if(!m)return{parentId:null,parentBlock:null};let y=d.getBlockRootClientId(m);return y?{parentId:y,parentBlock:d.getBlock(y)||null}:{parentId:null,parentBlock:null}},[e]),s=(0,R.useSelect)(W,[]),r=(0,b.useMemo)(()=>n?.attributes?X(n.attributes,s):null,[n?.attributes,s]),i=r?.$get("gridTemplateColumns",{cascade:!0}),o=r?.$get("gridTemplateRows",{cascade:!0}),{count:c}=(0,b.useMemo)(()=>A(i),[i]),{count:l}=(0,b.useMemo)(()=>A(o),[o]),a=(0,b.useMemo)(()=>{let p=r?.$get?.("display",{cascade:!0})??"";return/^(grid|inline-grid)$/i.test(String(p).trim())},[r,r?.$bp]);return{parentId:t,parentBlock:n,parent:r,isGrid:a,display:r?.$get("display",{cascade:!0}),columns:i,rows:o,areas:r?.$get("gridTemplateAreas",{cascade:!0}),columnCount:c,rowCount:l}}})();
