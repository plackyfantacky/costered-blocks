(()=>{var ot=Object.create;var B=Object.defineProperty;var st=Object.getOwnPropertyDescriptor;var it=Object.getOwnPropertyNames;var ct=Object.getPrototypeOf,ut=Object.prototype.hasOwnProperty;var x=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var at=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of it(t))!ut.call(e,o)&&o!==r&&B(e,o,{get:()=>t[o],enumerable:!(n=st(t,o))||n.enumerable});return e};var u=(e,t,r)=>(r=e!=null?ot(ct(e)):{},at(t||!e||!e.__esModule?B(r,"default",{value:e,enumerable:!0}):r,e));var p=x((Bt,P)=>{P.exports=wp.element});var m=x((Zt,q)=>{q.exports=wp.data});var y=x((Jt,Z)=>{Z.exports=wp.blockEditor});var rt=x((se,et)=>{et.exports=wp.preferences});var S=u(p());var gt=u(p());var j={display:{type:"string"},visibility:{type:"string"},overflow:{type:"string"}},G={width:{type:"string"},height:{type:"string"},maxWidth:{type:"string"},maxHeight:{type:"string"},minWidth:{type:"string"},minHeight:{type:"string"}},pt={marginTop:{type:"string"},marginRight:{type:"string"},marginBottom:{type:"string"},marginLeft:{type:"string"}},D={paddingTop:{type:"string"},paddingRight:{type:"string"},paddingBottom:{type:"string"},paddingLeft:{type:"string"}},v={flexDirection:{type:"string"},flexWrap:{type:"string"},justifyContent:{type:"string"},alignItems:{type:"string"},alignContent:{type:"string"}},N={flexGrow:{type:"number"},flexShrink:{type:"number"},flexBasis:{type:"string"}},L={gridTemplateColumns:{type:"string"},gridTemplateRows:{type:"string"},gridTemplateAreas:{type:"string"}},_={gridColumn:{type:"string",default:""},gridRow:{type:"string",default:""},gridArea:{type:"string",default:""}},T={gridColumnStart:{type:"string"},gridColumnSpan:{type:"string"},gridColumnEnd:{type:"string"},gridRowStart:{type:"string"},gridRowSpan:{type:"string"},gridRowEnd:{type:"string"}},K={gap:{type:"string"},order:{type:"number"},alignSelf:{type:"string"},justifySelf:{type:"string"}},mt={...j,...G,...pt,...D,...v,...N,...L,..._,...T,...K},Pt=Object.assign({},...Object.values(mt)),lt=["dimensionMode","minDimensionMode","maxDimensionMode","marginMode","paddingMode","gapMode","gapInputMode","gridTemplateColumnsMode","gridTemplateRowsMode"],ft=new Set([...lt]),dt=new Set([...Object.keys(_)]);var b="1fr",jt=new Set([...Object.keys(D)]),Gt=new Set([...Object.keys(G)]),Dt=new Set([...Object.keys(T)]),vt=new Set([{},...Object.keys(j),...Object.keys(v),...Object.keys(N),...Object.keys(L),...Object.keys(_),...Object.keys(T),...Object.keys(K)]);var w=u(p());function $(e){return String(e||"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function St(e){let t=String(e||"").trim();if(!t)return[];let r=0,n=0,o="",s=[];for(let i=0;i<t.length;i++){let c=t[i];if(c==="("){r++,o+=c;continue}if(c===")"){r=Math.max(0,r-1),o+=c;continue}if(c==="["){n++,o+=c;continue}if(c==="]"){n=Math.max(0,n-1),o+=c;continue}if(c===" "&&r===0&&n===0){o&&(s.push(o),o="");continue}o+=c}return o&&s.push(o),s}function xt(e){if(!e)return null;let t=e.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);return t?{count:parseInt(t[1],10),unit:t[2].trim()}:null}function ht(e,t=b){return e>0?`repeat(${e}, ${t})`:null}function h(e,t=b){if(!e||typeof e!="string")return{count:0,unit:t};let r=e.trim();if(!r)return{count:0,unit:t};if(/^subgrid\b/i.test(r))return{count:0,unit:t};if(r=r.replace(/\[[^\]]*]/g," ").trim(),!r)return{count:0,unit:t};let n=r.match(/repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)$/i);if(n){let i=n[2];return{count:0,unit:W(i,t)}}let{count:o,unit:s}=Y(r,t);return{count:o,unit:s||t}}function Y(e,t){let r=z(e);if(r){let i=r.inner.trim(),{count:c,unit:l}=Y(i,t);return{count:r.times*c,unit:l||W(i,t)}}let n=E(e),o=n.length,s="";if(n.length===1)s=d(n[0])||t;else{let i=n.find(H);s=d(i)||t}return{count:o,unit:s}}function z(e){let t=e.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!t)return null;let r=parseInt(t[1],10),n=t[2];return!Number.isFinite(r)||r<0?null:{times:r,inner:n}}function E(e){let t=[],r=0,n="";for(let o=0;o<e.length;o++){let s=e[o];if(s==="("){r++,n+=s;continue}if(s===")"){r=Math.max(0,r-1),n+=s;continue}if(r===0&&/\s/.test(s)){n.trim()&&t.push(n.trim()),n="";continue}n+=s}return n.trim()&&t.push(n.trim()),t}function W(e,t){if(!e)return t;let r=z(e);if(r){let s=E(r.inner);if(s.length===1)return d(s[0])||t}let n=E(e);if(n.length===1)return d(n[0])||t;let o=n.find(H);return d(o)||t}function H(e){return e?!!(/^(minmax|fit-content|clamp|var)\(/i.test(e)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(e)||/^(auto|max-content|min-content)$/i.test(e)):!1}function d(e){return e?e.trim():""}function Mt(e){let t=xt(e);if(!t)return null;let r=$(ht(t.count,t.unit));return{mode:"simple",template:e||null,normalised:r,simple:{count:t.count,unit:t.unit}}}function wt(e){let t=St(e);if(!t.length)return null;let r=$(t.join(" "));return{mode:"tracks",template:e||null,normalised:r,tracks:t}}var yt=[Mt,wt];function O(e){let t=e||"";for(let r of yt){let n=r(t);if(n)return n}return{mode:"raw",template:e||null,normalised:$(e||"")}}function V(e){let t=(e||"").trim();if(!t)return{hasAreas:!1,cols:0,rows:0};let r=t.split(/(['"])(?:(?=(\\?))\2.)*?\1/).map(o=>o.replace(/^['"]|['"]$/g,"").trim()).filter(o=>o&&!/^[\s]+$/.test(o));return r.length?{hasAreas:!0,cols:Math.max(0,...r.map(o=>o.split(/\s+/).filter(Boolean).length)),rows:r.length}:{hasAreas:!1,cols:0,rows:0}}function g(e,t="."){let r=String(e||"").trim();if(!r)return[];let n=[];return r.replace(/(['"])(.*?)\1/g,(o,s,i)=>(n.push(i),"")),n.map(o=>o.trim().split(/\s+/).map(s=>s&&s!==t?s:t))}function M(e,t,r,n="."){let o=[];for(let s=0;s<r;s++){let i=e[s]||[],c=Array.from({length:t},(l,C)=>i[C]??n);o.push(c)}return o}var Ct=u(p());var J=u(m()),Q=u(y()),U=u(p());function A(e){let t=(0,J.useSelect)(n=>e?n(Q.store).getBlock(e)?.attributes??{}:{},[e]);return(0,U.useMemo)(()=>{let n=O(t.gridTemplateColumns),o=O(t.gridTemplateRows),s=t.gridTemplateAreas??null,i=V(s);return{columns:n,rows:o,areas:{template:s,...i},activePane:{columns:n.mode,rows:o.mode}}},[t.gridTemplateColumns,t.gridTemplateRows,t.gridTemplateAreas])}var X=u(p()),It=u(m()),_t=u(y());var tt=u(m());function k(){return(0,tt.useSelect)(e=>{let t=e("core/block-editor"),r=t.getSelectedBlockClientId();if(!r)return{parentId:null,parentAttrs:null,parentBlock:null};let n=t.getBlockRootClientId(r);if(!n)return{parentId:null,parentAttrs:null,parentBlock:null};let o=t.getBlock(n)||null,s=o?.attributes??null;return{parentId:n,parentAttrs:s,parentBlock:o}},[])}var Tt=u(m()),bt=u(y());var Et=u(m());var nt=u(m()),$t=u(rt());function F(e="."){let{parentId:t}=k(),r=A(t),n=r?.columns?.template??"",o=r?.rows?.template??"",s=r?.areas?.template??"",i=(0,S.useMemo)(()=>{let a=h(n).count;return a>0?a:g(s,e)[0]?.length||0},[n,s,e]),c=(0,S.useMemo)(()=>{let a=h(o).count;return a>0?a:g(s,e).length||0},[o,s,e]),l=(0,S.useMemo)(()=>{let a=g(s,e),f=a[0]?.length||i||1,R=a.length||c||1;return M(a,f,R,e)},[s,i,c,e]),C=(0,S.useMemo)(()=>{let a=new Set;for(let f of l)for(let R of f){let I=String(R||"").trim();I&&I!==e&&a.add(I)}return Array.from(a)},[l,e]);return{parentId:t,hasGrid:!!(n||o||s),columns:i,rows:c,matrix:l,areaNames:C,areasTemplate:s,columnTemplate:n,rowTemplate:o,emptyToken:e}}})();
