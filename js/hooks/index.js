(()=>{var We=Object.create;var Kt=Object.defineProperty;var Ue=Object.getOwnPropertyDescriptor;var Ke=Object.getOwnPropertyNames;var He=Object.getPrototypeOf,Fe=Object.prototype.hasOwnProperty;var ct=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Ye=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Ke(e))!Fe.call(t,o)&&o!==n&&Kt(t,o,{get:()=>e[o],enumerable:!(r=Ue(e,o))||r.enumerable});return t};var C=(t,e,n)=>(n=t!=null?We(He(t)):{},Ye(e||!t||!t.__esModule?Kt(n,"default",{value:t,enumerable:!0}):n,t));var P=ct((hn,Ht)=>{Ht.exports=wp.data});var J=ct((Cn,Ft)=>{Ft.exports=wp.blockEditor});var E=ct((Tn,Yt)=>{Yt.exports=wp.element});var Re=ct((Or,Te)=>{Te.exports=wp.preferences});var bt=C(P()),ae=C(J()),W=C(E());var M={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var Z=t=>Array.isArray(t)?t:[],Ve=t=>new Set(Z(t));function _(t){let e=M.attributes||{};return Object.fromEntries(Object.entries(e).filter(([,n])=>n.group===t))}var Jt=_("display"),Vt=_("dimension"),zt=_("margin"),Xt=_("padding"),qt=_("flex"),Zt=_("flex-item"),Qt=_("grid"),mt=_("grid-item"),te=_("position"),ee=_("shared"),Mn={...Jt,...Vt,...zt,...Xt,...qt,...Zt,...Qt,...mt,...te,...ee},ne=new Set([...Object.keys(mt)]),vn=Z(M?.collections?.editorStyles),re=Ve(M?.collections?.unitless),ft=M?.settings?.gridUnit||"1fr",In=!!M?.settings?.appendImportantToMirroredStyles,En=M?.settings?.styleTagId||"costered-blocks-style-mirror",Q=M?.settings?.reduxStoreKey||"costered/ui",Pn=M?.settings?.breakpoints?.mobile??782,$n=M?.settings?.breakpoints?.tablet??1024,_n=M?.settings?.breakpoints?.desktop??1440,Dn=Z(M?.collections?.clearSets?.gridAreas),On=Z(M?.collections?.clearSets?.gridColumns),Nn=Z(M?.collections?.clearSets?.gridRows);var oe=new Set([...Object.keys(Jt),...Object.keys(Vt),...Object.keys(Xt),...Object.keys(zt),...Object.keys(qt),...Object.keys(Zt),...Object.keys(Qt),...Object.keys(mt),...Object.keys(te),...Object.keys(ee)]),Gn=Object.fromEntries(Object.entries(M.attributes).map(([t,e])=>[t,e.css]));var se=t=>{if(Array.isArray(t))return t.filter(Boolean).map(e=>{let n=String(e.property??""),r=e.value;return n&&r!==void 0?{property:n,value:r}:void 0}).filter(Boolean);if(t&&typeof t=="object"){let e=[];for(let[n,r]of Object.entries(t))r!==void 0&&e.push({property:n,value:r});return e}return[]},V=t=>t&&typeof t=="object"&&"styles"in t?{styles:se(t.styles)}:{styles:se(t)},j=t=>{let e=t||{};return!!e.desktop||!!e.tablet||!!e.mobile?{desktop:V(e.desktop),tablet:V(e.tablet),mobile:V(e.mobile)}:{desktop:V(e),tablet:V(void 0),mobile:V(void 0)}};var gt=t=>t==null||t===""||t==="null"||t==="undefined";function ze(t){return Array.isArray(t)}function yt(t){if(ze(t)){let[e,n,r]=t;return r!==void 0?{property:e,value:n,important:r}:{property:e,value:n}}return t}function ie(t){if(!Array.isArray(t)||t.length===0)return[];let e=[];for(let n=0;n<t.length;n++)e.push(yt(t[n]));return e}function kt(t,e,n,r){let o=Array.isArray(t)?t.slice():[],s=-1;for(let i=0;i<o.length;i++)if(yt(o[i]).property===e){s=i;break}let a=r!==void 0?{property:e,value:n,important:r}:{property:e,value:n};return s===-1?o.push(a):o[s]=a,o}function tt(t,e){let n=Array.isArray(t)?Array.from(t):[],r=[];for(let o=0;o<n.length;o++)yt(n[o]).property!==e&&r.push(n[o]);return r}var Xe="desktop",qe=Object.freeze({});function ue(t,e){let n=ie(t);for(let r=0;r<n.length;r++){let o=n[r];if(o.property===e)return o.value}}function D(t,e){let n=t||qe,r={...n},o=j(n.costered),s=c=>{switch(c){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},a=(c,d={})=>{let x=d&&Object.prototype.hasOwnProperty.call(d,"cascade")?!!d.cascade:!0,k=d&&Object.prototype.hasOwnProperty.call(d,"raw")?!!d.raw:!x,m=e||Xe;if(k){let f=ue(o?.[m]?.styles,c);return gt(f)?void 0:f}let b=s(m);for(let f of b){let w=ue(o?.[f]?.styles,c);if(!gt(w))return w}};return Object.defineProperties(r,{$get:{value:a,enumerable:!1},$getCascade:{value:c=>a(c,{cascade:!0}),enumerable:!1},$getMany:{value:(c,d)=>{let x={};for(let k=0;k<c.length;k++){let m=c[k];x[m]=a(m,d)}return x},enumerable:!1},$bp:{value:e,enumerable:!1}}),r}function St(t){let e=(0,bt.useSelect)(i=>i(Q)?.getBreakpoint?.()||"desktop",[]),n=(0,bt.useSelect)(i=>t?i(ae.store)?.getBlockAttributes?.(t):void 0,[t]),r=(0,W.useMemo)(()=>n?D(n,e):void 0,[n,e]),o=(0,W.useCallback)((i,u)=>{if(r?.$get)return r.$get(i,u)},[r]),s=(0,W.useCallback)((i,u)=>r?.$get?r.$get(i,u):void 0,[r]),a=(0,W.useCallback)((i,u)=>r?.$getMany?r.$getMany([...i],u):Object.fromEntries(i.map(c=>[c,void 0])),[r]);return(0,W.useMemo)(()=>({get:o,getAs:s,getMany:a,bp:e,attributes:r}),[o,s,a,e,r])}var G=C(E()),U=C(P());function Ze(t){return typeof t=="string"&&t.trim().length>0}function Qe(){let t=globalThis?.crypto?.randomUUID;if(typeof t=="function")return t.call(globalThis.crypto);let e=Date.now().toString(36),n=Math.random().toString(36).slice(2,10);return`${e}-${n}`}function et(t){t&&(Ze(t.costeredId)||(t.costeredId=Qe()))}var wt=C(P());var xt="desktop",At="tablet",ht="mobile",tn=t=>{let e=String(t??"").toLowerCase();return e==="tablet"||e==="medium"?At:e==="mobile"||e==="phone"?ht:xt},ce=t=>{try{let n=t?.("core/editor")?.getDeviceType?.();if(n)return n}catch{}try{let e=t("core/edit-post");if(e){if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType()}}catch{}try{let e=t("core/edit-site");if(e){if(typeof e.getDeviceType=="function")return e.getDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType();if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType()}}catch{}},O=t=>{try{let r=(typeof t=="function"?t(Q):(0,wt.select)(Q))?.getBreakpoint?.();if(r===xt||r===At||r===ht)return r}catch{}let e=ce(typeof t=="function"?t:wt.select);if(e)return tn(e);if(typeof window<"u"){let n=window.__COSTERED_VIEWPORT_BP;if(n===xt||n===At||n===ht)return n}return"desktop"};var en="desktop";function nt(t,e,n={trim:!0,emptyUnsets:!0}){let r=(typeof e=="object"?e:n)||{},{trim:o=!0,emptyUnsets:s=!0,breakpoint:a}=r,i=(0,U.useSelect)(O,[]),u=a||i||en,{updateBlockAttributes:c}=(0,U.useDispatch)("core/block-editor"),d=(0,G.useMemo)(()=>{if(typeof t=="string"){let p=t;return g=>{if(p)if(typeof g=="function"){let l=(0,U.select)("core/block-editor")?.getBlockAttributes(p)||{},y=g(l)||l;c(p,y)}else c(p,g||{})}}if(typeof t=="function"&&typeof e=="string"){let p=t,g=e;return l=>{if(!g)return;if(typeof l=="function"){let h=(0,U.select)("core/block-editor")?.getBlockAttributes(g)||{},B=l(h)||h;try{p(g,B)}catch{p(B)}return}let y=l||{};try{p(g,y)}catch{p(y)}}}if(typeof t=="function"){let p=t;return g=>{if(typeof g=="function"){let l=g({});p(l)}else p(g||{})}}return()=>{}},[t,e,c]),x=(0,G.useCallback)((p,g)=>{if(p==null)return;if(ne.has(g)){let y=typeof p=="string"&&o?p.trim():String(p);return s&&y===""?void 0:y}let l=p;if(o&&typeof l=="string"&&(l=l.trim()),!(s&&(l===""||l=="null"||l=="undefined"))){if(re.has(g)){if(typeof l=="string"&&/^-?\d+(\.\d+)?$/.test(l)){let y=Number(l);return Number.isFinite(y)?y:void 0}return typeof l=="number"&&Number.isFinite(l)?l:void 0}if(typeof l=="number")return Number.isFinite(l)?l:void 0;if(typeof l=="string")return l==="null"||l==="undefined"?void 0:l;try{return String(l)}catch{return}}},[o,s]),k=(0,G.useCallback)((p,g)=>{d(l=>{let y={...l||{}};et(y),y.costered=j(y.costered);let h=y.costered[u].styles,B=x(g,p),I=B===void 0?tt(h,p):kt(h,p,B);return y.costered[u]={...y.costered[u],styles:I},y})},[d,u,x]),m=(0,G.useCallback)(p=>{!p||typeof p!="object"||d(g=>{let l={...g||{}};et(l),l.costered=j(l.costered);let h=l.costered[u].styles;for(let[B,I]of Object.entries(p)){let z=x(I,B);h=z===void 0?tt(h,B):kt(h,B,z)}return l.costered[u]={...l.costered[u],styles:h||[]},l})},[d,u,x]),b=(0,G.useCallback)(p=>{d(g=>{let l={...g||{}};et(l),l.costered=j(l.costered);let y=l.costered[u].styles,h=tt(y,p);return(y?.length||0)===h.length?g:(l.costered[u]={...l.costered[u],styles:h},l)})},[d,u]),f=(0,G.useCallback)(p=>{!Array.isArray(p)||p.length===0||d(g=>{let l={...g||{}};et(l),l.costered=j(l.costered);let h=l.costered[u]?.styles;for(let B=0;B<p.length;B++)h=tt(h,p[B]);return l.costered[u]={...l.costered[u],styles:h||[]},l})},[d,u]),w=(0,G.useCallback)(p=>({set:(g,l)=>k(`${p}${g}`,l),setMany:g=>{let l={};for(let[y,h]of Object.entries(g))l[`${p}${y}`]=h;m(l)},unset:g=>b(`${p}${g}`),unsetMany:g=>f(g.map(l=>`${p}${l}`))}),[k,m,b,f]);return{set:k,setMany:m,unset:b,unsetMany:f,withPrefix:w,activeBreakpoint:u}}var $=C(E());function Tt(t){return String(t??"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function nn(t){let e=String(t??"").trim();if(!e)return[];let n=0,r=0,o="",s=[];for(let a=0;a<e.length;a++){let i=e[a];if(i==="("){n++,o+=i;continue}if(i===")"){n=Math.max(0,n-1),o+=i;continue}if(i==="["){r++,o+=i;continue}if(i==="]"){r=Math.max(0,r-1),o+=i;continue}if(i===" "&&n===0&&r===0){o&&(s.push(o),o="");continue}o+=i}return o&&s.push(o),s}function rn(t){let e=String(t??"").trim();if(!e)return null;let n=e.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);if(!n||n[1]===void 0||n[2]===void 0)return null;let r=Number.parseInt(n[1],10),o=n[2].trim();return!Number.isFinite(r)||r<0||o===""?null:{count:r,unit:o}}function on(t,e=ft){return t>0?`repeat(${t}, ${e})`:null}function H(t,e=ft){if(!t||typeof t!="string")return{count:0,unit:e};let n=t.trim();if(!n)return{count:0,unit:e};if(/^subgrid\b/i.test(n))return{count:0,unit:e};if(n=n.replace(/\[[^\]]*]/g," ").trim(),!n)return{count:0,unit:e};let r=n.match(/^\s*repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)\s*$/i);if(r){let s=r[2];return{count:0,unit:Ct(s,e)}}let o=sn(n,e);return{count:o.count,unit:o.unit||e}}function sn(t,e){let n=de(t);if(n){let i=n.inner.trim(),c=rt(i).length,d=Ct(i,e);return{count:n.times*c,unit:d||e}}let r=rt(t),o=0,s="";for(let i of r){if(/^\s*repeat\(/i.test(i)){let u=le(i);if(u){o+=u.count,!s&&u.unitHint&&(s=u.unitHint);continue}o+=1;continue}o+=1,!s&&dt(i)&&(s=K(i)??"")}let a=s||Ct(t,e);return{count:o,unit:a||e}}function de(t){let e=t.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!e)return null;let n=parseInt(e[1],10),r=e[2];return!Number.isFinite(n)||n<0?null:{times:n,inner:r}}function le(t){if(t.match(/^\s*repeat\(\s*auto-(fit|fill)\s*,/i))return{count:0,unitHint:""};let n=t.match(/^\s*repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!n)return null;let r=parseInt(n[1],10)||0;if(r<=0)return{count:0,unitHint:""};let o=n[2].trim(),s=rt(o),a=r*s.length,i="";if(s.length===1)i=K(s[0])??"";else{let u=s.find(dt);i=K(u)??""}return{count:a,unitHint:i}}function rt(t){let e=[],n=0,r="";for(let o=0;o<t.length;o++){let s=t[o];if(s==="("){n++,r+=s;continue}if(s===")"){n=Math.max(0,n-1),r+=s;continue}if(n===0&&/\s/.test(s)){r.trim()&&e.push(r.trim()),r="";continue}r+=s}return r.trim()&&e.push(r.trim()),e}function Ct(t,e){if(!t)return e;let n=de(t);if(n){let s=rt(n.inner);if(s.length===1)return K(s[0])||e;let a=s.find(dt);if(a)return K(a)||e}let r=rt(t);if(r.length===1)return K(r[0])||e;let o=r.find(dt);if(o)return K(o)||e;for(let s of r){let a=le(s);if(a&&a.unitHint)return a.unitHint}return e}function dt(t){return t?!!(/^(minmax|fit-content|clamp|var)\(/i.test(t)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(t)||/^(auto|max-content|min-content)$/i.test(t)):!1}function K(t){return t?t.trim():""}function R(t){let e=Number(t);return Number.isFinite(e)&&e>=0?Math.floor(e):0}function pe(t){let e=String(t??"").trim();if(!e)return{hasAreas:!1,cols:0,rows:0};let n=[],r=/"([^"]*)"|'([^']*)'/g,o;for(;o=r.exec(e);){let a=(o[1]??o[2]??"").trim();a&&n.push(a)}return n.length?{hasAreas:!0,cols:n.reduce((a,i)=>{let u=i.split(/\s+/).filter(Boolean).length;return Math.max(a,u)},0),rows:n.length}:{hasAreas:!1,cols:0,rows:0}}function me(t,e="."){if(!Array.isArray(t)||t.length===0)return"";let n=t.map(o=>(Array.isArray(o)?o:[]).map(s=>{let a=String(s??"").trim();return a===""?e:a}));return n.some(o=>o.some(s=>s!==e))?n.map(o=>`"${o.join(" ")}"`).join(" "):""}function fe(t,e="."){let n=String(t??"").trim();if(!n)return[];let r=[],o=/"([^"]*)"|'([^']*)'/g,s;for(;s=o.exec(n);){let a=(s[1]??s[2]??"").trim(),i=a.length?a.split(/\s+/g).map(u=>u&&u!==e?u:e):[];r.push(i)}return r}function ot(t,e,n,r){let o=R(e),s=R(n);if(o===0||s===0)return[];let a=Array.isArray(t)?t:[],i=[];for(let u=0;u<s;u++){let c=Array.isArray(a[u])?a[u]:[],d=Array.from({length:o},(x,k)=>{let m=c[k];return m===void 0?r:m});i.push(d)}return i}function Rt(t){let e=String(t??"").trim();if(!e||/^subgrid\b/i.test(e))return 0;let n=e.replace(/\[[^\]]*\]/g," ").trim();return n=n.replace(/repeat\(\s*(\d+)\s*,\s*([^)]+)\)/gi,(r,o,s)=>Array.from({length:parseInt(o,10)||0},()=>"X").join(" ")),n=n.replace(/\s+/g," ").trim(),n?n.split(" ").filter(Boolean).length:0}function un(t){let e=rn(t);if(!e)return null;let n=Tt(on(e.count,e.unit));return{mode:"simple",template:t?String(t):null,normalised:n,simple:{count:e.count,unit:e.unit}}}function an(t){let e=nn(t);if(!e.length)return null;let n=Tt(e.join(" "));return{mode:"tracks",template:t?String(t):null,normalised:n,tracks:e}}var cn=[un,an];function Bt(t){let e=t??"";for(let n of cn){let r=n(e);if(r)return r}return{mode:"raw",template:t?String(t):null,normalised:Tt(t??"")}}function dn(t){let{areasTemplate:e,trackColumnCount:n,trackRowCount:r,applyMatrixToStore:o,clearAreasInStore:s,seedFromStore:a}=Mt(t),i=(0,$.useMemo)(()=>a("."),[a]),u=(0,$.useMemo)(()=>({count:i?.[0]?.length||R(n)}),[i,n]),c=(0,$.useMemo)(()=>({count:i?.length||R(r)}),[i,r]),d=(0,$.useCallback)(w=>{let p=w[0]?.length||0,g=w.length||0,l=w.map(h=>h.map(B=>{let I=String(B??"").trim();return I===""?".":I})),y=ot(l,p,g,".");o(y)},[o]),x=(0,$.useMemo)(()=>{let w=i?.length||0,p=w&&i[0]?.length||0;return{rows:w,cols:p}},[i]),k=(0,$.useCallback)((w,p)=>w>=0&&w<x.cols&&p>=0&&p<x.rows,[x]),m=(0,$.useCallback)((w,p,g)=>{let l=i;if(l.length===0)return;let y=Math.trunc(R(w))||0,h=Math.trunc(R(p))||0;if(!k(y,h))return;let B=String(g??"").trim()||".",I=l.map(z=>z.slice());I[h][y]=B,d(I)},[i,d,k]),b=(0,$.useCallback)(({rows:w,cols:p})=>{let g=R(w),l=R(p);if(!(g>0&&l>0))return;let y=ot(i,l,g,".");d(y)},[i,d]),f=(0,$.useCallback)(()=>s(),[s]);return{matrix:i,columnData:u,rowData:c,setCell:m,resize:b,clear:f}}var A=C(E());function F(t,e,n){return Math.min(Math.max(t,e),n)}function v(t,e=1){let n=Number(t);return Number.isFinite(n)?Math.trunc(n):e}function N(t){if(typeof t=="number")return Number.isInteger(t);let e=String(t);return/^-?\d+$/.test(e)}function vt(t,e=1){let n=Number.parseInt(String(t),10);return Number.isFinite(n)&&n!==0?n:e}function ge(t){let e=Number.parseInt(String(t),10);return Number.isFinite(e)?e:""}var It=t=>{let e={start:"",span:"",end:""},n=String(t??"").trim();if(!n)return e;let r=n.split("/").map(i=>i.trim());if(r.length===1)return/^span\s+\d+$/i.test(r[0])?e.span=r[0].replace(/^span\s+/i,""):e.start=r[0],e;let o=r[0],s=r[1];e.start=o||"auto";let a=/^span\s+(\d+)$/i.exec(s);return a?e.span=a[1]:e.end=s,e},st=({start:t,span:e,end:n},{mode:r="span",collapseSpanOne:o=!0}={})=>{let s=String(t??"").trim()||"auto";if(r==="end"){let i=String(n??"").trim()||"auto";return`${s} / ${i}`}let a=v(e,1);return o&&a===1&&s!=="auto"?s:`${s} / span ${a}`},Et=t=>{let e=new Set,n=/\[([^\]]+)\]/g,r;for(;(r=n.exec(String(t??"")))!==null;){let o=r[1].trim();o&&o.split(/\s+/).forEach(s=>e.add(s))}return Array.from(e)},ye=t=>/\//.test(String(t??""))||/\bspan\s+\d+\b/i.test(String(t??""));var ke=Number.MAX_SAFE_INTEGER;function ln({clientId:t,setMany:e,parentMeta:n}){if(!t)return null;let{get:r}=St(t),{writeColumn:o,writeRow:s}=Pt(t),a=ye(r("gridArea")),i=n?.columns??0,u=n?.rows??0,c=(0,A.useMemo)(()=>It(r("gridColumn")),[r]),d=(0,A.useMemo)(()=>It(r("gridRow")),[r]),x=c.end?"end":"span",k=d.end?"end":"span",[m,b]=(0,A.useState)(x),[f,w]=(0,A.useState)(k);(0,A.useEffect)(()=>{b(x)},[x]),(0,A.useEffect)(()=>{w(k)},[k]);let p=(0,A.useMemo)(()=>Et(n.columnTemplate),[n.columnTemplate]),g=(0,A.useMemo)(()=>Et(n.rowTemplate),[n.rowTemplate]),l=p.length>0,y=g.length>0,h=(S,T)=>T?N(S)?"number":"named":"number",B=S=>S?N(S)?"number":S==="auto"?"auto":"named":"number",I=(S,T)=>{let pt=B(S);return T?pt:pt==="named"?"number":pt},z=h(c.start,l),bn=h(d.start,y),Sn=I(c.end,l),wn=I(d.end,y),X=(0,A.useMemo)(()=>{if(!i||!N(c.start))return ke;let S=F(v(c.start,1),1,i);return Math.max(1,i-S+1)},[i,c.start]),q=(0,A.useMemo)(()=>{if(!u||!N(d.start))return ke;let S=F(v(d.start,1),1,u);return Math.max(1,u-S+1)},[u,d.start]),[Be,ut]=(0,A.useState)(null),[Me,at]=(0,A.useState)(null);(0,A.useEffect)(()=>{ut(null)},[r("gridColumn")]),(0,A.useEffect)(()=>{at(null)},[r("gridRow")]);let ve=(0,A.useCallback)(S=>{let T=v(S,1);c.end?o(m,{start:T,end:c.end}):o(m,{start:T,span:F(v(c.span,1),1,X)})},[c.end,c.span,X,o]),Ie=(0,A.useCallback)(S=>{let T=String(S||"auto").trim()||"auto";c.end?o(m,{start:T,end:c.end}):o(m,{start:T,span:v(c.span,1)})},[c.end,c.span,o]),Ee=(0,A.useCallback)(S=>{let T=F(v(S,1),1,X);o(m,{start:c.start||"auto",span:T})},[c.start,X,o]),Pe=(0,A.useCallback)(S=>{let T=v(S,0);ut(T),S!==0&&(o(m,{start:c.start||"auto",end:vt(S,1)}),ut(null))},[c.start,o]),$e=(0,A.useCallback)(S=>{o(m,{start:c.start||"auto",end:String(S||"auto").trim()||"auto"})},[c.start,o]),_e=(0,A.useCallback)(()=>{o(m,{start:c.start||"auto",end:"auto"})},[c.start,o]),De=(0,A.useCallback)(S=>{let T=v(S,1);d.end?s(f,{start:T,end:d.end}):s(f,{start:T,span:F(v(d.span,1),1,q)})},[d.end,d.span,q,s]),Oe=(0,A.useCallback)(S=>{let T=String(S||"auto").trim()||"auto";d.end?s(f,{start:T,end:d.end}):s(f,{start:T,span:v(d.span,1)})},[d.end,d.span,f,s]),Ne=(0,A.useCallback)(S=>{let T=F(v(S,1),1,q);s(f,{start:d.start||"auto",span:T})},[d.start,q,s]),Ge=(0,A.useCallback)(S=>{let T=v(S,0);at(T),S!==0&&(s(f,{start:d.start||"auto",end:vt(S,1)}),at(null))},[d.start,f,s]),Le=(0,A.useCallback)(S=>{s(f,{start:d.start||"auto",end:String(S||"auto").trim()||"auto"})},[d.start,f,s]),je=(0,A.useCallback)(()=>{s(f,{start:d.start||"auto",end:"auto"})},[d.start,f,s]);return{hasArea:a,disabledLines:a,numbers:{isIntToken:N,toInt:v,parseSigned:ge},column:{values:{...c},modes:{uiStart:l?N(c.start)?"number":"named":"number",uiEnd:c.end?N(c.end)?"number":String(c.end)==="auto"?"auto":"named":"number",mode:m},setMode:b,named:{lines:p,hasLines:l},caps:{span:X},drafts:{end:Be,setEnd:ut},handlers:{onStartNumber:ve,onStartNamed:Ie,onSpan:Ee,onEndNumber:Pe,onEndNamed:$e,onEndAuto:_e}},row:{values:{...d},modes:{uiStart:y?N(d.start)?"number":"named":"number",uiEnd:d.end?N(d.end)?"number":String(d.end)==="auto"?"auto":"named":"number",mode:f},setMode:w,named:{lines:g,hasLines:y},caps:{span:q},drafts:{end:Me,setEnd:at},handlers:{onStartNumber:De,onStartNamed:Oe,onSpan:Ne,onEndNumber:Ge,onEndNamed:Le,onEndAuto:je}}}}var it=C(E());function Pt(t){let{set:e,setMany:n,unset:r}=nt(t),o=(0,it.useCallback)(u=>{let c=typeof u=="string"?u.trim():"";if(!c){r("gridArea");return}e("gridArea",c)},[e,r]),s=(0,it.useCallback)((u,c,d,x)=>{let k={};u!==void 0&&(k.gridRowStart=u||void 0),c!==void 0&&(k.gridRowEnd=c||void 0),d!==void 0&&(k.gridColumnStart=d||void 0),x!==void 0&&(k.gridColumnEnd=x||void 0),n(k)},[n]),a=(0,it.useCallback)((u,c)=>{let d=u==="end"?st({start:c.start,end:c.end},{mode:"end"}):st({start:c.start,span:c.span},{mode:"span"});e("gridColumn",d)},[e]),i=(0,it.useCallback)((u,c)=>{let d=u==="end"?st({start:c.start,end:c.end},{mode:"end"}):st({start:c.start,span:c.span},{mode:"span"});e("gridRow",d)},[e]);return{setArea:o,setTracks:s,writeColumn:a,writeRow:i,set:e,setMany:n,unset:r}}var $t=C(P()),be=C(J()),_t=C(E());function Dt(t){let e=(0,$t.useSelect)(s=>t?s(be.store).getBlock(t)?.attributes??void 0:void 0,[t]),n=(0,$t.useSelect)(O,[]),r=(0,_t.useMemo)(()=>e&&n?D(e,n):void 0,[e,n]);if(!r)return;let o=s=>String(r.$get(s)??"");return(0,_t.useMemo)(()=>{let s=o("gridTemplateColumns"),a=o("gridTemplateRows"),i=o("gridTemplateAreas"),u=Bt(s),c=Bt(a),d=Rt(s),x=Rt(a),k={...u,count:d},m={...c,count:x},b=pe(i),f={template:i||"",hasAreas:b.hasAreas,cols:b.cols,rows:b.rows};return{columns:k,rows:m,areas:f,activePane:{columns:k.mode,rows:m.mode}}},[r.$get,r.costered,n])}var Y=C(E()),Se=C(P()),we=C(J());function Mt(t){let{set:e,unset:n}=nt(t),r=(0,Se.useSelect)(m=>m(we.store)?.getBlock?.(t)?.innerBlocks?.length||0,[t]),o=Dt(t),s=o?.columns?.template??"",a=o?.rows?.template??"",i=o?.areas?.template??"",u=(0,Y.useMemo)(()=>{if(s){let b=H(s),f=R(b?.count??b);if(f>0)return f}let m=R(o?.rows?.count)||(()=>{if(!a)return 0;let b=H(a);return R(b?.count??b)})();return m>0&&r>0?Math.ceil(r/m):0},[s,a,o?.rows?.count,r]),c=(0,Y.useMemo)(()=>{let m=R(o?.rows?.count);if(m>0)return m;if(a){let f=H(a),w=R(f?.count??f);if(w>0)return w}let b=R(u);return b>0&&r>0?Math.ceil(r/b):0},[a,o?.rows?.count,u,r]),d=(0,Y.useCallback)(m=>{let b=me(m,".");b?e("gridTemplateAreas",b):n("gridTemplateAreas")},[e,n]),x=(0,Y.useCallback)(()=>{n("gridTemplateAreas")},[n]),k=(0,Y.useCallback)((m=".")=>{let b=fe(i,m),f=R(b[0]?.length)||R(u),w=R(b.length)||R(c);return f===0&&w>0&&r>0?f=Math.ceil(r/w):w===0&&f>0&&r>0&&(w=Math.ceil(r/f)),f===0&&(f=1),w===0&&(w=1),ot(b.map(g=>g.map(l=>String(l||m))),f,w,m)},[i,u,c,r]);return{areasTemplate:i,trackColumnCount:u,trackRowCount:c,applyMatrixToStore:d,clearAreasInStore:x,seedFromStore:k}}var Ot=C(E()),Nt=C(P());function pn(t,e={}){let n=e.keys??Array.from(oe),{parentId:r,parentBlock:o}=(0,Nt.useSelect)(u=>{let c=u("core/block-editor"),d=t||c?.getSelectedBlockClientId?.();if(!d)return{parentId:null,parentBlock:null};let x=c?.getBlockRootClientId?.(d);return x?{parentId:x,parentBlock:c?.getBlock?.(x)||null}:{parentId:null,parentBlock:null}},[]),s=(0,Nt.useSelect)(O,[]),a=(0,Ot.useMemo)(()=>{let u=o?.attributes;return u&&s?D(u,s):null},[o?.attributes,s]),i=(0,Ot.useMemo)(()=>{if(!o)return null;let u={};for(let c of n)u[c]=a?.$get(c);return u},[o,a,n]);return{parentId:r,parentAttrs:i,parentBlock:o,parentAugmented:a}}var Gt=C(P()),L=C(E());function mn(t){let{parentId:e,parentBlock:n}=(0,Gt.useSelect)(k=>{let m=k("core/block-editor"),b=t||m?.getSelectedBlockClientId?.();if(!b)return{parentId:null,parentBlock:null};let f=m?.getBlockRootClientId?.(b)??null;if(!f)return{parentId:null,parentBlock:null};let w=m?.getBlock?.(f)??null;return{parentId:f,parentBlock:w}},[t]),r=(0,Gt.useSelect)(O,[]),o=(0,L.useMemo)(()=>{let k=n?.attributes;return k&&r?D(k,r):null},[n,r]),s=(0,L.useMemo)(()=>String(o?.$get?.("gridTemplateColumns",{cascade:!0})??""),[o,o?.$bp]),a=(0,L.useMemo)(()=>String(o?.$get?.("gridTemplateRows",{cascade:!0})??""),[o,o?.$bp]),i=(0,L.useMemo)(()=>String(o?.$get?.("gridTemplateAreas",{cascade:!0})??""),[o,o?.$bp]),u=(0,L.useMemo)(()=>H(s).count,[s]),c=(0,L.useMemo)(()=>H(a).count,[a]),d=(0,L.useMemo)(()=>String(o?.$get?.("display",{cascade:!0})??"").trim(),[o,o?.$bp]),x=(0,L.useMemo)(()=>/^(grid|inline-grid)$/i.test(d),[d]);return{parentId:e,parentBlock:n,parent:o,display:d,isGrid:x,columnTemplate:s,rowTemplate:a,areaTemplate:i,columns:u,rows:c}}var xe=C(P()),Ae=C(J());function fn(t,e){return(0,xe.useSelect)(n=>{if(t&&t.trim()!=="")return t;let r=n(Ae.store),o=(e??void 0)||r?.getSelectedBlockClientId?.(),a=(o?r?.getBlock?.(o):void 0)?.name;return typeof a=="string"&&a.trim()!==""?a:void 0},[t,e])}var jt=C(P()),he=C(J()),Ce=C(E());var Lt=Object.freeze({});function gn(){let t=(0,jt.useSelect)(O,[]),{selectedBlock:e,clientId:n,attrVersion:r}=(0,jt.useSelect)(s=>{let a=s(he.store),i=a?.getSelectedBlockClientId?.(),u=i?a?.getBlock?.(i):null,d=(u?.attributes??Lt)?.costered??{},x=Array.isArray(d?.desktop?.styles)?d.desktop.styles.length:0,k=Array.isArray(d?.tablet?.styles)?d.tablet.styles.length:0,m=Array.isArray(d?.mobile?.styles)?d.mobile.styles.length:0,b=`${x}-${k}-${m}`;return{selectedBlock:u,clientId:i,attrVersion:b}},[]),o=(0,Ce.useMemo)(()=>{let s=e?.attributes??Lt;return D(s,t)||Lt},[e,t,r]);return{selectedBlock:e,clientId:n,attributes:o}}var lt=C(P()),Wt=C(Re()),Ut=C(E());function yn(t,e,n="costered-blocks"){let r=(0,lt.useSelect)(u=>u(Wt.store).get(n,t)?.get?.(n,t)??e,[t,e,n]),{set:o,__experimentalReset:s}=(0,lt.useDispatch)(Wt.store),a=(0,Ut.useCallback)(u=>{t.startsWith("__invalid__")||o(n,t,u)},[t,n,o]),i=(0,Ut.useCallback)(()=>{t.startsWith("__invalid__")||s?.(n,t)},[t,n,s]);return[r,a,i]}function kn(t,e={}){let n=s=>{if(s===null)return;let a=s?.trim();if(a)return encodeURIComponent(a)},r=n(e.blockName),o=n(e.variant);return!r&&!o?t:r&&!o?`${t}:${r}`:!r&&o?`${t}#${o}`:`${t}:${r}#${o}`}})();
