(()=>{var $e=Object.create;var Dt=Object.defineProperty;var Be=Object.getOwnPropertyDescriptor;var Pe=Object.getOwnPropertyNames;var Oe=Object.getPrototypeOf,Ge=Object.prototype.hasOwnProperty;var nt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ne=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Pe(t))!Ge.call(e,o)&&o!==r&&Dt(e,o,{get:()=>t[o],enumerable:!(n=Be(t,o))||n.enumerable});return e};var b=(e,t,r)=>(r=e!=null?$e(Oe(e)):{},Ne(t||!e||!e.__esModule?Dt(r,"default",{value:e,enumerable:!0}):r,e));var C=nt((lr,$t)=>{$t.exports=wp.data});var G=nt((dr,Bt)=>{Bt.exports=wp.blockEditor});var M=nt((mr,Pt)=>{Pt.exports=wp.element});var me=nt((An,de)=>{de.exports=wp.preferences});var mt=b(C()),Vt=b(G()),z=b(M());var R={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var Ot=e=>Array.isArray(e)?e:[],je=e=>new Set(Ot(e));function D(e){return Object.fromEntries(Object.entries(R.attributes).filter(([t,r])=>r.group===e))}var Gt=D("display"),Nt=D("dimension"),Lt=D("margin"),jt=D("padding"),Ut=D("flex"),Ht=D("flex-item"),Kt=D("grid"),at=D("grid-item"),Ft=D("position"),Yt=D("shared"),yr={...Gt,...Nt,...Lt,...jt,...Ut,...Ht,...Kt,...at,...Ft,...Yt},Wt=new Set([...Object.keys(at)]),xr=Ot(R?.collections?.editorStyles),zt=je(R?.collections?.unitless),pt=R?.settings?.gridUnit||"1fr",Sr=!!R?.settings?.appendImportantToMirroredStyles,hr=R?.settings?.styleTagId||"costered-blocks-style-mirror",ot=R?.settings?.reduxStoreKey||"costered/ui",br=R?.settings?.breakpoints?.mobile??782,kr=R?.settings?.breakpoints?.tablet??1024,Tr=R?.settings?.breakpoints?.desktop??1440,wr=R?.collections?.clearSets?.gridAreas,Er=R?.collections?.clearSets?.gridColumns,Ar=R?.collections?.clearSets?.gridRows;var Xt=new Set([...Object.keys(Gt),...Object.keys(Nt),...Object.keys(jt),...Object.keys(Lt),...Object.keys(Ut),...Object.keys(Ht),...Object.keys(Kt),...Object.keys(at),...Object.keys(Ft),...Object.keys(Yt)]),Rr=Object.fromEntries(Object.entries(R.attributes).map(([e,t])=>[e,t.css]));var N=e=>{let t={desktop:{styles:{}},tablet:{styles:{}},mobile:{styles:{}},...e||{}};return t.desktop={styles:{},...t.desktop||{}},t.tablet={styles:{},...t.tablet||{}},t.mobile={styles:{},...t.mobile||{}},t.desktop.styles={...t.desktop.styles||{}},t.tablet.styles={...t.tablet.styles||{}},t.mobile.styles={...t.mobile.styles||{}},t},lt=(e,t,r)=>{r==null||r===""?Object.prototype.hasOwnProperty.call(e,t)&&delete e[t]:e[t]=r},dt=e=>e==null||e===""||e==="null"||e==="undefined";var Ue="desktop",He=Object.freeze({});function $(e,t){let r=e||He,n={...r},o=N(r.costered),u=a=>{switch(a){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},i=(a,p=void 0)=>{let x=p&&Object.prototype.hasOwnProperty.call(p,"cascade")?!!p.cascade:!0,k=p&&Object.prototype.hasOwnProperty.call(p,"raw")?!!p.raw:!x,y=t||Ue;if(k){let T=o?.[y]?.styles?.[a];return dt(T)?void 0:T}let S=u(y);for(let T of S){let l=o?.[T]?.styles?.[a];if(!dt(l))return l}};return Object.defineProperties(n,{$get:{value:i,enumerable:!1},$getCascade:{value:a=>i(a,{cascade:!0}),enumerable:!1},$getMany:{value:(a,p)=>{let x={};for(let k of a)x[k]=i(k,p);return x},enumerable:!1},$bp:{value:t,enumerable:!1}}),n}function ft(e){let t=(0,mt.useSelect)(i=>i(ot)?.getBreakpoint?.()||"desktop",[]),r=(0,mt.useSelect)(i=>e?i(Vt.store).getBlockAttributes(e):null,[e]),n=(0,z.useMemo)(()=>r?$(r,t):void 0,[r,t]),o=(0,z.useCallback)((i,s)=>n?.$get?n.$get(i,s):{},[n]),u=(0,z.useCallback)((i,s)=>{if(!n?.$get)return{};let d={};return i.forEach(a=>{d[a]=n.$get(a,s)}),d},[n]);return{get:o,getMany:u,bp:t,attributes:n}}var P=b(M()),L=b(C());var Ke=e=>typeof e=="string"&&e.trim().length>0,Fe=()=>{if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")return crypto.randomUUID();let e=Date.now().toString(36),t=Math.random().toString(36).slice(2,10);return`${e}-${t}`},X=e=>{e&&!Ke(e.costeredId)&&(e.costeredId=Fe())};var V=b(C());var Ye=e=>{let t=String(e||"").toLowerCase();return t==="mobile"||t==="phone"||t==="tablet"?"mobile":"desktop"},We=e=>{try{let t=e("core/edit-post");if(t){if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType()}}catch{}try{let t=e("core/edit-site");if(t){if(typeof t.getDeviceType=="function")return t.getDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType();if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType()}}catch{}},B=e=>{try{let r=(0,V.select)(ot);if(r&&typeof r.getBreakpoint=="function"){let n=r.getBreakpoint();if(n)return n}}catch{}let t=We(e);if(t)return Ye(t);if(typeof window<"u"&&typeof window.__COSTERED_VIEWPORT_BP=="string")return window.__COSTERED_VIEWPORT_BP||"desktop";try{if(window.COSTERED_DEBUG){let r=(0,V.select)(STORE_KEY),n=r&&typeof r.getBreakpoint=="function"?r.getBreakpoint():null,o=(0,V.select)("core/edit-post"),u=o&&(typeof o.getPreviewDeviceType=="function"&&o.getPreviewDeviceType()||typeof o.__experimentalGetPreviewDeviceType=="function"&&o.__experimentalGetPreviewDeviceType()),i=(0,V.select)("core/edit-site"),s=i&&(typeof i.getDeviceType=="function"&&i.getDeviceType()||typeof i.__experimentalGetPreviewDeviceType=="function"&&i.__experimentalGetPreviewDeviceType()||typeof i.getPreviewDeviceType=="function"&&i.getPreviewDeviceType())}}catch{}return"desktop"};var ze="desktop";function q(e,t,r={trim:!0,emptyUnsets:!0,breakpoint:void 0}){let{trim:n=!0,emptyUnsets:o=!0,breakpoint:u}=r,i=(0,L.useSelect)(B,[]),s=u||i||ze,{updateBlockAttributes:d}=(0,L.useDispatch)("core/block-editor"),a=(0,P.useMemo)(()=>{if(typeof e=="string"&&!t){let l=e;return m=>{if(l)if(typeof m=="function"){let c=(0,L.select)("core/block-editor").getBlockAttributes(l)||{},f=m(c)||c;d(l,f)}else d(l,m||{})}}if(typeof e=="function"&&typeof t=="string"){let l=e,m=t;return c=>{if(m)if(typeof c=="function"){let f=(0,L.select)("core/block-editor").getBlockAttributes(m)||{},w=c(f)||f;try{l(m,w)}catch{l(w)}}else try{l(m,c||{})}catch{l(c||{})}}}return typeof e=="function"?e:()=>{}},[e,t,d]),p=(0,P.useCallback)((l,m)=>{if(l==null)return;if(Wt.has(m)){let f=typeof l=="string"&&n?l.trim():String(l);return o&&f===""?void 0:f}let c=l;if(n&&typeof c=="string"&&(c=c.trim()),!(o&&(c===""||c=="null"||c=="undefined"))){if(zt.has(m)){if(typeof c=="string"&&/^-?\d+(\.\d+)?$/.test(c)){let f=Number(c);return Number.isFinite(f)?f:void 0}return typeof c=="number"&&Number.isFinite(c)?c:void 0}if(typeof c=="number")return Number.isFinite(c)?c:void 0;if(typeof c=="string")return c==="null"||c==="undefined"?void 0:c;try{return String(c)}catch{return}}},[n,o]),x=(0,P.useCallback)((l,m)=>{a(c=>{let f={...c||{}};X(f),f.costered=N(f.costered);let w={...f.costered[s].styles},I=p(m,l);return lt(w,l,I),f.costered[s]={...f.costered[s],styles:w},f})},[a,s,p]),k=(0,P.useCallback)(l=>{!l||typeof l!="object"||a(m=>{let c={...m||{}};X(c),c.costered=N(c.costered);let f={...c.costered[s].styles};for(let[w,I]of Object.entries(l)){let O=p(I,w);lt(f,w,O)}return c.costered[s]={...c.costered[s],styles:f},c})},[a,s,p]),y=(0,P.useCallback)(l=>{a(m=>{let c={...m||{}};X(c),c.costered=N(c.costered);let f={...c.costered[s].styles};return l in f?(delete f[l],c.costered[s]={...c.costered[s],styles:f},c):m})},[a,s]),S=(0,P.useCallback)(l=>{!Array.isArray(l)||l.length===0||a(m=>{let c={...m||{}};X(c),c.costered=N(c.costered);let f={...c.costered[s].styles},w=!1;for(let I of l)I in f&&(delete f[I],w=!0);return w?(c.costered[s]={...c.costered[s],styles:f},c):m})},[a,s]),T=(0,P.useCallback)(l=>({set:(m,c)=>x(`${l}${m}`,c),setMany:m=>{let c={};for(let[f,w]of Object.entries(m))c[`${l}${f}`]=w;k(c)},unset:m=>y(`${l}${m}`),unsetMany:m=>S(m.map(c=>`${l}${c}`))}),[x,k,y,S]);return{set:x,setMany:k,unset:y,unsetMany:S,withPrefix:T,activeBreakpoint:s}}var v=b(M());function yt(e){return String(e||"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function Xe(e){let t=String(e||"").trim();if(!t)return[];let r=0,n=0,o="",u=[];for(let i=0;i<t.length;i++){let s=t[i];if(s==="("){r++,o+=s;continue}if(s===")"){r=Math.max(0,r-1),o+=s;continue}if(s==="["){n++,o+=s;continue}if(s==="]"){n=Math.max(0,n-1),o+=s;continue}if(s===" "&&r===0&&n===0){o&&(u.push(o),o="");continue}o+=s}return o&&u.push(o),u}function Ve(e){if(!e)return null;let t=e.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);return t?{count:parseInt(t[1],10),unit:t[2].trim()}:null}function qe(e,t=pt){return e>0?`repeat(${e}, ${t})`:null}function U(e,t=pt){if(!e||typeof e!="string")return{count:0,unit:t};let r=e.trim();if(!r)return{count:0,unit:t};if(/^subgrid\b/i.test(r))return{count:0,unit:t};if(r=r.replace(/\[[^\]]*]/g," ").trim(),!r)return{count:0,unit:t};let n=r.match(/^\s*repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)\s*$/i);if(n){let i=n[2];return{count:0,unit:gt(i,t)}}let{count:o,unit:u}=Ze(r,t);return{count:o,unit:u||t}}function Ze(e,t){let r=qt(e);if(r){let s=r.inner.trim(),a=Z(s).length,p=gt(s,t);return{count:r.times*a,unit:p||t}}let n=Z(e),o=0,u="";for(let s of n){if(/^\s*repeat\(/i.test(s)){let d=Zt(s);if(d){o+=d.count,!u&&d.unitHint&&(u=d.unitHint);continue}o+=1;continue}o+=1,!u&&st(s)&&(u=j(s)||"")}let i=u||gt(e,t);return{count:o,unit:i||t}}function qt(e){let t=e.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!t)return null;let r=parseInt(t[1],10),n=t[2];return!Number.isFinite(r)||r<0?null:{times:r,inner:n}}function Zt(e){if(e.match(/^\s*repeat\(\s*auto-(fit|fill)\s*,/i))return{count:0,unitHint:""};let r=e.match(/^\s*repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!r)return null;let n=parseInt(r[1],10)||0;if(n<=0)return{count:0,unitHint:""};let o=r[2].trim(),u=Z(o),i=n*u.length,s="";if(u.length===1)s=j(u[0])||"";else{let d=u.find(st);s=j(d)||""}return{count:i,unitHint:s}}function Z(e){let t=[],r=0,n="";for(let o=0;o<e.length;o++){let u=e[o];if(u==="("){r++,n+=u;continue}if(u===")"){r=Math.max(0,r-1),n+=u;continue}if(r===0&&/\s/.test(u)){n.trim()&&t.push(n.trim()),n="";continue}n+=u}return n.trim()&&t.push(n.trim()),t}function gt(e,t){if(!e)return t;let r=qt(e);if(r){let u=Z(r.inner);if(u.length===1)return j(u[0])||t;let i=u.find(st);if(i)return j(i)||t}let n=Z(e);if(n.length===1)return j(n[0])||t;let o=n.find(st);if(o)return j(o)||t;for(let u of n){let i=Zt(u);if(i&&i.unitHint)return i.unitHint}return t}function st(e){return e?!!(/^(minmax|fit-content|clamp|var)\(/i.test(e)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(e)||/^(auto|max-content|min-content)$/i.test(e)):!1}function j(e){return e?e.trim():""}function E(e){let t=Number(e);return Number.isFinite(t)&&t>=0?Math.floor(t):0}function Jt(e){let t=String(e||"").trim();if(!t)return{hasAreas:!1,cols:0,rows:0};let r=[],n=/"([^"]*)"|'([^']*)'/g,o;for(;o=n.exec(t);){let i=(o[1]??o[2]??"").trim();i&&r.push(i)}return r.length?{hasAreas:!0,cols:r.reduce((i,s)=>{let d=s.split(/\s+/).filter(Boolean).length;return Math.max(i,d)},0),rows:r.length}:{hasAreas:!1,cols:0,rows:0}}function Qt(e,t="."){if(!Array.isArray(e)||e.length===0)return"";let r=e.map(o=>(Array.isArray(o)?o:[]).map(u=>{let i=String(u??"").trim();return i===""?t:i}));return r.some(o=>o.some(u=>u!==t))?r.map(o=>`"${o.join(" ")}"`).join(" "):""}function te(e,t="."){let r=String(e||"").trim();if(!r)return[];let n=[],o=/"([^"]*)"|'([^']*)'/g,u;for(;u=o.exec(r);){let i=(u[1]??u[2]??"").trim(),s=i.length?i.split(/\s+/g).map(d=>d&&d!==t?d:t):[];n.push(s)}return n}function J(e,t,r,n="."){let o=E(t),u=E(r);if(o===0||u===0)return[];let i=Array.isArray(e)?e:[],s=[];for(let d=0;d<u;d++){let a=Array.isArray(i[d])?i[d]:[],p=Array.from({length:o},(x,k)=>{let y=a[k];return y===void 0?n:y});s.push(p)}return s}function Je(e){let t=Ve(e);if(!t)return null;let r=yt(qe(t.count,t.unit));return{mode:"simple",template:e||null,normalised:r,simple:{count:t.count,unit:t.unit}}}function Qe(e){let t=Xe(e);if(!t.length)return null;let r=yt(t.join(" "));return{mode:"tracks",template:e||null,normalised:r,tracks:t}}var tr=[Je,Qe];function xt(e){let t=e||"";for(let r of tr){let n=r(t);if(n)return n}return{mode:"raw",template:e||null,normalised:yt(e||"")}}function er(e){let{areasTemplate:t,trackColumnCount:r,trackRowCount:n,applyMatrixToStore:o,clearAreasInStore:u,seedFromStore:i}=St(e),s=(0,v.useMemo)(()=>{let l=i(".");return console.log("[areas seed -> shape]",l.length,l[0]?.length),l},[i]),d=(0,v.useMemo)(()=>({count:s?.[0]?.length||E(r)}),[s,r]),a=(0,v.useMemo)(()=>({count:s?.length||E(n)}),[s,n]),p=(0,v.useCallback)(l=>{let m=l[0]?.length||0,c=l.length||0,f=J(l.map(w=>w.map(I=>String(I??"").trim()||".")),m,c,".");o(f)},[o]),x=(0,v.useMemo)(()=>{let l=s?.length||0,m=l&&s[0]?.length||0;return{rows:l,cols:m}},[s]),k=(0,v.useCallback)((l,m)=>l>=0&&l<x.cols&&m>=0&&m<x.rows,[x]),y=(0,v.useCallback)((l,m,c)=>{if(!Array.isArray(s)||s.length===0)return;let f=Math.trunc(E(l))||0,w=Math.trunc(E(m))||0;if(!k(f,w))return;let I=String(c??"").trim()||".",O=s.map(tt=>tt.slice());O[w][f]=I,p(O)},[s,p,k]),S=(0,v.useCallback)(({rows:l,cols:m})=>{let c=E(l),f=E(m);if(!(c>0&&f>0))return;let w=J(s,f,c,".");p(w)},[s,p]),T=(0,v.useCallback)(()=>u(),[u]);return{matrix:s,columnData:d,rowData:a,setCell:y,resize:S,clear:T}}var h=b(M());function H(e,t,r){return Math.min(Math.max(e,t),r)}function _(e,t=1){let r=Number(e);return Number.isFinite(r)?r:t}function F(e){if(typeof e=="number")return Number.isInteger(e);let t=String(e);return/^-?\d+$/.test(t)}function ht(e,t=1){let r=parseInt(e,10);return Number.isFinite(r)&&r!==0?r:t}function ee(e){let t=parseInt(e,10);return Number.isFinite(t)?t:""}var bt=e=>{let t={start:"",span:"",end:""},r=String(e||"").trim();if(!r)return t;let n=r.split("/").map(s=>s.trim());if(n.length===1)return/^span\s+\d+$/i.test(n[0])?t.span=n[0].replace(/^span\s+/i,""):t.start=n[0],t;let o=n[0],u=n[1];t.start=o||"auto";let i=/^span\s+(\d+)$/i.exec(u);return i?t.span=i[1]:t.end=u,t};var kt=e=>{let t=new Set,r=/\[([^\]]+)\]/g,n;for(;(n=r.exec(String(e||"")))!==null;){let o=n[1].trim();o&&o.split(/\s+/).forEach(u=>t.add(u))}return Array.from(t)},re=e=>/\//.test(String(e||""))||/\bspan\s+\d+\b/i.test(String(e||""));var ne=Number.MAX_SAFE_INTEGER;function rr({clientId:e,setMany:t,parentMeta:r}){if(!e)return null;let{get:n}=ft(e),o=re(n("gridArea")),{columns:u,rows:i,columnTemplate:s,rowTemplate:d}=r,a=(0,h.useMemo)(()=>bt(n("gridColumn")),[n]),p=(0,h.useMemo)(()=>bt(n("gridRow")),[n]),x=a.end?"end":"span",k=p.end?"end":"span",[y,S]=(0,h.useState)(x),[T,l]=(0,h.useState)(k);(0,h.useEffect)(()=>{S(x)},[x]),(0,h.useEffect)(()=>{l(k)},[k]);let m=it(t,"gridColumn",y),c=it(t,"gridRow",T),f=(0,h.useMemo)(()=>kt(s),[s]),w=(0,h.useMemo)(()=>kt(d),[d]),I=f.length>0,O=w.length>0,tt=(g,A)=>A?F(g)?"number":"named":"number",fe=g=>g?F(g)?"number":g==="auto"?"auto":"named":"number",vt=(g,A)=>{let ut=fe(g);return A?ut:ut==="named"?"number":ut},ge=tt(a.start,I),ye=tt(p.start,O),xe=vt(a.end,I),Se=vt(p.end,O),Y=(0,h.useMemo)(()=>{if(!u||!F(a.start))return ne;let g=H(_(a.start,1),1,u);return Math.max(1,u-g+1)},[u,a.start]),W=(0,h.useMemo)(()=>{if(!i||!F(p.start))return ne;let g=H(_(p.start,1),1,i);return Math.max(1,i-g+1)},[i,p.start]),[he,et]=(0,h.useState)(null),[be,rt]=(0,h.useState)(null);(0,h.useEffect)(()=>{et(null)},[n("gridColumn")]),(0,h.useEffect)(()=>{rt(null)},[n("gridRow")]);let ke=(0,h.useCallback)(g=>{let A=_(g,1);a.end?m({start:A,end:a.end}):m({start:A,span:H(_(a.span,1),1,Y)})},[a.end,a.span,Y,m]),Te=(0,h.useCallback)(g=>{let A=String(g||"auto").trim()||"auto";a.end?m({start:A,end:a.end}):m({start:A,span:_(a.span,1)})},[a.end,a.span,m]),we=(0,h.useCallback)(g=>{let A=H(_(g,1),1,Y);m({start:a.start||"auto",span:A})},[a.start,Y,m]),Ee=(0,h.useCallback)(g=>{et(g),g!==0&&(m({start:a.start||"auto",end:ht(g,1)}),et(null))},[a.start,m]),Ae=(0,h.useCallback)(g=>{m({start:a.start||"auto",end:String(g||"auto").trim()||"auto"})},[a.start,m]),Re=(0,h.useCallback)(()=>{m({start:a.start||"auto",end:"auto"})},[a.start,m]),Ie=(0,h.useCallback)(g=>{let A=_(g,1);p.end?c({start:A,end:p.end}):c({start:A,span:H(_(p.span,1),1,W)})},[p.end,p.span,W,c]),_e=(0,h.useCallback)(g=>{let A=String(g||"auto").trim()||"auto";p.end?c({start:A,end:p.end}):c({start:A,span:_(p.span,1)})},[p.end,p.span,c]),Ce=(0,h.useCallback)(g=>{let A=H(_(g,1),1,W);c({start:p.start||"auto",span:A})},[p.start,W,c]),Me=(0,h.useCallback)(g=>{rt(g),g!==0&&(c({start:p.start||"auto",end:ht(g,1)}),rt(null))},[p.start,c]),ve=(0,h.useCallback)(g=>{c({start:p.start||"auto",end:String(g||"auto").trim()||"auto"})},[p.start,c]),De=(0,h.useCallback)(()=>{c({start:p.start||"auto",end:"auto"})},[p.start,c]);return{hasArea:o,disabledLines:o,numbers:{isIntToken:F,toInt:_,parseSigned:ee},column:{values:{...a},modes:{uiStart:ge,uiEnd:xe,mode:y},setMode:S,named:{lines:f,hasLines:I},caps:{span:Y},drafts:{end:he,setEnd:et},handlers:{onStartNumber:ke,onStartNamed:Te,onSpan:we,onEndNumber:Ee,onEndNamed:Ae,onEndAuto:Re}},row:{values:{...p},modes:{uiStart:ye,uiEnd:Se,mode:T},setMode:l,named:{lines:w,hasLines:O},caps:{span:W},drafts:{end:be,setEnd:rt},handlers:{onStartNumber:Ie,onStartNamed:_e,onSpan:Ce,onEndNumber:Me,onEndNamed:ve,onEndAuto:De}}}}var Tt=b(M());function it(e){let{set:t,setMany:r,unset:n}=q(e),o=(0,Tt.useCallback)(i=>{if(!i||typeof i!="string"){n("gridArea");return}t("gridArea",i.trim())},[t,n]),u=(0,Tt.useCallback)((i,s,d,a)=>{let p={};i!==void 0&&(p.gridRowStart=i||void 0),s!==void 0&&(p.gridRowEnd=s||void 0),d!==void 0&&(p.gridColumnStart=d||void 0),a!==void 0&&(p.gridColumnEnd=a||void 0),r(p)},[r]);return{setArea:o,setTracks:u,set:t,setMany:r,unset:n}}var wt=b(C()),oe=b(G()),Et=b(M());function At(e){let t=(0,wt.useSelect)(i=>e?i(oe.store).getBlock(e)?.attributes??{}:{},[e]),r=(0,wt.useSelect)(B,[]),n=(0,Et.useMemo)(()=>$(t,r),[t,r]),o=(i,s={})=>n.$get(i,s);return(0,Et.useMemo)(()=>{let i=o("gridTemplateColumns"),s=o("gridTemplateRows"),d=o("gridTemplateAreas"),a=xt(i),p=xt(s),{template:x,...k}=Jt(d,a.count,p.count);return{columns:a,rows:p,areas:{template:x,...k},activePane:{columns:a.mode,rows:p.mode}}},[r,n?.costered,n?.$get])}var K=b(M()),se=b(C()),ie=b(G());function St(e){let{set:t,unset:r}=q(e),n=(0,se.useSelect)(y=>y(ie.store).getBlock(e)?.innerBlocks?.length||0,[e]),o=At(e),u=o?.columns?.template??null,i=o?.rows?.template??null,s=o?.areas?.template??null,d=(0,K.useMemo)(()=>{if(u){let S=U(u),T=E(S?.count??S);if(T>0)return T}let y=E(o?.rows?.count)||(()=>{if(!i)return 0;let S=U(i);return E(S?.count??S)})();return y>0&&n>0?Math.ceil(n/y):0},[u]),a=(0,K.useMemo)(()=>{let y=E(o?.rows?.count);if(y>0)return y;if(i){let T=U(i),l=E(T?.count??T);if(l>0)return l}let S=E(d);return S>0&&n>0?Math.ceil(n/S):0},[i,o?.rows?.count]),p=(0,K.useCallback)(y=>{let S=Qt(y,".");console.log("[areas write]",S),S?t("gridTemplateAreas",S):r("gridTemplateAreas")},[t,r]),x=(0,K.useCallback)(()=>{r("gridTemplateAreas")},[r]),k=(0,K.useCallback)((y=".")=>{let S=te(s,y),T=E(S[0]?.length)||E(d),l=E(S.length)||E(a);return T===0&&l>0&&n>0?T=Math.ceil(n/l):l===0&&T>0&&n>0&&(l=Math.ceil(n/T)),T===0&&(T=1),l===0&&(l=1),J(S,T,l,y)},[s,d,a,n]);return{areasTemplate:s,trackColumnCount:d,trackRowCount:a,applyMatrixToStore:p,clearAreasInStore:x,seedFromStore:k}}var Rt=b(M()),It=b(C()),ln=b(G());function nr(e,t={}){let r=t.keys??Array.from(Xt),{parentId:n,parentBlock:o}=(0,It.useSelect)(d=>{let a=d("core/block-editor"),p=e||a.getSelectedBlockClientId();if(!p)return{parentId:null,parentBlock:null};let x=a.getBlockRootClientId(p);return x?{parentId:x,parentBlock:a.getBlock(x)||null}:{parentId:null,parentBlock:null}},[]),u=(0,It.useSelect)(B,[]),i=(0,Rt.useMemo)(()=>{let d=o?.attributes;return d?$(d,u):null},[o?.attributes,u]),s=(0,Rt.useMemo)(()=>{if(!o)return null;let d={};for(let a of r)d[a]=i?.$get(a);return d},[o,i,r]);return{parentId:n,parentAttrs:s,parentBlock:o,parentAugmented:i}}var _t=b(C()),Q=b(M());function or(e){let{parentId:t,parentBlock:r}=(0,_t.useSelect)(p=>{let x=p("core/block-editor"),k=e||x.getSelectedBlockClientId();if(!k)return{parentId:null,parentBlock:null};let y=x.getBlockRootClientId(k);return y?{parentId:y,parentBlock:x.getBlock(y)||null}:{parentId:null,parentBlock:null}},[e]),n=(0,_t.useSelect)(B,[]),o=(0,Q.useMemo)(()=>r?.attributes?$(r.attributes,n):null,[r?.attributes,n]),u=o?.$get("gridTemplateColumns",{cascade:!0}),i=o?.$get("gridTemplateRows",{cascade:!0}),{count:s}=(0,Q.useMemo)(()=>U(u),[u]),{count:d}=(0,Q.useMemo)(()=>U(i),[i]),a=(0,Q.useMemo)(()=>{let p=o?.$get?.("display",{cascade:!0})??"";return/^(grid|inline-grid)$/i.test(String(p).trim())},[o,o?.$bp]);return{parentId:t,parentBlock:r,parent:o,isGrid:a,display:o?.$get("display",{cascade:!0}),columns:u,rows:i,areas:o?.$get("gridTemplateAreas",{cascade:!0}),columnCount:s,rowCount:d}}var ce=b(C()),ue=b(G());function sr(e,t){return(0,ce.useSelect)(r=>{if(e)return e;let n=r(ue.store),o=t||n.getSelectedBlockClientId();return(o?n.getBlock(o):null)?.name??null},[e,t])}var Ct=b(C()),pe=b(G()),le=b(M());var ae=Object.freeze({});function ir(){let e=(0,Ct.useSelect)(B,[]),{selectedBlock:t,clientId:r,attrVersion:n}=(0,Ct.useSelect)(u=>{let i=u(pe.store),s=i.getSelectedBlockClientId(),d=s?i.getBlock(s):null,a=d?.attributes||ae,p=a&&typeof a.costered=="object"&&a.costered||{},x=Object.keys(p&&p.desktop||{}).length,k=Object.keys(p&&p.tablet||{}).length,y=Object.keys(p&&p.mobile||{}).length,S=`${x}-${k}-${y}`;return{selectedBlock:d,clientId:s,attrVersion:S}},[]),o=(0,le.useMemo)(()=>$(t?.attributes,e)||ae,[t,e,n]);return{selectedBlock:t,clientId:r,attributes:o}}var ct=b(C()),Mt=b(me());function cr(e,t,r="costered-blocks"){let n=(0,ct.useSelect)(d=>d(Mt.store).get(r,e)??t,[r,e,t]),{set:o,__experimentalReset:u}=(0,ct.useDispatch)(Mt.store);return[n,d=>{e.startsWith("__invalid__")||o(r,e,d)},()=>{e.startsWith("__invalid__")||u?.(r,e)}]}var ur=(e,{blockName:t,variant:r}={})=>!t&&!r?e:t&&!r?`${e}:${t}`:!t&&r?`${e}#${r}`:`${e}:${t}#${r}`;})();
