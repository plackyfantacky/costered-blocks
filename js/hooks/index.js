(()=>{var Ne=Object.create;var Wt=Object.defineProperty;var Ge=Object.getOwnPropertyDescriptor;var je=Object.getOwnPropertyNames;var Le=Object.getPrototypeOf,We=Object.prototype.hasOwnProperty;var ct=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Ue=(t,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of je(e))!We.call(t,r)&&r!==n&&Wt(t,r,{get:()=>e[r],enumerable:!(o=Ge(e,r))||o.enumerable});return t};var h=(t,e,n)=>(n=t!=null?Ne(Le(t)):{},Ue(e||!t||!t.__esModule?Wt(n,"default",{value:t,enumerable:!0}):n,t));var P=ct((Sn,Ut)=>{Ut.exports=wp.data});var V=ct((An,Kt)=>{Kt.exports=wp.blockEditor});var E=ct((xn,Ft)=>{Ft.exports=wp.element});var we=ct((Er,xe)=>{xe.exports=wp.preferences});var kt=h(P()),oe=h(V()),j=h(E());var I={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var q=t=>Array.isArray(t)?t:[],Fe=t=>new Set(q(t));function $(t){let e=I.attributes||{};return Object.fromEntries(Object.entries(e).filter(([,n])=>n.group===t))}var Ht=$("display"),Yt=$("dimension"),Jt=$("margin"),Vt=$("padding"),zt=$("flex"),Xt=$("flex-item"),qt=$("grid"),mt=$("grid-item"),Zt=$("position"),Qt=$("shared"),Cn={...Ht,...Yt,...Jt,...Vt,...zt,...Xt,...qt,...mt,...Zt,...Qt},te=new Set([...Object.keys(mt)]),Bn=q(I?.collections?.editorStyles),ee=Fe(I?.collections?.unitless),ft=I?.settings?.gridUnit||"1fr",Tn=!!I?.settings?.appendImportantToMirroredStyles,Mn=I?.settings?.styleTagId||"costered-blocks-style-mirror",Z=I?.settings?.reduxStoreKey||"costered/ui",Rn=I?.settings?.breakpoints?.mobile??782,In=I?.settings?.breakpoints?.tablet??1024,vn=I?.settings?.breakpoints?.desktop??1440,En=q(I?.collections?.clearSets?.gridAreas),Pn=q(I?.collections?.clearSets?.gridColumns),On=q(I?.collections?.clearSets?.gridRows);var ne=new Set([...Object.keys(Ht),...Object.keys(Yt),...Object.keys(Vt),...Object.keys(Jt),...Object.keys(zt),...Object.keys(Xt),...Object.keys(qt),...Object.keys(mt),...Object.keys(Zt),...Object.keys(Qt)]),$n=Object.fromEntries(Object.entries(I.attributes).map(([t,e])=>[t,e.css]));var U=t=>{let e=r=>{let s=r?.styles;return s&&typeof s=="object"&&!Array.isArray(s)?{...r,styles:{...s}}:{...r||{},styles:{}}},n=t&&typeof t=="object"?t:{},o=!!n.desktop||!!n.tablet||!!n.mobile;return{desktop:e(n.desktop),tablet:e(n.tablet),mobile:e(n.mobile)}};var gt=t=>t==null||t===""||t==="null"||t==="undefined";var He="desktop",Ye=Object.freeze({});function re(t,e){let n=t?t[e]:void 0;return typeof n=="string"||typeof n=="number"?n:void 0}function _(t,e){let n=t||Ye,o={...n},r=U(n.costered),s=c=>{switch(c){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},u=(c,i={})=>{let f=i&&Object.prototype.hasOwnProperty.call(i,"cascade")?!!i.cascade:!0,g=i&&Object.prototype.hasOwnProperty.call(i,"raw")?!!i.raw:!f,m=e||He;if(g){let b=re(r?.[m]?.styles||{},c);return gt(b)?void 0:b}let k=s(m);for(let b of k){let S=re(r?.[b]?.styles||{},c);if(!gt(S))return S}};return Object.defineProperties(o,{$get:{value:u,enumerable:!1},$getCascade:{value:c=>u(c,{cascade:!0}),enumerable:!1},$getMany:{value:(c,i)=>{let f={};for(let g=0;g<c.length;g++){let m=c[g];f[m]=u(m,i)}return f},enumerable:!1},$bp:{value:e,enumerable:!1}}),o}function yt(t){let e=t??void 0,n=(0,kt.useSelect)(f=>f(Z)?.getBreakpoint?.()||"desktop",[]),o=(0,kt.useSelect)(f=>e?f(oe.store)?.getBlockAttributes?.(e):void 0,[e]),r=(0,j.useMemo)(()=>o?_(o,n):void 0,[o,n]),s=(0,j.useCallback)((f,g)=>{if(r?.$get)return r.$get(f,g)},[r]),u=(0,j.useCallback)((f,g)=>r?.$get?r.$get(f,g):void 0,[r]),a=(0,j.useCallback)((f,g)=>r?.$getMany?r.$getMany([...f],g):Object.fromEntries(f.map(m=>[m,void 0])),[r]),d=(0,j.useCallback)((f,g="",m)=>{let k=s(f,m);return typeof k=="string"?k:g},[s]),c=(0,j.useCallback)((f,g=0,m)=>{let k=s(f,m);return typeof k=="number"?k:g},[s]);function i(f,g,m){let k=s(f);return typeof k=="string"&&g.includes(k)?k:m}return(0,j.useMemo)(()=>({get:s,getAs:u,getMany:a,getString:d,getNumber:c,getEnum:i,bp:n,attributes:r}),[s,u,a,d,c,i,n,r])}var L=h(E()),K=h(P());function Q(t,e){let o=t?.costered?.[e]?.styles;return o&&typeof o=="object"&&!Array.isArray(o)?{...o}:{}}function tt(t,e,n){if(!n||typeof n!="object"||Array.isArray(n))throw new Error("withBreakpointStyles expects a plain object of camelCase CSS properties \u2192 string values.");let o=t.costered??{},s={...o[e]??{styles:{}},styles:{...n}},u={...o,[e]:s};return{...t,costered:u}}function Je(t){return typeof t=="string"&&t.trim().length>0}function Ve(){let t=globalThis?.crypto?.randomUUID;if(typeof t=="function")return t.call(globalThis.crypto);let e=Date.now().toString(36),n=Math.random().toString(36).slice(2,10);return`${e}-${n}`}function et(t){t&&(Je(t.costeredId)||(t.costeredId=Ve()))}var bt=h(P());var St="desktop",At="tablet",xt="mobile",ze=t=>{let e=String(t??"").toLowerCase();return e==="tablet"||e==="medium"?At:e==="mobile"||e==="phone"?xt:St},se=t=>{try{let n=t?.("core/editor")?.getDeviceType?.();if(n)return n}catch{}try{let e=t("core/edit-post");if(e){if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType()}}catch{}try{let e=t("core/edit-site");if(e){if(typeof e.getDeviceType=="function")return e.getDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType();if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType()}}catch{}},D=t=>{try{let o=(typeof t=="function"?t(Z):(0,bt.select)(Z))?.getBreakpoint?.();if(o===St||o===At||o===xt)return o}catch{}let e=se(typeof t=="function"?t:bt.select);if(e)return ze(e);if(typeof window<"u"){let n=window.__COSTERED_VIEWPORT_BP;if(n===St||n===At||n===xt)return n}return"desktop"};var Xe="desktop";function nt(t,e,n={trim:!0,emptyUnsets:!0}){let o=(typeof e=="object"?e:n)||{},{trim:r=!0,emptyUnsets:s=!0,breakpoint:u}=o,a=(0,K.useSelect)(D,[]),d=u||a||Xe,{updateBlockAttributes:c}=(0,K.useDispatch)("core/block-editor"),i=(0,L.useMemo)(()=>{if(typeof t=="string"||t===null){let l=t??void 0;return y=>{if(l)if(typeof y=="function"){let p=(0,K.select)("core/block-editor")?.getBlockAttributes(l)||{},A=y(p)||p;c(l,A)}else c(l,y||{})}}if(typeof t=="function"&&(typeof e=="string"||e==null)){let l=t,y=e??void 0;return p=>{if(!y)return;if(typeof p=="function"){let C=(0,K.select)("core/block-editor")?.getBlockAttributes(y)||{},R=p(C)||C;try{l(y,R)}catch{l(R)}return}let A=p||{};try{l(y,A)}catch{l(A)}}}if(typeof t=="function"){let l=t;return y=>{if(typeof y=="function"){let p=y({});l(p)}else l(y||{})}}return()=>{}},[t,e,c]),f=(0,L.useCallback)((l,y)=>{if(l==null)return;if(te.has(y)){let A=typeof l=="string"&&r?l.trim():String(l);return s&&A===""?void 0:A}let p=l;if(r&&typeof p=="string"&&(p=p.trim()),!(s&&(p===""||p=="null"||p=="undefined"))){if(ee.has(y)){if(typeof p=="string"&&/^-?\d+(\.\d+)?$/.test(p)){let A=Number(p);return Number.isFinite(A)?A:void 0}return typeof p=="number"&&Number.isFinite(p)?p:void 0}if(typeof p=="number")return Number.isFinite(p)?p:void 0;if(typeof p=="string")return p==="null"||p==="undefined"?void 0:p;try{return String(p)}catch{return}}},[r,s]),g=(0,L.useCallback)((l,y)=>{i(p=>{let A={...p||{}};et(A),A.costered=U(A.costered);let C=f(y,l),M={...Q(A,d)};if(C===void 0)if(Object.prototype.hasOwnProperty.call(M,l))delete M[l];else return p;else M[l]=String(C);return tt(A,d,M)})},[i,d,f]),m=(0,L.useCallback)(l=>{!l||typeof l!="object"||i(y=>{let p={...y||{}};et(p),p.costered=U(p.costered);let C={...Q(p,d)};for(let[R,M]of Object.entries(l)){let W=f(M,R);W===void 0?Object.prototype.hasOwnProperty.call(C,R)&&delete C[R]:C[R]=String(W)}return tt(p,d,C)})},[i,d,f]),k=(0,L.useCallback)(l=>{i(y=>{let p={...y||{}};et(p),p.costered=U(p.costered);let A=Q(p,d);if(!Object.prototype.hasOwnProperty.call(A,l))return y;let C={...A};return delete C[l],tt(p,d,C)})},[i,d]),b=(0,L.useCallback)(l=>{!Array.isArray(l)||l.length===0||i(y=>{let p={...y||{}};et(p),p.costered=U(p.costered);let A=Q(p,d),C=!1,R={...A};for(let M=0;M<l.length;M++){let W=l[M];Object.prototype.hasOwnProperty.call(R,W)&&(delete R[W],C=!0)}return C?tt(p,d,R):y})},[i,d]),S=(0,L.useCallback)(l=>({set:(y,p)=>g(`${l}${y}`,p),setMany:y=>{let p={};for(let[A,C]of Object.entries(y))p[`${l}${A}`]=C;m(p)},unset:y=>k(`${l}${y}`),unsetMany:y=>b(y.map(p=>`${l}${p}`))}),[g,m,k,b]);return{set:g,setMany:m,unset:k,unsetMany:b,withPrefix:S,activeBreakpoint:d}}var O=h(E());function ht(t){return String(t??"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function qe(t){let e=String(t??"").trim();if(!e)return[];let n=0,o=0,r="",s=[];for(let u=0;u<e.length;u++){let a=e[u];if(a==="("){n++,r+=a;continue}if(a===")"){n=Math.max(0,n-1),r+=a;continue}if(a==="["){o++,r+=a;continue}if(a==="]"){o=Math.max(0,o-1),r+=a;continue}if(a===" "&&n===0&&o===0){r&&(s.push(r),r="");continue}r+=a}return r&&s.push(r),s}function Ze(t){let e=String(t??"").trim();if(!e)return null;let n=e.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);if(!n||n[1]===void 0||n[2]===void 0)return null;let o=Number.parseInt(n[1],10),r=n[2].trim();return!Number.isFinite(o)||o<0||r===""?null:{count:o,unit:r}}function Qe(t,e=ft){return t>0?`repeat(${t}, ${e})`:null}function H(t,e=ft){if(!t||typeof t!="string")return{count:0,unit:e};let n=t.trim();if(!n)return{count:0,unit:e};if(/^subgrid\b/i.test(n))return{count:0,unit:e};if(n=n.replace(/\[[^\]]*]/g," ").trim(),!n)return{count:0,unit:e};let o=n.match(/^\s*repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)\s*$/i);if(o){let s=o[2];return{count:0,unit:wt(s,e)}}let r=tn(n,e);return{count:r.count,unit:r.unit||e}}function tn(t,e){let n=ie(t);if(n){let a=n.inner.trim(),c=rt(a).length,i=wt(a,e);return{count:n.times*c,unit:i||e}}let o=rt(t),r=0,s="";for(let a of o){if(/^\s*repeat\(/i.test(a)){let d=ue(a);if(d){r+=d.count,!s&&d.unitHint&&(s=d.unitHint);continue}r+=1;continue}r+=1,!s&&dt(a)&&(s=F(a)??"")}let u=s||wt(t,e);return{count:r,unit:u||e}}function ie(t){let e=t.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!e)return null;let n=parseInt(e[1],10),o=e[2];return!Number.isFinite(n)||n<0?null:{times:n,inner:o}}function ue(t){if(t.match(/^\s*repeat\(\s*auto-(fit|fill)\s*,/i))return{count:0,unitHint:""};let n=t.match(/^\s*repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!n)return null;let o=parseInt(n[1],10)||0;if(o<=0)return{count:0,unitHint:""};let r=n[2].trim(),s=rt(r),u=o*s.length,a="";if(s.length===1)a=F(s[0])??"";else{let d=s.find(dt);a=F(d)??""}return{count:u,unitHint:a}}function rt(t){let e=[],n=0,o="";for(let r=0;r<t.length;r++){let s=t[r];if(s==="("){n++,o+=s;continue}if(s===")"){n=Math.max(0,n-1),o+=s;continue}if(n===0&&/\s/.test(s)){o.trim()&&e.push(o.trim()),o="";continue}o+=s}return o.trim()&&e.push(o.trim()),e}function wt(t,e){if(!t)return e;let n=ie(t);if(n){let s=rt(n.inner);if(s.length===1)return F(s[0])||e;let u=s.find(dt);if(u)return F(u)||e}let o=rt(t);if(o.length===1)return F(o[0])||e;let r=o.find(dt);if(r)return F(r)||e;for(let s of o){let u=ue(s);if(u&&u.unitHint)return u.unitHint}return e}function dt(t){return t?!!(/^(minmax|fit-content|clamp|var)\(/i.test(t)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(t)||/^(auto|max-content|min-content)$/i.test(t)):!1}function F(t){return t?t.trim():""}function T(t){let e=Number(t);return Number.isFinite(e)&&e>=0?Math.floor(e):0}function ae(t){let e=String(t??"").trim();if(!e)return{hasAreas:!1,cols:0,rows:0};let n=[],o=/"([^"]*)"|'([^']*)'/g,r;for(;r=o.exec(e);){let u=(r[1]??r[2]??"").trim();u&&n.push(u)}return n.length?{hasAreas:!0,cols:n.reduce((u,a)=>{let d=a.split(/\s+/).filter(Boolean).length;return Math.max(u,d)},0),rows:n.length}:{hasAreas:!1,cols:0,rows:0}}function ce(t,e="."){if(!Array.isArray(t)||t.length===0)return"";let n=t.map(r=>(Array.isArray(r)?r:[]).map(s=>{let u=String(s??"").trim();return u===""?e:u}));return n.some(r=>r.some(s=>s!==e))?n.map(r=>`"${r.join(" ")}"`).join(" "):""}function de(t,e="."){let n=String(t??"").trim();if(!n)return[];let o=[],r=/"([^"]*)"|'([^']*)'/g,s;for(;s=r.exec(n);){let u=(s[1]??s[2]??"").trim(),a=u.length?u.split(/\s+/g).map(d=>d&&d!==e?d:e):[];o.push(a)}return o}function ot(t,e,n,o){let r=T(e),s=T(n);if(r===0||s===0)return[];let u=Array.isArray(t)?t:[],a=[];for(let d=0;d<s;d++){let c=Array.isArray(u[d])?u[d]:[],i=Array.from({length:r},(f,g)=>{let m=c[g];return m===void 0?o:m});a.push(i)}return a}function Ct(t){let e=String(t??"").trim();if(!e||/^subgrid\b/i.test(e))return 0;let n=e.replace(/\[[^\]]*\]/g," ").trim();return n=n.replace(/repeat\(\s*(\d+)\s*,\s*([^)]+)\)/gi,(o,r,s)=>Array.from({length:parseInt(r,10)||0},()=>"X").join(" ")),n=n.replace(/\s+/g," ").trim(),n?n.split(" ").filter(Boolean).length:0}function en(t){let e=Ze(t);if(!e)return null;let n=ht(Qe(e.count,e.unit));return{mode:"simple",template:t?String(t):null,normalised:n,simple:{count:e.count,unit:e.unit}}}function nn(t){let e=qe(t);if(!e.length)return null;let n=ht(e.join(" "));return{mode:"tracks",template:t?String(t):null,normalised:n,tracks:e}}var rn=[en,nn];function Bt(t){let e=t??"";for(let n of rn){let o=n(e);if(o)return o}return{mode:"raw",template:t?String(t):null,normalised:ht(t??"")}}function on(t){let{areasTemplate:e,trackColumnCount:n,trackRowCount:o,applyMatrixToStore:r,clearAreasInStore:s,seedFromStore:u}=Tt(t),a=(0,O.useMemo)(()=>u("."),[u]),d=(0,O.useMemo)(()=>({count:a?.[0]?.length||T(n)}),[a,n]),c=(0,O.useMemo)(()=>({count:a?.length||T(o)}),[a,o]),i=(0,O.useCallback)(S=>{let l=S[0]?.length||0,y=S.length||0,p=S.map(C=>C.map(R=>{let M=String(R??"").trim();return M===""?".":M})),A=ot(p,l,y,".");r(A)},[r]),f=(0,O.useMemo)(()=>{let S=a?.length||0,l=S&&a[0]?.length||0;return{rows:S,cols:l}},[a]),g=(0,O.useCallback)((S,l)=>S>=0&&S<f.cols&&l>=0&&l<f.rows,[f]),m=(0,O.useCallback)((S,l,y)=>{let p=a;if(p.length===0)return;let A=Math.trunc(T(S))||0,C=Math.trunc(T(l))||0;if(!g(A,C))return;let R=String(y??"").trim()||".",M=p.map(W=>W.slice());M[C][A]=R,i(M)},[a,i,g]),k=(0,O.useCallback)(({rows:S,cols:l})=>{let y=T(S),p=T(l);if(!(y>0&&p>0))return;let A=ot(a,p,y,".");i(A)},[a,i]),b=(0,O.useCallback)(()=>s(),[s]);return{matrix:a,columnData:d,rowData:c,setCell:m,resize:k,clear:b}}var w=h(E());function Y(t,e,n){return Math.min(Math.max(t,e),n)}function v(t,e=1){let n=Number(t);return Number.isFinite(n)?Math.trunc(n):e}function N(t){if(typeof t=="number")return Number.isInteger(t);let e=String(t);return/^-?\d+$/.test(e)}function Mt(t,e=1){let n=Number.parseInt(String(t),10);return Number.isFinite(n)&&n!==0?n:e}function pe(t){let e=Number.parseInt(String(t),10);return Number.isFinite(e)?e:""}var Rt=t=>{let e={start:"",span:"",end:""},n=String(t??"").trim();if(!n)return e;let o=n.split("/").map(a=>a.trim());if(o.length===1)return/^span\s+\d+$/i.test(o[0])?e.span=o[0].replace(/^span\s+/i,""):e.start=o[0],e;let r=o[0],s=o[1];e.start=r||"auto";let u=/^span\s+(\d+)$/i.exec(s);return u?e.span=u[1]:e.end=s,e},st=({start:t,span:e,end:n},{mode:o="span",collapseSpanOne:r=!0}={})=>{let s=String(t??"").trim()||"auto";if(o==="end"){let a=String(n??"").trim()||"auto";return`${s} / ${a}`}let u=v(e,1);return r&&u===1&&s!=="auto"?s:`${s} / span ${u}`},It=t=>{let e=new Set,n=/\[([^\]]+)\]/g,o;for(;(o=n.exec(String(t??"")))!==null;){let r=o[1].trim();r&&r.split(/\s+/).forEach(s=>e.add(s))}return Array.from(e)},le=t=>/\//.test(String(t??""))||/\bspan\s+\d+\b/i.test(String(t??""));var me=Number.MAX_SAFE_INTEGER;function sn({clientId:t,setMany:e,parentMeta:n}){if(!t)return null;let{get:o}=yt(t),{writeColumn:r,writeRow:s}=vt(t),u=le(o("gridArea")),a=n?.columns??0,d=n?.rows??0,c=(0,w.useMemo)(()=>Rt(o("gridColumn")),[o]),i=(0,w.useMemo)(()=>Rt(o("gridRow")),[o]),f=c.end?"end":"span",g=i.end?"end":"span",[m,k]=(0,w.useState)(f),[b,S]=(0,w.useState)(g);(0,w.useEffect)(()=>{k(f)},[f]),(0,w.useEffect)(()=>{S(g)},[g]);let l=(0,w.useMemo)(()=>It(n.columnTemplate),[n.columnTemplate]),y=(0,w.useMemo)(()=>It(n.rowTemplate),[n.rowTemplate]),p=l.length>0,A=y.length>0,C=(x,B)=>B?N(x)?"number":"named":"number",R=x=>x?N(x)?"number":x==="auto"?"auto":"named":"number",M=(x,B)=>{let lt=R(x);return B?lt:lt==="named"?"number":lt},W=C(c.start,p),fn=C(i.start,A),gn=M(c.end,p),kn=M(i.end,A),z=(0,w.useMemo)(()=>{if(!a||!N(c.start))return me;let x=Y(v(c.start,1),1,a);return Math.max(1,a-x+1)},[a,c.start]),X=(0,w.useMemo)(()=>{if(!d||!N(i.start))return me;let x=Y(v(i.start,1),1,d);return Math.max(1,d-x+1)},[d,i.start]),[he,ut]=(0,w.useState)(null),[Ce,at]=(0,w.useState)(null);(0,w.useEffect)(()=>{ut(null)},[o("gridColumn")]),(0,w.useEffect)(()=>{at(null)},[o("gridRow")]);let Be=(0,w.useCallback)(x=>{let B=v(x,1);c.end?r(m,{start:B,end:c.end}):r(m,{start:B,span:Y(v(c.span,1),1,z)})},[c.end,c.span,z,r]),Te=(0,w.useCallback)(x=>{let B=String(x||"auto").trim()||"auto";c.end?r(m,{start:B,end:c.end}):r(m,{start:B,span:v(c.span,1)})},[c.end,c.span,r]),Me=(0,w.useCallback)(x=>{let B=Y(v(x,1),1,z);r(m,{start:c.start||"auto",span:B})},[c.start,z,r]),Re=(0,w.useCallback)(x=>{let B=v(x,0);ut(B),x!==0&&(r(m,{start:c.start||"auto",end:Mt(x,1)}),ut(null))},[c.start,r]),Ie=(0,w.useCallback)(x=>{r(m,{start:c.start||"auto",end:String(x||"auto").trim()||"auto"})},[c.start,r]),ve=(0,w.useCallback)(()=>{r(m,{start:c.start||"auto",end:"auto"})},[c.start,r]),Ee=(0,w.useCallback)(x=>{let B=v(x,1);i.end?s(b,{start:B,end:i.end}):s(b,{start:B,span:Y(v(i.span,1),1,X)})},[i.end,i.span,X,s]),Pe=(0,w.useCallback)(x=>{let B=String(x||"auto").trim()||"auto";i.end?s(b,{start:B,end:i.end}):s(b,{start:B,span:v(i.span,1)})},[i.end,i.span,b,s]),Oe=(0,w.useCallback)(x=>{let B=Y(v(x,1),1,X);s(b,{start:i.start||"auto",span:B})},[i.start,X,s]),$e=(0,w.useCallback)(x=>{let B=v(x,0);at(B),x!==0&&(s(b,{start:i.start||"auto",end:Mt(x,1)}),at(null))},[i.start,b,s]),_e=(0,w.useCallback)(x=>{s(b,{start:i.start||"auto",end:String(x||"auto").trim()||"auto"})},[i.start,b,s]),De=(0,w.useCallback)(()=>{s(b,{start:i.start||"auto",end:"auto"})},[i.start,b,s]);return{hasArea:u,disabledLines:u,numbers:{isIntToken:N,toInt:v,parseSigned:pe},column:{values:{...c},modes:{uiStart:p?N(c.start)?"number":"named":"number",uiEnd:c.end?N(c.end)?"number":String(c.end)==="auto"?"auto":"named":"number",mode:m},setMode:k,named:{lines:l,hasLines:p},caps:{span:z},drafts:{end:he,setEnd:ut},handlers:{onStartNumber:Be,onStartNamed:Te,onSpan:Me,onEndNumber:Re,onEndNamed:Ie,onEndAuto:ve}},row:{values:{...i},modes:{uiStart:A?N(i.start)?"number":"named":"number",uiEnd:i.end?N(i.end)?"number":String(i.end)==="auto"?"auto":"named":"number",mode:b},setMode:S,named:{lines:y,hasLines:A},caps:{span:X},drafts:{end:Ce,setEnd:at},handlers:{onStartNumber:Ee,onStartNamed:Pe,onSpan:Oe,onEndNumber:$e,onEndNamed:_e,onEndAuto:De}}}}var it=h(E());function vt(t){let{set:e,setMany:n,unset:o}=nt(t),r=(0,it.useCallback)(d=>{let c=typeof d=="string"?d.trim():"";if(!c){o("gridArea");return}e("gridArea",c)},[e,o]),s=(0,it.useCallback)((d,c,i,f)=>{let g={};d!==void 0&&(g.gridRowStart=d||void 0),c!==void 0&&(g.gridRowEnd=c||void 0),i!==void 0&&(g.gridColumnStart=i||void 0),f!==void 0&&(g.gridColumnEnd=f||void 0),n(g)},[n]),u=(0,it.useCallback)((d,c)=>{let i=d==="end"?st({start:c.start,end:c.end},{mode:"end"}):st({start:c.start,span:c.span},{mode:"span"});e("gridColumn",i)},[e]),a=(0,it.useCallback)((d,c)=>{let i=d==="end"?st({start:c.start,end:c.end},{mode:"end"}):st({start:c.start,span:c.span},{mode:"span"});e("gridRow",i)},[e]);return{setArea:r,setTracks:s,writeColumn:u,writeRow:a,set:e,setMany:n,unset:o}}var Et=h(P()),fe=h(V()),Pt=h(E());function Ot(t){let e=(0,Et.useSelect)(s=>t?s(fe.store).getBlock(t)?.attributes??void 0:void 0,[t]),n=(0,Et.useSelect)(D,[]),o=(0,Pt.useMemo)(()=>e&&n?_(e,n):void 0,[e,n]);if(!o)return;let r=s=>String(o.$get(s)??"");return(0,Pt.useMemo)(()=>{let s=r("gridTemplateColumns"),u=r("gridTemplateRows"),a=r("gridTemplateAreas"),d=Bt(s),c=Bt(u),i=Ct(s),f=Ct(u),g={...d,count:i},m={...c,count:f},k=ae(a),b={template:a||"",hasAreas:k.hasAreas,cols:k.cols,rows:k.rows};return{columns:g,rows:m,areas:b,activePane:{columns:g.mode,rows:m.mode}}},[o.$get,o.costered,n])}var J=h(E()),ge=h(P()),ke=h(V());function Tt(t){let{set:e,unset:n}=nt(t),o=(0,ge.useSelect)(m=>m(ke.store)?.getBlock?.(t)?.innerBlocks?.length||0,[t]),r=Ot(t),s=r?.columns?.template??"",u=r?.rows?.template??"",a=r?.areas?.template??"",d=(0,J.useMemo)(()=>{if(s){let k=H(s),b=T(k?.count??k);if(b>0)return b}let m=T(r?.rows?.count)||(()=>{if(!u)return 0;let k=H(u);return T(k?.count??k)})();return m>0&&o>0?Math.ceil(o/m):0},[s,u,r?.rows?.count,o]),c=(0,J.useMemo)(()=>{let m=T(r?.rows?.count);if(m>0)return m;if(u){let b=H(u),S=T(b?.count??b);if(S>0)return S}let k=T(d);return k>0&&o>0?Math.ceil(o/k):0},[u,r?.rows?.count,d,o]),i=(0,J.useCallback)(m=>{let k=ce(m,".");k?e("gridTemplateAreas",k):n("gridTemplateAreas")},[e,n]),f=(0,J.useCallback)(()=>{n("gridTemplateAreas")},[n]),g=(0,J.useCallback)((m=".")=>{let k=de(a,m),b=T(k[0]?.length)||T(d),S=T(k.length)||T(c);return b===0&&S>0&&o>0?b=Math.ceil(o/S):S===0&&b>0&&o>0&&(S=Math.ceil(o/b)),b===0&&(b=1),S===0&&(S=1),ot(k.map(y=>y.map(p=>String(p||m))),b,S,m)},[a,d,c,o]);return{areasTemplate:a,trackColumnCount:d,trackRowCount:c,applyMatrixToStore:i,clearAreasInStore:f,seedFromStore:g}}var $t=h(E()),_t=h(P());function un(t,e={}){let n=t??void 0,o=e.keys??Array.from(ne),{parentId:r,parentBlock:s}=(0,_t.useSelect)(c=>{let i=c("core/block-editor"),f=n??i?.getSelectedBlockClientId?.()??void 0;if(!f)return{parentId:null,parentBlock:null};let g=i?.getBlockRootClientId?.(f)??null;return g?{parentId:g,parentBlock:i?.getBlock?.(g)||null}:{parentId:null,parentBlock:null}},[]),u=(0,_t.useSelect)(D,[]),a=(0,$t.useMemo)(()=>{let c=s?.attributes;return c&&u?_(c,u):null},[s,u]),d=(0,$t.useMemo)(()=>{if(!a)return null;let c={};for(let i=0;i<o.length;i++){let f=o[i];c[f]=a?.$get(f,{cascade:!0})}return c},[a,o]);return{parentId:r,parentAttrs:d,parentBlock:s,parentAugmented:a}}var Dt=h(P()),G=h(E());function an(t){if(!t)return[];let e=new Set,n=t.split('"').filter((o,r)=>r%2===1);for(let o=0;o<n.length;o++){let r=n[o].trim();if(!r)continue;let s=r.split(/\s+/);for(let u=0;u<s.length;u++){let a=s[u];a==="."||a.toLowerCase()==="none"||e.add(a)}}return Array.from(e)}function cn(t){let{parentId:e,parentBlock:n}=(0,Dt.useSelect)(m=>{let k=m("core/block-editor"),b=t||k?.getSelectedBlockClientId?.();if(!b)return{parentId:null,parentBlock:null};let S=k?.getBlockRootClientId?.(b)??null;if(!S)return{parentId:null,parentBlock:null};let l=k?.getBlock?.(S)??null;return{parentId:S,parentBlock:l}},[t]),o=(0,Dt.useSelect)(D,[]),r=(0,G.useMemo)(()=>{let m=n?.attributes;return m&&o?_(m,o):null},[n,o]),s=(0,G.useMemo)(()=>String(r?.$get?.("gridTemplateColumns",{cascade:!0})??""),[r,r?.$bp]),u=(0,G.useMemo)(()=>String(r?.$get?.("gridTemplateRows",{cascade:!0})??""),[r,r?.$bp]),a=(0,G.useMemo)(()=>String(r?.$get?.("gridTemplateAreas",{cascade:!0})??""),[r,r?.$bp]),d=(0,G.useMemo)(()=>H(s).count,[s]),c=(0,G.useMemo)(()=>H(u).count,[u]),i=(0,G.useMemo)(()=>String(r?.$get?.("display",{cascade:!0})??"").trim(),[r,r?.$bp]),f=(0,G.useMemo)(()=>/^(grid|inline-grid)$/i.test(i),[i]),g=(0,G.useMemo)(()=>an(a),[a]);return{parentId:e,parentBlock:n,parent:r,display:i,isGrid:f,columnTemplate:s,rowTemplate:u,areaTemplate:a,columns:d,rows:c,areaNames:g}}var ye=h(P()),be=h(V());function dn(t,e){return(0,ye.useSelect)(n=>{if(typeof t=="string"&&t.trim()!=="")return t;let o=n(be.store),r=(e??void 0)||o?.getSelectedBlockClientId?.(),u=(r?o?.getBlock?.(r):void 0)?.name;return typeof u=="string"&&u.trim()!==""?u:void 0},[t,e])}var Gt=h(P()),Se=h(V()),Ae=h(E());var Nt=Object.freeze({});function pn(){let t=(0,Gt.useSelect)(D,[]),{selectedBlock:e,clientId:n,attrVersion:o}=(0,Gt.useSelect)(s=>{let u=s(Se.store),a=u?.getSelectedBlockClientId?.(),d=a?u?.getBlock?.(a):null,i=(d?.attributes??Nt)?.costered??{},f=Array.isArray(i?.desktop?.styles)?i.desktop.styles.length:0,g=Array.isArray(i?.tablet?.styles)?i.tablet.styles.length:0,m=Array.isArray(i?.mobile?.styles)?i.mobile.styles.length:0,k=`${f}-${g}-${m}`;return{selectedBlock:d,clientId:a,attrVersion:k}},[]),r=(0,Ae.useMemo)(()=>{let s=e?.attributes??Nt;return _(s,t)||Nt},[e,t,o]);return{selectedBlock:e,clientId:n,attributes:r}}var pt=h(P()),jt=h(we()),Lt=h(E());function ln(t,e,n="costered-blocks"){let o=(0,pt.useSelect)(d=>d(jt.store).get(n,t)?.get?.(n,t)??e,[t,e,n]),{set:r,__experimentalReset:s}=(0,pt.useDispatch)(jt.store),u=(0,Lt.useCallback)(d=>{t.startsWith("__invalid__")||r(n,t,d)},[t,n,r]),a=(0,Lt.useCallback)(()=>{t.startsWith("__invalid__")||s?.(n,t)},[t,n,s]);return[o,u,a]}function mn(t,e={}){let n=s=>{if(s===null)return;let u=s?.trim();if(u)return encodeURIComponent(u)},o=n(e.blockName),r=n(e.variant);return!o&&!r?t:o&&!r?`${t}:${o}`:!o&&r?`${t}#${r}`:`${t}:${o}#${r}`}})();
