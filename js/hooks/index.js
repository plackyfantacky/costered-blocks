(()=>{var Ne=Object.create;var Wt=Object.defineProperty;var Ge=Object.getOwnPropertyDescriptor;var je=Object.getOwnPropertyNames;var Le=Object.getPrototypeOf,We=Object.prototype.hasOwnProperty;var ct=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Ue=(t,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of je(e))!We.call(t,r)&&r!==n&&Wt(t,r,{get:()=>e[r],enumerable:!(o=Ge(e,r))||o.enumerable});return t};var h=(t,e,n)=>(n=t!=null?Ne(Le(t)):{},Ue(e||!t||!t.__esModule?Wt(n,"default",{value:t,enumerable:!0}):n,t));var P=ct((bn,Ut)=>{Ut.exports=wp.data});var V=ct((Sn,Kt)=>{Kt.exports=wp.blockEditor});var E=ct((An,Ft)=>{Ft.exports=wp.element});var we=ct((vr,xe)=>{xe.exports=wp.preferences});var kt=h(P()),oe=h(V()),G=h(E());var I={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var q=t=>Array.isArray(t)?t:[],Fe=t=>new Set(q(t));function $(t){let e=I.attributes||{};return Object.fromEntries(Object.entries(e).filter(([,n])=>n.group===t))}var Ht=$("display"),Yt=$("dimension"),Jt=$("margin"),Vt=$("padding"),zt=$("flex"),Xt=$("flex-item"),qt=$("grid"),mt=$("grid-item"),Zt=$("position"),Qt=$("shared"),hn={...Ht,...Yt,...Jt,...Vt,...zt,...Xt,...qt,...mt,...Zt,...Qt},te=new Set([...Object.keys(mt)]),Cn=q(I?.collections?.editorStyles),ee=Fe(I?.collections?.unitless),ft=I?.settings?.gridUnit||"1fr",Bn=!!I?.settings?.appendImportantToMirroredStyles,Tn=I?.settings?.styleTagId||"costered-blocks-style-mirror",Z=I?.settings?.reduxStoreKey||"costered/ui",Mn=I?.settings?.breakpoints?.mobile??782,Rn=I?.settings?.breakpoints?.tablet??1024,In=I?.settings?.breakpoints?.desktop??1440,vn=q(I?.collections?.clearSets?.gridAreas),En=q(I?.collections?.clearSets?.gridColumns),Pn=q(I?.collections?.clearSets?.gridRows);var ne=new Set([...Object.keys(Ht),...Object.keys(Yt),...Object.keys(Vt),...Object.keys(Jt),...Object.keys(zt),...Object.keys(Xt),...Object.keys(qt),...Object.keys(mt),...Object.keys(Zt),...Object.keys(Qt)]),On=Object.fromEntries(Object.entries(I.attributes).map(([t,e])=>[t,e.css]));var U=t=>{let e=r=>{let s=r?.styles;return s&&typeof s=="object"&&!Array.isArray(s)?{...r,styles:{...s}}:{...r||{},styles:{}}},n=t&&typeof t=="object"?t:{},o=!!n.desktop||!!n.tablet||!!n.mobile;return{desktop:e(n.desktop),tablet:e(n.tablet),mobile:e(n.mobile)}};var gt=t=>t==null||t===""||t==="null"||t==="undefined";var He="desktop",Ye=Object.freeze({});function re(t,e){let n=t?t[e]:void 0;return typeof n=="string"||typeof n=="number"?n:void 0}function _(t,e){let n=t||Ye,o={...n},r=U(n.costered),s=u=>{switch(u){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},a=(u,i={})=>{let g=i&&Object.prototype.hasOwnProperty.call(i,"cascade")?!!i.cascade:!0,f=i&&Object.prototype.hasOwnProperty.call(i,"raw")?!!i.raw:!g,l=e||He;if(f){let y=re(r?.[l]?.styles||{},u);return gt(y)?void 0:y}let b=s(l);for(let y of b){let x=re(r?.[y]?.styles||{},u);if(!gt(x))return x}};return Object.defineProperties(o,{$get:{value:a,enumerable:!1},$getCascade:{value:u=>a(u,{cascade:!0}),enumerable:!1},$getMany:{value:(u,i)=>{let g={};for(let f=0;f<u.length;f++){let l=u[f];g[l]=a(l,i)}return g},enumerable:!1},$bp:{value:e,enumerable:!1}}),o}function yt(t){let e=t??void 0,n=(0,kt.useSelect)(g=>g(Z)?.getBreakpoint?.()||"desktop",[]),o=(0,kt.useSelect)(g=>e?g(oe.store)?.getBlockAttributes?.(e):void 0,[e]),r=(0,G.useMemo)(()=>o?_(o,n):void 0,[o,n]),s=(0,G.useCallback)((g,f)=>{if(r?.$get)return r.$get(g,f)},[r]),a=(0,G.useCallback)((g,f)=>r?.$get?r.$get(g,f):void 0,[r]),c=(0,G.useCallback)((g,f)=>r?.$getMany?r.$getMany([...g],f):Object.fromEntries(g.map(l=>[l,void 0])),[r]),d=(0,G.useCallback)((g,f="")=>{let l=s(g);return typeof l=="string"?l:f},[s]),u=(0,G.useCallback)((g,f=0)=>{let l=s(g);return typeof l=="number"?l:f},[s]);function i(g,f,l){let b=s(g);return typeof b=="string"&&f.includes(b)?b:l}return(0,G.useMemo)(()=>({get:s,getAs:a,getMany:c,getString:d,getNumber:u,getEnum:i,bp:n,attributes:r}),[s,a,c,d,u,i,n,r])}var j=h(E()),K=h(P());function Q(t,e){let o=t?.costered?.[e]?.styles;return o&&typeof o=="object"&&!Array.isArray(o)?{...o}:{}}function tt(t,e,n){if(!n||typeof n!="object"||Array.isArray(n))throw new Error("withBreakpointStyles expects a plain object of camelCase CSS properties \u2192 string values.");let o=t.costered??{},s={...o[e]??{styles:{}},styles:{...n}},a={...o,[e]:s};return{...t,costered:a}}function Je(t){return typeof t=="string"&&t.trim().length>0}function Ve(){let t=globalThis?.crypto?.randomUUID;if(typeof t=="function")return t.call(globalThis.crypto);let e=Date.now().toString(36),n=Math.random().toString(36).slice(2,10);return`${e}-${n}`}function et(t){t&&(Je(t.costeredId)||(t.costeredId=Ve()))}var bt=h(P());var St="desktop",At="tablet",xt="mobile",ze=t=>{let e=String(t??"").toLowerCase();return e==="tablet"||e==="medium"?At:e==="mobile"||e==="phone"?xt:St},se=t=>{try{let n=t?.("core/editor")?.getDeviceType?.();if(n)return n}catch{}try{let e=t("core/edit-post");if(e){if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType()}}catch{}try{let e=t("core/edit-site");if(e){if(typeof e.getDeviceType=="function")return e.getDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType();if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType()}}catch{}},D=t=>{try{let o=(typeof t=="function"?t(Z):(0,bt.select)(Z))?.getBreakpoint?.();if(o===St||o===At||o===xt)return o}catch{}let e=se(typeof t=="function"?t:bt.select);if(e)return ze(e);if(typeof window<"u"){let n=window.__COSTERED_VIEWPORT_BP;if(n===St||n===At||n===xt)return n}return"desktop"};var Xe="desktop";function nt(t,e,n={trim:!0,emptyUnsets:!0}){let o=(typeof e=="object"?e:n)||{},{trim:r=!0,emptyUnsets:s=!0,breakpoint:a}=o,c=(0,K.useSelect)(D,[]),d=a||c||Xe,{updateBlockAttributes:u}=(0,K.useDispatch)("core/block-editor"),i=(0,j.useMemo)(()=>{if(typeof t=="string"||t===null){let m=t??void 0;return k=>{if(m)if(typeof k=="function"){let p=(0,K.select)("core/block-editor")?.getBlockAttributes(m)||{},S=k(p)||p;u(m,S)}else u(m,k||{})}}if(typeof t=="function"&&(typeof e=="string"||e==null)){let m=t,k=e??void 0;return p=>{if(!k)return;if(typeof p=="function"){let C=(0,K.select)("core/block-editor")?.getBlockAttributes(k)||{},R=p(C)||C;try{m(k,R)}catch{m(R)}return}let S=p||{};try{m(k,S)}catch{m(S)}}}if(typeof t=="function"){let m=t;return k=>{if(typeof k=="function"){let p=k({});m(p)}else m(k||{})}}return()=>{}},[t,e,u]),g=(0,j.useCallback)((m,k)=>{if(m==null)return;if(te.has(k)){let S=typeof m=="string"&&r?m.trim():String(m);return s&&S===""?void 0:S}let p=m;if(r&&typeof p=="string"&&(p=p.trim()),!(s&&(p===""||p=="null"||p=="undefined"))){if(ee.has(k)){if(typeof p=="string"&&/^-?\d+(\.\d+)?$/.test(p)){let S=Number(p);return Number.isFinite(S)?S:void 0}return typeof p=="number"&&Number.isFinite(p)?p:void 0}if(typeof p=="number")return Number.isFinite(p)?p:void 0;if(typeof p=="string")return p==="null"||p==="undefined"?void 0:p;try{return String(p)}catch{return}}},[r,s]),f=(0,j.useCallback)((m,k)=>{i(p=>{let S={...p||{}};et(S),S.costered=U(S.costered);let C=g(k,m),M={...Q(S,d)};if(C===void 0)if(Object.prototype.hasOwnProperty.call(M,m))delete M[m];else return p;else M[m]=String(C);return tt(S,d,M)})},[i,d,g]),l=(0,j.useCallback)(m=>{!m||typeof m!="object"||i(k=>{let p={...k||{}};et(p),p.costered=U(p.costered);let C={...Q(p,d)};for(let[R,M]of Object.entries(m)){let W=g(M,R);W===void 0?Object.prototype.hasOwnProperty.call(C,R)&&delete C[R]:C[R]=String(W)}return tt(p,d,C)})},[i,d,g]),b=(0,j.useCallback)(m=>{i(k=>{let p={...k||{}};et(p),p.costered=U(p.costered);let S=Q(p,d);if(!Object.prototype.hasOwnProperty.call(S,m))return k;let C={...S};return delete C[m],tt(p,d,C)})},[i,d]),y=(0,j.useCallback)(m=>{!Array.isArray(m)||m.length===0||i(k=>{let p={...k||{}};et(p),p.costered=U(p.costered);let S=Q(p,d),C=!1,R={...S};for(let M=0;M<m.length;M++){let W=m[M];Object.prototype.hasOwnProperty.call(R,W)&&(delete R[W],C=!0)}return C?tt(p,d,R):k})},[i,d]),x=(0,j.useCallback)(m=>({set:(k,p)=>f(`${m}${k}`,p),setMany:k=>{let p={};for(let[S,C]of Object.entries(k))p[`${m}${S}`]=C;l(p)},unset:k=>b(`${m}${k}`),unsetMany:k=>y(k.map(p=>`${m}${p}`))}),[f,l,b,y]);return{set:f,setMany:l,unset:b,unsetMany:y,withPrefix:x,activeBreakpoint:d}}var O=h(E());function ht(t){return String(t??"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function qe(t){let e=String(t??"").trim();if(!e)return[];let n=0,o=0,r="",s=[];for(let a=0;a<e.length;a++){let c=e[a];if(c==="("){n++,r+=c;continue}if(c===")"){n=Math.max(0,n-1),r+=c;continue}if(c==="["){o++,r+=c;continue}if(c==="]"){o=Math.max(0,o-1),r+=c;continue}if(c===" "&&n===0&&o===0){r&&(s.push(r),r="");continue}r+=c}return r&&s.push(r),s}function Ze(t){let e=String(t??"").trim();if(!e)return null;let n=e.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);if(!n||n[1]===void 0||n[2]===void 0)return null;let o=Number.parseInt(n[1],10),r=n[2].trim();return!Number.isFinite(o)||o<0||r===""?null:{count:o,unit:r}}function Qe(t,e=ft){return t>0?`repeat(${t}, ${e})`:null}function H(t,e=ft){if(!t||typeof t!="string")return{count:0,unit:e};let n=t.trim();if(!n)return{count:0,unit:e};if(/^subgrid\b/i.test(n))return{count:0,unit:e};if(n=n.replace(/\[[^\]]*]/g," ").trim(),!n)return{count:0,unit:e};let o=n.match(/^\s*repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)\s*$/i);if(o){let s=o[2];return{count:0,unit:wt(s,e)}}let r=tn(n,e);return{count:r.count,unit:r.unit||e}}function tn(t,e){let n=ie(t);if(n){let c=n.inner.trim(),u=rt(c).length,i=wt(c,e);return{count:n.times*u,unit:i||e}}let o=rt(t),r=0,s="";for(let c of o){if(/^\s*repeat\(/i.test(c)){let d=ue(c);if(d){r+=d.count,!s&&d.unitHint&&(s=d.unitHint);continue}r+=1;continue}r+=1,!s&&dt(c)&&(s=F(c)??"")}let a=s||wt(t,e);return{count:r,unit:a||e}}function ie(t){let e=t.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!e)return null;let n=parseInt(e[1],10),o=e[2];return!Number.isFinite(n)||n<0?null:{times:n,inner:o}}function ue(t){if(t.match(/^\s*repeat\(\s*auto-(fit|fill)\s*,/i))return{count:0,unitHint:""};let n=t.match(/^\s*repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!n)return null;let o=parseInt(n[1],10)||0;if(o<=0)return{count:0,unitHint:""};let r=n[2].trim(),s=rt(r),a=o*s.length,c="";if(s.length===1)c=F(s[0])??"";else{let d=s.find(dt);c=F(d)??""}return{count:a,unitHint:c}}function rt(t){let e=[],n=0,o="";for(let r=0;r<t.length;r++){let s=t[r];if(s==="("){n++,o+=s;continue}if(s===")"){n=Math.max(0,n-1),o+=s;continue}if(n===0&&/\s/.test(s)){o.trim()&&e.push(o.trim()),o="";continue}o+=s}return o.trim()&&e.push(o.trim()),e}function wt(t,e){if(!t)return e;let n=ie(t);if(n){let s=rt(n.inner);if(s.length===1)return F(s[0])||e;let a=s.find(dt);if(a)return F(a)||e}let o=rt(t);if(o.length===1)return F(o[0])||e;let r=o.find(dt);if(r)return F(r)||e;for(let s of o){let a=ue(s);if(a&&a.unitHint)return a.unitHint}return e}function dt(t){return t?!!(/^(minmax|fit-content|clamp|var)\(/i.test(t)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(t)||/^(auto|max-content|min-content)$/i.test(t)):!1}function F(t){return t?t.trim():""}function T(t){let e=Number(t);return Number.isFinite(e)&&e>=0?Math.floor(e):0}function ae(t){let e=String(t??"").trim();if(!e)return{hasAreas:!1,cols:0,rows:0};let n=[],o=/"([^"]*)"|'([^']*)'/g,r;for(;r=o.exec(e);){let a=(r[1]??r[2]??"").trim();a&&n.push(a)}return n.length?{hasAreas:!0,cols:n.reduce((a,c)=>{let d=c.split(/\s+/).filter(Boolean).length;return Math.max(a,d)},0),rows:n.length}:{hasAreas:!1,cols:0,rows:0}}function ce(t,e="."){if(!Array.isArray(t)||t.length===0)return"";let n=t.map(r=>(Array.isArray(r)?r:[]).map(s=>{let a=String(s??"").trim();return a===""?e:a}));return n.some(r=>r.some(s=>s!==e))?n.map(r=>`"${r.join(" ")}"`).join(" "):""}function de(t,e="."){let n=String(t??"").trim();if(!n)return[];let o=[],r=/"([^"]*)"|'([^']*)'/g,s;for(;s=r.exec(n);){let a=(s[1]??s[2]??"").trim(),c=a.length?a.split(/\s+/g).map(d=>d&&d!==e?d:e):[];o.push(c)}return o}function ot(t,e,n,o){let r=T(e),s=T(n);if(r===0||s===0)return[];let a=Array.isArray(t)?t:[],c=[];for(let d=0;d<s;d++){let u=Array.isArray(a[d])?a[d]:[],i=Array.from({length:r},(g,f)=>{let l=u[f];return l===void 0?o:l});c.push(i)}return c}function Ct(t){let e=String(t??"").trim();if(!e||/^subgrid\b/i.test(e))return 0;let n=e.replace(/\[[^\]]*\]/g," ").trim();return n=n.replace(/repeat\(\s*(\d+)\s*,\s*([^)]+)\)/gi,(o,r,s)=>Array.from({length:parseInt(r,10)||0},()=>"X").join(" ")),n=n.replace(/\s+/g," ").trim(),n?n.split(" ").filter(Boolean).length:0}function en(t){let e=Ze(t);if(!e)return null;let n=ht(Qe(e.count,e.unit));return{mode:"simple",template:t?String(t):null,normalised:n,simple:{count:e.count,unit:e.unit}}}function nn(t){let e=qe(t);if(!e.length)return null;let n=ht(e.join(" "));return{mode:"tracks",template:t?String(t):null,normalised:n,tracks:e}}var rn=[en,nn];function Bt(t){let e=t??"";for(let n of rn){let o=n(e);if(o)return o}return{mode:"raw",template:t?String(t):null,normalised:ht(t??"")}}function on(t){let{areasTemplate:e,trackColumnCount:n,trackRowCount:o,applyMatrixToStore:r,clearAreasInStore:s,seedFromStore:a}=Tt(t),c=(0,O.useMemo)(()=>a("."),[a]),d=(0,O.useMemo)(()=>({count:c?.[0]?.length||T(n)}),[c,n]),u=(0,O.useMemo)(()=>({count:c?.length||T(o)}),[c,o]),i=(0,O.useCallback)(x=>{let m=x[0]?.length||0,k=x.length||0,p=x.map(C=>C.map(R=>{let M=String(R??"").trim();return M===""?".":M})),S=ot(p,m,k,".");r(S)},[r]),g=(0,O.useMemo)(()=>{let x=c?.length||0,m=x&&c[0]?.length||0;return{rows:x,cols:m}},[c]),f=(0,O.useCallback)((x,m)=>x>=0&&x<g.cols&&m>=0&&m<g.rows,[g]),l=(0,O.useCallback)((x,m,k)=>{let p=c;if(p.length===0)return;let S=Math.trunc(T(x))||0,C=Math.trunc(T(m))||0;if(!f(S,C))return;let R=String(k??"").trim()||".",M=p.map(W=>W.slice());M[C][S]=R,i(M)},[c,i,f]),b=(0,O.useCallback)(({rows:x,cols:m})=>{let k=T(x),p=T(m);if(!(k>0&&p>0))return;let S=ot(c,p,k,".");i(S)},[c,i]),y=(0,O.useCallback)(()=>s(),[s]);return{matrix:c,columnData:d,rowData:u,setCell:l,resize:b,clear:y}}var w=h(E());function Y(t,e,n){return Math.min(Math.max(t,e),n)}function v(t,e=1){let n=Number(t);return Number.isFinite(n)?Math.trunc(n):e}function N(t){if(typeof t=="number")return Number.isInteger(t);let e=String(t);return/^-?\d+$/.test(e)}function Mt(t,e=1){let n=Number.parseInt(String(t),10);return Number.isFinite(n)&&n!==0?n:e}function pe(t){let e=Number.parseInt(String(t),10);return Number.isFinite(e)?e:""}var Rt=t=>{let e={start:"",span:"",end:""},n=String(t??"").trim();if(!n)return e;let o=n.split("/").map(c=>c.trim());if(o.length===1)return/^span\s+\d+$/i.test(o[0])?e.span=o[0].replace(/^span\s+/i,""):e.start=o[0],e;let r=o[0],s=o[1];e.start=r||"auto";let a=/^span\s+(\d+)$/i.exec(s);return a?e.span=a[1]:e.end=s,e},st=({start:t,span:e,end:n},{mode:o="span",collapseSpanOne:r=!0}={})=>{let s=String(t??"").trim()||"auto";if(o==="end"){let c=String(n??"").trim()||"auto";return`${s} / ${c}`}let a=v(e,1);return r&&a===1&&s!=="auto"?s:`${s} / span ${a}`},It=t=>{let e=new Set,n=/\[([^\]]+)\]/g,o;for(;(o=n.exec(String(t??"")))!==null;){let r=o[1].trim();r&&r.split(/\s+/).forEach(s=>e.add(s))}return Array.from(e)},le=t=>/\//.test(String(t??""))||/\bspan\s+\d+\b/i.test(String(t??""));var me=Number.MAX_SAFE_INTEGER;function sn({clientId:t,setMany:e,parentMeta:n}){if(!t)return null;let{get:o}=yt(t),{writeColumn:r,writeRow:s}=vt(t),a=le(o("gridArea")),c=n?.columns??0,d=n?.rows??0,u=(0,w.useMemo)(()=>Rt(o("gridColumn")),[o]),i=(0,w.useMemo)(()=>Rt(o("gridRow")),[o]),g=u.end?"end":"span",f=i.end?"end":"span",[l,b]=(0,w.useState)(g),[y,x]=(0,w.useState)(f);(0,w.useEffect)(()=>{b(g)},[g]),(0,w.useEffect)(()=>{x(f)},[f]);let m=(0,w.useMemo)(()=>It(n.columnTemplate),[n.columnTemplate]),k=(0,w.useMemo)(()=>It(n.rowTemplate),[n.rowTemplate]),p=m.length>0,S=k.length>0,C=(A,B)=>B?N(A)?"number":"named":"number",R=A=>A?N(A)?"number":A==="auto"?"auto":"named":"number",M=(A,B)=>{let lt=R(A);return B?lt:lt==="named"?"number":lt},W=C(u.start,p),mn=C(i.start,S),fn=M(u.end,p),gn=M(i.end,S),z=(0,w.useMemo)(()=>{if(!c||!N(u.start))return me;let A=Y(v(u.start,1),1,c);return Math.max(1,c-A+1)},[c,u.start]),X=(0,w.useMemo)(()=>{if(!d||!N(i.start))return me;let A=Y(v(i.start,1),1,d);return Math.max(1,d-A+1)},[d,i.start]),[he,ut]=(0,w.useState)(null),[Ce,at]=(0,w.useState)(null);(0,w.useEffect)(()=>{ut(null)},[o("gridColumn")]),(0,w.useEffect)(()=>{at(null)},[o("gridRow")]);let Be=(0,w.useCallback)(A=>{let B=v(A,1);u.end?r(l,{start:B,end:u.end}):r(l,{start:B,span:Y(v(u.span,1),1,z)})},[u.end,u.span,z,r]),Te=(0,w.useCallback)(A=>{let B=String(A||"auto").trim()||"auto";u.end?r(l,{start:B,end:u.end}):r(l,{start:B,span:v(u.span,1)})},[u.end,u.span,r]),Me=(0,w.useCallback)(A=>{let B=Y(v(A,1),1,z);r(l,{start:u.start||"auto",span:B})},[u.start,z,r]),Re=(0,w.useCallback)(A=>{let B=v(A,0);ut(B),A!==0&&(r(l,{start:u.start||"auto",end:Mt(A,1)}),ut(null))},[u.start,r]),Ie=(0,w.useCallback)(A=>{r(l,{start:u.start||"auto",end:String(A||"auto").trim()||"auto"})},[u.start,r]),ve=(0,w.useCallback)(()=>{r(l,{start:u.start||"auto",end:"auto"})},[u.start,r]),Ee=(0,w.useCallback)(A=>{let B=v(A,1);i.end?s(y,{start:B,end:i.end}):s(y,{start:B,span:Y(v(i.span,1),1,X)})},[i.end,i.span,X,s]),Pe=(0,w.useCallback)(A=>{let B=String(A||"auto").trim()||"auto";i.end?s(y,{start:B,end:i.end}):s(y,{start:B,span:v(i.span,1)})},[i.end,i.span,y,s]),Oe=(0,w.useCallback)(A=>{let B=Y(v(A,1),1,X);s(y,{start:i.start||"auto",span:B})},[i.start,X,s]),$e=(0,w.useCallback)(A=>{let B=v(A,0);at(B),A!==0&&(s(y,{start:i.start||"auto",end:Mt(A,1)}),at(null))},[i.start,y,s]),_e=(0,w.useCallback)(A=>{s(y,{start:i.start||"auto",end:String(A||"auto").trim()||"auto"})},[i.start,y,s]),De=(0,w.useCallback)(()=>{s(y,{start:i.start||"auto",end:"auto"})},[i.start,y,s]);return{hasArea:a,disabledLines:a,numbers:{isIntToken:N,toInt:v,parseSigned:pe},column:{values:{...u},modes:{uiStart:p?N(u.start)?"number":"named":"number",uiEnd:u.end?N(u.end)?"number":String(u.end)==="auto"?"auto":"named":"number",mode:l},setMode:b,named:{lines:m,hasLines:p},caps:{span:z},drafts:{end:he,setEnd:ut},handlers:{onStartNumber:Be,onStartNamed:Te,onSpan:Me,onEndNumber:Re,onEndNamed:Ie,onEndAuto:ve}},row:{values:{...i},modes:{uiStart:S?N(i.start)?"number":"named":"number",uiEnd:i.end?N(i.end)?"number":String(i.end)==="auto"?"auto":"named":"number",mode:y},setMode:x,named:{lines:k,hasLines:S},caps:{span:X},drafts:{end:Ce,setEnd:at},handlers:{onStartNumber:Ee,onStartNamed:Pe,onSpan:Oe,onEndNumber:$e,onEndNamed:_e,onEndAuto:De}}}}var it=h(E());function vt(t){let{set:e,setMany:n,unset:o}=nt(t),r=(0,it.useCallback)(d=>{let u=typeof d=="string"?d.trim():"";if(!u){o("gridArea");return}e("gridArea",u)},[e,o]),s=(0,it.useCallback)((d,u,i,g)=>{let f={};d!==void 0&&(f.gridRowStart=d||void 0),u!==void 0&&(f.gridRowEnd=u||void 0),i!==void 0&&(f.gridColumnStart=i||void 0),g!==void 0&&(f.gridColumnEnd=g||void 0),n(f)},[n]),a=(0,it.useCallback)((d,u)=>{let i=d==="end"?st({start:u.start,end:u.end},{mode:"end"}):st({start:u.start,span:u.span},{mode:"span"});e("gridColumn",i)},[e]),c=(0,it.useCallback)((d,u)=>{let i=d==="end"?st({start:u.start,end:u.end},{mode:"end"}):st({start:u.start,span:u.span},{mode:"span"});e("gridRow",i)},[e]);return{setArea:r,setTracks:s,writeColumn:a,writeRow:c,set:e,setMany:n,unset:o}}var Et=h(P()),fe=h(V()),Pt=h(E());function Ot(t){let e=(0,Et.useSelect)(s=>t?s(fe.store).getBlock(t)?.attributes??void 0:void 0,[t]),n=(0,Et.useSelect)(D,[]),o=(0,Pt.useMemo)(()=>e&&n?_(e,n):void 0,[e,n]);if(!o)return;let r=s=>String(o.$get(s)??"");return(0,Pt.useMemo)(()=>{let s=r("gridTemplateColumns"),a=r("gridTemplateRows"),c=r("gridTemplateAreas"),d=Bt(s),u=Bt(a),i=Ct(s),g=Ct(a),f={...d,count:i},l={...u,count:g},b=ae(c),y={template:c||"",hasAreas:b.hasAreas,cols:b.cols,rows:b.rows};return{columns:f,rows:l,areas:y,activePane:{columns:f.mode,rows:l.mode}}},[o.$get,o.costered,n])}var J=h(E()),ge=h(P()),ke=h(V());function Tt(t){let{set:e,unset:n}=nt(t),o=(0,ge.useSelect)(l=>l(ke.store)?.getBlock?.(t)?.innerBlocks?.length||0,[t]),r=Ot(t),s=r?.columns?.template??"",a=r?.rows?.template??"",c=r?.areas?.template??"",d=(0,J.useMemo)(()=>{if(s){let b=H(s),y=T(b?.count??b);if(y>0)return y}let l=T(r?.rows?.count)||(()=>{if(!a)return 0;let b=H(a);return T(b?.count??b)})();return l>0&&o>0?Math.ceil(o/l):0},[s,a,r?.rows?.count,o]),u=(0,J.useMemo)(()=>{let l=T(r?.rows?.count);if(l>0)return l;if(a){let y=H(a),x=T(y?.count??y);if(x>0)return x}let b=T(d);return b>0&&o>0?Math.ceil(o/b):0},[a,r?.rows?.count,d,o]),i=(0,J.useCallback)(l=>{let b=ce(l,".");b?e("gridTemplateAreas",b):n("gridTemplateAreas")},[e,n]),g=(0,J.useCallback)(()=>{n("gridTemplateAreas")},[n]),f=(0,J.useCallback)((l=".")=>{let b=de(c,l),y=T(b[0]?.length)||T(d),x=T(b.length)||T(u);return y===0&&x>0&&o>0?y=Math.ceil(o/x):x===0&&y>0&&o>0&&(x=Math.ceil(o/y)),y===0&&(y=1),x===0&&(x=1),ot(b.map(k=>k.map(p=>String(p||l))),y,x,l)},[c,d,u,o]);return{areasTemplate:c,trackColumnCount:d,trackRowCount:u,applyMatrixToStore:i,clearAreasInStore:g,seedFromStore:f}}var $t=h(E()),_t=h(P());function un(t,e={}){let n=t??void 0,o=e.keys??Array.from(ne),{parentId:r,parentBlock:s}=(0,_t.useSelect)(u=>{let i=u("core/block-editor"),g=n??i?.getSelectedBlockClientId?.()??void 0;if(!g)return{parentId:null,parentBlock:null};let f=i?.getBlockRootClientId?.(g)??null;return f?{parentId:f,parentBlock:i?.getBlock?.(f)||null}:{parentId:null,parentBlock:null}},[]),a=(0,_t.useSelect)(D,[]),c=(0,$t.useMemo)(()=>{let u=s?.attributes;return u&&a?_(u,a):null},[s,a]),d=(0,$t.useMemo)(()=>{if(!c)return null;let u={};for(let i=0;i<o.length;i++){let g=o[i];u[g]=c?.$get(g,{cascade:!0})}return u},[c,o]);return{parentId:r,parentAttrs:d,parentBlock:s,parentAugmented:c}}var Dt=h(P()),L=h(E());function an(t){let{parentId:e,parentBlock:n}=(0,Dt.useSelect)(f=>{let l=f("core/block-editor"),b=t||l?.getSelectedBlockClientId?.();if(!b)return{parentId:null,parentBlock:null};let y=l?.getBlockRootClientId?.(b)??null;if(!y)return{parentId:null,parentBlock:null};let x=l?.getBlock?.(y)??null;return{parentId:y,parentBlock:x}},[t]),o=(0,Dt.useSelect)(D,[]),r=(0,L.useMemo)(()=>{let f=n?.attributes;return f&&o?_(f,o):null},[n,o]),s=(0,L.useMemo)(()=>String(r?.$get?.("gridTemplateColumns",{cascade:!0})??""),[r,r?.$bp]),a=(0,L.useMemo)(()=>String(r?.$get?.("gridTemplateRows",{cascade:!0})??""),[r,r?.$bp]),c=(0,L.useMemo)(()=>String(r?.$get?.("gridTemplateAreas",{cascade:!0})??""),[r,r?.$bp]),d=(0,L.useMemo)(()=>H(s).count,[s]),u=(0,L.useMemo)(()=>H(a).count,[a]),i=(0,L.useMemo)(()=>String(r?.$get?.("display",{cascade:!0})??"").trim(),[r,r?.$bp]),g=(0,L.useMemo)(()=>/^(grid|inline-grid)$/i.test(i),[i]);return{parentId:e,parentBlock:n,parent:r,display:i,isGrid:g,columnTemplate:s,rowTemplate:a,areaTemplate:c,columns:d,rows:u}}var ye=h(P()),be=h(V());function cn(t,e){return(0,ye.useSelect)(n=>{if(typeof t=="string"&&t.trim()!=="")return t;let o=n(be.store),r=(e??void 0)||o?.getSelectedBlockClientId?.(),a=(r?o?.getBlock?.(r):void 0)?.name;return typeof a=="string"&&a.trim()!==""?a:void 0},[t,e])}var Gt=h(P()),Se=h(V()),Ae=h(E());var Nt=Object.freeze({});function dn(){let t=(0,Gt.useSelect)(D,[]),{selectedBlock:e,clientId:n,attrVersion:o}=(0,Gt.useSelect)(s=>{let a=s(Se.store),c=a?.getSelectedBlockClientId?.(),d=c?a?.getBlock?.(c):null,i=(d?.attributes??Nt)?.costered??{},g=Array.isArray(i?.desktop?.styles)?i.desktop.styles.length:0,f=Array.isArray(i?.tablet?.styles)?i.tablet.styles.length:0,l=Array.isArray(i?.mobile?.styles)?i.mobile.styles.length:0,b=`${g}-${f}-${l}`;return{selectedBlock:d,clientId:c,attrVersion:b}},[]),r=(0,Ae.useMemo)(()=>{let s=e?.attributes??Nt;return _(s,t)||Nt},[e,t,o]);return{selectedBlock:e,clientId:n,attributes:r}}var pt=h(P()),jt=h(we()),Lt=h(E());function pn(t,e,n="costered-blocks"){let o=(0,pt.useSelect)(d=>d(jt.store).get(n,t)?.get?.(n,t)??e,[t,e,n]),{set:r,__experimentalReset:s}=(0,pt.useDispatch)(jt.store),a=(0,Lt.useCallback)(d=>{t.startsWith("__invalid__")||r(n,t,d)},[t,n,r]),c=(0,Lt.useCallback)(()=>{t.startsWith("__invalid__")||s?.(n,t)},[t,n,s]);return[o,a,c]}function ln(t,e={}){let n=s=>{if(s===null)return;let a=s?.trim();if(a)return encodeURIComponent(a)},o=n(e.blockName),r=n(e.variant);return!o&&!r?t:o&&!r?`${t}:${o}`:!o&&r?`${t}#${r}`:`${t}:${o}#${r}`}})();
