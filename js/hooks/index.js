(()=>{var Ge=Object.create;var Ut=Object.defineProperty;var je=Object.getOwnPropertyDescriptor;var Le=Object.getOwnPropertyNames;var We=Object.getPrototypeOf,Ue=Object.prototype.hasOwnProperty;var ct=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Ke=(t,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Le(e))!Ue.call(t,r)&&r!==n&&Ut(t,r,{get:()=>e[r],enumerable:!(o=je(e,r))||o.enumerable});return t};var C=(t,e,n)=>(n=t!=null?Ge(We(t)):{},Ke(e||!t||!t.__esModule?Ut(n,"default",{value:t,enumerable:!0}):n,t));var P=ct((An,Kt)=>{Kt.exports=wp.data});var J=ct((wn,Ft)=>{Ft.exports=wp.blockEditor});var E=ct((xn,Ht)=>{Ht.exports=wp.element});var Ce=ct((Pr,xe)=>{xe.exports=wp.preferences});var yt=C(P()),se=C(J()),j=C(E());var I={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var Z=t=>Array.isArray(t)?t:[],He=t=>new Set(Z(t));function $(t){let e=I.attributes||{};return Object.fromEntries(Object.entries(e).filter(([,n])=>n.group===t))}var Yt=$("display"),Vt=$("dimension"),Jt=$("margin"),zt=$("padding"),Xt=$("flex"),qt=$("flex-item"),Zt=$("grid"),mt=$("grid-item"),Qt=$("position"),te=$("shared"),Bn={...Yt,...Vt,...Jt,...zt,...Xt,...qt,...Zt,...mt,...Qt,...te},ee=new Set([...Object.keys(mt)]),Mn=Z(I?.collections?.editorStyles),ne=He(I?.collections?.unitless),ft=I?.settings?.gridUnit||"1fr",Tn=!!I?.settings?.appendImportantToMirroredStyles,Rn=I?.settings?.styleTagId||"costered-blocks-style-mirror",Q=I?.settings?.reduxStoreKey||"costered/ui",In=I?.settings?.breakpoints?.mobile??782,vn=I?.settings?.breakpoints?.tablet??1024,En=I?.settings?.breakpoints?.desktop??1440,Pn=Z(I?.collections?.clearSets?.gridAreas),On=Z(I?.collections?.clearSets?.gridColumns),$n=Z(I?.collections?.clearSets?.gridRows);var re=new Set([...Object.keys(Yt),...Object.keys(Vt),...Object.keys(zt),...Object.keys(Jt),...Object.keys(Xt),...Object.keys(qt),...Object.keys(Zt),...Object.keys(mt),...Object.keys(Qt),...Object.keys(te)]),_n=Object.fromEntries(Object.entries(I.attributes).map(([t,e])=>[t,e.css]));var U=t=>{let e=r=>{let s=r?.styles;return s&&typeof s=="object"&&!Array.isArray(s)?{...r,styles:{...s}}:{...r||{},styles:{}}},n=t&&typeof t=="object"?t:{},o=!!n.desktop||!!n.tablet||!!n.mobile;return{desktop:e(n.desktop),tablet:e(n.tablet),mobile:e(n.mobile)}};var gt=t=>t==null||t===""||t==="null"||t==="undefined";var Ye="desktop",Ve=Object.freeze({});function oe(t,e){let n=t?t[e]:void 0;return typeof n=="string"||typeof n=="number"?n:void 0}function _(t,e){let n=t||Ve,o={...n},r=U(n.costered),s=c=>{switch(c){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},i=(c,u={})=>{let f=u&&Object.prototype.hasOwnProperty.call(u,"cascade")?!!u.cascade:!0,g=u&&Object.prototype.hasOwnProperty.call(u,"raw")?!!u.raw:!f,m=e||Ye;if(g){let b=oe(r?.[m]?.styles||{},c);return gt(b)?void 0:b}let y=s(m);for(let b of y){let S=oe(r?.[b]?.styles||{},c);if(!gt(S))return S}};return Object.defineProperties(o,{$get:{value:i,enumerable:!1},$getCascade:{value:c=>i(c,{cascade:!0}),enumerable:!1},$getMany:{value:(c,u)=>{let f={};for(let g=0;g<c.length;g++){let m=c[g];f[m]=i(m,u)}return f},enumerable:!1},$bp:{value:e,enumerable:!1}}),o}function kt(t){let e=t??void 0,n=(0,yt.useSelect)(f=>f(Q)?.getBreakpoint?.()||"desktop",[]),o=(0,yt.useSelect)(f=>e?f(se.store)?.getBlockAttributes?.(e):void 0,[e]),r=(0,j.useMemo)(()=>o?_(o,n):void 0,[o,n]),s=(0,j.useCallback)((f,g)=>{if(r?.$get)return r.$get(f,g)},[r]),i=(0,j.useCallback)((f,g)=>r?.$get?r.$get(f,g):void 0,[r]),a=(0,j.useCallback)((f,g)=>r?.$getMany?r.$getMany([...f],g):Object.fromEntries(f.map(m=>[m,void 0])),[r]),d=(0,j.useCallback)((f,g="",m)=>{let y=s(f,m);return typeof y=="string"?y:g},[s]),c=(0,j.useCallback)((f,g=0,m)=>{let y=s(f,m);return typeof y=="number"?y:g},[s]);function u(f,g,m){let y=s(f);return typeof y=="string"&&g.includes(y)?y:m}return(0,j.useMemo)(()=>({get:s,getAs:i,getMany:a,getString:d,getNumber:c,getEnum:u,bp:n,attributes:r}),[s,i,a,d,c,u,n,r])}var L=C(E()),K=C(P());function tt(t,e){if(t?.costered!==void 0){let r=t,s=r.costered??(r.costered={}),i=s[e]??(s[e]={styles:{}});return i.styles??(i.styles={})}let n=t?.costered?.styles??("desktop"in t||"tablet"in t||"mobile"in t?t:void 0);n||(n={},t?.costered?t.costered.styles=n:t?.costered===void 0&&t?t.costered={styles:n}:Object.assign(t,n));let o;return e==="mobile"?o=n.mobile??(n.mobile={}):e==="tablet"?o=n.tablet??(n.tablet={}):o=n.desktop??(n.desktop={}),o}function et(t,e,n){if(!n||typeof n!="object"||Array.isArray(n))throw new Error("withBreakpointStyles expects a plain object of camelCase CSS properties \u2192 string values.");let o=t.costered??{},s={...o[e]??{styles:{}},styles:{...n}},i={...o,[e]:s};return{...t,costered:i}}function Je(t){return typeof t=="string"&&t.trim().length>0}function ze(){let t=globalThis?.crypto?.randomUUID;if(typeof t=="function")return t.call(globalThis.crypto);let e=Date.now().toString(36),n=Math.random().toString(36).slice(2,10);return`${e}-${n}`}function nt(t){t&&(Je(t.costeredId)||(t.costeredId=ze()))}var bt=C(P());var St="desktop",At="tablet",wt="mobile",Xe=t=>{let e=String(t??"").toLowerCase();return e==="tablet"||e==="medium"?At:e==="mobile"||e==="phone"?wt:St},ie=t=>{try{let n=t?.("core/editor")?.getDeviceType?.();if(n)return n}catch{}try{let e=t("core/edit-post");if(e){if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType()}}catch{}try{let e=t("core/edit-site");if(e){if(typeof e.getDeviceType=="function")return e.getDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType();if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType()}}catch{}},D=t=>{try{let o=(typeof t=="function"?t(Q):(0,bt.select)(Q))?.getBreakpoint?.();if(o===St||o===At||o===wt)return o}catch{}let e=ie(typeof t=="function"?t:bt.select);if(e)return Xe(e);if(typeof window<"u"){let n=window.__COSTERED_VIEWPORT_BP;if(n===St||n===At||n===wt)return n}return"desktop"};var qe="desktop";function rt(t,e,n={trim:!0,emptyUnsets:!0}){let o=(typeof e=="object"?e:n)||{},{trim:r=!0,emptyUnsets:s=!0,breakpoint:i}=o,a=(0,K.useSelect)(D,[]),d=i||a||qe,{updateBlockAttributes:c}=(0,K.useDispatch)("core/block-editor"),u=(0,L.useMemo)(()=>{if(typeof t=="string"||t===null){let p=t??void 0;return k=>{if(p)if(typeof k=="function"){let l=(0,K.select)("core/block-editor")?.getBlockAttributes(p)||{},A=k(l)||l;c(p,A)}else c(p,k||{})}}if(typeof t=="function"&&(typeof e=="string"||e==null)){let p=t,k=e??void 0;return l=>{if(!k)return;if(typeof l=="function"){let h=(0,K.select)("core/block-editor")?.getBlockAttributes(k)||{},R=l(h)||h;try{p(k,R)}catch{p(R)}return}let A=l||{};try{p(k,A)}catch{p(A)}}}if(typeof t=="function"){let p=t;return k=>{if(typeof k=="function"){let l=k({});p(l)}else p(k||{})}}return()=>{}},[t,e,c]),f=(0,L.useCallback)((p,k)=>{if(p==null)return;if(ee.has(k)){let A=typeof p=="string"&&r?p.trim():String(p);return s&&A===""?void 0:A}let l=p;if(r&&typeof l=="string"&&(l=l.trim()),!(s&&(l===""||l=="null"||l=="undefined"))){if(ne.has(k)){if(typeof l=="string"&&/^-?\d+(\.\d+)?$/.test(l)){let A=Number(l);return Number.isFinite(A)?A:void 0}return typeof l=="number"&&Number.isFinite(l)?l:void 0}if(typeof l=="number")return Number.isFinite(l)?l:void 0;if(typeof l=="string")return l==="null"||l==="undefined"?void 0:l;try{return String(l)}catch{return}}},[r,s]),g=(0,L.useCallback)((p,k)=>{u(l=>{let A={...l||{}};nt(A),A.costered=U(A.costered);let h=f(k,p),T={...tt(A,d)};if(h===void 0)if(Object.prototype.hasOwnProperty.call(T,p))delete T[p];else return l;else T[p]=String(h);return et(A,d,T)})},[u,d,f]),m=(0,L.useCallback)(p=>{!p||typeof p!="object"||u(k=>{let l={...k||{}};nt(l),l.costered=U(l.costered);let h={...tt(l,d)};for(let[R,T]of Object.entries(p)){let W=f(T,R);W===void 0?Object.prototype.hasOwnProperty.call(h,R)&&delete h[R]:h[R]=String(W)}return et(l,d,h)})},[u,d,f]),y=(0,L.useCallback)(p=>{u(k=>{let l={...k||{}};nt(l),l.costered=U(l.costered);let A=tt(l,d);if(!Object.prototype.hasOwnProperty.call(A,p))return k;let h={...A};return delete h[p],et(l,d,h)})},[u,d]),b=(0,L.useCallback)(p=>{!Array.isArray(p)||p.length===0||u(k=>{let l={...k||{}};nt(l),l.costered=U(l.costered);let A=tt(l,d),h=!1,R={...A};for(let T=0;T<p.length;T++){let W=p[T];Object.prototype.hasOwnProperty.call(R,W)&&(delete R[W],h=!0)}return h?et(l,d,R):k})},[u,d]),S=(0,L.useCallback)(p=>({set:(k,l)=>g(`${p}${k}`,l),setMany:k=>{let l={};for(let[A,h]of Object.entries(k))l[`${p}${A}`]=h;m(l)},unset:k=>y(`${p}${k}`),unsetMany:k=>b(k.map(l=>`${p}${l}`))}),[g,m,y,b]);return{set:g,setMany:m,unset:y,unsetMany:b,withPrefix:S,activeBreakpoint:d}}var O=C(E());function Ct(t){return String(t??"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim()}function z(t){let e=String(t??"").trim();if(!e)return[];let n=0,o=0,r="",s=[];for(let i=0;i<e.length;i++){let a=e[i];if(a==="("){n++,r+=a;continue}if(a===")"){n=Math.max(0,n-1),r+=a;continue}if(a==="["){o++,r+=a;continue}if(a==="]"){o=Math.max(0,o-1),r+=a;continue}if(n===0&&o===0&&/\s/.test(a)){r&&(s.push(r),r="");continue}r+=a}return r&&s.push(r),s}function ht(t){let n=String(t??"").trim().replace(/\]\s+\[/g," ");return n=n.replace(/\[\s+/g,"[").replace(/\s+\]/g,"]"),n=n.replace(/\[(?:\s+)?([^\]]*?)(?:\s+)?\]/g,(o,r)=>`[${String(r).replace(/\s+/g," ").trim()}]`),n}function Ze(t){let e=String(t??"").trim();if(!e)return null;let n=e.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);if(!n||n[1]===void 0||n[2]===void 0)return null;let o=Number.parseInt(n[1],10),r=n[2].trim();return!Number.isFinite(o)||o<0||r===""?null:{count:o,unit:r}}function Qe(t,e=ft){return t>0?`repeat(${t}, ${e})`:null}function H(t,e=ft){if(!t||typeof t!="string")return{count:0,unit:e};let n=ht(t);if(!n||typeof n!="string")return{count:0,unit:e};let o=n.trim();if(!o)return{count:0,unit:e};if(/^subgrid\b/i.test(o))return{count:0,unit:e};if(o=o.replace(/\[[^\]]*]/g," ").trim(),!o)return{count:0,unit:e};let r=o.match(/^\s*repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)\s*$/i);if(r){let i=r[2];return{count:0,unit:xt(i,e)}}let s=tn(o,e);return{count:s.count,unit:s.unit||e}}function tn(t,e){let n=ae(t);if(n){let a=n.inner.trim(),c=z(a).length,u=xt(a,e);return{count:n.times*c,unit:u||e}}let o=z(t),r=0,s="";for(let a of o){if(/^\s*repeat\(/i.test(a)){let d=ue(a);if(d){r+=d.count,!s&&d.unitHint&&(s=d.unitHint);continue}r+=1;continue}r+=1,!s&&dt(a)&&(s=F(a)??"")}let i=s||xt(t,e);return{count:r,unit:i||e}}function ae(t){let e=t.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!e)return null;let n=parseInt(e[1],10),o=e[2];return!Number.isFinite(n)||n<0?null:{times:n,inner:o}}function ue(t){if(t.match(/^\s*repeat\(\s*auto-(fit|fill)\s*,/i))return{count:0,unitHint:""};let n=t.match(/^\s*repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!n)return null;let o=parseInt(n[1],10)||0;if(o<=0)return{count:0,unitHint:""};let r=n[2].trim(),s=z(r),i=o*s.length,a="";if(s.length===1)a=F(s[0])??"";else{let d=s.find(dt);a=F(d)??""}return{count:i,unitHint:a}}function xt(t,e){if(!t)return e;let n=ae(t);if(n){let s=z(n.inner);if(s.length===1)return F(s[0])||e;let i=s.find(dt);if(i)return F(i)||e}let o=z(t);if(o.length===1)return F(o[0])||e;let r=o.find(dt);if(r)return F(r)||e;for(let s of o){let i=ue(s);if(i&&i.unitHint)return i.unitHint}return e}function dt(t){return t?!!(/^(minmax|fit-content|clamp|var)\(/i.test(t)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(t)||/^(auto|max-content|min-content)$/i.test(t)):!1}function F(t){return t?t.trim():""}function M(t){let e=Number(t);return Number.isFinite(e)&&e>=0?Math.floor(e):0}function ce(t){let e=String(t??"").trim();if(!e)return{hasAreas:!1,cols:0,rows:0};let n=[],o=/"([^"]*)"|'([^']*)'/g,r;for(;r=o.exec(e);){let i=(r[1]??r[2]??"").trim();i&&n.push(i)}return n.length?{hasAreas:!0,cols:n.reduce((i,a)=>{let d=a.split(/\s+/).filter(Boolean).length;return Math.max(i,d)},0),rows:n.length}:{hasAreas:!1,cols:0,rows:0}}function de(t,e="."){if(!Array.isArray(t)||t.length===0)return"";let n=t.map(r=>(Array.isArray(r)?r:[]).map(s=>{let i=String(s??"").trim();return i===""?e:i}));return n.some(r=>r.some(s=>s!==e))?n.map(r=>`"${r.join(" ")}"`).join(" "):""}function le(t,e="."){let n=String(t??"").trim();if(!n)return[];let o=[],r=/"([^"]*)"|'([^']*)'/g,s;for(;s=r.exec(n);){let i=(s[1]??s[2]??"").trim(),a=i.length?i.split(/\s+/g).map(d=>d&&d!==e?d:e):[];o.push(a)}return o}function ot(t,e,n,o){let r=M(e),s=M(n);if(r===0||s===0)return[];let i=Array.isArray(t)?t:[],a=[];for(let d=0;d<s;d++){let c=Array.isArray(i[d])?i[d]:[],u=Array.from({length:r},(f,g)=>{let m=c[g];return m===void 0?o:m});a.push(u)}return a}function Bt(t){let e=String(t??"").trim();if(!e||/^subgrid\b/i.test(e))return 0;let n=e.replace(/\[[^\]]*\]/g," ").trim();return n=n.replace(/repeat\(\s*(\d+)\s*,\s*([^)]+)\)/gi,(o,r,s)=>Array.from({length:parseInt(r,10)||0},()=>"X").join(" ")),n=n.replace(/\s+/g," ").trim(),n?n.split(" ").filter(Boolean).length:0}function en(t){let e=Ze(t);if(!e)return null;let n=Ct(Qe(e.count,e.unit));return{mode:"simple",template:t?String(t):null,normalised:n,simple:{count:e.count,unit:e.unit}}}function nn(t){let e=ht(t),n=z(e);if(!n.length)return null;let o=Ct(n.join(" "));return{mode:"tracks",template:t?String(t):null,normalised:o,tracks:n}}var rn=[en,nn];function Mt(t){let e=ht(t);for(let n of rn){let o=n(e);if(o)return o}return{mode:"raw",template:t?String(t):null,normalised:Ct(t??"")}}function on(t){let{areasTemplate:e,trackColumnCount:n,trackRowCount:o,applyMatrixToStore:r,clearAreasInStore:s,seedFromStore:i}=Tt(t),a=(0,O.useMemo)(()=>i("."),[i]),d=(0,O.useMemo)(()=>({count:a?.[0]?.length||M(n)}),[a,n]),c=(0,O.useMemo)(()=>({count:a?.length||M(o)}),[a,o]),u=(0,O.useCallback)(S=>{let p=S[0]?.length||0,k=S.length||0,l=S.map(h=>h.map(R=>{let T=String(R??"").trim();return T===""?".":T})),A=ot(l,p,k,".");r(A)},[r]),f=(0,O.useMemo)(()=>{let S=a?.length||0,p=S&&a[0]?.length||0;return{rows:S,cols:p}},[a]),g=(0,O.useCallback)((S,p)=>S>=0&&S<f.cols&&p>=0&&p<f.rows,[f]),m=(0,O.useCallback)((S,p,k)=>{let l=a;if(l.length===0)return;let A=Math.trunc(M(S))||0,h=Math.trunc(M(p))||0;if(!g(A,h))return;let R=String(k??"").trim()||".",T=l.map(W=>W.slice());T[h][A]=R,u(T)},[a,u,g]),y=(0,O.useCallback)(({rows:S,cols:p})=>{let k=M(S),l=M(p);if(!(k>0&&l>0))return;let A=ot(a,l,k,".");u(A)},[a,u]),b=(0,O.useCallback)(()=>s(),[s]);return{matrix:a,columnData:d,rowData:c,setCell:m,resize:y,clear:b}}var x=C(E());function Y(t,e,n){return Math.min(Math.max(t,e),n)}function v(t,e=1){let n=Number(t);return Number.isFinite(n)?Math.trunc(n):e}function N(t){if(typeof t=="number")return Number.isInteger(t);let e=String(t);return/^-?\d+$/.test(e)}function Rt(t,e=1){let n=Number.parseInt(String(t),10);return Number.isFinite(n)&&n!==0?n:e}function pe(t){let e=Number.parseInt(String(t),10);return Number.isFinite(e)?e:""}var It=t=>{let e={start:"",span:"",end:""},n=String(t??"").trim();if(!n)return e;let o=n.split("/").map(a=>a.trim());if(o.length===1)return/^span\s+\d+$/i.test(o[0])?e.span=o[0].replace(/^span\s+/i,""):e.start=o[0],e;let r=o[0],s=o[1];e.start=r||"auto";let i=/^span\s+(\d+)$/i.exec(s);return i?e.span=i[1]:e.end=s,e},st=({start:t,span:e,end:n},{mode:o="span",collapseSpanOne:r=!0}={})=>{let s=String(t??"").trim()||"auto";if(o==="end"){let a=String(n??"").trim()||"auto";return`${s} / ${a}`}let i=v(e,1);return r&&i===1&&s!=="auto"?s:`${s} / span ${i}`},vt=t=>{let e=new Set,n=/\[([^\]]+)\]/g,o;for(;(o=n.exec(String(t??"")))!==null;){let r=o[1].trim();r&&r.split(/\s+/).forEach(s=>e.add(s))}return Array.from(e)},me=t=>/\//.test(String(t??""))||/\bspan\s+\d+\b/i.test(String(t??""));var fe=Number.MAX_SAFE_INTEGER;function sn({clientId:t,setMany:e,parentMeta:n}){if(!t)return null;let{get:o}=kt(t),{writeColumn:r,writeRow:s}=Et(t),i=me(o("gridArea")),a=n?.columns??0,d=n?.rows??0,c=(0,x.useMemo)(()=>It(o("gridColumn")),[o]),u=(0,x.useMemo)(()=>It(o("gridRow")),[o]),f=c.end?"end":"span",g=u.end?"end":"span",[m,y]=(0,x.useState)(f),[b,S]=(0,x.useState)(g);(0,x.useEffect)(()=>{y(f)},[f]),(0,x.useEffect)(()=>{S(g)},[g]);let p=(0,x.useMemo)(()=>vt(n.columnTemplate),[n.columnTemplate]),k=(0,x.useMemo)(()=>vt(n.rowTemplate),[n.rowTemplate]),l=p.length>0,A=k.length>0,h=(w,B)=>B?N(w)?"number":"named":"number",R=w=>w?N(w)?"number":w==="auto"?"auto":"named":"number",T=(w,B)=>{let pt=R(w);return B?pt:pt==="named"?"number":pt},W=h(c.start,l),gn=h(u.start,A),yn=T(c.end,l),kn=T(u.end,A),X=(0,x.useMemo)(()=>{if(!a||!N(c.start))return fe;let w=Y(v(c.start,1),1,a);return Math.max(1,a-w+1)},[a,c.start]),q=(0,x.useMemo)(()=>{if(!d||!N(u.start))return fe;let w=Y(v(u.start,1),1,d);return Math.max(1,d-w+1)},[d,u.start]),[he,at]=(0,x.useState)(null),[Be,ut]=(0,x.useState)(null);(0,x.useEffect)(()=>{at(null)},[o("gridColumn")]),(0,x.useEffect)(()=>{ut(null)},[o("gridRow")]);let Me=(0,x.useCallback)(w=>{let B=v(w,1);c.end?r(m,{start:B,end:c.end}):r(m,{start:B,span:Y(v(c.span,1),1,X)})},[c.end,c.span,X,r]),Te=(0,x.useCallback)(w=>{let B=String(w||"auto").trim()||"auto";c.end?r(m,{start:B,end:c.end}):r(m,{start:B,span:v(c.span,1)})},[c.end,c.span,r]),Re=(0,x.useCallback)(w=>{let B=Y(v(w,1),1,X);r(m,{start:c.start||"auto",span:B})},[c.start,X,r]),Ie=(0,x.useCallback)(w=>{let B=v(w,0);at(B),w!==0&&(r(m,{start:c.start||"auto",end:Rt(w,1)}),at(null))},[c.start,r]),ve=(0,x.useCallback)(w=>{r(m,{start:c.start||"auto",end:String(w||"auto").trim()||"auto"})},[c.start,r]),Ee=(0,x.useCallback)(()=>{r(m,{start:c.start||"auto",end:"auto"})},[c.start,r]),Pe=(0,x.useCallback)(w=>{let B=v(w,1);u.end?s(b,{start:B,end:u.end}):s(b,{start:B,span:Y(v(u.span,1),1,q)})},[u.end,u.span,q,s]),Oe=(0,x.useCallback)(w=>{let B=String(w||"auto").trim()||"auto";u.end?s(b,{start:B,end:u.end}):s(b,{start:B,span:v(u.span,1)})},[u.end,u.span,b,s]),$e=(0,x.useCallback)(w=>{let B=Y(v(w,1),1,q);s(b,{start:u.start||"auto",span:B})},[u.start,q,s]),_e=(0,x.useCallback)(w=>{let B=v(w,0);ut(B),w!==0&&(s(b,{start:u.start||"auto",end:Rt(w,1)}),ut(null))},[u.start,b,s]),De=(0,x.useCallback)(w=>{s(b,{start:u.start||"auto",end:String(w||"auto").trim()||"auto"})},[u.start,b,s]),Ne=(0,x.useCallback)(()=>{s(b,{start:u.start||"auto",end:"auto"})},[u.start,b,s]);return{hasArea:i,disabledLines:i,numbers:{isIntToken:N,toInt:v,parseSigned:pe},column:{values:{...c},modes:{uiStart:l?N(c.start)?"number":"named":"number",uiEnd:c.end?N(c.end)?"number":String(c.end)==="auto"?"auto":"named":"number",mode:m},setMode:y,named:{lines:p,hasLines:l},caps:{span:X},drafts:{end:he,setEnd:at},handlers:{onStartNumber:Me,onStartNamed:Te,onSpan:Re,onEndNumber:Ie,onEndNamed:ve,onEndAuto:Ee}},row:{values:{...u},modes:{uiStart:A?N(u.start)?"number":"named":"number",uiEnd:u.end?N(u.end)?"number":String(u.end)==="auto"?"auto":"named":"number",mode:b},setMode:S,named:{lines:k,hasLines:A},caps:{span:q},drafts:{end:Be,setEnd:ut},handlers:{onStartNumber:Pe,onStartNamed:Oe,onSpan:$e,onEndNumber:_e,onEndNamed:De,onEndAuto:Ne}}}}var it=C(E());function Et(t){let{set:e,setMany:n,unset:o}=rt(t),r=(0,it.useCallback)(d=>{let c=typeof d=="string"?d.trim():"";if(!c){o("gridArea");return}e("gridArea",c)},[e,o]),s=(0,it.useCallback)((d,c,u,f)=>{let g={};d!==void 0&&(g.gridRowStart=d||void 0),c!==void 0&&(g.gridRowEnd=c||void 0),u!==void 0&&(g.gridColumnStart=u||void 0),f!==void 0&&(g.gridColumnEnd=f||void 0),n(g)},[n]),i=(0,it.useCallback)((d,c)=>{let u=d==="end"?st({start:c.start,end:c.end},{mode:"end"}):st({start:c.start,span:c.span},{mode:"span"});e("gridColumn",u)},[e]),a=(0,it.useCallback)((d,c)=>{let u=d==="end"?st({start:c.start,end:c.end},{mode:"end"}):st({start:c.start,span:c.span},{mode:"span"});e("gridRow",u)},[e]);return{setArea:r,setTracks:s,writeColumn:i,writeRow:a,set:e,setMany:n,unset:o}}var Pt=C(P()),ge=C(J()),Ot=C(E());function $t(t){let e=(0,Pt.useSelect)(s=>t?s(ge.store).getBlock(t)?.attributes??void 0:void 0,[t]),n=(0,Pt.useSelect)(D,[]),o=(0,Ot.useMemo)(()=>e&&n?_(e,n):void 0,[e,n]);if(!o)return;let r=s=>String(o.$get(s)??"");return(0,Ot.useMemo)(()=>{let s=r("gridTemplateColumns"),i=r("gridTemplateRows"),a=r("gridTemplateAreas"),d=Mt(s),c=Mt(i),u=Bt(s),f=Bt(i),g={...d,count:u},m={...c,count:f},y=ce(a),b={template:a||"",hasAreas:y.hasAreas,cols:y.cols,rows:y.rows};return{columns:g,rows:m,areas:b,activePane:{columns:g.mode,rows:m.mode}}},[o.$get,o.costered,n])}var V=C(E()),ye=C(P()),ke=C(J());function Tt(t){let{set:e,unset:n}=rt(t),o=(0,ye.useSelect)(m=>m(ke.store)?.getBlock?.(t)?.innerBlocks?.length||0,[t]),r=$t(t),s=r?.columns?.template??"",i=r?.rows?.template??"",a=r?.areas?.template??"",d=(0,V.useMemo)(()=>{if(s){let y=H(s),b=M(y?.count??y);if(b>0)return b}let m=M(r?.rows?.count)||(()=>{if(!i)return 0;let y=H(i);return M(y?.count??y)})();return m>0&&o>0?Math.ceil(o/m):0},[s,i,r?.rows?.count,o]),c=(0,V.useMemo)(()=>{let m=M(r?.rows?.count);if(m>0)return m;if(i){let b=H(i),S=M(b?.count??b);if(S>0)return S}let y=M(d);return y>0&&o>0?Math.ceil(o/y):0},[i,r?.rows?.count,d,o]),u=(0,V.useCallback)(m=>{let y=de(m,".");y?e("gridTemplateAreas",y):n("gridTemplateAreas")},[e,n]),f=(0,V.useCallback)(()=>{n("gridTemplateAreas")},[n]),g=(0,V.useCallback)((m=".")=>{let y=le(a,m),b=M(y[0]?.length)||M(d),S=M(y.length)||M(c);return b===0&&S>0&&o>0?b=Math.ceil(o/S):S===0&&b>0&&o>0&&(S=Math.ceil(o/b)),b===0&&(b=1),S===0&&(S=1),ot(y.map(k=>k.map(l=>String(l||m))),b,S,m)},[a,d,c,o]);return{areasTemplate:a,trackColumnCount:d,trackRowCount:c,applyMatrixToStore:u,clearAreasInStore:f,seedFromStore:g}}var _t=C(E()),Dt=C(P());function an(t,e={}){let n=t??void 0,o=e.keys??Array.from(re),{parentId:r,parentBlock:s}=(0,Dt.useSelect)(c=>{let u=c("core/block-editor"),f=n??u?.getSelectedBlockClientId?.()??void 0;if(!f)return{parentId:null,parentBlock:null};let g=u?.getBlockRootClientId?.(f)??null;return g?{parentId:g,parentBlock:u?.getBlock?.(g)||null}:{parentId:null,parentBlock:null}},[]),i=(0,Dt.useSelect)(D,[]),a=(0,_t.useMemo)(()=>{let c=s?.attributes;return c&&i?_(c,i):null},[s,i]),d=(0,_t.useMemo)(()=>{if(!a)return null;let c={};for(let u=0;u<o.length;u++){let f=o[u];c[f]=a?.$get(f,{cascade:!0})}return c},[a,o]);return{parentId:r,parentAttrs:d,parentBlock:s,parentAugmented:a}}var Nt=C(P()),G=C(E());function un(t){if(!t)return[];let e=new Set,n=t.split('"').filter((o,r)=>r%2===1);for(let o=0;o<n.length;o++){let r=n[o].trim();if(!r)continue;let s=r.split(/\s+/);for(let i=0;i<s.length;i++){let a=s[i];a==="."||a.toLowerCase()==="none"||e.add(a)}}return Array.from(e)}function cn(t){let{parentId:e,parentBlock:n}=(0,Nt.useSelect)(m=>{let y=m("core/block-editor"),b=t||y?.getSelectedBlockClientId?.();if(!b)return{parentId:null,parentBlock:null};let S=y?.getBlockRootClientId?.(b)??null;if(!S)return{parentId:null,parentBlock:null};let p=y?.getBlock?.(S)??null;return{parentId:S,parentBlock:p}},[t]),o=(0,Nt.useSelect)(D,[]),r=(0,G.useMemo)(()=>{let m=n?.attributes;return m&&o?_(m,o):null},[n,o]),s=(0,G.useMemo)(()=>String(r?.$get?.("gridTemplateColumns",{cascade:!0})??""),[r,r?.$bp]),i=(0,G.useMemo)(()=>String(r?.$get?.("gridTemplateRows",{cascade:!0})??""),[r,r?.$bp]),a=(0,G.useMemo)(()=>String(r?.$get?.("gridTemplateAreas",{cascade:!0})??""),[r,r?.$bp]),d=(0,G.useMemo)(()=>H(s).count,[s]),c=(0,G.useMemo)(()=>H(i).count,[i]),u=(0,G.useMemo)(()=>String(r?.$get?.("display",{cascade:!0})??"").trim(),[r,r?.$bp]),f=(0,G.useMemo)(()=>/^(grid|inline-grid)$/i.test(u),[u]),g=(0,G.useMemo)(()=>un(a),[a]);return{parentId:e,parentBlock:n,parent:r,display:u,isGrid:f,columnTemplate:s,rowTemplate:i,areaTemplate:a,columns:d,rows:c,areaNames:g}}var be=C(P()),Se=C(J());function dn(t,e){return(0,be.useSelect)(n=>{if(typeof t=="string"&&t.trim()!=="")return t;let o=n(Se.store),r=(e??void 0)||o?.getSelectedBlockClientId?.(),i=(r?o?.getBlock?.(r):void 0)?.name;return typeof i=="string"&&i.trim()!==""?i:void 0},[t,e])}var jt=C(P()),Ae=C(J()),we=C(E());var Gt=Object.freeze({});function ln(){let t=(0,jt.useSelect)(D,[]),{selectedBlock:e,clientId:n,attrVersion:o}=(0,jt.useSelect)(s=>{let i=s(Ae.store),a=i?.getSelectedBlockClientId?.(),d=a?i?.getBlock?.(a):null,u=(d?.attributes??Gt)?.costered??{},f=Array.isArray(u?.desktop?.styles)?u.desktop.styles.length:0,g=Array.isArray(u?.tablet?.styles)?u.tablet.styles.length:0,m=Array.isArray(u?.mobile?.styles)?u.mobile.styles.length:0,y=`${f}-${g}-${m}`;return{selectedBlock:d,clientId:a,attrVersion:y}},[]),r=(0,we.useMemo)(()=>{let s=e?.attributes??Gt;return _(s,t)||Gt},[e,t,o]);return{selectedBlock:e,clientId:n,attributes:r}}var lt=C(P()),Lt=C(Ce()),Wt=C(E());function pn(t,e,n,o){let r=t(e);try{let s=r?.get?.(n,o);if(s!==void 0)return s}catch{}try{let s=r?.get?.(n);if(s!=null){let i=s?.get?.(o);if(i!==void 0)return i;let a=s?.[o];if(a!==void 0)return a}}catch{}}function mn(t,e,n="costered-blocks"){let o=(0,lt.useSelect)(d=>{let c=pn(d,Lt.store,n,t);return c===void 0?e:c},[t,n]),{set:r,__experimentalReset:s}=(0,lt.useDispatch)(Lt.store),i=(0,Wt.useCallback)(d=>{t.startsWith("__invalid__")||r(n,t,d)},[t,n,r]),a=(0,Wt.useCallback)(()=>{t.startsWith("__invalid__")||s?.(n,t)},[t,n,s]);return[o,i,a]}function fn(t,e={}){let n=s=>{if(s===null)return;let i=s?.trim();if(i)return encodeURIComponent(i)},o=n(e.blockName),r=n(e.variant);return!o&&!r?t:o&&!r?`${t}:${o}`:!o&&r?`${t}#${r}`:`${t}:${o}#${r}`}})();
