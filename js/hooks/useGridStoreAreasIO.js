(()=>{var Kt=Object.create;var pt=Object.defineProperty;var Ft=Object.getOwnPropertyDescriptor;var Ht=Object.getOwnPropertyNames;var Yt=Object.getPrototypeOf,Vt=Object.prototype.hasOwnProperty;var H=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Jt=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Ht(e))!Vt.call(t,o)&&o!==n&&pt(t,o,{get:()=>e[o],enumerable:!(r=Ft(e,o))||r.enumerable});return t};var m=(t,e,n)=>(n=t!=null?Kt(Yt(t)):{},Jt(e||!t||!t.__esModule?pt(n,"default",{value:t,enumerable:!0}):n,t));var M=H((Te,mt)=>{mt.exports=wp.element});var T=H((Re,ft)=>{ft.exports=wp.data});var D=H((Ie,gt)=>{gt.exports=wp.blockEditor});var jt=H((Vn,Gt)=>{Gt.exports=wp.preferences});var _=m(M()),Wt=m(T()),Ut=m(D());var te=m(T()),ee=m(D()),Rt=m(M());var x={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var L=t=>Array.isArray(t)?t:[],Xt=t=>new Set(L(t));function I(t){let e=x.attributes||{};return Object.fromEntries(Object.entries(e).filter(([,n])=>n.group===t))}var yt=I("display"),kt=I("dimension"),bt=I("margin"),St=I("padding"),At=I("flex"),wt=I("flex-item"),xt=I("grid"),X=I("grid-item"),Ct=I("position"),ht=I("shared"),Pe={...yt,...kt,...bt,...St,...At,...wt,...xt,...X,...Ct,...ht},Bt=new Set([...Object.keys(X)]),Oe=L(x?.collections?.editorStyles),Mt=Xt(x?.collections?.unitless),q=x?.settings?.gridUnit||"1fr",$e=!!x?.settings?.appendImportantToMirroredStyles,_e=x?.settings?.styleTagId||"costered-blocks-style-mirror",Y=x?.settings?.reduxStoreKey||"costered/ui",De=x?.settings?.breakpoints?.mobile??782,Ne=x?.settings?.breakpoints?.tablet??1024,Ge=x?.settings?.breakpoints?.desktop??1440,je=L(x?.collections?.clearSets?.gridAreas),Le=L(x?.collections?.clearSets?.gridColumns),We=L(x?.collections?.clearSets?.gridRows);var qt=new Set([...Object.keys(yt),...Object.keys(kt),...Object.keys(St),...Object.keys(bt),...Object.keys(At),...Object.keys(wt),...Object.keys(xt),...Object.keys(X),...Object.keys(Ct),...Object.keys(ht)]),Ue=Object.fromEntries(Object.entries(x.attributes).map(([t,e])=>[t,e.css]));var E=t=>{let e=o=>{let s=o?.styles;return s&&typeof s=="object"&&!Array.isArray(s)?{...o,styles:{...s}}:{...o||{},styles:{}}},n=t&&typeof t=="object"?t:{},r=!!n.desktop||!!n.tablet||!!n.mobile;return{desktop:e(n.desktop),tablet:e(n.tablet),mobile:e(n.mobile)}};var Z=t=>t==null||t===""||t==="null"||t==="undefined";var Zt="desktop",Qt=Object.freeze({});function Tt(t,e){let n=t?t[e]:void 0;return typeof n=="string"||typeof n=="number"?n:void 0}function N(t,e){let n=t||Qt,r={...n},o=E(n.costered),s=b=>{switch(b){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},a=(b,g={})=>{let C=g&&Object.prototype.hasOwnProperty.call(g,"cascade")?!!g.cascade:!0,A=g&&Object.prototype.hasOwnProperty.call(g,"raw")?!!g.raw:!C,p=e||Zt;if(A){let y=Tt(o?.[p]?.styles||{},b);return Z(y)?void 0:y}let f=s(p);for(let y of f){let w=Tt(o?.[y]?.styles||{},b);if(!Z(w))return w}};return Object.defineProperties(r,{$get:{value:a,enumerable:!1},$getCascade:{value:b=>a(b,{cascade:!0}),enumerable:!1},$getMany:{value:(b,g)=>{let C={};for(let A=0;A<b.length;A++){let p=b[A];C[p]=a(p,g)}return C},enumerable:!1},$bp:{value:e,enumerable:!1}}),r}var v=m(M()),O=m(T());function W(t,e){if(t?.costered!==void 0){let o=t,s=o.costered??(o.costered={}),a=s[e]??(s[e]={styles:{}});return a.styles??(a.styles={})}let n=t?.costered?.styles??("desktop"in t||"tablet"in t||"mobile"in t?t:void 0);n||(n={},t?.costered?t.costered.styles=n:t?.costered===void 0&&t?t.costered={styles:n}:Object.assign(t,n));let r;return e==="mobile"?r=n.mobile??(n.mobile={}):e==="tablet"?r=n.tablet??(n.tablet={}):r=n.desktop??(n.desktop={}),r}function U(t,e,n){if(!n||typeof n!="object"||Array.isArray(n))throw new Error("withBreakpointStyles expects a plain object of camelCase CSS properties \u2192 string values.");let r=t.costered??{},s={...r[e]??{styles:{}},styles:{...n}},a={...r,[e]:s};return{...t,costered:a}}function ne(t){return typeof t=="string"&&t.trim().length>0}function re(){let t=globalThis?.crypto?.randomUUID;if(typeof t=="function")return t.call(globalThis.crypto);let e=Date.now().toString(36),n=Math.random().toString(36).slice(2,10);return`${e}-${n}`}function K(t){t&&(ne(t.costeredId)||(t.costeredId=re()))}var Q=m(T());var tt="desktop",et="tablet",nt="mobile",oe=t=>{let e=String(t??"").toLowerCase();return e==="tablet"||e==="medium"?et:e==="mobile"||e==="phone"?nt:tt},It=t=>{try{let n=t?.("core/editor")?.getDeviceType?.();if(n)return n}catch{}try{let e=t("core/edit-post");if(e){if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType()}}catch{}try{let e=t("core/edit-site");if(e){if(typeof e.getDeviceType=="function")return e.getDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType();if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType()}}catch{}},P=t=>{try{let r=(typeof t=="function"?t(Y):(0,Q.select)(Y))?.getBreakpoint?.();if(r===tt||r===et||r===nt)return r}catch{}let e=It(typeof t=="function"?t:Q.select);if(e)return oe(e);if(typeof window<"u"){let n=window.__COSTERED_VIEWPORT_BP;if(n===tt||n===et||n===nt)return n}return"desktop"};var se="desktop";function V(t,e,n={trim:!0,emptyUnsets:!0}){let r=(typeof e=="object"?e:n)||{},{trim:o=!0,emptyUnsets:s=!0,breakpoint:a}=r,d=(0,O.useSelect)(P,[]),c=a||d||se,{updateBlockAttributes:b}=(0,O.useDispatch)("core/block-editor"),g=(0,v.useMemo)(()=>{if(typeof t=="string"||t===null){let u=t??void 0;return l=>{if(u)if(typeof l=="function"){let i=(0,O.select)("core/block-editor")?.getBlockAttributes(u)||{},k=l(i)||i;b(u,k)}else b(u,l||{})}}if(typeof t=="function"&&(typeof e=="string"||e==null)){let u=t,l=e??void 0;return i=>{if(!l)return;if(typeof i=="function"){let S=(0,O.select)("core/block-editor")?.getBlockAttributes(l)||{},B=i(S)||S;try{u(l,B)}catch{u(B)}return}let k=i||{};try{u(l,k)}catch{u(k)}}}if(typeof t=="function"){let u=t;return l=>{if(typeof l=="function"){let i=l({});u(i)}else u(l||{})}}return()=>{}},[t,e,b]),C=(0,v.useCallback)((u,l)=>{if(u==null)return;if(Bt.has(l)){let k=typeof u=="string"&&o?u.trim():String(u);return s&&k===""?void 0:k}let i=u;if(o&&typeof i=="string"&&(i=i.trim()),!(s&&(i===""||i=="null"||i=="undefined"))){if(Mt.has(l)){if(typeof i=="string"&&/^-?\d+(\.\d+)?$/.test(i)){let k=Number(i);return Number.isFinite(k)?k:void 0}return typeof i=="number"&&Number.isFinite(i)?i:void 0}if(typeof i=="number")return Number.isFinite(i)?i:void 0;if(typeof i=="string")return i==="null"||i==="undefined"?void 0:i;try{return String(i)}catch{return}}},[o,s]),A=(0,v.useCallback)((u,l)=>{g(i=>{let k={...i||{}};K(k),k.costered=E(k.costered);let S=C(l,u),R={...W(k,c)};if(S===void 0)if(Object.prototype.hasOwnProperty.call(R,u))delete R[u];else return i;else R[u]=String(S);return U(k,c,R)})},[g,c,C]),p=(0,v.useCallback)(u=>{!u||typeof u!="object"||g(l=>{let i={...l||{}};K(i),i.costered=E(i.costered);let S={...W(i,c)};for(let[B,R]of Object.entries(u)){let j=C(R,B);j===void 0?Object.prototype.hasOwnProperty.call(S,B)&&delete S[B]:S[B]=String(j)}return U(i,c,S)})},[g,c,C]),f=(0,v.useCallback)(u=>{g(l=>{let i={...l||{}};K(i),i.costered=E(i.costered);let k=W(i,c);if(!Object.prototype.hasOwnProperty.call(k,u))return l;let S={...k};return delete S[u],U(i,c,S)})},[g,c]),y=(0,v.useCallback)(u=>{!Array.isArray(u)||u.length===0||g(l=>{let i={...l||{}};K(i),i.costered=E(i.costered);let k=W(i,c),S=!1,B={...k};for(let R=0;R<u.length;R++){let j=u[R];Object.prototype.hasOwnProperty.call(B,j)&&(delete B[j],S=!0)}return S?U(i,c,B):l})},[g,c]),w=(0,v.useCallback)(u=>({set:(l,i)=>A(`${u}${l}`,i),setMany:l=>{let i={};for(let[k,S]of Object.entries(l))i[`${u}${k}`]=S;p(i)},unset:l=>f(`${u}${l}`),unsetMany:l=>y(l.map(i=>`${u}${i}`))}),[A,p,f,y]);return{set:A,setMany:p,unset:f,unsetMany:y,withPrefix:w,activeBreakpoint:c}}var _t=m(M());function ot(t){return String(t??"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim()}function G(t){let e=String(t??"").trim();if(!e)return[];let n=0,r=0,o="",s=[];for(let a=0;a<e.length;a++){let d=e[a];if(d==="("){n++,o+=d;continue}if(d===")"){n=Math.max(0,n-1),o+=d;continue}if(d==="["){r++,o+=d;continue}if(d==="]"){r=Math.max(0,r-1),o+=d;continue}if(n===0&&r===0&&/\s/.test(d)){o&&(s.push(o),o="");continue}o+=d}return o&&s.push(o),s}function st(t){let n=String(t??"").trim().replace(/\]\s+\[/g," ");return n=n.replace(/\[\s+/g,"[").replace(/\s+\]/g,"]"),n=n.replace(/\[(?:\s+)?([^\]]*?)(?:\s+)?\]/g,(r,o)=>`[${String(o).replace(/\s+/g," ").trim()}]`),n}function ie(t){let e=String(t??"").trim();if(!e)return null;let n=e.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);if(!n||n[1]===void 0||n[2]===void 0)return null;let r=Number.parseInt(n[1],10),o=n[2].trim();return!Number.isFinite(r)||r<0||o===""?null:{count:r,unit:o}}function ae(t,e=q){return t>0?`repeat(${t}, ${e})`:null}function F(t,e=q){if(!t||typeof t!="string")return{count:0,unit:e};let n=st(t);if(!n||typeof n!="string")return{count:0,unit:e};let r=n.trim();if(!r)return{count:0,unit:e};if(/^subgrid\b/i.test(r))return{count:0,unit:e};if(r=r.replace(/\[[^\]]*]/g," ").trim(),!r)return{count:0,unit:e};let o=r.match(/^\s*repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)\s*$/i);if(o){let a=o[2];return{count:0,unit:rt(a,e)}}let s=ue(r,e);return{count:s.count,unit:s.unit||e}}function ue(t,e){let n=vt(t);if(n){let d=n.inner.trim(),b=G(d).length,g=rt(d,e);return{count:n.times*b,unit:g||e}}let r=G(t),o=0,s="";for(let d of r){if(/^\s*repeat\(/i.test(d)){let c=Et(d);if(c){o+=c.count,!s&&c.unitHint&&(s=c.unitHint);continue}o+=1;continue}o+=1,!s&&J(d)&&(s=$(d)??"")}let a=s||rt(t,e);return{count:o,unit:a||e}}function vt(t){let e=t.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!e)return null;let n=parseInt(e[1],10),r=e[2];return!Number.isFinite(n)||n<0?null:{times:n,inner:r}}function Et(t){if(t.match(/^\s*repeat\(\s*auto-(fit|fill)\s*,/i))return{count:0,unitHint:""};let n=t.match(/^\s*repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!n)return null;let r=parseInt(n[1],10)||0;if(r<=0)return{count:0,unitHint:""};let o=n[2].trim(),s=G(o),a=r*s.length,d="";if(s.length===1)d=$(s[0])??"";else{let c=s.find(J);d=$(c)??""}return{count:a,unitHint:d}}function rt(t,e){if(!t)return e;let n=vt(t);if(n){let s=G(n.inner);if(s.length===1)return $(s[0])||e;let a=s.find(J);if(a)return $(a)||e}let r=G(t);if(r.length===1)return $(r[0])||e;let o=r.find(J);if(o)return $(o)||e;for(let s of r){let a=Et(s);if(a&&a.unitHint)return a.unitHint}return e}function J(t){return t?!!(/^(minmax|fit-content|clamp|var)\(/i.test(t)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(t)||/^(auto|max-content|min-content)$/i.test(t)):!1}function $(t){return t?t.trim():""}function h(t){let e=Number(t);return Number.isFinite(e)&&e>=0?Math.floor(e):0}function Pt(t){let e=String(t??"").trim();if(!e)return{hasAreas:!1,cols:0,rows:0};let n=[],r=/"([^"]*)"|'([^']*)'/g,o;for(;o=r.exec(e);){let a=(o[1]??o[2]??"").trim();a&&n.push(a)}return n.length?{hasAreas:!0,cols:n.reduce((a,d)=>{let c=d.split(/\s+/).filter(Boolean).length;return Math.max(a,c)},0),rows:n.length}:{hasAreas:!1,cols:0,rows:0}}function Ot(t,e="."){if(!Array.isArray(t)||t.length===0)return"";let n=t.map(o=>(Array.isArray(o)?o:[]).map(s=>{let a=String(s??"").trim();return a===""?e:a}));return n.some(o=>o.some(s=>s!==e))?n.map(o=>`"${o.join(" ")}"`).join(" "):""}function $t(t,e="."){let n=String(t??"").trim();if(!n)return[];let r=[],o=/"([^"]*)"|'([^']*)'/g,s;for(;s=o.exec(n);){let a=(s[1]??s[2]??"").trim(),d=a.length?a.split(/\s+/g).map(c=>c&&c!==e?c:e):[];r.push(d)}return r}function it(t,e,n,r){let o=h(e),s=h(n);if(o===0||s===0)return[];let a=Array.isArray(t)?t:[],d=[];for(let c=0;c<s;c++){let b=Array.isArray(a[c])?a[c]:[],g=Array.from({length:o},(C,A)=>{let p=b[A];return p===void 0?r:p});d.push(g)}return d}function at(t){let e=String(t??"").trim();if(!e||/^subgrid\b/i.test(e))return 0;let n=e.replace(/\[[^\]]*\]/g," ").trim();return n=n.replace(/repeat\(\s*(\d+)\s*,\s*([^)]+)\)/gi,(r,o,s)=>Array.from({length:parseInt(o,10)||0},()=>"X").join(" ")),n=n.replace(/\s+/g," ").trim(),n?n.split(" ").filter(Boolean).length:0}function ce(t){let e=ie(t);if(!e)return null;let n=ot(ae(e.count,e.unit));return{mode:"simple",template:t?String(t):null,normalised:n,simple:{count:e.count,unit:e.unit}}}function de(t){let e=st(t),n=G(e);if(!n.length)return null;let r=ot(n.join(" "));return{mode:"tracks",template:t?String(t):null,normalised:r,tracks:n}}var le=[ce,de];function ut(t){let e=st(t);for(let n of le){let r=n(e);if(r)return r}return{mode:"raw",template:t?String(t):null,normalised:ot(t??"")}}var z=m(M());var hn=Number.MAX_SAFE_INTEGER;var fe=m(M());var ct=m(T()),Nt=m(D()),dt=m(M());function lt(t){let e=(0,ct.useSelect)(s=>t?s(Nt.store).getBlock(t)?.attributes??void 0:void 0,[t]),n=(0,ct.useSelect)(P,[]),r=(0,dt.useMemo)(()=>e&&n?N(e,n):void 0,[e,n]);if(!r)return;let o=s=>String(r.$get(s)??"");return(0,dt.useMemo)(()=>{let s=o("gridTemplateColumns"),a=o("gridTemplateRows"),d=o("gridTemplateAreas"),c=ut(s),b=ut(a),g=at(s),C=at(a),A={...c,count:g},p={...b,count:C},f=Pt(d),y={template:d||"",hasAreas:f.hasAreas,cols:f.cols,rows:f.rows};return{columns:A,rows:p,areas:y,activePane:{columns:A.mode,rows:p.mode}}},[r.$get,r.costered,n])}var ge=m(M()),ye=m(T());var ke=m(T()),be=m(M());var Se=m(T()),Ae=m(D());var we=m(T()),xe=m(D()),Ce=m(M());var Hn=Object.freeze({});var Lt=m(T()),he=m(jt()),Be=m(M());function Dt(t){let{set:e,unset:n}=V(t),r=(0,Wt.useSelect)(p=>p(Ut.store)?.getBlock?.(t)?.innerBlocks?.length||0,[t]),o=lt(t),s=o?.columns?.template??"",a=o?.rows?.template??"",d=o?.areas?.template??"",c=(0,_.useMemo)(()=>{if(s){let f=F(s),y=h(f?.count??f);if(y>0)return y}let p=h(o?.rows?.count)||(()=>{if(!a)return 0;let f=F(a);return h(f?.count??f)})();return p>0&&r>0?Math.ceil(r/p):0},[s,a,o?.rows?.count,r]),b=(0,_.useMemo)(()=>{let p=h(o?.rows?.count);if(p>0)return p;if(a){let y=F(a),w=h(y?.count??y);if(w>0)return w}let f=h(c);return f>0&&r>0?Math.ceil(r/f):0},[a,o?.rows?.count,c,r]),g=(0,_.useCallback)(p=>{let f=Ot(p,".");f?e("gridTemplateAreas",f):n("gridTemplateAreas")},[e,n]),C=(0,_.useCallback)(()=>{n("gridTemplateAreas")},[n]),A=(0,_.useCallback)((p=".")=>{let f=$t(d,p),y=h(f[0]?.length)||h(c),w=h(f.length)||h(b);return y===0&&w>0&&r>0?y=Math.ceil(r/w):w===0&&y>0&&r>0&&(w=Math.ceil(r/y)),y===0&&(y=1),w===0&&(w=1),it(f.map(l=>l.map(i=>String(i||p))),y,w,p)},[d,c,b,r]);return{areasTemplate:d,trackColumnCount:c,trackRowCount:b,applyMatrixToStore:g,clearAreasInStore:C,seedFromStore:A}}})();
