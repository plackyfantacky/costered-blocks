(()=>{var at=Object.create;var v=Object.defineProperty;var pt=Object.getOwnPropertyDescriptor;var mt=Object.getOwnPropertyNames;var lt=Object.getPrototypeOf,ft=Object.prototype.hasOwnProperty;var A=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var dt=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of mt(t))!ft.call(e,n)&&n!==r&&v(e,n,{get:()=>t[n],enumerable:!(o=pt(t,n))||o.enumerable});return e};var m=(e,t,r)=>(r=e!=null?at(lt(e)):{},dt(t||!e||!e.__esModule?v(r,"default",{value:e,enumerable:!0}):r,e));var S=A((Gt,N)=>{N.exports=wp.element});var x=A((Dt,L)=>{L.exports=wp.data});var C=A((vt,K)=>{K.exports=wp.blockEditor});var st=A((ue,ot)=>{ot.exports=wp.preferences});var h=m(S()),ct=m(x()),ut=m(C());var g=m(S());var Y={display:{type:"string"},visibility:{type:"string"},overflow:{type:"string"}},z={width:{type:"string"},height:{type:"string"},maxWidth:{type:"string"},maxHeight:{type:"string"},minWidth:{type:"string"},minHeight:{type:"string"}},gt={marginTop:{type:"string"},marginRight:{type:"string"},marginBottom:{type:"string"},marginLeft:{type:"string"}},W={paddingTop:{type:"string"},paddingRight:{type:"string"},paddingBottom:{type:"string"},paddingLeft:{type:"string"}},H={flexDirection:{type:"string"},flexWrap:{type:"string"},justifyContent:{type:"string"},alignItems:{type:"string"},alignContent:{type:"string"}},V={flexGrow:{type:"number"},flexShrink:{type:"number"},flexBasis:{type:"string"}},F={gridTemplateColumns:{type:"string"},gridTemplateRows:{type:"string"},gridTemplateAreas:{type:"string"}},E={gridColumn:{type:"string",default:""},gridRow:{type:"string",default:""},gridArea:{type:"string",default:""}},$={gridColumnStart:{type:"string"},gridColumnSpan:{type:"string"},gridColumnEnd:{type:"string"},gridRowStart:{type:"string"},gridRowSpan:{type:"string"},gridRowEnd:{type:"string"}},q={gap:{type:"string"},order:{type:"number"},alignSelf:{type:"string"},justifySelf:{type:"string"}},St={...Y,...z,...gt,...W,...H,...V,...F,...E,...$,...q},Nt=Object.assign({},...Object.values(St)),xt=["dimensionMode","minDimensionMode","maxDimensionMode","marginMode","paddingMode","gapMode","gapInputMode","gridTemplateColumnsMode","gridTemplateRowsMode"],ht=new Set([...xt]),Z=new Set([...Object.keys(E)]);var O="1fr",Lt=new Set([...Object.keys(W)]),Kt=new Set([...Object.keys(z)]),Yt=new Set([...Object.keys($)]),zt=new Set([{},...Object.keys(Y),...Object.keys(H),...Object.keys(V),...Object.keys(F),...Object.keys(E),...Object.keys($),...Object.keys(q)]);function k(e,t,{trim:r=!0,emptyUnsets:o=!0}={}){let n=t!=null,s=(0,g.useCallback)((a,u)=>{if(Z.has(u)){let f=typeof a=="string"&&r?a.trim():String(a);return o&&f===""?void 0:f}let c=a;if(r&&typeof c=="string"&&(c=c.trim()),!(o&&(c===""||c==null)))return c},[r,o]),i=(0,g.useCallback)(a=>{if(n)return e(t,a);{let u={};for(let[c,f]of Object.entries(a)){let M=s(f,c);M!==void 0&&(u[c]=M)}Object.keys(u).length&&e(t,u)}},[n,e,t,s]),p=(0,g.useCallback)((a,u)=>{i({[a]:s(u,a)})},[i,s]),l=(0,g.useCallback)(a=>{let u={};for(let[c,f]of Object.entries(a))u[c]=s(f,c);i(u)},[i,s]),d=(0,g.useCallback)(a=>{i({[a]:void 0})}),w=(0,g.useCallback)(a=>{let u={};for(let c of a)u[c]=void 0;i(u)},[i]),b=(0,g.useCallback)(a=>({set:(u,c)=>p(`${a}${u}`,c),setMany:u=>{let c={};for(let[f,M]of Object.entries(u))c[`${a}${f}`]=M;l(c)},unset:u=>d(`${a}${u}`),unsetMany:u=>w(u.map(c=>`${a}${c}`))}),[p,l,d,w]);return{set:p,setMany:l,unset:d,unsetMany:w,withPrefix:b}}var _=m(S());function P(e){return String(e||"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function Mt(e){let t=String(e||"").trim();if(!t)return[];let r=0,o=0,n="",s=[];for(let i=0;i<t.length;i++){let p=t[i];if(p==="("){r++,n+=p;continue}if(p===")"){r=Math.max(0,r-1),n+=p;continue}if(p==="["){o++,n+=p;continue}if(p==="]"){o=Math.max(0,o-1),n+=p;continue}if(p===" "&&r===0&&o===0){n&&(s.push(n),n="");continue}n+=p}return n&&s.push(n),s}function wt(e){if(!e)return null;let t=e.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);return t?{count:parseInt(t[1],10),unit:t[2].trim()}:null}function yt(e,t=O){return e>0?`repeat(${e}, ${t})`:null}function R(e,t=O){if(!e||typeof e!="string")return{count:0,unit:t};let r=e.trim();if(!r)return{count:0,unit:t};if(/^subgrid\b/i.test(r))return{count:0,unit:t};if(r=r.replace(/\[[^\]]*]/g," ").trim(),!r)return{count:0,unit:t};let o=r.match(/repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)$/i);if(o){let i=o[2];return{count:0,unit:U(i,t)}}let{count:n,unit:s}=J(r,t);return{count:n,unit:s||t}}function J(e,t){let r=Q(e);if(r){let i=r.inner.trim(),{count:p,unit:l}=J(i,t);return{count:r.times*p,unit:l||U(i,t)}}let o=B(e),n=o.length,s="";if(o.length===1)s=y(o[0])||t;else{let i=o.find(X);s=y(i)||t}return{count:n,unit:s}}function Q(e){let t=e.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!t)return null;let r=parseInt(t[1],10),o=t[2];return!Number.isFinite(r)||r<0?null:{times:r,inner:o}}function B(e){let t=[],r=0,o="";for(let n=0;n<e.length;n++){let s=e[n];if(s==="("){r++,o+=s;continue}if(s===")"){r=Math.max(0,r-1),o+=s;continue}if(r===0&&/\s/.test(s)){o.trim()&&t.push(o.trim()),o="";continue}o+=s}return o.trim()&&t.push(o.trim()),t}function U(e,t){if(!e)return t;let r=Q(e);if(r){let s=B(r.inner);if(s.length===1)return y(s[0])||t}let o=B(e);if(o.length===1)return y(o[0])||t;let n=o.find(X);return y(n)||t}function X(e){return e?!!(/^(minmax|fit-content|clamp|var)\(/i.test(e)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(e)||/^(auto|max-content|min-content)$/i.test(e)):!1}function y(e){return e?e.trim():""}function At(e){let t=wt(e);if(!t)return null;let r=P(yt(t.count,t.unit));return{mode:"simple",template:e||null,normalised:r,simple:{count:t.count,unit:t.unit}}}function Ct(e){let t=Mt(e);if(!t.length)return null;let r=P(t.join(" "));return{mode:"tracks",template:e||null,normalised:r,tracks:t}}var Rt=[At,Ct];function j(e){let t=e||"";for(let r of Rt){let o=r(t);if(o)return o}return{mode:"raw",template:e||null,normalised:P(e||"")}}function tt(e){let t=(e||"").trim();if(!t)return{hasAreas:!1,cols:0,rows:0};let r=t.split(/(['"])(?:(?=(\\?))\2.)*?\1/).map(n=>n.replace(/^['"]|['"]$/g,"").trim()).filter(n=>n&&!/^[\s]+$/.test(n));return r.length?{hasAreas:!0,cols:Math.max(0,...r.map(n=>n.split(/\s+/).filter(Boolean).length)),rows:r.length}:{hasAreas:!1,cols:0,rows:0}}function G(e,t="."){if(!Array.isArray(e)||e.length===0)return"";let r=e.map(n=>(Array.isArray(n)?n:[]).map(s=>{let i=String(s??"").trim();return i===""?t:i}));return r.some(n=>n.some(s=>s!==t))?r.map(n=>`"${n.join(" ")}"`).join(" "):""}function D(e,t="."){let r=String(e||"").trim();if(!r)return[];let o=[];return r.replace(/(['"])(.*?)\1/g,(n,s,i)=>(o.push(i),"")),o.map(n=>n.trim().split(/\s+/).map(s=>s&&s!==t?s:t))}function I(e,t,r,o="."){let n=[];for(let s=0;s<r;s++){let i=e[s]||[],p=Array.from({length:t},(l,d)=>i[d]??o);n.push(p)}return n}var bt=m(S());var It=m(S());var et=m(x()),rt=m(C()),nt=m(S());function T(e){let t=(0,et.useSelect)(o=>e?o(rt.store).getBlock(e)?.attributes??{}:{},[e]);return(0,nt.useMemo)(()=>{let o=j(t.gridTemplateColumns),n=j(t.gridTemplateRows),s=t.gridTemplateAreas??null,i=tt(s);return{columns:o,rows:n,areas:{template:s,...i},activePane:{columns:o.mode,rows:n.mode}}},[t.gridTemplateColumns,t.gridTemplateRows,t.gridTemplateAreas])}var Et=m(x());var $t=m(x()),Ot=m(C());var kt=m(x());var it=m(x()),Bt=m(st());function Pt(e){let{updateBlockAttributes:t}=(0,ct.useDispatch)(ut.store),{set:r,unset:o}=k(t,e),n=T(e),s=n?.columns?.template??null,i=n?.rows?.template??null,p=n?.areas?.template??null,l=(0,h.useMemo)(()=>s?R(s):0,[s]),d=(0,h.useMemo)(()=>i?R(i):0,[i]),w=(0,h.useCallback)(u=>{let c=G(u,".");c?r("gridTemplateAreas",c):o("gridTemplateAreas")},[r,o]),b=(0,h.useCallback)(()=>{o("gridTemplateAreas")},[o]),a=(0,h.useCallback)((u=".")=>{let c=D(p,u),f=c[0]?.length||l||1,M=c.length||d||1;return I(c,f,M,u)},[p,l,d]);return{areasTemplate:p,trackColumnCount:l,trackRowCount:d,applyMatrixToStore:w,clearAreasInStore:b,seedFromStore:a}}})();
