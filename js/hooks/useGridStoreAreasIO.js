(()=>{var Gt=Object.create;var st=Object.defineProperty;var Nt=Object.getOwnPropertyDescriptor;var Lt=Object.getOwnPropertyNames;var jt=Object.getPrototypeOf,Wt=Object.prototype.hasOwnProperty;var W=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Kt=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Lt(t))!Wt.call(e,r)&&r!==n&&st(e,r,{get:()=>t[r],enumerable:!(o=Nt(t,r))||o.enumerable});return e};var f=(e,t,n)=>(n=e!=null?Gt(jt(e)):{},Kt(t||!e||!e.__esModule?st(n,"default",{value:e,enumerable:!0}):n,e));var E=W((Ae,it)=>{it.exports=wp.element});var I=W((Te,ut)=>{ut.exports=wp.data});var B=W((Re,ct)=>{ct.exports=wp.blockEditor});var _t=W((Un,Bt)=>{Bt.exports=wp.preferences});var $=f(E()),Pt=f(I()),$t=f(B());var zt=f(I()),Xt=f(B()),wt=f(E());var w={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var at=e=>Array.isArray(e)?e:[],Vt=e=>new Set(at(e));function M(e){return Object.fromEntries(Object.entries(w.attributes).filter(([t,n])=>n.group===e))}var pt=M("display"),lt=M("dimension"),dt=M("margin"),mt=M("padding"),ft=M("flex"),gt=M("flex-item"),yt=M("grid"),F=M("grid-item"),bt=M("position"),St=M("shared"),Me={...pt,...lt,...dt,...mt,...ft,...gt,...yt,...F,...bt,...St},kt=new Set([...Object.keys(F)]),Ce=at(w?.collections?.editorStyles),xt=Vt(w?.collections?.unitless),Y=w?.settings?.gridUnit||"1fr",ve=!!w?.settings?.appendImportantToMirroredStyles,Be=w?.settings?.styleTagId||"costered-blocks-style-mirror",z=w?.settings?.reduxStoreKey||"costered/ui",_e=w?.settings?.breakpoints?.mobile??782,De=w?.settings?.breakpoints?.tablet??1024,Pe=w?.settings?.breakpoints?.desktop??1440,$e=w?.collections?.clearSets?.gridAreas,Oe=w?.collections?.clearSets?.gridColumns,Ge=w?.collections?.clearSets?.gridRows;var Ht=new Set([...Object.keys(pt),...Object.keys(lt),...Object.keys(mt),...Object.keys(dt),...Object.keys(ft),...Object.keys(gt),...Object.keys(yt),...Object.keys(F),...Object.keys(bt),...Object.keys(St)]),Ne=Object.fromEntries(Object.entries(w.attributes).map(([e,t])=>[e,t.css]));var _=e=>{let t={desktop:{styles:{}},tablet:{styles:{}},mobile:{styles:{}},...e||{}};return t.desktop={styles:{},...t.desktop||{}},t.tablet={styles:{},...t.tablet||{}},t.mobile={styles:{},...t.mobile||{}},t.desktop.styles={...t.desktop.styles||{}},t.tablet.styles={...t.tablet.styles||{}},t.mobile.styles={...t.mobile.styles||{}},t};var X=e=>e==null||e===""||e==="null"||e==="undefined";var Ft="desktop",Yt=Object.freeze({});function O(e,t){let n=e||Yt,o={...n},r=_(n.costered),i=g=>{switch(g){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},u=(g,d=void 0)=>{let h=d&&Object.prototype.hasOwnProperty.call(d,"cascade")?!!d.cascade:!0,A=d&&Object.prototype.hasOwnProperty.call(d,"raw")?!!d.raw:!h,y=t||Ft;if(A){let S=r?.[y]?.styles?.[g];return X(S)?void 0:S}let b=i(y);for(let S of b){let x=r?.[S]?.styles?.[g];if(!X(x))return x}};return Object.defineProperties(o,{$get:{value:u,enumerable:!1},$getCascade:{value:g=>u(g,{cascade:!0}),enumerable:!1},$getMany:{value:(g,d)=>{let h={};for(let A of g)h[A]=u(A,d);return h},enumerable:!1},$bp:{value:t,enumerable:!1}}),o}var C=f(E()),v=f(I());function qt(e){return Array.isArray(e)}function ht(e){if(qt(e)){let[t,n,o]=e;return o!==void 0?{property:t,value:n,important:o}:{property:t,value:n}}return e}function q(e,t,n,o){let r=Array.isArray(e)?e.slice():[],i=-1;for(let c=0;c<r.length;c++)if(ht(r[c]).property===t){i=c;break}let u=o!==void 0?{property:t,value:n,important:o}:{property:t,value:n};return i===-1?r.push(u):r[i]=u,r}function Z(e,t){let n=Array.isArray(e)?Array.from(e):[],o=[];for(let r=0;r<n.length;r++)ht(n[r]).property!==t&&o.push(n[r]);return o}var Zt=e=>typeof e=="string"&&e.trim().length>0,Jt=()=>{if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")return crypto.randomUUID();let e=Date.now().toString(36),t=Math.random().toString(36).slice(2,10);return`${e}-${t}`},G=e=>{e&&!Zt(e.costeredId)&&(e.costeredId=Jt())};var N=f(I());var Qt=e=>{let t=String(e||"").toLowerCase();return t==="mobile"||t==="phone"||t==="tablet"?"mobile":"desktop"},te=e=>{try{let t=e("core/edit-post");if(t){if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType()}}catch{}try{let t=e("core/edit-site");if(t){if(typeof t.getDeviceType=="function")return t.getDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType();if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType()}}catch{}},D=e=>{try{let n=(0,N.select)(z);if(n&&typeof n.getBreakpoint=="function"){let o=n.getBreakpoint();if(o)return o}}catch{}let t=te(e);if(t)return Qt(t);if(typeof window<"u"&&typeof window.__COSTERED_VIEWPORT_BP=="string")return window.__COSTERED_VIEWPORT_BP||"desktop";try{if(window.COSTERED_DEBUG){let n=(0,N.select)(STORE_KEY),o=n&&typeof n.getBreakpoint=="function"?n.getBreakpoint():null,r=(0,N.select)("core/edit-post"),i=r&&(typeof r.getPreviewDeviceType=="function"&&r.getPreviewDeviceType()||typeof r.__experimentalGetPreviewDeviceType=="function"&&r.__experimentalGetPreviewDeviceType()),u=(0,N.select)("core/edit-site"),c=u&&(typeof u.getDeviceType=="function"&&u.getDeviceType()||typeof u.__experimentalGetPreviewDeviceType=="function"&&u.__experimentalGetPreviewDeviceType()||typeof u.getPreviewDeviceType=="function"&&u.getPreviewDeviceType())}}catch{}return"desktop"};var ee="desktop";function K(e,t,n={trim:!0,emptyUnsets:!0}){let o=(typeof t=="object"?t:n)||{},{trim:r=!0,emptyUnsets:i=!0,breakpoint:u}=o,c=(0,v.useSelect)(D,[]),a=u||c||ee,{updateBlockAttributes:g}=(0,v.useDispatch)("core/block-editor"),d=(0,C.useMemo)(()=>{if(typeof e=="string"&&!t){let p=e;return l=>{if(p)if(typeof l=="function"){let s=(0,v.select)("core/block-editor")?.getBlockAttributes(p)||{},m=l(s)||s;g(p,m)}else g(p,l||{})}}if(typeof e=="function"&&typeof t=="string"){let p=e,l=t;return s=>{if(!l)return;if(typeof s=="function"){let k=(0,v.select)("core/block-editor")?.getBlockAttributes(l)||{},R=s(k)||k;try{p(l,R)}catch{p(R)}return}let m=s||{};try{p(l,m)}catch{p(m)}}}if(typeof e=="function"){let p=e;return l=>{if(typeof l=="function"){let s=(0,v.select)("core/block-editor")?.getBlockAttributes?.(void 0)||{},m=l(s)||s;p(m)}else p(l||{})}}return()=>{}},[e,t,g]),h=(0,C.useCallback)((p,l)=>{if(p==null)return;if(kt.has(l)){let m=typeof p=="string"&&r?p.trim():String(p);return i&&m===""?void 0:m}let s=p;if(r&&typeof s=="string"&&(s=s.trim()),!(i&&(s===""||s=="null"||s=="undefined"))){if(xt.has(l)){if(typeof s=="string"&&/^-?\d+(\.\d+)?$/.test(s)){let m=Number(s);return Number.isFinite(m)?m:void 0}return typeof s=="number"&&Number.isFinite(s)?s:void 0}if(typeof s=="number")return Number.isFinite(s)?s:void 0;if(typeof s=="string")return s==="null"||s==="undefined"?void 0:s;try{return String(s)}catch{return}}},[r,i]),A=(0,C.useCallback)((p,l)=>{d(s=>{let m={...s||{}};G(m),m.costered=_(m.costered);let k=m.costered[a].styles,R=h(l,p),H=q(k,p,R);return m.costered[a]={...m.costered[a],styles:H},m})},[d,a,h]),y=(0,C.useCallback)(p=>{!p||typeof p!="object"||d(l=>{let s={...l||{}};G(s),s.costered=_(s.costered);let k=s.costered[a].styles;for(let[R,H]of Object.entries(p)){let Ot=h(H,R);k=q(k,R,Ot)}return s.costered[a]={...s.costered[a],styles:k||[]},s})},[d,a,h]),b=(0,C.useCallback)(p=>{d(l=>{let s={...l||{}};G(s),s.costered=_(s.costered);let m=s.costered[a].styles,k=Z(m,p);return(m?.length||0)===k.length?l:(s.costered[a]={...s.costered[a],styles:k},s)})},[d,a]),S=(0,C.useCallback)(p=>{!Array.isArray(p)||p.length===0||d(l=>{let s={...l||{}};G(s),s.costered=_(s.costered);let k=s.costered[a]?.styles;for(let R=0;R<p.length;R++)k=Z(k,p[R]);return s.costered[a]={...s.costered[a],styles:k||[]},s})},[d,a]),x=(0,C.useCallback)(p=>({set:(l,s)=>A(`${p}${l}`,s),setMany:l=>{let s={};for(let[m,k]of Object.entries(l))s[`${p}${m}`]=k;y(s)},unset:l=>b(`${p}${l}`),unsetMany:l=>S(l.map(s=>`${p}${s}`))}),[A,y,b,S]);return{set:A,setMany:y,unset:b,unsetMany:S,withPrefix:x,activeBreakpoint:a}}var Mt=f(E());function Q(e){return String(e||"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function ne(e){let t=String(e??"").trim();if(!t)return[];let n=0,o=0,r="",i=[];for(let u=0;u<t.length;u++){let c=t[u];if(c==="("){n++,r+=c;continue}if(c===")"){n=Math.max(0,n-1),r+=c;continue}if(c==="["){o++,r+=c;continue}if(c==="]"){o=Math.max(0,o-1),r+=c;continue}if(c===" "&&n===0&&o===0){r&&(i.push(r),r="");continue}r+=c}return r&&i.push(r),i}function re(e){let t=String(e??"").trim();if(!t)return null;let n=t.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);if(!n||n[1]===void 0||n[2]===void 0)return null;let o=Number.parseInt(n[1],10),r=n[2].trim();return!Number.isFinite(o)||o<0||r===""?null:{count:o,unit:r}}function oe(e,t=Y){return e>0?`repeat(${e}, ${t})`:null}function j(e,t=Y){if(!e||typeof e!="string")return{count:0,unit:t};let n=e.trim();if(!n)return{count:0,unit:t};if(/^subgrid\b/i.test(n))return{count:0,unit:t};if(n=n.replace(/\[[^\]]*]/g," ").trim(),!n)return{count:0,unit:t};let o=n.match(/^\s*repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)\s*$/i);if(o){let i=o[2];return{count:0,unit:J(i,t)}}let r=se(n,t);return{count:r.count,unit:r.unit||t}}function se(e,t){let n=At(e);if(n){let c=n.inner.trim(),g=L(c).length,d=J(c,t);return{count:n.times*g,unit:d||t}}let o=L(e),r=0,i="";for(let c of o){if(/^\s*repeat\(/i.test(c)){let a=Tt(c);if(a){r+=a.count,!i&&a.unitHint&&(i=a.unitHint);continue}r+=1;continue}r+=1,!i&&U(c)&&(i=P(c)||"")}let u=i||J(e,t);return{count:r,unit:u||t}}function At(e){let t=e.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!t)return null;let n=parseInt(t[1],10),o=t[2];return!Number.isFinite(n)||n<0?null:{times:n,inner:o}}function Tt(e){if(e.match(/^\s*repeat\(\s*auto-(fit|fill)\s*,/i))return{count:0,unitHint:""};let n=e.match(/^\s*repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!n)return null;let o=parseInt(n[1],10)||0;if(o<=0)return{count:0,unitHint:""};let r=n[2].trim(),i=L(r),u=o*i.length,c="";if(i.length===1)c=P(i[0])||"";else{let a=i.find(U);c=P(a)||""}return{count:u,unitHint:c}}function L(e){let t=[],n=0,o="";for(let r=0;r<e.length;r++){let i=e[r];if(i==="("){n++,o+=i;continue}if(i===")"){n=Math.max(0,n-1),o+=i;continue}if(n===0&&/\s/.test(i)){o.trim()&&t.push(o.trim()),o="";continue}o+=i}return o.trim()&&t.push(o.trim()),t}function J(e,t){if(!e)return t;let n=At(e);if(n){let i=L(n.inner);if(i.length===1)return P(i[0])||t;let u=i.find(U);if(u)return P(u)||t}let o=L(e);if(o.length===1)return P(o[0])||t;let r=o.find(U);if(r)return P(r)||t;for(let i of o){let u=Tt(i);if(u&&u.unitHint)return u.unitHint}return t}function U(e){return e?!!(/^(minmax|fit-content|clamp|var)\(/i.test(e)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(e)||/^(auto|max-content|min-content)$/i.test(e)):!1}function P(e){return e?e.trim():""}function T(e){let t=Number(e);return Number.isFinite(t)&&t>=0?Math.floor(t):0}function Rt(e){let t=String(e??"").trim();if(!t)return{hasAreas:!1,cols:0,rows:0};let n=[],o=/"([^"]*)"|'([^']*)'/g,r;for(;r=o.exec(t);){let u=(r[1]??r[2]??"").trim();u&&n.push(u)}return n.length?{hasAreas:!0,cols:n.reduce((u,c)=>{let a=c.split(/\s+/).filter(Boolean).length;return Math.max(u,a)},0),rows:n.length}:{hasAreas:!1,cols:0,rows:0}}function Et(e,t="."){if(!Array.isArray(e)||e.length===0)return"";let n=e.map(r=>(Array.isArray(r)?r:[]).map(i=>{let u=String(i??"").trim();return u===""?t:u}));return n.some(r=>r.some(i=>i!==t))?n.map(r=>`"${r.join(" ")}"`).join(" "):""}function It(e,t="."){let n=String(e??"").trim();if(!n)return[];let o=[],r=/"([^"]*)"|'([^']*)'/g,i;for(;i=r.exec(n);){let u=(i[1]??i[2]??"").trim(),c=u.length?u.split(/\s+/g).map(a=>a&&a!==t?a:t):[];o.push(c)}return o}function tt(e,t,n,o){let r=T(t),i=T(n);if(r===0||i===0)return[];let u=Array.isArray(e)?e:[],c=[];for(let a=0;a<i;a++){let g=Array.isArray(u[a])?u[a]:[],d=Array.from({length:r},(h,A)=>{let y=g[A];return y===void 0?o:y});c.push(d)}return c}function ie(e){let t=re(e);if(!t)return null;let n=Q(oe(t.count,t.unit));return{mode:"simple",template:e?String(e):null,normalised:n,simple:{count:t.count,unit:t.unit}}}function ue(e){let t=ne(e);if(!t.length)return null;let n=Q(t.join(" "));return{mode:"tracks",template:e?String(e):null,normalised:n,tracks:t}}var ce=[ie,ue];function et(e){let t=e||"";for(let n of ce){let o=n(t);if(o)return o}return{mode:"raw",template:e?String(e):null,normalised:Q(e||"")}}var V=f(E());var xn=Number.MAX_SAFE_INTEGER;var le=f(E());var nt=f(I()),vt=f(B()),rt=f(E());function ot(e){let t=(0,nt.useSelect)(u=>e?u(vt.store).getBlock(e)?.attributes??{}:{},[e]),n=(0,nt.useSelect)(D,[]),o=(0,rt.useMemo)(()=>O(t,n),[t,n]),r=(u,c={})=>o.$get(u,c);return(0,rt.useMemo)(()=>{let u=r("gridTemplateColumns"),c=r("gridTemplateRows"),a=r("gridTemplateAreas"),g=et(u),d=et(c),{template:h,...A}=Rt(a,g.count,d.count);return{columns:g,rows:d,areas:{template:h,...A},activePane:{columns:g.mode,rows:d.mode}}},[n,o?.costered,o?.$get])}var de=f(E()),me=f(I()),Mn=f(B());var fe=f(I()),ge=f(E());var ye=f(I()),be=f(B());var Se=f(I()),ke=f(B()),xe=f(E());var Wn=Object.freeze({});var Dt=f(I()),we=f(_t());function Ct(e){let{set:t,unset:n}=K(e),o=(0,Pt.useSelect)(y=>y($t.store)?.getBlock?.(e)?.innerBlocks?.length||0,[e]),r=ot(e),i=r?.columns?.template??"",u=r?.rows?.template??"",c=r?.areas?.template??"",a=(0,$.useMemo)(()=>{if(i){let b=j(i),S=T(b?.count??b);if(S>0)return S}let y=T(r?.rows?.count)||(()=>{if(!u)return 0;let b=j(u);return T(b?.count??b)})();return y>0&&o>0?Math.ceil(o/y):0},[i]),g=(0,$.useMemo)(()=>{let y=T(r?.rows?.count);if(y>0)return y;if(u){let S=j(u),x=T(S?.count??S);if(x>0)return x}let b=T(a);return b>0&&o>0?Math.ceil(o/b):0},[u,r?.rows?.count,a,o]),d=(0,$.useCallback)(y=>{let b=Et(y,".");b?t("gridTemplateAreas",b):n("gridTemplateAreas")},[t,n]),h=(0,$.useCallback)(()=>{n("gridTemplateAreas")},[n]),A=(0,$.useCallback)((y=".")=>{let b=It(c,y),S=T(b[0]?.length)||T(a),x=T(b.length)||T(g);return S===0&&x>0&&o>0?S=Math.ceil(o/x):x===0&&S>0&&o>0&&(x=Math.ceil(o/S)),S===0&&(S=1),x===0&&(x=1),tt(b.map(l=>l.map(s=>String(s||y))),S,x,y)},[c,a,g,o]);return{areasTemplate:c,trackColumnCount:a,trackRowCount:g,applyMatrixToStore:d,clearAreasInStore:h,seedFromStore:A}}})();
