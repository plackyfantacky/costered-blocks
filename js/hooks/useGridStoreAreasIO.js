(()=>{var Yt=Object.create;var mt=Object.defineProperty;var Jt=Object.getOwnPropertyDescriptor;var Vt=Object.getOwnPropertyNames;var zt=Object.getPrototypeOf,Xt=Object.prototype.hasOwnProperty;var K=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var qt=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Vt(e))!Xt.call(t,o)&&o!==n&&mt(t,o,{get:()=>e[o],enumerable:!(r=Jt(e,o))||r.enumerable});return t};var m=(t,e,n)=>(n=t!=null?Yt(zt(t)):{},qt(e||!t||!t.__esModule?mt(n,"default",{value:t,enumerable:!0}):n,t));var R=K((Pe,ft)=>{ft.exports=wp.element});var B=K(($e,gt)=>{gt.exports=wp.data});var D=K((_e,yt)=>{yt.exports=wp.blockEditor});var Ut=K((Qn,Wt)=>{Wt.exports=wp.preferences});var _=m(R()),Ht=m(B()),Ft=m(D());var oe=m(B()),se=m(D()),Et=m(R());var A={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var G=t=>Array.isArray(t)?t:[],Qt=t=>new Set(G(t));function M(t){let e=A.attributes||{};return Object.fromEntries(Object.entries(e).filter(([,n])=>n.group===t))}var kt=M("display"),bt=M("dimension"),St=M("margin"),wt=M("padding"),xt=M("flex"),At=M("flex-item"),ht=M("grid"),z=M("grid-item"),Ct=M("position"),Tt=M("shared"),Ne={...kt,...bt,...St,...wt,...xt,...At,...ht,...z,...Ct,...Tt},Rt=new Set([...Object.keys(z)]),Ge=G(A?.collections?.editorStyles),Bt=Qt(A?.collections?.unitless),X=A?.settings?.gridUnit||"1fr",Le=!!A?.settings?.appendImportantToMirroredStyles,je=A?.settings?.styleTagId||"costered-blocks-style-mirror",H=A?.settings?.reduxStoreKey||"costered/ui",We=A?.settings?.breakpoints?.mobile??782,Ue=A?.settings?.breakpoints?.tablet??1024,Ke=A?.settings?.breakpoints?.desktop??1440,He=G(A?.collections?.clearSets?.gridAreas),Fe=G(A?.collections?.clearSets?.gridColumns),Ye=G(A?.collections?.clearSets?.gridRows);var te=new Set([...Object.keys(kt),...Object.keys(bt),...Object.keys(wt),...Object.keys(St),...Object.keys(xt),...Object.keys(At),...Object.keys(ht),...Object.keys(z),...Object.keys(Ct),...Object.keys(Tt)]),Je=Object.fromEntries(Object.entries(A.attributes).map(([t,e])=>[t,e.css]));var Mt=t=>{if(Array.isArray(t))return t.filter(Boolean).map(e=>{let n=String(e.property??""),r=e.value;return n&&r!==void 0?{property:n,value:r}:void 0}).filter(Boolean);if(t&&typeof t=="object"){let e=[];for(let[n,r]of Object.entries(t))r!==void 0&&e.push({property:n,value:r});return e}return[]},O=t=>t&&typeof t=="object"&&"styles"in t?{styles:Mt(t.styles)}:{styles:Mt(t)},I=t=>{let e=t||{};return!!e.desktop||!!e.tablet||!!e.mobile?{desktop:O(e.desktop),tablet:O(e.tablet),mobile:O(e.mobile)}:{desktop:O(e),tablet:O(void 0),mobile:O(void 0)}};var q=t=>t==null||t===""||t==="null"||t==="undefined";function ee(t){return Array.isArray(t)}function Z(t){if(ee(t)){let[e,n,r]=t;return r!==void 0?{property:e,value:n,important:r}:{property:e,value:n}}return t}function vt(t){if(!Array.isArray(t)||t.length===0)return[];let e=[];for(let n=0;n<t.length;n++)e.push(Z(t[n]));return e}function Q(t,e,n,r){let o=Array.isArray(t)?t.slice():[],s=-1;for(let c=0;c<o.length;c++)if(Z(o[c]).property===e){s=c;break}let u=r!==void 0?{property:e,value:n,important:r}:{property:e,value:n};return s===-1?o.push(u):o[s]=u,o}function L(t,e){let n=Array.isArray(t)?Array.from(t):[],r=[];for(let o=0;o<n.length;o++)Z(n[o]).property!==e&&r.push(n[o]);return r}var ne="desktop",re=Object.freeze({});function It(t,e){let n=vt(t);for(let r=0;r<n.length;r++){let o=n[r];if(o.property===e)return o.value}}function N(t,e){let n=t||re,r={...n},o=I(n.costered),s=b=>{switch(b){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},u=(b,g={})=>{let h=g&&Object.prototype.hasOwnProperty.call(g,"cascade")?!!g.cascade:!0,w=g&&Object.prototype.hasOwnProperty.call(g,"raw")?!!g.raw:!h,p=e||ne;if(w){let k=It(o?.[p]?.styles,b);return q(k)?void 0:k}let f=s(p);for(let k of f){let x=It(o?.[k]?.styles,b);if(!q(x))return x}};return Object.defineProperties(r,{$get:{value:u,enumerable:!1},$getCascade:{value:b=>u(b,{cascade:!0}),enumerable:!1},$getMany:{value:(b,g)=>{let h={};for(let w=0;w<b.length;w++){let p=b[w];h[p]=u(p,g)}return h},enumerable:!1},$bp:{value:e,enumerable:!1}}),r}var v=m(R()),P=m(B());function ie(t){return typeof t=="string"&&t.trim().length>0}function ue(){let t=globalThis?.crypto?.randomUUID;if(typeof t=="function")return t.call(globalThis.crypto);let e=Date.now().toString(36),n=Math.random().toString(36).slice(2,10);return`${e}-${n}`}function j(t){t&&(ie(t.costeredId)||(t.costeredId=ue()))}var tt=m(B());var et="desktop",nt="tablet",rt="mobile",ae=t=>{let e=String(t??"").toLowerCase();return e==="tablet"||e==="medium"?nt:e==="mobile"||e==="phone"?rt:et},Pt=t=>{try{let n=t?.("core/editor")?.getDeviceType?.();if(n)return n}catch{}try{let e=t("core/edit-post");if(e){if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType()}}catch{}try{let e=t("core/edit-site");if(e){if(typeof e.getDeviceType=="function")return e.getDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType();if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType()}}catch{}},E=t=>{try{let r=(typeof t=="function"?t(H):(0,tt.select)(H))?.getBreakpoint?.();if(r===et||r===nt||r===rt)return r}catch{}let e=Pt(typeof t=="function"?t:tt.select);if(e)return ae(e);if(typeof window<"u"){let n=window.__COSTERED_VIEWPORT_BP;if(n===et||n===nt||n===rt)return n}return"desktop"};var ce="desktop";function F(t,e,n={trim:!0,emptyUnsets:!0}){let r=(typeof e=="object"?e:n)||{},{trim:o=!0,emptyUnsets:s=!0,breakpoint:u}=r,c=(0,P.useSelect)(E,[]),a=u||c||ce,{updateBlockAttributes:b}=(0,P.useDispatch)("core/block-editor"),g=(0,v.useMemo)(()=>{if(typeof t=="string"){let d=t;return l=>{if(d)if(typeof l=="function"){let i=(0,P.select)("core/block-editor")?.getBlockAttributes(d)||{},y=l(i)||i;b(d,y)}else b(d,l||{})}}if(typeof t=="function"&&typeof e=="string"){let d=t,l=e;return i=>{if(!l)return;if(typeof i=="function"){let S=(0,P.select)("core/block-editor")?.getBlockAttributes(l)||{},T=i(S)||S;try{d(l,T)}catch{d(T)}return}let y=i||{};try{d(l,y)}catch{d(y)}}}if(typeof t=="function"){let d=t;return l=>{if(typeof l=="function"){let i=l({});d(i)}else d(l||{})}}return()=>{}},[t,e,b]),h=(0,v.useCallback)((d,l)=>{if(d==null)return;if(Rt.has(l)){let y=typeof d=="string"&&o?d.trim():String(d);return s&&y===""?void 0:y}let i=d;if(o&&typeof i=="string"&&(i=i.trim()),!(s&&(i===""||i=="null"||i=="undefined"))){if(Bt.has(l)){if(typeof i=="string"&&/^-?\d+(\.\d+)?$/.test(i)){let y=Number(i);return Number.isFinite(y)?y:void 0}return typeof i=="number"&&Number.isFinite(i)?i:void 0}if(typeof i=="number")return Number.isFinite(i)?i:void 0;if(typeof i=="string")return i==="null"||i==="undefined"?void 0:i;try{return String(i)}catch{return}}},[o,s]),w=(0,v.useCallback)((d,l)=>{g(i=>{let y={...i||{}};j(y),y.costered=I(y.costered);let S=y.costered[a].styles,T=h(l,d),V=T===void 0?L(S,d):Q(S,d,T);return y.costered[a]={...y.costered[a],styles:V},y})},[g,a,h]),p=(0,v.useCallback)(d=>{!d||typeof d!="object"||g(l=>{let i={...l||{}};j(i),i.costered=I(i.costered);let S=i.costered[a].styles;for(let[T,V]of Object.entries(d)){let pt=h(V,T);S=pt===void 0?L(S,T):Q(S,T,pt)}return i.costered[a]={...i.costered[a],styles:S||[]},i})},[g,a,h]),f=(0,v.useCallback)(d=>{g(l=>{let i={...l||{}};j(i),i.costered=I(i.costered);let y=i.costered[a].styles,S=L(y,d);return(y?.length||0)===S.length?l:(i.costered[a]={...i.costered[a],styles:S},i)})},[g,a]),k=(0,v.useCallback)(d=>{!Array.isArray(d)||d.length===0||g(l=>{let i={...l||{}};j(i),i.costered=I(i.costered);let S=i.costered[a]?.styles;for(let T=0;T<d.length;T++)S=L(S,d[T]);return i.costered[a]={...i.costered[a],styles:S||[]},i})},[g,a]),x=(0,v.useCallback)(d=>({set:(l,i)=>w(`${d}${l}`,i),setMany:l=>{let i={};for(let[y,S]of Object.entries(l))i[`${d}${y}`]=S;p(i)},unset:l=>f(`${d}${l}`),unsetMany:l=>k(l.map(i=>`${d}${i}`))}),[w,p,f,k]);return{set:w,setMany:p,unset:f,unsetMany:k,withPrefix:x,activeBreakpoint:a}}var Gt=m(R());function st(t){return String(t??"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function de(t){let e=String(t??"").trim();if(!e)return[];let n=0,r=0,o="",s=[];for(let u=0;u<e.length;u++){let c=e[u];if(c==="("){n++,o+=c;continue}if(c===")"){n=Math.max(0,n-1),o+=c;continue}if(c==="["){r++,o+=c;continue}if(c==="]"){r=Math.max(0,r-1),o+=c;continue}if(c===" "&&n===0&&r===0){o&&(s.push(o),o="");continue}o+=c}return o&&s.push(o),s}function le(t){let e=String(t??"").trim();if(!e)return null;let n=e.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);if(!n||n[1]===void 0||n[2]===void 0)return null;let r=Number.parseInt(n[1],10),o=n[2].trim();return!Number.isFinite(r)||r<0||o===""?null:{count:r,unit:o}}function pe(t,e=X){return t>0?`repeat(${t}, ${e})`:null}function U(t,e=X){if(!t||typeof t!="string")return{count:0,unit:e};let n=t.trim();if(!n)return{count:0,unit:e};if(/^subgrid\b/i.test(n))return{count:0,unit:e};if(n=n.replace(/\[[^\]]*]/g," ").trim(),!n)return{count:0,unit:e};let r=n.match(/^\s*repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)\s*$/i);if(r){let s=r[2];return{count:0,unit:ot(s,e)}}let o=me(n,e);return{count:o.count,unit:o.unit||e}}function me(t,e){let n=$t(t);if(n){let c=n.inner.trim(),b=W(c).length,g=ot(c,e);return{count:n.times*b,unit:g||e}}let r=W(t),o=0,s="";for(let c of r){if(/^\s*repeat\(/i.test(c)){let a=_t(c);if(a){o+=a.count,!s&&a.unitHint&&(s=a.unitHint);continue}o+=1;continue}o+=1,!s&&Y(c)&&(s=$(c)??"")}let u=s||ot(t,e);return{count:o,unit:u||e}}function $t(t){let e=t.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!e)return null;let n=parseInt(e[1],10),r=e[2];return!Number.isFinite(n)||n<0?null:{times:n,inner:r}}function _t(t){if(t.match(/^\s*repeat\(\s*auto-(fit|fill)\s*,/i))return{count:0,unitHint:""};let n=t.match(/^\s*repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!n)return null;let r=parseInt(n[1],10)||0;if(r<=0)return{count:0,unitHint:""};let o=n[2].trim(),s=W(o),u=r*s.length,c="";if(s.length===1)c=$(s[0])??"";else{let a=s.find(Y);c=$(a)??""}return{count:u,unitHint:c}}function W(t){let e=[],n=0,r="";for(let o=0;o<t.length;o++){let s=t[o];if(s==="("){n++,r+=s;continue}if(s===")"){n=Math.max(0,n-1),r+=s;continue}if(n===0&&/\s/.test(s)){r.trim()&&e.push(r.trim()),r="";continue}r+=s}return r.trim()&&e.push(r.trim()),e}function ot(t,e){if(!t)return e;let n=$t(t);if(n){let s=W(n.inner);if(s.length===1)return $(s[0])||e;let u=s.find(Y);if(u)return $(u)||e}let r=W(t);if(r.length===1)return $(r[0])||e;let o=r.find(Y);if(o)return $(o)||e;for(let s of r){let u=_t(s);if(u&&u.unitHint)return u.unitHint}return e}function Y(t){return t?!!(/^(minmax|fit-content|clamp|var)\(/i.test(t)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(t)||/^(auto|max-content|min-content)$/i.test(t)):!1}function $(t){return t?t.trim():""}function C(t){let e=Number(t);return Number.isFinite(e)&&e>=0?Math.floor(e):0}function Dt(t){let e=String(t??"").trim();if(!e)return{hasAreas:!1,cols:0,rows:0};let n=[],r=/"([^"]*)"|'([^']*)'/g,o;for(;o=r.exec(e);){let u=(o[1]??o[2]??"").trim();u&&n.push(u)}return n.length?{hasAreas:!0,cols:n.reduce((u,c)=>{let a=c.split(/\s+/).filter(Boolean).length;return Math.max(u,a)},0),rows:n.length}:{hasAreas:!1,cols:0,rows:0}}function Ot(t,e="."){if(!Array.isArray(t)||t.length===0)return"";let n=t.map(o=>(Array.isArray(o)?o:[]).map(s=>{let u=String(s??"").trim();return u===""?e:u}));return n.some(o=>o.some(s=>s!==e))?n.map(o=>`"${o.join(" ")}"`).join(" "):""}function Nt(t,e="."){let n=String(t??"").trim();if(!n)return[];let r=[],o=/"([^"]*)"|'([^']*)'/g,s;for(;s=o.exec(n);){let u=(s[1]??s[2]??"").trim(),c=u.length?u.split(/\s+/g).map(a=>a&&a!==e?a:e):[];r.push(c)}return r}function it(t,e,n,r){let o=C(e),s=C(n);if(o===0||s===0)return[];let u=Array.isArray(t)?t:[],c=[];for(let a=0;a<s;a++){let b=Array.isArray(u[a])?u[a]:[],g=Array.from({length:o},(h,w)=>{let p=b[w];return p===void 0?r:p});c.push(g)}return c}function ut(t){let e=String(t??"").trim();if(!e||/^subgrid\b/i.test(e))return 0;let n=e.replace(/\[[^\]]*\]/g," ").trim();return n=n.replace(/repeat\(\s*(\d+)\s*,\s*([^)]+)\)/gi,(r,o,s)=>Array.from({length:parseInt(o,10)||0},()=>"X").join(" ")),n=n.replace(/\s+/g," ").trim(),n?n.split(" ").filter(Boolean).length:0}function fe(t){let e=le(t);if(!e)return null;let n=st(pe(e.count,e.unit));return{mode:"simple",template:t?String(t):null,normalised:n,simple:{count:e.count,unit:e.unit}}}function ge(t){let e=de(t);if(!e.length)return null;let n=st(e.join(" "));return{mode:"tracks",template:t?String(t):null,normalised:n,tracks:e}}var ye=[fe,ge];function at(t){let e=t??"";for(let n of ye){let r=n(e);if(r)return r}return{mode:"raw",template:t?String(t):null,normalised:st(t??"")}}var J=m(R());var In=Number.MAX_SAFE_INTEGER;var Se=m(R());var ct=m(B()),jt=m(D()),dt=m(R());function lt(t){let e=(0,ct.useSelect)(s=>t?s(jt.store).getBlock(t)?.attributes??void 0:void 0,[t]),n=(0,ct.useSelect)(E,[]),r=(0,dt.useMemo)(()=>e&&n?N(e,n):void 0,[e,n]);if(!r)return;let o=s=>String(r.$get(s)??"");return(0,dt.useMemo)(()=>{let s=o("gridTemplateColumns"),u=o("gridTemplateRows"),c=o("gridTemplateAreas"),a=at(s),b=at(u),g=ut(s),h=ut(u),w={...a,count:g},p={...b,count:h},f=Dt(c),k={template:c||"",hasAreas:f.hasAreas,cols:f.cols,rows:f.rows};return{columns:w,rows:p,areas:k,activePane:{columns:w.mode,rows:p.mode}}},[r.$get,r.costered,n])}var we=m(R()),xe=m(B());var Ae=m(B()),he=m(R());var Ce=m(B()),Te=m(D());var Re=m(B()),Be=m(D()),Me=m(R());var qn=Object.freeze({});var Kt=m(B()),ve=m(Ut()),Ie=m(R());function Lt(t){let{set:e,unset:n}=F(t),r=(0,Ht.useSelect)(p=>p(Ft.store)?.getBlock?.(t)?.innerBlocks?.length||0,[t]),o=lt(t),s=o?.columns?.template??"",u=o?.rows?.template??"",c=o?.areas?.template??"",a=(0,_.useMemo)(()=>{if(s){let f=U(s),k=C(f?.count??f);if(k>0)return k}let p=C(o?.rows?.count)||(()=>{if(!u)return 0;let f=U(u);return C(f?.count??f)})();return p>0&&r>0?Math.ceil(r/p):0},[s,u,o?.rows?.count,r]),b=(0,_.useMemo)(()=>{let p=C(o?.rows?.count);if(p>0)return p;if(u){let k=U(u),x=C(k?.count??k);if(x>0)return x}let f=C(a);return f>0&&r>0?Math.ceil(r/f):0},[u,o?.rows?.count,a,r]),g=(0,_.useCallback)(p=>{let f=Ot(p,".");f?e("gridTemplateAreas",f):n("gridTemplateAreas")},[e,n]),h=(0,_.useCallback)(()=>{n("gridTemplateAreas")},[n]),w=(0,_.useCallback)((p=".")=>{let f=Nt(c,p),k=C(f[0]?.length)||C(a),x=C(f.length)||C(b);return k===0&&x>0&&r>0?k=Math.ceil(r/x):x===0&&k>0&&r>0&&(x=Math.ceil(r/k)),k===0&&(k=1),x===0&&(x=1),it(f.map(l=>l.map(i=>String(i||p))),k,x,p)},[c,a,b,r]);return{areasTemplate:c,trackColumnCount:a,trackRowCount:b,applyMatrixToStore:g,clearAreasInStore:h,seedFromStore:w}}})();
