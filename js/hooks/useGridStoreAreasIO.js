(()=>{var $t=Object.create;var rt=Object.defineProperty;var Bt=Object.getOwnPropertyDescriptor;var Pt=Object.getOwnPropertyNames;var Ot=Object.getPrototypeOf,Gt=Object.prototype.hasOwnProperty;var j=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Nt=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Pt(t))!Gt.call(e,n)&&n!==r&&rt(e,n,{get:()=>t[n],enumerable:!(o=Bt(t,n))||o.enumerable});return e};var f=(e,t,r)=>(r=e!=null?$t(Ot(e)):{},Nt(t||!e||!e.__esModule?rt(r,"default",{value:e,enumerable:!0}):r,e));var E=j((Se,nt)=>{nt.exports=wp.element});var A=j((he,ot)=>{ot.exports=wp.data});var _=j((be,st)=>{st.exports=wp.blockEditor});var _t=j((Gr,It)=>{It.exports=wp.preferences});var $=f(E()),Mt=f(A()),vt=f(_());var Ft=f(A()),Yt=f(_()),St=f(E());var h={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var it=e=>Array.isArray(e)?e:[],jt=e=>new Set(it(e));function R(e){return Object.fromEntries(Object.entries(h.attributes).filter(([t,r])=>r.group===e))}var ct=R("display"),ut=R("dimension"),at=R("margin"),pt=R("padding"),lt=R("flex"),dt=R("flex-item"),mt=R("grid"),F=R("grid-item"),ft=R("position"),gt=R("shared"),we={...ct,...ut,...at,...pt,...lt,...dt,...mt,...F,...ft,...gt},yt=new Set([...Object.keys(F)]),Ee=it(h?.collections?.editorStyles),xt=jt(h?.collections?.unitless),Y=h?.settings?.gridUnit||"1fr",Ae=!!h?.settings?.appendImportantToMirroredStyles,Re=h?.settings?.styleTagId||"costered-blocks-style-mirror",W=h?.settings?.reduxStoreKey||"costered/ui",Ie=h?.settings?.breakpoints?.mobile??782,_e=h?.settings?.breakpoints?.tablet??1024,Ce=h?.settings?.breakpoints?.desktop??1440,Me=h?.collections?.clearSets?.gridAreas,ve=h?.collections?.clearSets?.gridColumns,De=h?.collections?.clearSets?.gridRows;var Ut=new Set([...Object.keys(ct),...Object.keys(ut),...Object.keys(pt),...Object.keys(at),...Object.keys(lt),...Object.keys(dt),...Object.keys(mt),...Object.keys(F),...Object.keys(ft),...Object.keys(gt)]),$e=Object.fromEntries(Object.entries(h.attributes).map(([e,t])=>[e,t.css]));var C=e=>{let t={desktop:{styles:{}},tablet:{styles:{}},mobile:{styles:{}},...e||{}};return t.desktop={styles:{},...t.desktop||{}},t.tablet={styles:{},...t.tablet||{}},t.mobile={styles:{},...t.mobile||{}},t.desktop.styles={...t.desktop.styles||{}},t.tablet.styles={...t.tablet.styles||{}},t.mobile.styles={...t.mobile.styles||{}},t},z=(e,t,r)=>{r==null||r===""?Object.prototype.hasOwnProperty.call(e,t)&&delete e[t]:e[t]=r},X=e=>e==null||e===""||e==="null"||e==="undefined";var Ht="desktop",Kt=Object.freeze({});function P(e,t){let r=e||Kt,o={...r},n=C(r.costered),u=m=>{switch(m){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},c=(m,g=void 0)=>{let T=g&&Object.prototype.hasOwnProperty.call(g,"cascade")?!!g.cascade:!0,b=g&&Object.prototype.hasOwnProperty.call(g,"raw")?!!g.raw:!T,x=t||Ht;if(b){let S=n?.[x]?.styles?.[m];return X(S)?void 0:S}let y=u(x);for(let S of y){let a=n?.[S]?.styles?.[m];if(!X(a))return a}};return Object.defineProperties(o,{$get:{value:c,enumerable:!1},$getCascade:{value:m=>c(m,{cascade:!0}),enumerable:!1},$getMany:{value:(m,g)=>{let T={};for(let b of m)T[b]=c(b,g);return T},enumerable:!1},$bp:{value:t,enumerable:!1}}),o}var I=f(E()),v=f(A());var Wt=e=>typeof e=="string"&&e.trim().length>0,zt=()=>{if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")return crypto.randomUUID();let e=Date.now().toString(36),t=Math.random().toString(36).slice(2,10);return`${e}-${t}`},O=e=>{e&&!Wt(e.costeredId)&&(e.costeredId=zt())};var G=f(A());var Xt=e=>{let t=String(e||"").toLowerCase();return t==="mobile"||t==="phone"||t==="tablet"?"mobile":"desktop"},Vt=e=>{try{let t=e("core/edit-post");if(t){if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType()}}catch{}try{let t=e("core/edit-site");if(t){if(typeof t.getDeviceType=="function")return t.getDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType();if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType()}}catch{}},M=e=>{try{let r=(0,G.select)(W);if(r&&typeof r.getBreakpoint=="function"){let o=r.getBreakpoint();if(o)return o}}catch{}let t=Vt(e);if(t)return Xt(t);if(typeof window<"u"&&typeof window.__COSTERED_VIEWPORT_BP=="string")return window.__COSTERED_VIEWPORT_BP||"desktop";try{if(window.COSTERED_DEBUG){let r=(0,G.select)(STORE_KEY),o=r&&typeof r.getBreakpoint=="function"?r.getBreakpoint():null,n=(0,G.select)("core/edit-post"),u=n&&(typeof n.getPreviewDeviceType=="function"&&n.getPreviewDeviceType()||typeof n.__experimentalGetPreviewDeviceType=="function"&&n.__experimentalGetPreviewDeviceType()),c=(0,G.select)("core/edit-site"),i=c&&(typeof c.getDeviceType=="function"&&c.getDeviceType()||typeof c.__experimentalGetPreviewDeviceType=="function"&&c.__experimentalGetPreviewDeviceType()||typeof c.getPreviewDeviceType=="function"&&c.getPreviewDeviceType())}}catch{}return"desktop"};var qt="desktop";function U(e,t,r={trim:!0,emptyUnsets:!0,breakpoint:void 0}){let{trim:o=!0,emptyUnsets:n=!0,breakpoint:u}=r,c=(0,v.useSelect)(M,[]),i=u||c||qt,{updateBlockAttributes:p}=(0,v.useDispatch)("core/block-editor"),m=(0,I.useMemo)(()=>{if(typeof e=="string"&&!t){let a=e;return d=>{if(a)if(typeof d=="function"){let s=(0,v.select)("core/block-editor").getBlockAttributes(a)||{},l=d(s)||s;p(a,l)}else p(a,d||{})}}if(typeof e=="function"&&typeof t=="string"){let a=e,d=t;return s=>{if(d)if(typeof s=="function"){let l=(0,v.select)("core/block-editor").getBlockAttributes(d)||{},w=s(l)||l;try{a(d,w)}catch{a(w)}}else try{a(d,s||{})}catch{a(s||{})}}}return typeof e=="function"?e:()=>{}},[e,t,p]),g=(0,I.useCallback)((a,d)=>{if(a==null)return;if(yt.has(d)){let l=typeof a=="string"&&o?a.trim():String(a);return n&&l===""?void 0:l}let s=a;if(o&&typeof s=="string"&&(s=s.trim()),!(n&&(s===""||s=="null"||s=="undefined"))){if(xt.has(d)){if(typeof s=="string"&&/^-?\d+(\.\d+)?$/.test(s)){let l=Number(s);return Number.isFinite(l)?l:void 0}return typeof s=="number"&&Number.isFinite(s)?s:void 0}if(typeof s=="number")return Number.isFinite(s)?s:void 0;if(typeof s=="string")return s==="null"||s==="undefined"?void 0:s;try{return String(s)}catch{return}}},[o,n]),T=(0,I.useCallback)((a,d)=>{m(s=>{let l={...s||{}};O(l),l.costered=C(l.costered);let w={...l.costered[i].styles},B=g(d,a);return z(w,a,B),l.costered[i]={...l.costered[i],styles:w},l})},[m,i,g]),b=(0,I.useCallback)(a=>{!a||typeof a!="object"||m(d=>{let s={...d||{}};O(s),s.costered=C(s.costered);let l={...s.costered[i].styles};for(let[w,B]of Object.entries(a)){let Dt=g(B,w);z(l,w,Dt)}return s.costered[i]={...s.costered[i],styles:l},s})},[m,i,g]),x=(0,I.useCallback)(a=>{m(d=>{let s={...d||{}};O(s),s.costered=C(s.costered);let l={...s.costered[i].styles};return a in l?(delete l[a],s.costered[i]={...s.costered[i],styles:l},s):d})},[m,i]),y=(0,I.useCallback)(a=>{!Array.isArray(a)||a.length===0||m(d=>{let s={...d||{}};O(s),s.costered=C(s.costered);let l={...s.costered[i].styles},w=!1;for(let B of a)B in l&&(delete l[B],w=!0);return w?(s.costered[i]={...s.costered[i],styles:l},s):d})},[m,i]),S=(0,I.useCallback)(a=>({set:(d,s)=>T(`${a}${d}`,s),setMany:d=>{let s={};for(let[l,w]of Object.entries(d))s[`${a}${l}`]=w;b(s)},unset:d=>x(`${a}${d}`),unsetMany:d=>y(d.map(s=>`${a}${s}`))}),[T,b,x,y]);return{set:T,setMany:b,unset:x,unsetMany:y,withPrefix:S,activeBreakpoint:i}}var Et=f(E());function q(e){return String(e||"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function Zt(e){let t=String(e||"").trim();if(!t)return[];let r=0,o=0,n="",u=[];for(let c=0;c<t.length;c++){let i=t[c];if(i==="("){r++,n+=i;continue}if(i===")"){r=Math.max(0,r-1),n+=i;continue}if(i==="["){o++,n+=i;continue}if(i==="]"){o=Math.max(0,o-1),n+=i;continue}if(i===" "&&r===0&&o===0){n&&(u.push(n),n="");continue}n+=i}return n&&u.push(n),u}function Jt(e){if(!e)return null;let t=e.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);return t?{count:parseInt(t[1],10),unit:t[2].trim()}:null}function Qt(e,t=Y){return e>0?`repeat(${e}, ${t})`:null}function L(e,t=Y){if(!e||typeof e!="string")return{count:0,unit:t};let r=e.trim();if(!r)return{count:0,unit:t};if(/^subgrid\b/i.test(r))return{count:0,unit:t};if(r=r.replace(/\[[^\]]*]/g," ").trim(),!r)return{count:0,unit:t};let o=r.match(/^\s*repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)\s*$/i);if(o){let c=o[2];return{count:0,unit:V(c,t)}}let{count:n,unit:u}=te(r,t);return{count:n,unit:u||t}}function te(e,t){let r=ht(e);if(r){let i=r.inner.trim(),m=N(i).length,g=V(i,t);return{count:r.times*m,unit:g||t}}let o=N(e),n=0,u="";for(let i of o){if(/^\s*repeat\(/i.test(i)){let p=bt(i);if(p){n+=p.count,!u&&p.unitHint&&(u=p.unitHint);continue}n+=1;continue}n+=1,!u&&H(i)&&(u=D(i)||"")}let c=u||V(e,t);return{count:n,unit:c||t}}function ht(e){let t=e.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!t)return null;let r=parseInt(t[1],10),o=t[2];return!Number.isFinite(r)||r<0?null:{times:r,inner:o}}function bt(e){if(e.match(/^\s*repeat\(\s*auto-(fit|fill)\s*,/i))return{count:0,unitHint:""};let r=e.match(/^\s*repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!r)return null;let o=parseInt(r[1],10)||0;if(o<=0)return{count:0,unitHint:""};let n=r[2].trim(),u=N(n),c=o*u.length,i="";if(u.length===1)i=D(u[0])||"";else{let p=u.find(H);i=D(p)||""}return{count:c,unitHint:i}}function N(e){let t=[],r=0,o="";for(let n=0;n<e.length;n++){let u=e[n];if(u==="("){r++,o+=u;continue}if(u===")"){r=Math.max(0,r-1),o+=u;continue}if(r===0&&/\s/.test(u)){o.trim()&&t.push(o.trim()),o="";continue}o+=u}return o.trim()&&t.push(o.trim()),t}function V(e,t){if(!e)return t;let r=ht(e);if(r){let u=N(r.inner);if(u.length===1)return D(u[0])||t;let c=u.find(H);if(c)return D(c)||t}let o=N(e);if(o.length===1)return D(o[0])||t;let n=o.find(H);if(n)return D(n)||t;for(let u of o){let c=bt(u);if(c&&c.unitHint)return c.unitHint}return t}function H(e){return e?!!(/^(minmax|fit-content|clamp|var)\(/i.test(e)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(e)||/^(auto|max-content|min-content)$/i.test(e)):!1}function D(e){return e?e.trim():""}function k(e){let t=Number(e);return Number.isFinite(t)&&t>=0?Math.floor(t):0}function kt(e){let t=String(e||"").trim();if(!t)return{hasAreas:!1,cols:0,rows:0};let r=[],o=/"([^"]*)"|'([^']*)'/g,n;for(;n=o.exec(t);){let c=(n[1]??n[2]??"").trim();c&&r.push(c)}return r.length?{hasAreas:!0,cols:r.reduce((c,i)=>{let p=i.split(/\s+/).filter(Boolean).length;return Math.max(c,p)},0),rows:r.length}:{hasAreas:!1,cols:0,rows:0}}function Tt(e,t="."){if(!Array.isArray(e)||e.length===0)return"";let r=e.map(n=>(Array.isArray(n)?n:[]).map(u=>{let c=String(u??"").trim();return c===""?t:c}));return r.some(n=>n.some(u=>u!==t))?r.map(n=>`"${n.join(" ")}"`).join(" "):""}function wt(e,t="."){let r=String(e||"").trim();if(!r)return[];let o=[],n=/"([^"]*)"|'([^']*)'/g,u;for(;u=n.exec(r);){let c=(u[1]??u[2]??"").trim(),i=c.length?c.split(/\s+/g).map(p=>p&&p!==t?p:t):[];o.push(i)}return o}function Z(e,t,r,o="."){let n=k(t),u=k(r);if(n===0||u===0)return[];let c=Array.isArray(e)?e:[],i=[];for(let p=0;p<u;p++){let m=Array.isArray(c[p])?c[p]:[],g=Array.from({length:n},(T,b)=>{let x=m[b];return x===void 0?o:x});i.push(g)}return i}function ee(e){let t=Jt(e);if(!t)return null;let r=q(Qt(t.count,t.unit));return{mode:"simple",template:e||null,normalised:r,simple:{count:t.count,unit:t.unit}}}function re(e){let t=Zt(e);if(!t.length)return null;let r=q(t.join(" "));return{mode:"tracks",template:e||null,normalised:r,tracks:t}}var ne=[ee,re];function J(e){let t=e||"";for(let r of ne){let o=r(t);if(o)return o}return{mode:"raw",template:e||null,normalised:q(e||"")}}var K=f(E());var fr=Number.MAX_SAFE_INTEGER;var ie=f(E());var Q=f(A()),Rt=f(_()),tt=f(E());function et(e){let t=(0,Q.useSelect)(c=>e?c(Rt.store).getBlock(e)?.attributes??{}:{},[e]),r=(0,Q.useSelect)(M,[]),o=(0,tt.useMemo)(()=>P(t,r),[t,r]),n=(c,i={})=>o.$get(c,i);return(0,tt.useMemo)(()=>{let c=n("gridTemplateColumns"),i=n("gridTemplateRows"),p=n("gridTemplateAreas"),m=J(c),g=J(i),{template:T,...b}=kt(p,m.count,g.count);return{columns:m,rows:g,areas:{template:T,...b},activePane:{columns:m.mode,rows:g.mode}}},[r,o?.costered,o?.$get])}var ce=f(E()),ue=f(A()),Tr=f(_());var ae=f(A()),pe=f(E());var le=f(A()),de=f(_());var me=f(A()),fe=f(_()),ge=f(E());var Pr=Object.freeze({});var Ct=f(A()),ye=f(_t());function At(e){let{set:t,unset:r}=U(e),o=(0,Mt.useSelect)(x=>x(vt.store).getBlock(e)?.innerBlocks?.length||0,[e]),n=et(e),u=n?.columns?.template??null,c=n?.rows?.template??null,i=n?.areas?.template??null,p=(0,$.useMemo)(()=>{if(u){let y=L(u),S=k(y?.count??y);if(S>0)return S}let x=k(n?.rows?.count)||(()=>{if(!c)return 0;let y=L(c);return k(y?.count??y)})();return x>0&&o>0?Math.ceil(o/x):0},[u]),m=(0,$.useMemo)(()=>{let x=k(n?.rows?.count);if(x>0)return x;if(c){let S=L(c),a=k(S?.count??S);if(a>0)return a}let y=k(p);return y>0&&o>0?Math.ceil(o/y):0},[c,n?.rows?.count]),g=(0,$.useCallback)(x=>{let y=Tt(x,".");console.log("[areas write]",y),y?t("gridTemplateAreas",y):r("gridTemplateAreas")},[t,r]),T=(0,$.useCallback)(()=>{r("gridTemplateAreas")},[r]),b=(0,$.useCallback)((x=".")=>{let y=wt(i,x),S=k(y[0]?.length)||k(p),a=k(y.length)||k(m);return S===0&&a>0&&o>0?S=Math.ceil(o/a):a===0&&S>0&&o>0&&(a=Math.ceil(o/S)),S===0&&(S=1),a===0&&(a=1),Z(y,S,a,x)},[i,p,m,o]);return{areasTemplate:i,trackColumnCount:p,trackRowCount:m,applyMatrixToStore:g,clearAreasInStore:T,seedFromStore:b}}})();
