(()=>{var Ut=Object.create;var dt=Object.defineProperty;var Kt=Object.getOwnPropertyDescriptor;var Ft=Object.getOwnPropertyNames;var Ht=Object.getPrototypeOf,Yt=Object.prototype.hasOwnProperty;var H=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Jt=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Ft(e))!Yt.call(t,o)&&o!==n&&dt(t,o,{get:()=>e[o],enumerable:!(r=Kt(e,o))||r.enumerable});return t};var m=(t,e,n)=>(n=t!=null?Ut(Ht(t)):{},Jt(e||!t||!t.__esModule?dt(n,"default",{value:t,enumerable:!0}):n,t));var T=H((Me,lt)=>{lt.exports=wp.element});var M=H((Re,mt)=>{mt.exports=wp.data});var D=H((Ie,ft)=>{ft.exports=wp.blockEditor});var Gt=H((Jn,Nt)=>{Nt.exports=wp.preferences});var _=m(T()),Lt=m(M()),Wt=m(D());var Qt=m(M()),te=m(D()),Mt=m(T());var w={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var j=t=>Array.isArray(t)?t:[],zt=t=>new Set(j(t));function I(t){let e=w.attributes||{};return Object.fromEntries(Object.entries(e).filter(([,n])=>n.group===t))}var gt=I("display"),kt=I("dimension"),yt=I("margin"),bt=I("padding"),St=I("flex"),xt=I("flex-item"),At=I("grid"),X=I("grid-item"),wt=I("position"),ht=I("shared"),Pe={...gt,...kt,...yt,...bt,...St,...xt,...At,...X,...wt,...ht},Ct=new Set([...Object.keys(X)]),Oe=j(w?.collections?.editorStyles),Bt=zt(w?.collections?.unitless),q=w?.settings?.gridUnit||"1fr",$e=!!w?.settings?.appendImportantToMirroredStyles,_e=w?.settings?.styleTagId||"costered-blocks-style-mirror",Y=w?.settings?.reduxStoreKey||"costered/ui",De=w?.settings?.breakpoints?.mobile??782,Ne=w?.settings?.breakpoints?.tablet??1024,Ge=w?.settings?.breakpoints?.desktop??1440,je=j(w?.collections?.clearSets?.gridAreas),Le=j(w?.collections?.clearSets?.gridColumns),We=j(w?.collections?.clearSets?.gridRows);var Xt=new Set([...Object.keys(gt),...Object.keys(kt),...Object.keys(bt),...Object.keys(yt),...Object.keys(St),...Object.keys(xt),...Object.keys(At),...Object.keys(X),...Object.keys(wt),...Object.keys(ht)]),Ue=Object.fromEntries(Object.entries(w.attributes).map(([t,e])=>[t,e.css]));var E=t=>{let e=o=>{let s=o?.styles;return s&&typeof s=="object"&&!Array.isArray(s)?{...o,styles:{...s}}:{...o||{},styles:{}}},n=t&&typeof t=="object"?t:{},r=!!n.desktop||!!n.tablet||!!n.mobile;return{desktop:e(n.desktop),tablet:e(n.tablet),mobile:e(n.mobile)}};var Z=t=>t==null||t===""||t==="null"||t==="undefined";var qt="desktop",Zt=Object.freeze({});function Tt(t,e){let n=t?t[e]:void 0;return typeof n=="string"||typeof n=="number"?n:void 0}function N(t,e){let n=t||Zt,r={...n},o=E(n.costered),s=b=>{switch(b){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},u=(b,g={})=>{let h=g&&Object.prototype.hasOwnProperty.call(g,"cascade")?!!g.cascade:!0,x=g&&Object.prototype.hasOwnProperty.call(g,"raw")?!!g.raw:!h,l=e||qt;if(x){let k=Tt(o?.[l]?.styles||{},b);return Z(k)?void 0:k}let f=s(l);for(let k of f){let A=Tt(o?.[k]?.styles||{},b);if(!Z(A))return A}};return Object.defineProperties(r,{$get:{value:u,enumerable:!1},$getCascade:{value:b=>u(b,{cascade:!0}),enumerable:!1},$getMany:{value:(b,g)=>{let h={};for(let x=0;x<b.length;x++){let l=b[x];h[l]=u(l,g)}return h},enumerable:!1},$bp:{value:e,enumerable:!1}}),r}var v=m(T()),O=m(M());function L(t,e){let r=t?.costered?.[e]?.styles;return r&&typeof r=="object"&&!Array.isArray(r)?{...r}:{}}function W(t,e,n){if(!n||typeof n!="object"||Array.isArray(n))throw new Error("withBreakpointStyles expects a plain object of camelCase CSS properties \u2192 string values.");let r=t.costered??{},s={...r[e]??{styles:{}},styles:{...n}},u={...r,[e]:s};return{...t,costered:u}}function ee(t){return typeof t=="string"&&t.trim().length>0}function ne(){let t=globalThis?.crypto?.randomUUID;if(typeof t=="function")return t.call(globalThis.crypto);let e=Date.now().toString(36),n=Math.random().toString(36).slice(2,10);return`${e}-${n}`}function U(t){t&&(ee(t.costeredId)||(t.costeredId=ne()))}var Q=m(M());var tt="desktop",et="tablet",nt="mobile",re=t=>{let e=String(t??"").toLowerCase();return e==="tablet"||e==="medium"?et:e==="mobile"||e==="phone"?nt:tt},Rt=t=>{try{let n=t?.("core/editor")?.getDeviceType?.();if(n)return n}catch{}try{let e=t("core/edit-post");if(e){if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType()}}catch{}try{let e=t("core/edit-site");if(e){if(typeof e.getDeviceType=="function")return e.getDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType();if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType()}}catch{}},P=t=>{try{let r=(typeof t=="function"?t(Y):(0,Q.select)(Y))?.getBreakpoint?.();if(r===tt||r===et||r===nt)return r}catch{}let e=Rt(typeof t=="function"?t:Q.select);if(e)return re(e);if(typeof window<"u"){let n=window.__COSTERED_VIEWPORT_BP;if(n===tt||n===et||n===nt)return n}return"desktop"};var oe="desktop";function J(t,e,n={trim:!0,emptyUnsets:!0}){let r=(typeof e=="object"?e:n)||{},{trim:o=!0,emptyUnsets:s=!0,breakpoint:u}=r,p=(0,O.useSelect)(P,[]),c=u||p||oe,{updateBlockAttributes:b}=(0,O.useDispatch)("core/block-editor"),g=(0,v.useMemo)(()=>{if(typeof t=="string"){let a=t;return d=>{if(a)if(typeof d=="function"){let i=(0,O.select)("core/block-editor")?.getBlockAttributes(a)||{},y=d(i)||i;b(a,y)}else b(a,d||{})}}if(typeof t=="function"&&typeof e=="string"){let a=t,d=e;return i=>{if(!d)return;if(typeof i=="function"){let S=(0,O.select)("core/block-editor")?.getBlockAttributes(d)||{},B=i(S)||S;try{a(d,B)}catch{a(B)}return}let y=i||{};try{a(d,y)}catch{a(y)}}}if(typeof t=="function"){let a=t;return d=>{if(typeof d=="function"){let i=d({});a(i)}else a(d||{})}}return()=>{}},[t,e,b]),h=(0,v.useCallback)((a,d)=>{if(a==null)return;if(Ct.has(d)){let y=typeof a=="string"&&o?a.trim():String(a);return s&&y===""?void 0:y}let i=a;if(o&&typeof i=="string"&&(i=i.trim()),!(s&&(i===""||i=="null"||i=="undefined"))){if(Bt.has(d)){if(typeof i=="string"&&/^-?\d+(\.\d+)?$/.test(i)){let y=Number(i);return Number.isFinite(y)?y:void 0}return typeof i=="number"&&Number.isFinite(i)?i:void 0}if(typeof i=="number")return Number.isFinite(i)?i:void 0;if(typeof i=="string")return i==="null"||i==="undefined"?void 0:i;try{return String(i)}catch{return}}},[o,s]),x=(0,v.useCallback)((a,d)=>{g(i=>{let y={...i||{}};U(y),y.costered=E(y.costered);let S=h(d,a),R={...L(y,c)};if(S===void 0)if(Object.prototype.hasOwnProperty.call(R,a))delete R[a];else return i;else R[a]=String(S);return W(y,c,R)})},[g,c,h]),l=(0,v.useCallback)(a=>{!a||typeof a!="object"||g(d=>{let i={...d||{}};U(i),i.costered=E(i.costered);let S={...L(i,c)};for(let[B,R]of Object.entries(a)){let G=h(R,B);G===void 0?Object.prototype.hasOwnProperty.call(S,B)&&delete S[B]:S[B]=String(G)}return W(i,c,S)})},[g,c,h]),f=(0,v.useCallback)(a=>{g(d=>{let i={...d||{}};U(i),i.costered=E(i.costered);let y=L(i,c);if(!Object.prototype.hasOwnProperty.call(y,a))return d;let S={...y};return delete S[a],W(i,c,S)})},[g,c]),k=(0,v.useCallback)(a=>{!Array.isArray(a)||a.length===0||g(d=>{let i={...d||{}};U(i),i.costered=E(i.costered);let y=L(i,c),S=!1,B={...y};for(let R=0;R<a.length;R++){let G=a[R];Object.prototype.hasOwnProperty.call(B,G)&&(delete B[G],S=!0)}return S?W(i,c,B):d})},[g,c]),A=(0,v.useCallback)(a=>({set:(d,i)=>x(`${a}${d}`,i),setMany:d=>{let i={};for(let[y,S]of Object.entries(d))i[`${a}${y}`]=S;l(i)},unset:d=>f(`${a}${d}`),unsetMany:d=>k(d.map(i=>`${a}${i}`))}),[x,l,f,k]);return{set:x,setMany:l,unset:f,unsetMany:k,withPrefix:A,activeBreakpoint:c}}var $t=m(T());function ot(t){return String(t??"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function se(t){let e=String(t??"").trim();if(!e)return[];let n=0,r=0,o="",s=[];for(let u=0;u<e.length;u++){let p=e[u];if(p==="("){n++,o+=p;continue}if(p===")"){n=Math.max(0,n-1),o+=p;continue}if(p==="["){r++,o+=p;continue}if(p==="]"){r=Math.max(0,r-1),o+=p;continue}if(p===" "&&n===0&&r===0){o&&(s.push(o),o="");continue}o+=p}return o&&s.push(o),s}function ie(t){let e=String(t??"").trim();if(!e)return null;let n=e.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);if(!n||n[1]===void 0||n[2]===void 0)return null;let r=Number.parseInt(n[1],10),o=n[2].trim();return!Number.isFinite(r)||r<0||o===""?null:{count:r,unit:o}}function ue(t,e=q){return t>0?`repeat(${t}, ${e})`:null}function F(t,e=q){if(!t||typeof t!="string")return{count:0,unit:e};let n=t.trim();if(!n)return{count:0,unit:e};if(/^subgrid\b/i.test(n))return{count:0,unit:e};if(n=n.replace(/\[[^\]]*]/g," ").trim(),!n)return{count:0,unit:e};let r=n.match(/^\s*repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)\s*$/i);if(r){let s=r[2];return{count:0,unit:rt(s,e)}}let o=ae(n,e);return{count:o.count,unit:o.unit||e}}function ae(t,e){let n=It(t);if(n){let p=n.inner.trim(),b=K(p).length,g=rt(p,e);return{count:n.times*b,unit:g||e}}let r=K(t),o=0,s="";for(let p of r){if(/^\s*repeat\(/i.test(p)){let c=vt(p);if(c){o+=c.count,!s&&c.unitHint&&(s=c.unitHint);continue}o+=1;continue}o+=1,!s&&V(p)&&(s=$(p)??"")}let u=s||rt(t,e);return{count:o,unit:u||e}}function It(t){let e=t.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!e)return null;let n=parseInt(e[1],10),r=e[2];return!Number.isFinite(n)||n<0?null:{times:n,inner:r}}function vt(t){if(t.match(/^\s*repeat\(\s*auto-(fit|fill)\s*,/i))return{count:0,unitHint:""};let n=t.match(/^\s*repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!n)return null;let r=parseInt(n[1],10)||0;if(r<=0)return{count:0,unitHint:""};let o=n[2].trim(),s=K(o),u=r*s.length,p="";if(s.length===1)p=$(s[0])??"";else{let c=s.find(V);p=$(c)??""}return{count:u,unitHint:p}}function K(t){let e=[],n=0,r="";for(let o=0;o<t.length;o++){let s=t[o];if(s==="("){n++,r+=s;continue}if(s===")"){n=Math.max(0,n-1),r+=s;continue}if(n===0&&/\s/.test(s)){r.trim()&&e.push(r.trim()),r="";continue}r+=s}return r.trim()&&e.push(r.trim()),e}function rt(t,e){if(!t)return e;let n=It(t);if(n){let s=K(n.inner);if(s.length===1)return $(s[0])||e;let u=s.find(V);if(u)return $(u)||e}let r=K(t);if(r.length===1)return $(r[0])||e;let o=r.find(V);if(o)return $(o)||e;for(let s of r){let u=vt(s);if(u&&u.unitHint)return u.unitHint}return e}function V(t){return t?!!(/^(minmax|fit-content|clamp|var)\(/i.test(t)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(t)||/^(auto|max-content|min-content)$/i.test(t)):!1}function $(t){return t?t.trim():""}function C(t){let e=Number(t);return Number.isFinite(e)&&e>=0?Math.floor(e):0}function Et(t){let e=String(t??"").trim();if(!e)return{hasAreas:!1,cols:0,rows:0};let n=[],r=/"([^"]*)"|'([^']*)'/g,o;for(;o=r.exec(e);){let u=(o[1]??o[2]??"").trim();u&&n.push(u)}return n.length?{hasAreas:!0,cols:n.reduce((u,p)=>{let c=p.split(/\s+/).filter(Boolean).length;return Math.max(u,c)},0),rows:n.length}:{hasAreas:!1,cols:0,rows:0}}function Pt(t,e="."){if(!Array.isArray(t)||t.length===0)return"";let n=t.map(o=>(Array.isArray(o)?o:[]).map(s=>{let u=String(s??"").trim();return u===""?e:u}));return n.some(o=>o.some(s=>s!==e))?n.map(o=>`"${o.join(" ")}"`).join(" "):""}function Ot(t,e="."){let n=String(t??"").trim();if(!n)return[];let r=[],o=/"([^"]*)"|'([^']*)'/g,s;for(;s=o.exec(n);){let u=(s[1]??s[2]??"").trim(),p=u.length?u.split(/\s+/g).map(c=>c&&c!==e?c:e):[];r.push(p)}return r}function st(t,e,n,r){let o=C(e),s=C(n);if(o===0||s===0)return[];let u=Array.isArray(t)?t:[],p=[];for(let c=0;c<s;c++){let b=Array.isArray(u[c])?u[c]:[],g=Array.from({length:o},(h,x)=>{let l=b[x];return l===void 0?r:l});p.push(g)}return p}function it(t){let e=String(t??"").trim();if(!e||/^subgrid\b/i.test(e))return 0;let n=e.replace(/\[[^\]]*\]/g," ").trim();return n=n.replace(/repeat\(\s*(\d+)\s*,\s*([^)]+)\)/gi,(r,o,s)=>Array.from({length:parseInt(o,10)||0},()=>"X").join(" ")),n=n.replace(/\s+/g," ").trim(),n?n.split(" ").filter(Boolean).length:0}function ce(t){let e=ie(t);if(!e)return null;let n=ot(ue(e.count,e.unit));return{mode:"simple",template:t?String(t):null,normalised:n,simple:{count:e.count,unit:e.unit}}}function pe(t){let e=se(t);if(!e.length)return null;let n=ot(e.join(" "));return{mode:"tracks",template:t?String(t):null,normalised:n,tracks:e}}var de=[ce,pe];function ut(t){let e=t??"";for(let n of de){let r=n(e);if(r)return r}return{mode:"raw",template:t?String(t):null,normalised:ot(t??"")}}var z=m(T());var Cn=Number.MAX_SAFE_INTEGER;var fe=m(T());var at=m(M()),Dt=m(D()),ct=m(T());function pt(t){let e=(0,at.useSelect)(s=>t?s(Dt.store).getBlock(t)?.attributes??void 0:void 0,[t]),n=(0,at.useSelect)(P,[]),r=(0,ct.useMemo)(()=>e&&n?N(e,n):void 0,[e,n]);if(!r)return;let o=s=>String(r.$get(s)??"");return(0,ct.useMemo)(()=>{let s=o("gridTemplateColumns"),u=o("gridTemplateRows"),p=o("gridTemplateAreas"),c=ut(s),b=ut(u),g=it(s),h=it(u),x={...c,count:g},l={...b,count:h},f=Et(p),k={template:p||"",hasAreas:f.hasAreas,cols:f.cols,rows:f.rows};return{columns:x,rows:l,areas:k,activePane:{columns:x.mode,rows:l.mode}}},[r.$get,r.costered,n])}var ge=m(T()),ke=m(M());var ye=m(M()),be=m(T());var Se=m(M()),xe=m(D());var Ae=m(M()),we=m(D()),he=m(T());var Hn=Object.freeze({});var jt=m(M()),Ce=m(Gt()),Be=m(T());function _t(t){let{set:e,unset:n}=J(t),r=(0,Lt.useSelect)(l=>l(Wt.store)?.getBlock?.(t)?.innerBlocks?.length||0,[t]),o=pt(t),s=o?.columns?.template??"",u=o?.rows?.template??"",p=o?.areas?.template??"",c=(0,_.useMemo)(()=>{if(s){let f=F(s),k=C(f?.count??f);if(k>0)return k}let l=C(o?.rows?.count)||(()=>{if(!u)return 0;let f=F(u);return C(f?.count??f)})();return l>0&&r>0?Math.ceil(r/l):0},[s,u,o?.rows?.count,r]),b=(0,_.useMemo)(()=>{let l=C(o?.rows?.count);if(l>0)return l;if(u){let k=F(u),A=C(k?.count??k);if(A>0)return A}let f=C(c);return f>0&&r>0?Math.ceil(r/f):0},[u,o?.rows?.count,c,r]),g=(0,_.useCallback)(l=>{let f=Pt(l,".");f?e("gridTemplateAreas",f):n("gridTemplateAreas")},[e,n]),h=(0,_.useCallback)(()=>{n("gridTemplateAreas")},[n]),x=(0,_.useCallback)((l=".")=>{let f=Ot(p,l),k=C(f[0]?.length)||C(c),A=C(f.length)||C(b);return k===0&&A>0&&r>0?k=Math.ceil(r/A):A===0&&k>0&&r>0&&(A=Math.ceil(r/k)),k===0&&(k=1),A===0&&(A=1),st(f.map(d=>d.map(i=>String(i||l))),k,A,l)},[p,c,b,r]);return{areasTemplate:p,trackColumnCount:c,trackRowCount:b,applyMatrixToStore:g,clearAreasInStore:h,seedFromStore:x}}})();
