(()=>{var jt=Object.create;var at=Object.defineProperty;var Wt=Object.getOwnPropertyDescriptor;var Ut=Object.getOwnPropertyNames;var Ht=Object.getPrototypeOf,Kt=Object.prototype.hasOwnProperty;var U=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Ft=(t,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Ut(e))!Kt.call(t,r)&&r!==n&&at(t,r,{get:()=>e[r],enumerable:!(o=Wt(e,r))||o.enumerable});return t};var m=(t,e,n)=>(n=t!=null?jt(Ht(t)):{},Ft(e||!t||!t.__esModule?at(n,"default",{value:t,enumerable:!0}):n,t));var R=U((ve,ct)=>{ct.exports=wp.element});var v=U((Me,pt)=>{pt.exports=wp.data});var $=U((Be,dt)=>{dt.exports=wp.blockEditor});var Ot=U((zn,$t)=>{$t.exports=wp.preferences});var D=m(R()),Gt=m(v()),Lt=m($());var Jt=m(v()),Qt=m($()),Rt=m(R());var A={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var lt=t=>Array.isArray(t)?t:[],Vt=t=>new Set(lt(t));function M(t){return Object.fromEntries(Object.entries(A.attributes).filter(([e,n])=>n.group===t))}var mt=M("display"),ft=M("dimension"),gt=M("margin"),yt=M("padding"),kt=M("flex"),bt=M("flex-item"),St=M("grid"),V=M("grid-item"),wt=M("position"),xt=M("shared"),Pe={...mt,...ft,...gt,...yt,...kt,...bt,...St,...V,...wt,...xt},At=new Set([...Object.keys(V)]),_e=lt(A?.collections?.editorStyles),ht=Vt(A?.collections?.unitless),z=A?.settings?.gridUnit||"1fr",De=!!A?.settings?.appendImportantToMirroredStyles,$e=A?.settings?.styleTagId||"costered-blocks-style-mirror",X=A?.settings?.reduxStoreKey||"costered/ui",Oe=A?.settings?.breakpoints?.mobile??782,Ne=A?.settings?.breakpoints?.tablet??1024,Ge=A?.settings?.breakpoints?.desktop??1440,Le=A?.collections?.clearSets?.gridAreas,je=A?.collections?.clearSets?.gridColumns,We=A?.collections?.clearSets?.gridRows;var zt=new Set([...Object.keys(mt),...Object.keys(ft),...Object.keys(yt),...Object.keys(gt),...Object.keys(kt),...Object.keys(bt),...Object.keys(St),...Object.keys(V),...Object.keys(wt),...Object.keys(xt)]),Ue=Object.fromEntries(Object.entries(A.attributes).map(([t,e])=>[t,e.css]));var I=t=>{let e=t||{},n=r=>{if(Array.isArray(r))return r;if(r&&typeof r=="object"){let s=[];for(let[u,a]of Object.entries(r))a!==void 0&&s.push({property:u,value:a});return s}return[]},o={desktop:{styles:[]},tablet:{styles:[]},mobile:{styles:[]},...e};return o.desktop={styles:n(e.desktop.styles),...e.desktop||{}},o.tablet={styles:n(e.tablet.styles),...e.tablet||{}},o.mobile={styles:n(e.mobile.styles),...e.mobile||{}},o};var q=t=>t==null||t===""||t==="null"||t==="undefined";function Xt(t){return Array.isArray(t)}function Z(t){if(Xt(t)){let[e,n,o]=t;return o!==void 0?{property:e,value:n,important:o}:{property:e,value:n}}return t}function Tt(t){if(!Array.isArray(t)||t.length===0)return[];let e=[];for(let n=0;n<t.length;n++)e.push(Z(t[n]));return e}function J(t,e,n,o){let r=Array.isArray(t)?t.slice():[],s=-1;for(let a=0;a<r.length;a++)if(Z(r[a]).property===e){s=a;break}let u=o!==void 0?{property:e,value:n,important:o}:{property:e,value:n};return s===-1?r.push(u):r[s]=u,r}function N(t,e){let n=Array.isArray(t)?Array.from(t):[],o=[];for(let r=0;r<n.length;r++)Z(n[r]).property!==e&&o.push(n[r]);return o}var qt="desktop",Zt=Object.freeze({});function Ct(t,e){let n=Tt(t);for(let o=0;o<n.length;o++){let r=n[o];if(r.property===e)return r.value}}function O(t,e){let n=t||Zt,o={...n},r=I(n.costered),s=b=>{switch(b){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},u=(b,g={})=>{let h=g&&Object.prototype.hasOwnProperty.call(g,"cascade")?!!g.cascade:!0,w=g&&Object.prototype.hasOwnProperty.call(g,"raw")?!!g.raw:!h,l=e||qt;if(w){let k=Ct(r?.[l]?.styles,b);return q(k)?void 0:k}let f=s(l);for(let k of f){let x=Ct(r?.[k]?.styles,b);if(!q(x))return x}};return Object.defineProperties(o,{$get:{value:u,enumerable:!1},$getCascade:{value:b=>u(b,{cascade:!0}),enumerable:!1},$getMany:{value:(b,g)=>{let h={};for(let w=0;w<b.length;w++){let l=b[w];h[l]=u(l,g)}return h},enumerable:!1},$bp:{value:e,enumerable:!1}}),o}var B=m(R()),P=m(v());function te(t){return typeof t=="string"&&t.trim().length>0}function ee(){let t=globalThis?.crypto?.randomUUID;if(typeof t=="function")return t.call(globalThis.crypto);let e=Date.now().toString(36),n=Math.random().toString(36).slice(2,10);return`${e}-${n}`}function G(t){t&&(te(t.costeredId)||(t.costeredId=ee()))}var L=m(v());var ne=t=>{let e=String(t??"").toLowerCase();return e==="mobile"||e==="phone"||e==="tablet"?"mobile":"desktop"},re=t=>{try{let e=t("core/edit-post");if(e){if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType()}}catch{}try{let e=t("core/edit-site");if(e){if(typeof e.getDeviceType=="function")return e.getDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType();if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType()}}catch{}},E=t=>{try{let n=(0,L.select)(X);if(n&&typeof n.getBreakpoint=="function"){let o=n.getBreakpoint();if(o)return o}}catch{}let e=re(t);if(e)return ne(e);if(typeof window<"u"&&typeof window.__COSTERED_VIEWPORT_BP=="string")return window.__COSTERED_VIEWPORT_BP||"desktop";try{if(window.COSTERED_DEBUG){let n=(0,L.select)(STORE_KEY),o=n&&typeof n.getBreakpoint=="function"?n.getBreakpoint():null,r=(0,L.select)("core/edit-post"),s=r&&(typeof r.getPreviewDeviceType=="function"&&r.getPreviewDeviceType()||typeof r.__experimentalGetPreviewDeviceType=="function"&&r.__experimentalGetPreviewDeviceType()),u=(0,L.select)("core/edit-site"),a=u&&(typeof u.getDeviceType=="function"&&u.getDeviceType()||typeof u.__experimentalGetPreviewDeviceType=="function"&&u.__experimentalGetPreviewDeviceType()||typeof u.getPreviewDeviceType=="function"&&u.getPreviewDeviceType())}}catch{}return"desktop"};var oe="desktop";function H(t,e,n={trim:!0,emptyUnsets:!0}){let o=(typeof e=="object"?e:n)||{},{trim:r=!0,emptyUnsets:s=!0,breakpoint:u}=o,a=(0,P.useSelect)(E,[]),c=u||a||oe,{updateBlockAttributes:b}=(0,P.useDispatch)("core/block-editor"),g=(0,B.useMemo)(()=>{if(typeof t=="string"){let p=t;return d=>{if(p)if(typeof d=="function"){let i=(0,P.select)("core/block-editor")?.getBlockAttributes(p)||{},y=d(i)||i;b(p,y)}else b(p,d||{})}}if(typeof t=="function"&&typeof e=="string"){let p=t,d=e;return i=>{if(!d)return;if(typeof i=="function"){let S=(0,P.select)("core/block-editor")?.getBlockAttributes(d)||{},C=i(S)||S;try{p(d,C)}catch{p(C)}return}let y=i||{};try{p(d,y)}catch{p(y)}}}if(typeof t=="function"){let p=t;return d=>{if(typeof d=="function"){let i=d({});p(i)}else p(d||{})}}return()=>{}},[t,e,b]),h=(0,B.useCallback)((p,d)=>{if(p==null)return;if(At.has(d)){let y=typeof p=="string"&&r?p.trim():String(p);return s&&y===""?void 0:y}let i=p;if(r&&typeof i=="string"&&(i=i.trim()),!(s&&(i===""||i=="null"||i=="undefined"))){if(ht.has(d)){if(typeof i=="string"&&/^-?\d+(\.\d+)?$/.test(i)){let y=Number(i);return Number.isFinite(y)?y:void 0}return typeof i=="number"&&Number.isFinite(i)?i:void 0}if(typeof i=="number")return Number.isFinite(i)?i:void 0;if(typeof i=="string")return i==="null"||i==="undefined"?void 0:i;try{return String(i)}catch{return}}},[r,s]),w=(0,B.useCallback)((p,d)=>{g(i=>{let y={...i||{}};G(y),y.costered=I(y.costered);let S=y.costered[c].styles,C=h(d,p),Y=C===void 0?N(S,p):J(S,p,C);return y.costered[c]={...y.costered[c],styles:Y},y})},[g,c,h]),l=(0,B.useCallback)(p=>{!p||typeof p!="object"||g(d=>{let i={...d||{}};G(i),i.costered=I(i.costered);let S=i.costered[c].styles;for(let[C,Y]of Object.entries(p)){let ut=h(Y,C);S=ut===void 0?N(S,C):J(S,C,ut)}return i.costered[c]={...i.costered[c],styles:S||[]},i})},[g,c,h]),f=(0,B.useCallback)(p=>{g(d=>{let i={...d||{}};G(i),i.costered=I(i.costered);let y=i.costered[c].styles,S=N(y,p);return(y?.length||0)===S.length?d:(i.costered[c]={...i.costered[c],styles:S},i)})},[g,c]),k=(0,B.useCallback)(p=>{!Array.isArray(p)||p.length===0||g(d=>{let i={...d||{}};G(i),i.costered=I(i.costered);let S=i.costered[c]?.styles;for(let C=0;C<p.length;C++)S=N(S,p[C]);return i.costered[c]={...i.costered[c],styles:S||[]},i})},[g,c]),x=(0,B.useCallback)(p=>({set:(d,i)=>w(`${p}${d}`,i),setMany:d=>{let i={};for(let[y,S]of Object.entries(d))i[`${p}${y}`]=S;l(i)},unset:d=>f(`${p}${d}`),unsetMany:d=>k(d.map(i=>`${p}${i}`))}),[w,l,f,k]);return{set:w,setMany:l,unset:f,unsetMany:k,withPrefix:x,activeBreakpoint:c}}var Pt=m(R());function tt(t){return String(t??"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function se(t){let e=String(t??"").trim();if(!e)return[];let n=0,o=0,r="",s=[];for(let u=0;u<e.length;u++){let a=e[u];if(a==="("){n++,r+=a;continue}if(a===")"){n=Math.max(0,n-1),r+=a;continue}if(a==="["){o++,r+=a;continue}if(a==="]"){o=Math.max(0,o-1),r+=a;continue}if(a===" "&&n===0&&o===0){r&&(s.push(r),r="");continue}r+=a}return r&&s.push(r),s}function ie(t){let e=String(t??"").trim();if(!e)return null;let n=e.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);if(!n||n[1]===void 0||n[2]===void 0)return null;let o=Number.parseInt(n[1],10),r=n[2].trim();return!Number.isFinite(o)||o<0||r===""?null:{count:o,unit:r}}function ue(t,e=z){return t>0?`repeat(${t}, ${e})`:null}function W(t,e=z){if(!t||typeof t!="string")return{count:0,unit:e};let n=t.trim();if(!n)return{count:0,unit:e};if(/^subgrid\b/i.test(n))return{count:0,unit:e};if(n=n.replace(/\[[^\]]*]/g," ").trim(),!n)return{count:0,unit:e};let o=n.match(/^\s*repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)\s*$/i);if(o){let s=o[2];return{count:0,unit:Q(s,e)}}let r=ae(n,e);return{count:r.count,unit:r.unit||e}}function ae(t,e){let n=vt(t);if(n){let a=n.inner.trim(),b=j(a).length,g=Q(a,e);return{count:n.times*b,unit:g||e}}let o=j(t),r=0,s="";for(let a of o){if(/^\s*repeat\(/i.test(a)){let c=Mt(a);if(c){r+=c.count,!s&&c.unitHint&&(s=c.unitHint);continue}r+=1;continue}r+=1,!s&&K(a)&&(s=_(a)??"")}let u=s||Q(t,e);return{count:r,unit:u||e}}function vt(t){let e=t.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!e)return null;let n=parseInt(e[1],10),o=e[2];return!Number.isFinite(n)||n<0?null:{times:n,inner:o}}function Mt(t){if(t.match(/^\s*repeat\(\s*auto-(fit|fill)\s*,/i))return{count:0,unitHint:""};let n=t.match(/^\s*repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!n)return null;let o=parseInt(n[1],10)||0;if(o<=0)return{count:0,unitHint:""};let r=n[2].trim(),s=j(r),u=o*s.length,a="";if(s.length===1)a=_(s[0])??"";else{let c=s.find(K);a=_(c)??""}return{count:u,unitHint:a}}function j(t){let e=[],n=0,o="";for(let r=0;r<t.length;r++){let s=t[r];if(s==="("){n++,o+=s;continue}if(s===")"){n=Math.max(0,n-1),o+=s;continue}if(n===0&&/\s/.test(s)){o.trim()&&e.push(o.trim()),o="";continue}o+=s}return o.trim()&&e.push(o.trim()),e}function Q(t,e){if(!t)return e;let n=vt(t);if(n){let s=j(n.inner);if(s.length===1)return _(s[0])||e;let u=s.find(K);if(u)return _(u)||e}let o=j(t);if(o.length===1)return _(o[0])||e;let r=o.find(K);if(r)return _(r)||e;for(let s of o){let u=Mt(s);if(u&&u.unitHint)return u.unitHint}return e}function K(t){return t?!!(/^(minmax|fit-content|clamp|var)\(/i.test(t)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(t)||/^(auto|max-content|min-content)$/i.test(t)):!1}function _(t){return t?t.trim():""}function T(t){let e=Number(t);return Number.isFinite(e)&&e>=0?Math.floor(e):0}function Bt(t){let e=String(t??"").trim();if(!e)return{hasAreas:!1,cols:0,rows:0};let n=[],o=/"([^"]*)"|'([^']*)'/g,r;for(;r=o.exec(e);){let u=(r[1]??r[2]??"").trim();u&&n.push(u)}return n.length?{hasAreas:!0,cols:n.reduce((u,a)=>{let c=a.split(/\s+/).filter(Boolean).length;return Math.max(u,c)},0),rows:n.length}:{hasAreas:!1,cols:0,rows:0}}function It(t,e="."){if(!Array.isArray(t)||t.length===0)return"";let n=t.map(r=>(Array.isArray(r)?r:[]).map(s=>{let u=String(s??"").trim();return u===""?e:u}));return n.some(r=>r.some(s=>s!==e))?n.map(r=>`"${r.join(" ")}"`).join(" "):""}function Et(t,e="."){let n=String(t??"").trim();if(!n)return[];let o=[],r=/"([^"]*)"|'([^']*)'/g,s;for(;s=r.exec(n);){let u=(s[1]??s[2]??"").trim(),a=u.length?u.split(/\s+/g).map(c=>c&&c!==e?c:e):[];o.push(a)}return o}function et(t,e,n,o){let r=T(e),s=T(n);if(r===0||s===0)return[];let u=Array.isArray(t)?t:[],a=[];for(let c=0;c<s;c++){let b=Array.isArray(u[c])?u[c]:[],g=Array.from({length:r},(h,w)=>{let l=b[w];return l===void 0?o:l});a.push(g)}return a}function nt(t){let e=String(t??"").trim();if(!e||/^subgrid\b/i.test(e))return 0;let n=e.replace(/\[[^\]]*\]/g," ").trim();return n=n.replace(/repeat\(\s*(\d+)\s*,\s*([^)]+)\)/gi,(o,r,s)=>Array.from({length:parseInt(r,10)||0},()=>"X").join(" ")),n=n.replace(/\s+/g," ").trim(),n?n.split(" ").filter(Boolean).length:0}function ce(t){let e=ie(t);if(!e)return null;let n=tt(ue(e.count,e.unit));return{mode:"simple",template:t?String(t):null,normalised:n,simple:{count:e.count,unit:e.unit}}}function pe(t){let e=se(t);if(!e.length)return null;let n=tt(e.join(" "));return{mode:"tracks",template:t?String(t):null,normalised:n,tracks:e}}var de=[ce,pe];function rt(t){let e=t??"";for(let n of de){let o=n(e);if(o)return o}return{mode:"raw",template:t?String(t):null,normalised:tt(t??"")}}var F=m(R());var Cn=Number.MAX_SAFE_INTEGER;var fe=m(R());var ot=m(v()),Dt=m($()),st=m(R());function it(t){let e=(0,ot.useSelect)(s=>t?s(Dt.store).getBlock(t)?.attributes??void 0:void 0,[t]),n=(0,ot.useSelect)(E,[]),o=(0,st.useMemo)(()=>e&&n?O(e,n):void 0,[e,n]);if(!o)return;let r=s=>String(o.$get(s)??"");return(0,st.useMemo)(()=>{let s=r("gridTemplateColumns"),u=r("gridTemplateRows"),a=r("gridTemplateAreas"),c=rt(s),b=rt(u),g=nt(s),h=nt(u),w={...c,count:g},l={...b,count:h},f=Bt(a),k={template:a||"",hasAreas:f.hasAreas,cols:f.cols,rows:f.rows};return{columns:w,rows:l,areas:k,activePane:{columns:w.mode,rows:l.mode}}},[o.$get,o.costered,n])}var ge=m(R()),ye=m(v());var ke=m(v()),be=m(R());var Se=m(v()),we=m($());var xe=m(v()),Ae=m($()),he=m(R());var Yn=Object.freeze({});var Nt=m(v()),Te=m(Ot()),Ce=m(R());function _t(t){let{set:e,unset:n}=H(t),o=(0,Gt.useSelect)(l=>l(Lt.store)?.getBlock?.(t)?.innerBlocks?.length||0,[t]),r=it(t),s=r?.columns?.template??"",u=r?.rows?.template??"",a=r?.areas?.template??"",c=(0,D.useMemo)(()=>{if(s){let f=W(s),k=T(f?.count??f);if(k>0)return k}let l=T(r?.rows?.count)||(()=>{if(!u)return 0;let f=W(u);return T(f?.count??f)})();return l>0&&o>0?Math.ceil(o/l):0},[s,u,r?.rows?.count,o]),b=(0,D.useMemo)(()=>{let l=T(r?.rows?.count);if(l>0)return l;if(u){let k=W(u),x=T(k?.count??k);if(x>0)return x}let f=T(c);return f>0&&o>0?Math.ceil(o/f):0},[u,r?.rows?.count,c,o]),g=(0,D.useCallback)(l=>{let f=It(l,".");f?e("gridTemplateAreas",f):n("gridTemplateAreas")},[e,n]),h=(0,D.useCallback)(()=>{n("gridTemplateAreas")},[n]),w=(0,D.useCallback)((l=".")=>{let f=Et(a,l),k=T(f[0]?.length)||T(c),x=T(f.length)||T(b);return k===0&&x>0&&o>0?k=Math.ceil(o/x):x===0&&k>0&&o>0&&(x=Math.ceil(o/k)),k===0&&(k=1),x===0&&(x=1),et(f.map(d=>d.map(i=>String(i||l))),k,x,l)},[a,c,b,o]);return{areasTemplate:a,trackColumnCount:c,trackRowCount:b,applyMatrixToStore:g,clearAreasInStore:h,seedFromStore:w}}})();
