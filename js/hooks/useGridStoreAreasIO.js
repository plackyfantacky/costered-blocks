(()=>{var Ct=Object.create;var J=Object.defineProperty;var Mt=Object.getOwnPropertyDescriptor;var Bt=Object.getOwnPropertyNames;var Dt=Object.getPrototypeOf,Pt=Object.prototype.hasOwnProperty;var N=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Gt=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Bt(t))!Pt.call(e,n)&&n!==r&&J(e,n,{get:()=>t[n],enumerable:!(s=Mt(t,n))||s.enumerable});return e};var d=(e,t,r)=>(r=e!=null?Ct(Dt(e)):{},Gt(t||!e||!e.__esModule?J(r,"default",{value:e,enumerable:!0}):r,e));var T=N((ye,Q)=>{Q.exports=wp.element});var k=N((be,tt)=>{tt.exports=wp.data});var R=N((Se,et)=>{et.exports=wp.blockEditor});var Rt=N((Gr,Et)=>{Et.exports=wp.preferences});var $=d(T()),It=d(k()),vt=d(R());var Kt=d(k()),Ft=d(R()),ft=d(T());var x={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"]},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var rt=e=>Array.isArray(e)?e:[],Nt=e=>new Set(rt(e));function w(e){return Object.fromEntries(Object.entries(x.attributes).filter(([t,r])=>r.group===e))}var nt=w("display"),ot=w("dimension"),st=w("margin"),it=w("padding"),ct=w("flex"),ut=w("flex-item"),at=w("grid"),j=w("grid-item"),pt=w("position"),lt=w("shared"),Te={...nt,...ot,...st,...it,...ct,...ut,...at,...j,...pt,...lt},dt=new Set([...Object.keys(j)]),ke=rt(x?.collections?.editorStyles),mt=Nt(x?.collections?.unitless),U=x?.settings?.gridUnit||"1fr",Ae=!!x?.settings?.appendImportantToMirroredStyles,we=x?.settings?.styleTagId||"costered-blocks-style-mirror",K=x?.settings?.reduxStoreKey||"costered/ui",Ee=x?.settings?.breakpoints?.mobile??782,Re=x?.settings?.breakpoints?.tablet??1024,_e=x?.settings?.breakpoints?.desktop??1440;var Lt=new Set([...Object.keys(nt),...Object.keys(ot),...Object.keys(it),...Object.keys(st),...Object.keys(ct),...Object.keys(ut),...Object.keys(at),...Object.keys(j),...Object.keys(pt),...Object.keys(lt)]),Ie=Object.fromEntries(Object.entries(x.attributes).map(([e,t])=>[e,t.css]));var _=e=>{let t={desktop:{styles:{}},tablet:{styles:{}},mobile:{styles:{}},...e||{}};return t.desktop={styles:{},...t.desktop||{}},t.tablet={styles:{},...t.tablet||{}},t.mobile={styles:{},...t.mobile||{}},t.desktop.styles={...t.desktop.styles||{}},t.tablet.styles={...t.tablet.styles||{}},t.mobile.styles={...t.mobile.styles||{}},t},F=(e,t,r)=>{r==null||r===""?Object.prototype.hasOwnProperty.call(e,t)&&delete e[t]:e[t]=r},Y=e=>e==null||e===""||e==="null"||e==="undefined";var jt="desktop",Ut=Object.freeze({});function M(e,t){let r=e||Ut,s={...r},n=_(r.costered),c=m=>{switch(m){case"mobile":return["mobile","tablet","desktop"];case"tablet":return["tablet","desktop"];default:return["desktop"]}},a=(m,f=void 0)=>{let S=!!(f&&f.cascade),A=f&&Object.prototype.hasOwnProperty.call(f,"raw")?!!f.raw:!S,y=t||jt;if(A){let u=n?.[y]?.styles?.[m];return Y(u)?void 0:u}let B=c(y);for(let u of B){let p=n?.[u]?.styles?.[m];if(!Y(p))return p}};return Object.defineProperties(s,{$get:{value:a,enumerable:!1},$getCascade:{value:m=>a(m,{cascade:!0}),enumerable:!1},$getMany:{value:(m,f)=>{let S={};for(let h of m)S[h]=a(h,f);return S},enumerable:!1},$bp:{value:t,enumerable:!1}}),s}var E=d(T()),v=d(k());var Yt=e=>typeof e=="string"&&e.trim().length>0,Ht=()=>{if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")return crypto.randomUUID();let e=Date.now().toString(36),t=Math.random().toString(36).slice(2,10);return`${e}-${t}`},D=e=>{e&&!Yt(e.costeredId)&&(e.costeredId=Ht())};var P=d(k());var Wt=e=>{let t=String(e||"").toLowerCase();return t==="mobile"||t==="phone"||t==="tablet"?"mobile":"desktop"},zt=e=>{try{let t=e("core/edit-post");if(t){if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType()}}catch{}try{let t=e("core/edit-site");if(t){if(typeof t.getDeviceType=="function")return t.getDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType();if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType()}}catch{}},I=e=>{try{let r=(0,P.select)(K);if(r&&typeof r.getBreakpoint=="function"){let s=r.getBreakpoint();if(s)return s}}catch{}let t=zt(e);if(t)return Wt(t);if(typeof window<"u"&&typeof window.__COSTERED_VIEWPORT_BP=="string")return window.__COSTERED_VIEWPORT_BP||"desktop";try{if(window.COSTERED_DEBUG){let r=(0,P.select)(STORE_KEY),s=r&&typeof r.getBreakpoint=="function"?r.getBreakpoint():null,n=(0,P.select)("core/edit-post"),c=n&&(typeof n.getPreviewDeviceType=="function"&&n.getPreviewDeviceType()||typeof n.__experimentalGetPreviewDeviceType=="function"&&n.__experimentalGetPreviewDeviceType()),a=(0,P.select)("core/edit-site"),i=a&&(typeof a.getDeviceType=="function"&&a.getDeviceType()||typeof a.__experimentalGetPreviewDeviceType=="function"&&a.__experimentalGetPreviewDeviceType()||typeof a.getPreviewDeviceType=="function"&&a.getPreviewDeviceType())}}catch{}return"desktop"};var Vt="desktop";function G(e,t,r={trim:!0,emptyUnsets:!0,breakpoint:void 0}){let{trim:s=!0,emptyUnsets:n=!0,breakpoint:c}=r,a=(0,v.useSelect)(I,[]),i=c||a||Vt,{updateBlockAttributes:g}=(0,v.useDispatch)("core/block-editor"),m=(0,E.useMemo)(()=>{if(typeof e=="string"&&!t){let u=e;return p=>{if(u)if(typeof p=="function"){let o=(0,v.select)("core/block-editor").getBlockAttributes(u)||{},l=p(o)||o;g(u,l)}else g(u,p||{})}}if(typeof e=="function"&&typeof t=="string"){let u=e,p=t;return o=>{if(p)if(typeof o=="function"){let l=(0,v.select)("core/block-editor").getBlockAttributes(p)||{},b=o(l)||l;try{u(p,b)}catch{u(b)}}else try{u(p,o||{})}catch{u(o||{})}}}return typeof e=="function"?e:()=>{}},[e,t,g]),f=(0,E.useCallback)((u,p)=>{if(u==null)return;if(dt.has(p)){let l=typeof u=="string"&&s?u.trim():String(u);return n&&l===""?void 0:l}let o=u;if(s&&typeof o=="string"&&(o=o.trim()),!(n&&(o===""||o=="null"||o=="undefined"))){if(mt.has(p)){if(typeof o=="string"&&/^-?\d+(\.\d+)?$/.test(o)){let l=Number(o);return Number.isFinite(l)?l:void 0}return typeof o=="number"&&Number.isFinite(o)?o:void 0}if(typeof o=="number")return Number.isFinite(o)?o:void 0;if(typeof o=="string")return o==="null"||o==="undefined"?void 0:o;try{return String(o)}catch{return}}},[s,n]),S=(0,E.useCallback)((u,p)=>{m(o=>{let l={...o||{}};D(l),l.costered=_(l.costered);let b={...l.costered[i].styles},C=f(p,u);return F(b,u,C),l.costered[i]={...l.costered[i],styles:b},l})},[m,i,f]),h=(0,E.useCallback)(u=>{!u||typeof u!="object"||m(p=>{let o={...p||{}};D(o),o.costered=_(o.costered);let l={...o.costered[i].styles};for(let[b,C]of Object.entries(u)){let $t=f(C,b);F(l,b,$t)}return o.costered[i]={...o.costered[i],styles:l},o})},[m,i,f]),A=(0,E.useCallback)(u=>{m(p=>{let o={...p||{}};D(o),o.costered=_(o.costered);let l={...o.costered[i].styles};return u in l?(delete l[u],o.costered[i]={...o.costered[i],styles:l},o):p})},[m,i]),y=(0,E.useCallback)(u=>{!Array.isArray(u)||u.length===0||m(p=>{let o={...p||{}};D(o),o.costered=_(o.costered);let l={...o.costered[i].styles},b=!1;for(let C of u)C in l&&(delete l[C],b=!0);return b?(o.costered[i]={...o.costered[i],styles:l},o):p})},[m,i]),B=(0,E.useCallback)(u=>({set:(p,o)=>S(`${u}${p}`,o),setMany:p=>{let o={};for(let[l,b]of Object.entries(p))o[`${u}${l}`]=b;h(o)},unset:p=>A(`${u}${p}`),unsetMany:p=>y(p.map(o=>`${u}${o}`))}),[S,h,A,y]);return{set:S,setMany:h,unset:A,unsetMany:y,withPrefix:B,activeBreakpoint:i}}var gt=d(T());var L=d(T());var nr=Number.MAX_SAFE_INTEGER;var Zt=d(T());var X=d(k()),wt=d(R()),q=d(T());function W(e){return String(e||"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function Jt(e){let t=String(e||"").trim();if(!t)return[];let r=0,s=0,n="",c=[];for(let a=0;a<t.length;a++){let i=t[a];if(i==="("){r++,n+=i;continue}if(i===")"){r=Math.max(0,r-1),n+=i;continue}if(i==="["){s++,n+=i;continue}if(i==="]"){s=Math.max(0,s-1),n+=i;continue}if(i===" "&&r===0&&s===0){n&&(c.push(n),n="");continue}n+=i}return n&&c.push(n),c}function Qt(e){if(!e)return null;let t=e.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);return t?{count:parseInt(t[1],10),unit:t[2].trim()}:null}function te(e,t=U){return e>0?`repeat(${e}, ${t})`:null}function z(e,t=U){if(!e||typeof e!="string")return{count:0,unit:t};let r=e.trim();if(!r)return{count:0,unit:t};if(/^subgrid\b/i.test(r))return{count:0,unit:t};if(r=r.replace(/\[[^\]]*]/g," ").trim(),!r)return{count:0,unit:t};let s=r.match(/repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)$/i);if(s){let a=s[2];return{count:0,unit:St(a,t)}}let{count:n,unit:c}=yt(r,t);return{count:n,unit:c||t}}function yt(e,t){let r=bt(e);if(r){let a=r.inner.trim(),{count:i,unit:g}=yt(a,t);return{count:r.times*i,unit:g||St(a,t)}}let s=H(e),n=s.length,c="";if(s.length===1)c=O(s[0])||t;else{let a=s.find(xt);c=O(a)||t}return{count:n,unit:c}}function bt(e){let t=e.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!t)return null;let r=parseInt(t[1],10),s=t[2];return!Number.isFinite(r)||r<0?null:{times:r,inner:s}}function H(e){let t=[],r=0,s="";for(let n=0;n<e.length;n++){let c=e[n];if(c==="("){r++,s+=c;continue}if(c===")"){r=Math.max(0,r-1),s+=c;continue}if(r===0&&/\s/.test(c)){s.trim()&&t.push(s.trim()),s="";continue}s+=c}return s.trim()&&t.push(s.trim()),t}function St(e,t){if(!e)return t;let r=bt(e);if(r){let c=H(r.inner);if(c.length===1)return O(c[0])||t}let s=H(e);if(s.length===1)return O(s[0])||t;let n=s.find(xt);return O(n)||t}function xt(e){return e?!!(/^(minmax|fit-content|clamp|var)\(/i.test(e)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(e)||/^(auto|max-content|min-content)$/i.test(e)):!1}function O(e){return e?e.trim():""}function ee(e){let t=Qt(e);if(!t)return null;let r=W(te(t.count,t.unit));return{mode:"simple",template:e||null,normalised:r,simple:{count:t.count,unit:t.unit}}}function re(e){let t=Jt(e);if(!t.length)return null;let r=W(t.join(" "));return{mode:"tracks",template:e||null,normalised:r,tracks:t}}var ne=[ee,re];function V(e){let t=e||"";for(let r of ne){let s=r(t);if(s)return s}return{mode:"raw",template:e||null,normalised:W(e||"")}}function ht(e){let t=(e||"").trim();if(!t)return{hasAreas:!1,cols:0,rows:0};let r=t.split(/(['"])(?:(?=(\\?))\2.)*?\1/).map(n=>n.replace(/^['"]|['"]$/g,"").trim()).filter(n=>n&&!/^[\s]+$/.test(n));return r.length?{hasAreas:!0,cols:Math.max(0,...r.map(n=>n.split(/\s+/).filter(Boolean).length)),rows:r.length}:{hasAreas:!1,cols:0,rows:0}}function Tt(e,t="."){if(!Array.isArray(e)||e.length===0)return"";let r=e.map(n=>(Array.isArray(n)?n:[]).map(c=>{let a=String(c??"").trim();return a===""?t:a}));return r.some(n=>n.some(c=>c!==t))?r.map(n=>`"${n.join(" ")}"`).join(" "):""}function kt(e,t="."){let r=String(e||"").trim();if(!r)return[];let s=[];return r.replace(/(['"])(.*?)\1/g,(n,c,a)=>(s.push(a),"")),s.map(n=>n.trim().split(/\s+/).map(c=>c&&c!==t?c:t))}function At(e,t,r,s="."){let n=[];for(let c=0;c<r;c++){let a=e[c]||[],i=Array.from({length:t},(g,m)=>a[m]??s);n.push(i)}return n}function Z(e){let t=(0,X.useSelect)(a=>e?a(wt.store).getBlock(e)?.attributes??{}:{},[e]),r=(0,X.useSelect)(I,[]),s=(0,q.useMemo)(()=>M(t,r),[t,r]),n=(a,i={})=>s.$get(a,i);return(0,q.useMemo)(()=>{let a=n("gridTemplateColumns"),i=n("gridTemplateRows"),g=n("gridTemplateAreas"),m=V(a),f=V(i),{template:S,...h}=ht(g,m.count,f.count);return{columns:m,rows:f,areas:{template:S,...h},activePane:{columns:m.mode,rows:f.mode}}},[r,s?.costered,s?.$get])}var oe=d(T()),se=d(k()),mr=d(R());var ie=d(k()),xr=d(R()),ce=d(T());var ue=d(k()),ae=d(R());var pe=d(k()),le=d(R()),de=d(T());var Dr=Object.freeze({});var _t=d(k()),me=d(Rt());function fe(e){let{updateBlockAttributes:t}=(0,It.useDispatch)(vt.store),{set:r,unset:s}=G(t,e),n=Z(e),c=n?.columns?.template??null,a=n?.rows?.template??null,i=n?.areas?.template??null,g=(0,$.useMemo)(()=>c?z(c):0,[c]),m=(0,$.useMemo)(()=>a?z(a):0,[a]),f=(0,$.useCallback)(A=>{let y=Tt(A,".");y?r("gridTemplateAreas",y):s("gridTemplateAreas")},[r,s]),S=(0,$.useCallback)(()=>{s("gridTemplateAreas")},[s]),h=(0,$.useCallback)((A=".")=>{let y=kt(i,A),B=y[0]?.length||g||1,u=y.length||m||1;return At(y,B,u,A)},[i,g,m]);return{areasTemplate:i,trackColumnCount:g,trackRowCount:m,applyMatrixToStore:f,clearAreasInStore:S,seedFromStore:h}}})();
