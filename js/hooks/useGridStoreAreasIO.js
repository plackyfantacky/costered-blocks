(()=>{var ft=Object.create;var D=Object.defineProperty;var gt=Object.getOwnPropertyDescriptor;var xt=Object.getOwnPropertyNames;var St=Object.getPrototypeOf,ht=Object.prototype.hasOwnProperty;var A=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var wt=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of xt(t))!ht.call(e,n)&&n!==r&&D(e,n,{get:()=>t[n],enumerable:!(o=gt(t,n))||o.enumerable});return e};var m=(e,t,r)=>(r=e!=null?ft(St(e)):{},wt(t||!e||!e.__esModule?D(r,"default",{value:e,enumerable:!0}):r,e));var x=A((Dt,F)=>{F.exports=wp.element});var h=A((Ft,z)=>{z.exports=wp.data});var R=A((zt,W)=>{W.exports=wp.blockEditor});var pt=A((Ee,ct)=>{ct.exports=wp.preferences});var w=m(x()),dt=m(h()),lt=m(R());var S=m(x());var _={display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}};function f(e){return Object.fromEntries(Object.entries(_).filter(([t,r])=>r.group===e))}var K=f("display"),Y=f("dimension"),U=f("margin"),H=f("padding"),q=f("flex"),V=f("flex-item"),X=f("grid"),k=f("grid-item"),Z=f("position"),J=f("shared"),Yt={...K,...Y,...U,...H,...q,...V,...X,...k,...Z,...J},Q=new Set([...Object.keys(k)]);var tt=new Set(["order","zIndex","flexGrow","flexShrink"]),G="1fr";var Ut=new Set([...Object.keys(K),...Object.keys(Y),...Object.keys(H),...Object.keys(U),...Object.keys(q),...Object.keys(V),...Object.keys(X),...Object.keys(k),...Object.keys(Z),...Object.keys(J)]),Ht=Object.fromEntries(Object.entries(_).map(([e,t])=>[e,t.css]));function O(e,t,{trim:r=!0,emptyUnsets:o=!0}={}){let n=t!=null,s=(0,S.useCallback)((c,u)=>{if(c==null)return;if(Q.has(u)){let d=typeof c=="string"&&r?c.trim():String(c);return o&&d===""?void 0:d}let i=c;if(r&&typeof i=="string"&&(i=i.trim()),!(o&&(i===""||i=="null"||i=="undefined"))){if(tt.has(u)){if(typeof i=="string"&&/^-?\d+(\.\d+)?$/.test(i)){let d=Number(i);return Number.isFinite(d)?d:void 0}return typeof i=="number"&&Number.isFinite(i)?i:void 0}if(typeof i=="number")return Number.isFinite(i)?i:void 0;if(typeof i=="string")return i==="null"||i==="undefined"?void 0:i;try{return String(i)}catch{return}}},[r,o]),a=(0,S.useCallback)(c=>{if(n)return e(t,c);{let u={};for(let[i,d]of Object.entries(c)){let b=s(d,i);b!==void 0&&(u[i]=b)}Object.keys(u).length&&e(t,u)}},[n,e,t,s]),p=(0,S.useCallback)((c,u)=>{a({[c]:s(u,c)})},[a,s]),l=(0,S.useCallback)(c=>{let u={};for(let[i,d]of Object.entries(c))u[i]=s(d,i);a(u)},[a,s]),g=(0,S.useCallback)(c=>{a({[c]:void 0})}),y=(0,S.useCallback)(c=>{let u={};for(let i of c)u[i]=void 0;a(u)},[a]),T=(0,S.useCallback)(c=>({set:(u,i)=>p(`${c}${u}`,i),setMany:u=>{let i={};for(let[d,b]of Object.entries(u))i[`${c}${d}`]=b;l(i)},unset:u=>g(`${c}${u}`),unsetMany:u=>y(u.map(i=>`${c}${i}`))}),[p,l,g,y]);return{set:p,setMany:l,unset:g,unsetMany:y,withPrefix:T}}var C=m(x());function j(e){return String(e||"").replace(/\s+/g," ").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/\s*,\s*/g,",").trim().toLowerCase()}function yt(e){let t=String(e||"").trim();if(!t)return[];let r=0,o=0,n="",s=[];for(let a=0;a<t.length;a++){let p=t[a];if(p==="("){r++,n+=p;continue}if(p===")"){r=Math.max(0,r-1),n+=p;continue}if(p==="["){o++,n+=p;continue}if(p==="]"){o=Math.max(0,o-1),n+=p;continue}if(p===" "&&r===0&&o===0){n&&(s.push(n),n="");continue}n+=p}return n&&s.push(n),s}function Mt(e){if(!e)return null;let t=e.match(/^repeat\(\s*(\d+)\s*,\s*([^)]+)\s*\)$/i);return t?{count:parseInt(t[1],10),unit:t[2].trim()}:null}function At(e,t=G){return e>0?`repeat(${e}, ${t})`:null}function I(e,t=G){if(!e||typeof e!="string")return{count:0,unit:t};let r=e.trim();if(!r)return{count:0,unit:t};if(/^subgrid\b/i.test(r))return{count:0,unit:t};if(r=r.replace(/\[[^\]]*]/g," ").trim(),!r)return{count:0,unit:t};let o=r.match(/repeat\(\s*auto-(fill|fit)\s*,\s*(.+)\)$/i);if(o){let a=o[2];return{count:0,unit:nt(a,t)}}let{count:n,unit:s}=et(r,t);return{count:n,unit:s||t}}function et(e,t){let r=rt(e);if(r){let a=r.inner.trim(),{count:p,unit:l}=et(a,t);return{count:r.times*p,unit:l||nt(a,t)}}let o=P(e),n=o.length,s="";if(o.length===1)s=M(o[0])||t;else{let a=o.find(ot);s=M(a)||t}return{count:n,unit:s}}function rt(e){let t=e.match(/^repeat\(\s*([0-9]+)\s*,\s*([\s\S]+)\)\s*$/i);if(!t)return null;let r=parseInt(t[1],10),o=t[2];return!Number.isFinite(r)||r<0?null:{times:r,inner:o}}function P(e){let t=[],r=0,o="";for(let n=0;n<e.length;n++){let s=e[n];if(s==="("){r++,o+=s;continue}if(s===")"){r=Math.max(0,r-1),o+=s;continue}if(r===0&&/\s/.test(s)){o.trim()&&t.push(o.trim()),o="";continue}o+=s}return o.trim()&&t.push(o.trim()),t}function nt(e,t){if(!e)return t;let r=rt(e);if(r){let s=P(r.inner);if(s.length===1)return M(s[0])||t}let o=P(e);if(o.length===1)return M(o[0])||t;let n=o.find(ot);return M(n)||t}function ot(e){return e?!!(/^(minmax|fit-content|clamp|var)\(/i.test(e)||/^[0-9.]+(px|rem|em|ch|vh|vw|vmin|vmax|fr|%)$/i.test(e)||/^(auto|max-content|min-content)$/i.test(e)):!1}function M(e){return e?e.trim():""}function Rt(e){let t=Mt(e);if(!t)return null;let r=j(At(t.count,t.unit));return{mode:"simple",template:e||null,normalised:r,simple:{count:t.count,unit:t.unit}}}function It(e){let t=yt(e);if(!t.length)return null;let r=j(t.join(" "));return{mode:"tracks",template:e||null,normalised:r,tracks:t}}var Et=[Rt,It];function L(e){let t=e||"";for(let r of Et){let o=r(t);if(o)return o}return{mode:"raw",template:e||null,normalised:j(e||"")}}function st(e){let t=(e||"").trim();if(!t)return{hasAreas:!1,cols:0,rows:0};let r=t.split(/(['"])(?:(?=(\\?))\2.)*?\1/).map(n=>n.replace(/^['"]|['"]$/g,"").trim()).filter(n=>n&&!/^[\s]+$/.test(n));return r.length?{hasAreas:!0,cols:Math.max(0,...r.map(n=>n.split(/\s+/).filter(Boolean).length)),rows:r.length}:{hasAreas:!1,cols:0,rows:0}}function v(e,t="."){if(!Array.isArray(e)||e.length===0)return"";let r=e.map(n=>(Array.isArray(n)?n:[]).map(s=>{let a=String(s??"").trim();return a===""?t:a}));return r.some(n=>n.some(s=>s!==t))?r.map(n=>`"${n.join(" ")}"`).join(" "):""}function B(e,t="."){let r=String(e||"").trim();if(!r)return[];let o=[];return r.replace(/(['"])(.*?)\1/g,(n,s,a)=>(o.push(a),"")),o.map(n=>n.trim().split(/\s+/).map(s=>s&&s!==t?s:t))}function E(e,t,r,o="."){let n=[];for(let s=0;s<r;s++){let a=e[s]||[],p=Array.from({length:t},(l,g)=>a[g]??o);n.push(p)}return n}var Tt=m(x());var Ct=m(x());var $=m(x());var he=Number.MAX_SAFE_INTEGER;var kt=m(x());var it=m(h()),at=m(R()),ut=m(x());function N(e){let t=(0,it.useSelect)(o=>e?o(at.store).getBlock(e)?.attributes??{}:{},[e]);return(0,ut.useMemo)(()=>{let o=L(t.gridTemplateColumns),n=L(t.gridTemplateRows),s=t.gridTemplateAreas??null,a=st(s);return{columns:o,rows:n,areas:{template:s,...a},activePane:{columns:o.mode,rows:n.mode}}},[t.gridTemplateColumns,t.gridTemplateRows,t.gridTemplateAreas])}var Gt=m(h());var Ot=m(h()),Pt=m(R());var jt=m(h());var mt=m(h()),Lt=m(pt());function vt(e){let{updateBlockAttributes:t}=(0,dt.useDispatch)(lt.store),{set:r,unset:o}=O(t,e),n=N(e),s=n?.columns?.template??null,a=n?.rows?.template??null,p=n?.areas?.template??null,l=(0,w.useMemo)(()=>s?I(s):0,[s]),g=(0,w.useMemo)(()=>a?I(a):0,[a]),y=(0,w.useCallback)(u=>{let i=v(u,".");i?r("gridTemplateAreas",i):o("gridTemplateAreas")},[r,o]),T=(0,w.useCallback)(()=>{o("gridTemplateAreas")},[o]),c=(0,w.useCallback)((u=".")=>{let i=B(p,u),d=i[0]?.length||l||1,b=i.length||g||1;return E(i,d,b,u)},[p,l,g]);return{areasTemplate:p,trackColumnCount:l,trackRowCount:g,applyMatrixToStore:y,clearAreasInStore:T,seedFromStore:c}}})();
