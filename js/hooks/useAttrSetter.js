(()=>{var dt=Object.create;var J=Object.defineProperty;var ct=Object.getOwnPropertyDescriptor;var ut=Object.getOwnPropertyNames;var lt=Object.getPrototypeOf,gt=Object.prototype.hasOwnProperty;var N=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var yt=(t,e,o,p)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of ut(e))!gt.call(t,a)&&a!==o&&J(t,a,{get:()=>e[a],enumerable:!(p=ct(e,a))||p.enumerable});return t};var _=(t,e,o)=>(o=t!=null?dt(lt(t)):{},yt(e||!t||!t.__esModule?J(o,"default",{value:t,enumerable:!0}):o,t));var H=N((Rt,Y)=>{Y.exports=wp.element});var P=N((Tt,$)=>{$.exports=wp.data});var y=_(H()),S=_(P());function ft(t){return Array.isArray(t)}function F(t){if(ft(t)){let[e,o,p]=t;return p!==void 0?{property:e,value:o,important:p}:{property:e,value:o}}return t}function M(t,e,o,p){let a=Array.isArray(t)?t.slice():[],f=-1;for(let k=0;k<a.length;k++)if(F(a[k]).property===e){f=k;break}let T=p!==void 0?{property:e,value:o,important:p}:{property:e,value:o};return f===-1?a.push(T):a[f]=T,a}function x(t,e){let o=Array.isArray(t)?Array.from(t):[],p=[];for(let a=0;a<o.length;a++)F(o[a]).property!==e&&p.push(o[a]);return p}var z=t=>{if(Array.isArray(t))return t.filter(Boolean).map(e=>{let o=String(e.property??""),p=e.value;return o&&p!==void 0?{property:o,value:p}:void 0}).filter(Boolean);if(t&&typeof t=="object"){let e=[];for(let[o,p]of Object.entries(t))p!==void 0&&e.push({property:o,value:p});return e}return[]},b=t=>t&&typeof t=="object"&&"styles"in t?{styles:z(t.styles)}:{styles:z(t)},w=t=>{let e=t||{};return!!e.desktop||!!e.tablet||!!e.mobile?{desktop:b(e.desktop),tablet:b(e.tablet),mobile:b(e.mobile)}:{desktop:b(e),tablet:b(void 0),mobile:b(void 0)}};function mt(t){return typeof t=="string"&&t.trim().length>0}function St(){let t=globalThis?.crypto?.randomUUID;if(typeof t=="function")return t.call(globalThis.crypto);let e=Date.now().toString(36),o=Math.random().toString(36).slice(2,10);return`${e}-${o}`}function A(t){t&&(mt(t.costeredId)||(t.costeredId=St()))}var u={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var R=t=>Array.isArray(t)?t:[],bt=t=>new Set(R(t));function g(t){let e=u.attributes||{};return Object.fromEntries(Object.entries(e).filter(([,o])=>o.group===t))}var q=g("display"),X=g("dimension"),Q=g("margin"),Z=g("padding"),V=g("flex"),tt=g("flex-item"),et=g("grid"),O=g("grid-item"),nt=g("position"),rt=g("shared"),Dt={...q,...X,...Q,...Z,...V,...tt,...et,...O,...nt,...rt},ot=new Set([...Object.keys(O)]),Et=R(u?.collections?.editorStyles),it=bt(u?.collections?.unitless),_t=u?.settings?.gridUnit||"1fr",Pt=!!u?.settings?.appendImportantToMirroredStyles,Mt=u?.settings?.styleTagId||"costered-blocks-style-mirror",L=u?.settings?.reduxStoreKey||"costered/ui",Ot=u?.settings?.breakpoints?.mobile??782,Lt=u?.settings?.breakpoints?.tablet??1024,Wt=u?.settings?.breakpoints?.desktop??1440,Ut=R(u?.collections?.clearSets?.gridAreas),Gt=R(u?.collections?.clearSets?.gridColumns),jt=R(u?.collections?.clearSets?.gridRows);var Kt=new Set([...Object.keys(q),...Object.keys(X),...Object.keys(Z),...Object.keys(Q),...Object.keys(V),...Object.keys(tt),...Object.keys(et),...Object.keys(O),...Object.keys(nt),...Object.keys(rt)]),Jt=Object.fromEntries(Object.entries(u.attributes).map(([t,e])=>[t,e.css]));var W=_(P());var U="desktop",G="tablet",j="mobile",xt=t=>{let e=String(t??"").toLowerCase();return e==="tablet"||e==="medium"?G:e==="mobile"||e==="phone"?j:U},st=t=>{try{let o=t?.("core/editor")?.getDeviceType?.();if(o)return o}catch{}try{let e=t("core/edit-post");if(e){if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType()}}catch{}try{let e=t("core/edit-site");if(e){if(typeof e.getDeviceType=="function")return e.getDeviceType();if(typeof e.__experimentalGetPreviewDeviceType=="function")return e.__experimentalGetPreviewDeviceType();if(typeof e.getPreviewDeviceType=="function")return e.getPreviewDeviceType()}}catch{}},pt=t=>{try{let p=(typeof t=="function"?t(L):(0,W.select)(L))?.getBreakpoint?.();if(p===U||p===G||p===j)return p}catch{}let e=st(typeof t=="function"?t:W.select);if(e)return xt(e);if(typeof window<"u"){let o=window.__COSTERED_VIEWPORT_BP;if(o===U||o===G||o===j)return o}return"desktop"};var wt="desktop";function Qt(t,e,o={trim:!0,emptyUnsets:!0}){let p=(typeof e=="object"?e:o)||{},{trim:a=!0,emptyUnsets:f=!0,breakpoint:T}=p,k=(0,S.useSelect)(pt,[]),c=T||k||wt,{updateBlockAttributes:I}=(0,S.useDispatch)("core/block-editor"),m=(0,y.useMemo)(()=>{if(typeof t=="string"){let r=t;return i=>{if(r)if(typeof i=="function"){let n=(0,S.select)("core/block-editor")?.getBlockAttributes(r)||{},s=i(n)||n;I(r,s)}else I(r,i||{})}}if(typeof t=="function"&&typeof e=="string"){let r=t,i=e;return n=>{if(!i)return;if(typeof n=="function"){let d=(0,S.select)("core/block-editor")?.getBlockAttributes(i)||{},l=n(d)||d;try{r(i,l)}catch{r(l)}return}let s=n||{};try{r(i,s)}catch{r(s)}}}if(typeof t=="function"){let r=t;return i=>{if(typeof i=="function"){let n=i({});r(n)}else r(i||{})}}return()=>{}},[t,e,I]),h=(0,y.useCallback)((r,i)=>{if(r==null)return;if(ot.has(i)){let s=typeof r=="string"&&a?r.trim():String(r);return f&&s===""?void 0:s}let n=r;if(a&&typeof n=="string"&&(n=n.trim()),!(f&&(n===""||n=="null"||n=="undefined"))){if(it.has(i)){if(typeof n=="string"&&/^-?\d+(\.\d+)?$/.test(n)){let s=Number(n);return Number.isFinite(s)?s:void 0}return typeof n=="number"&&Number.isFinite(n)?n:void 0}if(typeof n=="number")return Number.isFinite(n)?n:void 0;if(typeof n=="string")return n==="null"||n==="undefined"?void 0:n;try{return String(n)}catch{return}}},[a,f]),B=(0,y.useCallback)((r,i)=>{m(n=>{let s={...n||{}};A(s),s.costered=w(s.costered);let d=s.costered[c].styles,l=h(i,r),E=l===void 0?x(d,r):M(d,r,l);return s.costered[c]={...s.costered[c],styles:E},s})},[m,c,h]),C=(0,y.useCallback)(r=>{!r||typeof r!="object"||m(i=>{let n={...i||{}};A(n),n.costered=w(n.costered);let d=n.costered[c].styles;for(let[l,E]of Object.entries(r)){let K=h(E,l);d=K===void 0?x(d,l):M(d,l,K)}return n.costered[c]={...n.costered[c],styles:d||[]},n})},[m,c,h]),v=(0,y.useCallback)(r=>{m(i=>{let n={...i||{}};A(n),n.costered=w(n.costered);let s=n.costered[c].styles,d=x(s,r);return(s?.length||0)===d.length?i:(n.costered[c]={...n.costered[c],styles:d},n)})},[m,c]),D=(0,y.useCallback)(r=>{!Array.isArray(r)||r.length===0||m(i=>{let n={...i||{}};A(n),n.costered=w(n.costered);let d=n.costered[c]?.styles;for(let l=0;l<r.length;l++)d=x(d,r[l]);return n.costered[c]={...n.costered[c],styles:d||[]},n})},[m,c]),at=(0,y.useCallback)(r=>({set:(i,n)=>B(`${r}${i}`,n),setMany:i=>{let n={};for(let[s,d]of Object.entries(i))n[`${r}${s}`]=d;C(n)},unset:i=>v(`${r}${i}`),unsetMany:i=>D(i.map(n=>`${r}${n}`))}),[B,C,v,D]);return{set:B,setMany:C,unset:v,unsetMany:D,withPrefix:at,activeBreakpoint:c}}})();
