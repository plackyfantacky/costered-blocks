(()=>{var rt=Object.create;var W=Object.defineProperty;var it=Object.getOwnPropertyDescriptor;var st=Object.getOwnPropertyNames;var ot=Object.getPrototypeOf,pt=Object.prototype.hasOwnProperty;var L=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var ct=(n,t,i,c)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of st(t))!pt.call(n,s)&&s!==i&&W(n,s,{get:()=>t[s],enumerable:!(c=it(t,s))||c.enumerable});return n};var E=(n,t,i)=>(i=n!=null?rt(ot(n)):{},ct(t||!n||!n.__esModule?W(i,"default",{value:n,enumerable:!0}):i,n));var j=L((kt,U)=>{U.exports=wp.element});var C=L((bt,G)=>{G.exports=wp.data});var S=E(j()),b=E(C());function dt(n){return Array.isArray(n)}function K(n){if(dt(n)){let[t,i,c]=n;return c!==void 0?{property:t,value:i,important:c}:{property:t,value:i}}return n}function P(n,t,i,c){let s=Array.isArray(n)?n.slice():[],g=-1;for(let f=0;f<s.length;f++)if(K(s[f]).property===t){g=f;break}let l=c!==void 0?{property:t,value:i,important:c}:{property:t,value:i};return g===-1?s.push(l):s[g]=l,s}function x(n,t){let i=Array.isArray(n)?Array.from(n):[],c=[];for(let s=0;s<i.length;s++)K(i[s]).property!==t&&c.push(i[s]);return c}var w=n=>{let t=n||{},i=s=>{if(Array.isArray(s))return s;if(s&&typeof s=="object"){let g=[];for(let[l,f]of Object.entries(s))f!==void 0&&g.push({property:l,value:f});return g}return[]},c={desktop:{styles:[]},tablet:{styles:[]},mobile:{styles:[]},...t};return c.desktop={styles:i(t.desktop.styles),...t.desktop||{}},c.tablet={styles:i(t.tablet.styles),...t.tablet||{}},c.mobile={styles:i(t.mobile.styles),...t.mobile||{}},c};function at(n){return typeof n=="string"&&n.trim().length>0}function ut(){let n=globalThis?.crypto?.randomUUID;if(typeof n=="function")return n.call(globalThis.crypto);let t=Date.now().toString(36),i=Math.random().toString(36).slice(2,10);return`${t}-${i}`}function T(n){n&&(at(n.costeredId)||(n.costeredId=ut()))}var u={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var Y=n=>Array.isArray(n)?n:[],yt=n=>new Set(Y(n));function m(n){return Object.fromEntries(Object.entries(u.attributes).filter(([t,i])=>i.group===n))}var N=m("display"),H=m("dimension"),$=m("margin"),F=m("padding"),z=m("flex"),q=m("flex-item"),X=m("grid"),O=m("grid-item"),J=m("position"),Q=m("shared"),At={...N,...H,...$,...F,...z,...q,...X,...O,...J,...Q},V=new Set([...Object.keys(O)]),ht=Y(u?.collections?.editorStyles),Z=yt(u?.collections?.unitless),It=u?.settings?.gridUnit||"1fr",_t=!!u?.settings?.appendImportantToMirroredStyles,Bt=u?.settings?.styleTagId||"costered-blocks-style-mirror",tt=u?.settings?.reduxStoreKey||"costered/ui",Dt=u?.settings?.breakpoints?.mobile??782,Et=u?.settings?.breakpoints?.tablet??1024,Ct=u?.settings?.breakpoints?.desktop??1440,Pt=u?.collections?.clearSets?.gridAreas,Ot=u?.collections?.clearSets?.gridColumns,Mt=u?.collections?.clearSets?.gridRows;var Wt=new Set([...Object.keys(N),...Object.keys(H),...Object.keys(F),...Object.keys($),...Object.keys(z),...Object.keys(q),...Object.keys(X),...Object.keys(O),...Object.keys(J),...Object.keys(Q)]),Lt=Object.fromEntries(Object.entries(u.attributes).map(([n,t])=>[n,t.css]));var R=E(C());var gt=n=>{let t=String(n??"").toLowerCase();return t==="mobile"||t==="phone"||t==="tablet"?"mobile":"desktop"},ft=n=>{try{let t=n("core/edit-post");if(t){if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType()}}catch{}try{let t=n("core/edit-site");if(t){if(typeof t.getDeviceType=="function")return t.getDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType();if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType()}}catch{}},et=n=>{try{let i=(0,R.select)(tt);if(i&&typeof i.getBreakpoint=="function"){let c=i.getBreakpoint();if(c)return c}}catch{}let t=ft(n);if(t)return gt(t);if(typeof window<"u"&&typeof window.__COSTERED_VIEWPORT_BP=="string")return window.__COSTERED_VIEWPORT_BP||"desktop";try{if(window.COSTERED_DEBUG){let i=(0,R.select)(STORE_KEY),c=i&&typeof i.getBreakpoint=="function"?i.getBreakpoint():null,s=(0,R.select)("core/edit-post"),g=s&&(typeof s.getPreviewDeviceType=="function"&&s.getPreviewDeviceType()||typeof s.__experimentalGetPreviewDeviceType=="function"&&s.__experimentalGetPreviewDeviceType()),l=(0,R.select)("core/edit-site"),f=l&&(typeof l.getDeviceType=="function"&&l.getDeviceType()||typeof l.__experimentalGetPreviewDeviceType=="function"&&l.__experimentalGetPreviewDeviceType()||typeof l.getPreviewDeviceType=="function"&&l.getPreviewDeviceType())}}catch{}return"desktop"};var mt="desktop";function Ft(n,t,i={trim:!0,emptyUnsets:!0}){let c=(typeof t=="object"?t:i)||{},{trim:s=!0,emptyUnsets:g=!0,breakpoint:l}=c,f=(0,b.useSelect)(et,[]),a=l||f||mt,{updateBlockAttributes:A}=(0,b.useDispatch)("core/block-editor"),k=(0,S.useMemo)(()=>{if(typeof n=="string"){let r=n;return o=>{if(r)if(typeof o=="function"){let e=(0,b.select)("core/block-editor")?.getBlockAttributes(r)||{},p=o(e)||e;A(r,p)}else A(r,o||{})}}if(typeof n=="function"&&typeof t=="string"){let r=n,o=t;return e=>{if(!o)return;if(typeof e=="function"){let d=(0,b.select)("core/block-editor")?.getBlockAttributes(o)||{},y=e(d)||d;try{r(o,y)}catch{r(y)}return}let p=e||{};try{r(o,p)}catch{r(p)}}}if(typeof n=="function"){let r=n;return o=>{if(typeof o=="function"){let e=o({});r(e)}else r(o||{})}}return()=>{}},[n,t,A]),v=(0,S.useCallback)((r,o)=>{if(r==null)return;if(V.has(o)){let p=typeof r=="string"&&s?r.trim():String(r);return g&&p===""?void 0:p}let e=r;if(s&&typeof e=="string"&&(e=e.trim()),!(g&&(e===""||e=="null"||e=="undefined"))){if(Z.has(o)){if(typeof e=="string"&&/^-?\d+(\.\d+)?$/.test(e)){let p=Number(e);return Number.isFinite(p)?p:void 0}return typeof e=="number"&&Number.isFinite(e)?e:void 0}if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(typeof e=="string")return e==="null"||e==="undefined"?void 0:e;try{return String(e)}catch{return}}},[s,g]),h=(0,S.useCallback)((r,o)=>{k(e=>{let p={...e||{}};T(p),p.costered=w(p.costered);let d=p.costered[a].styles,y=v(o,r),D=y===void 0?x(d,r):P(d,r,y);return p.costered[a]={...p.costered[a],styles:D},p})},[k,a,v]),I=(0,S.useCallback)(r=>{!r||typeof r!="object"||k(o=>{let e={...o||{}};T(e),e.costered=w(e.costered);let d=e.costered[a].styles;for(let[y,D]of Object.entries(r)){let M=v(D,y);d=M===void 0?x(d,y):P(d,y,M)}return e.costered[a]={...e.costered[a],styles:d||[]},e})},[k,a,v]),_=(0,S.useCallback)(r=>{k(o=>{let e={...o||{}};T(e),e.costered=w(e.costered);let p=e.costered[a].styles,d=x(p,r);return(p?.length||0)===d.length?o:(e.costered[a]={...e.costered[a],styles:d},e)})},[k,a]),B=(0,S.useCallback)(r=>{!Array.isArray(r)||r.length===0||k(o=>{let e={...o||{}};T(e),e.costered=w(e.costered);let d=e.costered[a]?.styles;for(let y=0;y<r.length;y++)d=x(d,r[y]);return e.costered[a]={...e.costered[a],styles:d||[]},e})},[k,a]),nt=(0,S.useCallback)(r=>({set:(o,e)=>h(`${r}${o}`,e),setMany:o=>{let e={};for(let[p,d]of Object.entries(o))e[`${r}${p}`]=d;I(e)},unset:o=>_(`${r}${o}`),unsetMany:o=>B(o.map(e=>`${r}${e}`))}),[h,I,_,B]);return{set:h,setMany:I,unset:_,unsetMany:B,withPrefix:nt,activeBreakpoint:a}}})();
