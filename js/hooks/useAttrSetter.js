(()=>{var it=Object.create;var L=Object.defineProperty;var pt=Object.getOwnPropertyDescriptor;var ct=Object.getOwnPropertyNames;var ut=Object.getPrototypeOf,at=Object.prototype.hasOwnProperty;var K=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var dt=(e,t,o,p)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of ct(t))!at.call(e,a)&&a!==o&&L(e,a,{get:()=>t[a],enumerable:!(p=pt(t,a))||p.enumerable});return e};var O=(e,t,o)=>(o=e!=null?it(ut(e)):{},dt(t||!e||!e.__esModule?L(o,"default",{value:e,enumerable:!0}):o,e));var N=K((St,J)=>{J.exports=wp.element});var v=K((xt,Y)=>{Y.exports=wp.data});var m=O(N()),b=O(v());function x(e,t){let p=e?.costered?.[t]?.styles;return p&&typeof p=="object"&&!Array.isArray(p)?{...p}:{}}function B(e,t,o){if(!o||typeof o!="object"||Array.isArray(o))throw new Error("withBreakpointStyles expects a plain object of camelCase CSS properties \u2192 string values.");let p=e.costered??{},g={...p[t]??{styles:{}},styles:{...o}},C={...p,[t]:g};return{...e,costered:C}}var A=e=>{let t=a=>{let g=a?.styles;return g&&typeof g=="object"&&!Array.isArray(g)?{...a,styles:{...g}}:{...a||{},styles:{}}},o=e&&typeof e=="object"?e:{},p=!!o.desktop||!!o.tablet||!!o.mobile;return{desktop:t(o.desktop),tablet:t(o.tablet),mobile:t(o.mobile)}};function lt(e){return typeof e=="string"&&e.trim().length>0}function gt(){let e=globalThis?.crypto?.randomUUID;if(typeof e=="function")return e.call(globalThis.crypto);let t=Date.now().toString(36),o=Math.random().toString(36).slice(2,10);return`${t}-${o}`}function T(e){e&&(lt(e.costeredId)||(e.costeredId=gt()))}var u={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var w=e=>Array.isArray(e)?e:[],ft=e=>new Set(w(e));function f(e){let t=u.attributes||{};return Object.fromEntries(Object.entries(t).filter(([,o])=>o.group===e))}var H=f("display"),$=f("dimension"),F=f("margin"),z=f("padding"),q=f("flex"),X=f("flex-item"),V=f("grid"),P=f("grid-item"),Q=f("position"),Z=f("shared"),Ct={...H,...$,...F,...z,...q,...X,...V,...P,...Q,...Z},tt=new Set([...Object.keys(P)]),It=w(u?.collections?.editorStyles),et=ft(u?.collections?.unitless),Rt=u?.settings?.gridUnit||"1fr",Mt=!!u?.settings?.appendImportantToMirroredStyles,Et=u?.settings?.styleTagId||"costered-blocks-style-mirror",D=u?.settings?.reduxStoreKey||"costered/ui",_t=u?.settings?.breakpoints?.mobile??782,Ot=u?.settings?.breakpoints?.tablet??1024,vt=u?.settings?.breakpoints?.desktop??1440,Pt=w(u?.collections?.clearSets?.gridAreas),Dt=w(u?.collections?.clearSets?.gridColumns),jt=w(u?.collections?.clearSets?.gridRows);var Wt=new Set([...Object.keys(H),...Object.keys($),...Object.keys(z),...Object.keys(F),...Object.keys(q),...Object.keys(X),...Object.keys(V),...Object.keys(P),...Object.keys(Q),...Object.keys(Z)]),Ut=Object.fromEntries(Object.entries(u.attributes).map(([e,t])=>[e,t.css]));var j=O(v());var W="desktop",U="tablet",G="mobile",mt=e=>{let t=String(e??"").toLowerCase();return t==="tablet"||t==="medium"?U:t==="mobile"||t==="phone"?G:W},nt=e=>{try{let o=e?.("core/editor")?.getDeviceType?.();if(o)return o}catch{}try{let t=e("core/edit-post");if(t){if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType()}}catch{}try{let t=e("core/edit-site");if(t){if(typeof t.getDeviceType=="function")return t.getDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType();if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType()}}catch{}},rt=e=>{try{let p=(typeof e=="function"?e(D):(0,j.select)(D))?.getBreakpoint?.();if(p===W||p===U||p===G)return p}catch{}let t=nt(typeof e=="function"?e:j.select);if(t)return mt(t);if(typeof window<"u"){let o=window.__COSTERED_VIEWPORT_BP;if(o===W||o===U||o===G)return o}return"desktop"};var kt="desktop";function Ft(e,t,o={trim:!0,emptyUnsets:!0}){let p=(typeof t=="object"?t:o)||{},{trim:a=!0,emptyUnsets:g=!0,breakpoint:C}=p,ot=(0,b.useSelect)(rt,[]),d=C||ot||kt,{updateBlockAttributes:I}=(0,b.useDispatch)("core/block-editor"),k=(0,m.useMemo)(()=>{if(typeof e=="string"||e===null){let r=e??void 0;return s=>{if(r)if(typeof s=="function"){let n=(0,b.select)("core/block-editor")?.getBlockAttributes(r)||{},i=s(n)||n;I(r,i)}else I(r,s||{})}}if(typeof e=="function"&&(typeof t=="string"||t==null)){let r=e,s=t??void 0;return n=>{if(!s)return;if(typeof n=="function"){let c=(0,b.select)("core/block-editor")?.getBlockAttributes(s)||{},l=n(c)||c;try{r(s,l)}catch{r(l)}return}let i=n||{};try{r(s,i)}catch{r(i)}}}if(typeof e=="function"){let r=e;return s=>{if(typeof s=="function"){let n=s({});r(n)}else r(s||{})}}return()=>{}},[e,t,I]),h=(0,m.useCallback)((r,s)=>{if(r==null)return;if(tt.has(s)){let i=typeof r=="string"&&a?r.trim():String(r);return g&&i===""?void 0:i}let n=r;if(a&&typeof n=="string"&&(n=n.trim()),!(g&&(n===""||n=="null"||n=="undefined"))){if(et.has(s)){if(typeof n=="string"&&/^-?\d+(\.\d+)?$/.test(n)){let i=Number(n);return Number.isFinite(i)?i:void 0}return typeof n=="number"&&Number.isFinite(n)?n:void 0}if(typeof n=="number")return Number.isFinite(n)?n:void 0;if(typeof n=="string")return n==="null"||n==="undefined"?void 0:n;try{return String(n)}catch{return}}},[a,g]),R=(0,m.useCallback)((r,s)=>{k(n=>{let i={...n||{}};T(i),i.costered=A(i.costered);let c=h(s,r),y={...x(i,d)};if(c===void 0)if(Object.prototype.hasOwnProperty.call(y,r))delete y[r];else return n;else y[r]=String(c);return B(i,d,y)})},[k,d,h]),M=(0,m.useCallback)(r=>{!r||typeof r!="object"||k(s=>{let n={...s||{}};T(n),n.costered=A(n.costered);let c={...x(n,d)};for(let[l,y]of Object.entries(r)){let S=h(y,l);S===void 0?Object.prototype.hasOwnProperty.call(c,l)&&delete c[l]:c[l]=String(S)}return B(n,d,c)})},[k,d,h]),E=(0,m.useCallback)(r=>{k(s=>{let n={...s||{}};T(n),n.costered=A(n.costered);let i=x(n,d);if(!Object.prototype.hasOwnProperty.call(i,r))return s;let c={...i};return delete c[r],B(n,d,c)})},[k,d]),_=(0,m.useCallback)(r=>{!Array.isArray(r)||r.length===0||k(s=>{let n={...s||{}};T(n),n.costered=A(n.costered);let i=x(n,d),c=!1,l={...i};for(let y=0;y<r.length;y++){let S=r[y];Object.prototype.hasOwnProperty.call(l,S)&&(delete l[S],c=!0)}return c?B(n,d,l):s})},[k,d]),st=(0,m.useCallback)(r=>({set:(s,n)=>R(`${r}${s}`,n),setMany:s=>{let n={};for(let[i,c]of Object.entries(s))n[`${r}${i}`]=c;M(n)},unset:s=>E(`${r}${s}`),unsetMany:s=>_(s.map(n=>`${r}${n}`))}),[R,M,E,_]);return{set:R,setMany:M,unset:E,unsetMany:_,withPrefix:st,activeBreakpoint:d}}})();
