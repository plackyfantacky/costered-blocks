(()=>{var at=Object.create;var J=Object.defineProperty;var ct=Object.getOwnPropertyDescriptor;var dt=Object.getOwnPropertyNames;var lt=Object.getPrototypeOf,gt=Object.prototype.hasOwnProperty;var Y=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ft=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let c of dt(t))!gt.call(e,c)&&c!==r&&J(e,c,{get:()=>t[c],enumerable:!(i=ct(t,c))||i.enumerable});return e};var P=(e,t,r)=>(r=e!=null?at(lt(e)):{},ft(t||!e||!e.__esModule?J(r,"default",{value:e,enumerable:!0}):r,e));var j=Y((Bt,F)=>{F.exports=wp.element});var G=Y((ht,H)=>{H.exports=wp.data});var v=P(j());var S=P(j()),A=P(G());function T(e,t){let i=e?.costered?.[t]?.styles;return i&&typeof i=="object"&&!Array.isArray(i)?{...i}:{}}function C(e,t,r){if(!r||typeof r!="object"||Array.isArray(r))throw new Error("withBreakpointStyles expects a plain object of camelCase CSS properties \u2192 string values.");let i=e.costered??{},l={...i[t]??{styles:{}},styles:{...r}},x={...i,[t]:l};return{...e,costered:x}}var I=e=>{let t=c=>{let l=c?.styles;return l&&typeof l=="object"&&!Array.isArray(l)?{...c,styles:{...l}}:{...c||{},styles:{}}},r=e&&typeof e=="object"?e:{},i=!!r.desktop||!!r.tablet||!!r.mobile;return{desktop:t(r.desktop),tablet:t(r.tablet),mobile:t(r.mobile)}};function yt(e){return typeof e=="string"&&e.trim().length>0}function mt(){let e=globalThis?.crypto?.randomUUID;if(typeof e=="function")return e.call(globalThis.crypto);let t=Date.now().toString(36),r=Math.random().toString(36).slice(2,10);return`${t}-${r}`}function M(e){e&&(yt(e.costeredId)||(e.costeredId=mt()))}var f={attributes:{display:{css:"display",type:"string",group:"display"},visibility:{css:"visibility",type:"string",group:"display"},overflow:{css:"overflow",type:"string",group:"display"},width:{css:"width",type:"string",group:"dimension"},height:{css:"height",type:"string",group:"dimension"},maxWidth:{css:"max-width",type:"string",group:"dimension"},maxHeight:{css:"max-height",type:"string",group:"dimension"},minWidth:{css:"min-width",type:"string",group:"dimension"},minHeight:{css:"min-height",type:"string",group:"dimension"},marginTop:{css:"margin-top",type:"string",group:"margin"},marginRight:{css:"margin-right",type:"string",group:"margin"},marginBottom:{css:"margin-bottom",type:"string",group:"margin"},marginLeft:{css:"margin-left",type:"string",group:"margin"},paddingTop:{css:"padding-top",type:"string",group:"padding"},paddingRight:{css:"padding-right",type:"string",group:"padding"},paddingBottom:{css:"padding-bottom",type:"string",group:"padding"},paddingLeft:{css:"padding-left",type:"string",group:"padding"},flexDirection:{css:"flex-direction",type:"string",group:"flex"},flexWrap:{css:"flex-wrap",type:"string",group:"flex"},justifyContent:{css:"justify-content",type:"string",group:"flex"},alignItems:{css:"align-items",type:"string",group:"flex"},alignContent:{css:"align-content",type:"string",group:"flex"},flexGrow:{css:"flex-grow",type:"number",group:"flex-item"},flexShrink:{css:"flex-shrink",type:"number",group:"flex-item"},flexBasis:{css:"flex-basis",type:"string",group:"flex-item"},gridTemplateColumns:{css:"grid-template-columns",type:"string",group:"grid"},gridTemplateRows:{css:"grid-template-rows",type:"string",group:"grid"},gridTemplateAreas:{css:"grid-template-areas",type:"string",group:"grid"},gridColumn:{css:"grid-column",type:"string",group:"grid-item",default:""},gridRow:{css:"grid-row",type:"string",group:"grid-item",default:""},gridArea:{css:"grid-area",type:"string",group:"grid-item",default:""},gap:{css:"gap",type:"string",group:"shared"},order:{css:"order",type:"number",group:"shared"},alignSelf:{css:"align-self",type:"string",group:"shared"},justifySelf:{css:"justify-self",type:"string",group:"shared"},position:{css:"position",type:"string",group:"position"},top:{css:"top",type:"string",group:"position"},right:{css:"right",type:"string",group:"position"},bottom:{css:"bottom",type:"string",group:"position"},left:{css:"left",type:"string",group:"position"},inset:{css:"inset",type:"string",group:"position"},zIndex:{css:"z-index",type:"number",group:"position"}},collections:{unitless:["flexGrow","flexShrink","order","zIndex"],editorStyles:["core/paragraph","core/heading","core/list","core/quote","core/pullquote","core/table"],clearSets:{gridAreas:["gridAreas"],gridColumns:["gridColumn","gridColumnStart","gridColumnEnd"],gridRows:["gridRow","gridRowStart","gridRowEnd"]}},settings:{gridUnit:"1fr",appendImportantToMirroredStyles:!0,styleTagId:"costered-blocks-style-mirror",reduxStoreKey:"costered/ui",breakpoints:{mobile:782,tablet:1024,desktop:1440}}};var R=e=>Array.isArray(e)?e:[],bt=e=>new Set(R(e));function k(e){let t=f.attributes||{};return Object.fromEntries(Object.entries(t).filter(([,r])=>r.group===e))}var z=k("display"),q=k("dimension"),V=k("margin"),X=k("padding"),Z=k("flex"),Q=k("flex-item"),tt=k("grid"),W=k("grid-item"),et=k("position"),nt=k("shared"),Et={...z,...q,...V,...X,...Z,...Q,...tt,...W,...et,...nt},rt=new Set([...Object.keys(W)]),vt=R(f?.collections?.editorStyles),ot=bt(f?.collections?.unitless),Pt=f?.settings?.gridUnit||"1fr",Ot=!!f?.settings?.appendImportantToMirroredStyles,_t=f?.settings?.styleTagId||"costered-blocks-style-mirror",U=f?.settings?.reduxStoreKey||"costered/ui",Dt=f?.settings?.breakpoints?.mobile??782,jt=f?.settings?.breakpoints?.tablet??1024,Gt=f?.settings?.breakpoints?.desktop??1440,Wt=R(f?.collections?.clearSets?.gridAreas),Ut=R(f?.collections?.clearSets?.gridColumns),Lt=R(f?.collections?.clearSets?.gridRows);var $t=new Set([...Object.keys(z),...Object.keys(q),...Object.keys(X),...Object.keys(V),...Object.keys(Z),...Object.keys(Q),...Object.keys(tt),...Object.keys(W),...Object.keys(et),...Object.keys(nt)]),Nt=Object.fromEntries(Object.entries(f.attributes).map(([e,t])=>[e,t.css]));var L=P(G());var $="desktop",N="tablet",K="mobile",St=e=>{let t=String(e??"").toLowerCase();return t==="tablet"||t==="medium"?N:t==="mobile"||t==="phone"?K:$},st=e=>{try{let r=e?.("core/editor")?.getDeviceType?.();if(r)return r}catch{}try{let t=e("core/edit-post");if(t){if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType()}}catch{}try{let t=e("core/edit-site");if(t){if(typeof t.getDeviceType=="function")return t.getDeviceType();if(typeof t.__experimentalGetPreviewDeviceType=="function")return t.__experimentalGetPreviewDeviceType();if(typeof t.getPreviewDeviceType=="function")return t.getPreviewDeviceType()}}catch{}},it=e=>{try{let i=(typeof e=="function"?e(U):(0,L.select)(U))?.getBreakpoint?.();if(i===$||i===N||i===K)return i}catch{}let t=st(typeof e=="function"?e:L.select);if(t)return St(t);if(typeof window<"u"){let r=window.__COSTERED_VIEWPORT_BP;if(r===$||r===N||r===K)return r}return"desktop"};var xt="desktop";function pt(e,t,r={trim:!0,emptyUnsets:!0}){let i=(typeof t=="object"?t:r)||{},{trim:c=!0,emptyUnsets:l=!0,breakpoint:x}=i,B=(0,A.useSelect)(it,[]),u=x||B||xt,{updateBlockAttributes:a}=(0,A.useDispatch)("core/block-editor"),g=(0,S.useMemo)(()=>{if(typeof e=="string"||e===null){let o=e??void 0;return s=>{if(o)if(typeof s=="function"){let n=(0,A.select)("core/block-editor")?.getBlockAttributes(o)||{},p=s(n)||n;a(o,p)}else a(o,s||{})}}if(typeof e=="function"&&(typeof t=="string"||t==null)){let o=e,s=t??void 0;return n=>{if(!s)return;if(typeof n=="function"){let d=(0,A.select)("core/block-editor")?.getBlockAttributes(s)||{},y=n(d)||d;try{o(s,y)}catch{o(y)}return}let p=n||{};try{o(s,p)}catch{o(p)}}}if(typeof e=="function"){let o=e;return s=>{if(typeof s=="function"){let n=s({});o(n)}else o(s||{})}}return()=>{}},[e,t,a]),w=(0,S.useCallback)((o,s)=>{if(o==null)return;if(rt.has(s)){let p=typeof o=="string"&&c?o.trim():String(o);return l&&p===""?void 0:p}let n=o;if(c&&typeof n=="string"&&(n=n.trim()),!(l&&(n===""||n=="null"||n=="undefined"))){if(ot.has(s)){if(typeof n=="string"&&/^-?\d+(\.\d+)?$/.test(n)){let p=Number(n);return Number.isFinite(p)?p:void 0}return typeof n=="number"&&Number.isFinite(n)?n:void 0}if(typeof n=="number")return Number.isFinite(n)?n:void 0;if(typeof n=="string")return n==="null"||n==="undefined"?void 0:n;try{return String(n)}catch{return}}},[c,l]),b=(0,S.useCallback)((o,s)=>{g(n=>{let p={...n||{}};M(p),p.costered=I(p.costered);let d=w(s,o),m={...T(p,u)};if(d===void 0)if(Object.prototype.hasOwnProperty.call(m,o))delete m[o];else return n;else m[o]=String(d);return C(p,u,m)})},[g,u,w]),O=(0,S.useCallback)(o=>{!o||typeof o!="object"||g(s=>{let n={...s||{}};M(n),n.costered=I(n.costered);let d={...T(n,u)};for(let[y,m]of Object.entries(o)){let h=w(m,y);h===void 0?Object.prototype.hasOwnProperty.call(d,y)&&delete d[y]:d[y]=String(h)}return C(n,u,d)})},[g,u,w]),_=(0,S.useCallback)(o=>{g(s=>{let n={...s||{}};M(n),n.costered=I(n.costered);let p=T(n,u);if(!Object.prototype.hasOwnProperty.call(p,o))return s;let d={...p};return delete d[o],C(n,u,d)})},[g,u]),D=(0,S.useCallback)(o=>{!Array.isArray(o)||o.length===0||g(s=>{let n={...s||{}};M(n),n.costered=I(n.costered);let p=T(n,u),d=!1,y={...p};for(let m=0;m<o.length;m++){let h=o[m];Object.prototype.hasOwnProperty.call(y,h)&&(delete y[h],d=!0)}return d?C(n,u,y):s})},[g,u]),ut=(0,S.useCallback)(o=>({set:(s,n)=>b(`${o}${s}`,n),setMany:s=>{let n={};for(let[p,d]of Object.entries(s))n[`${o}${p}`]=d;O(n)},unset:s=>_(`${o}${s}`),unsetMany:s=>D(s.map(n=>`${o}${n}`))}),[b,O,_,D]);return{set:b,setMany:O,unset:_,unsetMany:D,withPrefix:ut,activeBreakpoint:u}}function wt(e,t=1){let r=Number(e);return Number.isFinite(r)?Math.trunc(r):t}var E=({start:e,span:t,end:r},{mode:i="span",collapseSpanOne:c=!0}={})=>{let l=String(e??"").trim()||"auto";if(i==="end"){let B=String(r??"").trim()||"auto";return`${l} / ${B}`}let x=wt(t,1);return c&&x===1&&l!=="auto"?l:`${l} / span ${x}`};function ee(e){let{set:t,setMany:r,unset:i}=pt(e),c=(0,v.useCallback)(u=>{let a=typeof u=="string"?u.trim():"";if(!a){i("gridArea");return}t("gridArea",a)},[t,i]),l=(0,v.useCallback)((u,a,g,w)=>{let b={};u!==void 0&&(b.gridRowStart=u||void 0),a!==void 0&&(b.gridRowEnd=a||void 0),g!==void 0&&(b.gridColumnStart=g||void 0),w!==void 0&&(b.gridColumnEnd=w||void 0),r(b)},[r]),x=(0,v.useCallback)((u,a)=>{let g=u==="end"?E({start:a.start,end:a.end},{mode:"end"}):E({start:a.start,span:a.span},{mode:"span"});t("gridColumn",g)},[t]),B=(0,v.useCallback)((u,a)=>{let g=u==="end"?E({start:a.start,end:a.end},{mode:"end"}):E({start:a.start,span:a.span},{mode:"span"});t("gridRow",g)},[t]);return{setArea:c,setTracks:l,writeColumn:x,writeRow:B,set:t,setMany:r,unset:i}}})();
